!function(){"use strict";class e{}e.ryw_state=0,e.ryw_gameid=38,e.ryw_serverUrl="",e.ryw_Login="",e.ryw_SaveGameData="",e.ryw_GetUser="",e.ryw_IpBlock="",e.ryw_reportExport="",e.ryw_reportImport="",e.ryw_getuserip="",e.ryw_signin="";var t,r,i,n,a,s,o,_,y=Laya.EventDispatcher;class w extends y{constructor(){super()}ryw_dispatch(e,t){w.ryw_eventDispatcher.event(e,t)}ryw_regEvemt(e,t,r,i){w.ryw_eventDispatcher.on(e,t,r,null==i?null:[i])}ryw_regOnceEvent(e,t,r,i){w.ryw_eventDispatcher.once(e,t,r,null==i?null:[i])}ryw_removeEvent(e,t,r,i){w.ryw_eventDispatcher.off(e,t,r)}}w.ryw_eventDispatcher=new y,w.ryw_instance=new w,function(e){e[e.ryw_None=0]="ryw_None",e[e.ryw_App_CloseFirstLoadingView=500]="ryw_App_CloseFirstLoadingView",e[e.ryw_AD_OnShareAdFail=501]="ryw_AD_OnShareAdFail",e[e.ryw_Game_OnViewOpen=600]="ryw_Game_OnViewOpen",e[e.ryw_Game_OnViewClose=601]="ryw_Game_OnViewClose",e[e.ryw_Game_OnUserMoneyChange=701]="ryw_Game_OnUserMoneyChange",e[e.ryw_Game_OnUserCrystalChange=702]="ryw_Game_OnUserCrystalChange",e[e.Game_OnUserUnlockedStore=703]="Game_OnUserUnlockedStore",e[e.ryw_Game_OnLevelStart=1e3]="ryw_Game_OnLevelStart",e[e.ryw_Game_OnLevelComplate=1001]="ryw_Game_OnLevelComplate",e[e.ryw_AD_WudianBanner_LoadComplete=2217]="ryw_AD_WudianBanner_LoadComplete",e[e.ryw_AD_WudianBanner_Show=2218]="ryw_AD_WudianBanner_Show",e[e.ryw_AD_WudianBanner_Hide=2219]="ryw_AD_WudianBanner_Hide",e[e.ryw_AD_WudianBanner_PreLoad=2220]="ryw_AD_WudianBanner_PreLoad",e[e.ryw_App_OnUpdateIpBlockState=2221]="ryw_App_OnUpdateIpBlockState",e[e.Game_OnMovePike=1e4]="Game_OnMovePike",e[e.Game_onOver=10001]="Game_onOver",e[e.Game_onOverAction=10002]="Game_onOverAction",e[e.Game_onNextGame=10003]="Game_onNextGame",e[e.Game_onWarriorMove=11e3]="Game_onWarriorMove",e[e.Game_onQueenStand=11001]="Game_onQueenStand",e[e.Game_onAllowTouch=12e3]="Game_onAllowTouch",e[e.Game_onShowShade=13e3]="Game_onShowShade",e[e.Game_onMoveShade=13001]="Game_onMoveShade",e[e.Game_onShowGuide=14e3]="Game_onShowGuide",e[e.Game_onHideGuide=14001]="Game_onHideGuide",e[e.RewardVideoSuccess=20010]="RewardVideoSuccess",e[e.RewardVideoFail=20011]="RewardVideoFail",e[e.InsertVideoEnd=20012]="InsertVideoEnd"}(t||(t={}));class l extends Laya.Script{static get ryw_isLogin(){return""!=l.ryw_code||""!=l.ryw_token}static ryw_getSaveData(){return JSON.stringify(l.ryw__gameData)}static ryw_testInitUser(){var e=Laya.LocalStorage.getItem("Game_Data");console.log("读取存储数据 str----"+e);var t=JSON.parse(e);if(null==t)return l.ryw__gameData.levelNum=1,l.ryw__gameData.moneyNum=0,l.ryw__gameData.crystalNum=0,l.ryw__gameData.levelData=[],l.ryw__gameData.localLeveData=[],void(l.ryw__gameData.winLevelData=[]);if(l.ryw__gameData.levelNum=t.levelNum,l.ryw__gameData.moneyNum=t.moneyNum,l.ryw__gameData.crystalNum=t.crystalNum,l.ryw__gameData.levelData=t.levelData||[],l.ryw__gameData.localLeveData=t.localLeveData||[],l.ryw__gameData.winLevelData=t.winLevelData||[],null!=t.unlockedItem){let e=t.unlockedItem;for(let t=0;t<e.length;++t)l.ryw__gameData.unlockedItem.push(e[t])}null!=t.usedItem&&(l.ryw__gameData.usedItem=t.usedItem)}static ryw_initiUser(e){if(console.log("*****************************  User initUser  **************************************  "),console.log(e),e&&0!=e){if(l.ryw__gameData.levelNum=e.levelNum,l.ryw__gameData.moneyNum=e.moneyNum,l.ryw__gameData.crystalNum=e.crystalNum,l.ryw__gameData.levelData=e.levelData,l.ryw__gameData.localLeveData=e.localLeveData,l.ryw__gameData.winLevelData=e.winLevelData||[],null!=e.unlockedItem){let t=e.unlockedItem;for(let e=0;e<t.length;++e)l.ryw__gameData.unlockedItem.push(t[e])}null!=e.usedItem&&(l.ryw__gameData.usedItem=e.usedItem)}}static setLevelData(e){l.ryw__gameData.levelData=e}static getLevelData(){return l.ryw__gameData.levelData}static passLevel(){l.ryw__gameData.levelData.splice(0,1),console.log("passLevel   ryw_User.ryw__gameData.levelData = ",l.ryw__gameData.levelData)}static setLocalLevelData(e){l.ryw__gameData.localLeveData=e}static getLocalLevelData(){return l.ryw__gameData.localLeveData}static passLoaclLevel(){l.ryw__gameData.localLeveData.splice(0,1),console.log("passLevel   ryw_User.ryw__gameData.localLeveData = ",l.ryw__gameData.localLeveData)}static setwinLevelData(e){l.ryw__gameData.winLevelData=e}static getwinLevelData(){return l.ryw__gameData.winLevelData}static addwinLevel(e){-1==l.ryw__gameData.winLevelData.indexOf(e)&&(console.log("addwinLevel num = ",e),l.ryw__gameData.winLevelData.push(e)),console.log("addwinLevel   ryw_User.ryw__gameData.winLevelData = ",l.ryw__gameData.winLevelData)}static ryw_setLeveNum(e){l.ryw__gameData.levelNum=e}static ryw_getLeveNum(){return l.ryw__gameData.levelNum}static ryw_addMoney(e){e=Math.ceil(e);var r=l.ryw__gameData.moneyNum;l.ryw__gameData.moneyNum+=e,w.ryw_instance.ryw_dispatch(t.ryw_Game_OnUserMoneyChange,{curr:l.ryw__gameData.moneyNum,last:r})}static ryw_subMoney(e){e=Math.ceil(e);var r=l.ryw__gameData.moneyNum;l.ryw__gameData.moneyNum-=e,l.ryw__gameData.moneyNum<0&&(l.ryw__gameData.moneyNum=0),w.ryw_instance.ryw_dispatch(t.ryw_Game_OnUserMoneyChange,{curr:l.ryw__gameData.moneyNum,last:r})}static ryw_getMoney(){return l.ryw__gameData.moneyNum}static ryw_addCrystal(e){e=Math.ceil(e);var r=l.ryw__gameData.crystalNum;l.ryw__gameData.crystalNum+=e,w.ryw_instance.ryw_dispatch(t.ryw_Game_OnUserCrystalChange,{curr:l.ryw__gameData.crystalNum,last:r})}static ryw_subCrystal(e){e=Math.ceil(e);var r=l.ryw__gameData.crystalNum;l.ryw__gameData.crystalNum-=e,l.ryw__gameData.crystalNum<0&&(l.ryw__gameData.crystalNum=0),w.ryw_instance.ryw_dispatch(t.ryw_Game_OnUserCrystalChange,{curr:l.ryw__gameData.crystalNum,last:r})}static ryw_getCrystal(){return l.ryw__gameData.crystalNum}static getItemUnlocked(){let e=new Array;for(let t=0;t<l.ryw__gameData.unlockedItem.length;++t)e.push(l.ryw__gameData.unlockedItem[t]);return e}static itemIsUnlocked(e){for(let t=0;t<l.ryw__gameData.unlockedItem.length;++t)if(l.ryw__gameData.unlockedItem[t]==e)return!0;return!1}static unlockItem(e){l.itemIsUnlocked(e)?console.log("商店重复解锁 id : ",e):(l.ryw__gameData.unlockedItem.push(e),w.ryw_instance.ryw_dispatch(t.Game_OnUserUnlockedStore,{unlocked:e}))}static get curUsedItem(){return l.ryw__gameData.usedItem}static set curUsedItem(e){l.ryw__gameData.usedItem=e}}l.ryw_code="",l.ryw_openId="",l.ryw_token=null,l.ryw_nickName="",l.ryw_gender=0,l.ryw__gameData=new class{constructor(){this.levelNum=1,this.moneyNum=0,this.crystalNum=0,this.unlockedItem=[],this.usedItem=-1,this.levelData=new Array,this.localLeveData=new Array,this.winLevelData=new Array}};class h{static ryw_encrypt(e){return e}static ryw_decrypt(e){return e}}h.ryw_KEY="b#63fFJ6AvkK3YT*",h.ryw_IV="J$f4DU%sNL73M&Go";class c{}c.ryw_AppID="",c.ryw_ResServer="",c.ryw_LocalTestReServer="subRes",c.ryw_Versions="0.0.0",c.onTTMiniGame=!1,c.ryw_GameName="",c.showLoadingLogo=!1;class d{constructor(){this.ryw_meth="post",this.ryw_url="",this.ryw_onSuccess=null,this.ryw_onFail=null,this.ryw_data={}}}class g{static request(t){t.ryw_url.indexOf("https://")>-1||t.ryw_url.indexOf("http://")>-1?t.ryw_url=t.ryw_url:t.ryw_url=e.ryw_serverUrl+t.ryw_url;var r=new Laya.HttpRequest;r.once(Laya.Event.COMPLETE,g,e=>{console.log(e,"http Success"),t.ryw_onSuccess&&t.ryw_onSuccess(e),t.ryw_onSuccess=null,t=null}),r.once(Laya.Event.ERROR,g,e=>{console.log(e,"http fail"),t.ryw_onFail&&t.ryw_onFail(e),t.ryw_onFail=null,t=null});JSON.stringify(t.ryw_data);Laya.Browser.onMiniGame||c.onTTMiniGame?t.ryw_data.code=l.ryw_code:Laya.Browser.onQGMiniGame?t.ryw_data.oppotoken=l.ryw_code:(Laya.Browser.onQQMiniGame,t.ryw_data.code=l.ryw_code);var i="time="+String(Date.now()),n=["Content-Type","application/json","state",e.ryw_state,"gameid",e.ryw_gameid,"sign",h.ryw_encrypt(i)];l.ryw_token&&(n.push("token"),n.push(l.ryw_token)),r.send(t.ryw_url,JSON.stringify(t.ryw_data),t.ryw_meth,"json",n)}static ryw_login(t,r){var i=new d;i.ryw_url=e.ryw_Login,i.ryw_onSuccess=t,i.ryw_onFail=r,g.request(i)}static ryw_saveGameData(t,r,i){var n=new d;n.ryw_url=e.ryw_SaveGameData,n.ryw_data.gameData=t,n.ryw_onSuccess=r,n.ryw_onFail=i,g.request(n)}static ryw_getGameData(t,r){var i=new d;i.ryw_url=e.ryw_GetUser,i.ryw_onSuccess=t,i.ryw_onFail=r,g.request(i)}static ryw_GetIpBlock(t,r){if(-1!=e.ryw_gameid){var i=new d;i.ryw_url=e.ryw_IpBlock,i.ryw_onSuccess=t,i.ryw_onFail=r,g.request(i)}}static ryw_reportExport(t,r,i,n){var a=new d;a.ryw_url=e.ryw_reportExport,a.ryw_data.wbappid=t,a.ryw_data.game_name=r,a.ryw_onSuccess=i,a.ryw_onFail=n,g.request(a)}static ryw_reportImport(t,r,i,n){var a=new d;a.ryw_url=e.ryw_reportImport,a.ryw_data.wbappid=t,a.ryw_data.channel=r,a.ryw_onSuccess=i,a.ryw_onFail=n,g.request(a)}static ryw_Getuserip(t,r){var i=new d;i.ryw_url=e.ryw_getuserip,i.ryw_onSuccess=t,i.ryw_onFail=r,g.request(i)}static SignIn(t,r){var i=new d;i.ryw_url=e.ryw_signin,i.ryw_onSuccess=t,i.ryw_onFail=r,i.ryw_data.type=1,g.request(i)}static GetSignIn(t,r){var i=new d;i.ryw_url=e.ryw_signin,i.ryw_onSuccess=t,i.ryw_onFail=r,i.ryw_data.type=0,g.request(i)}}class p{constructor(){this.ryw_version="",this.ryw_banner=0,this.ryw_wudian=0,this.wudianAvailableTime={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},this.ryw_mailiang=1,this.ryw_mailianglist=new Array,this.ryw_mailiangSceneList=new Array,this.ryw_wxWuDianBanners=new Array,this.ryw_recreateBannerIDList=new Array,this.ryw_bannerRecreateTime=5,this.ryw_kuangdianjiange=0,this.ryw_btnMoveTimer=1,this.ryw_bannerMoveTimer=.5,this.ryw_bannerFreshTimer=200,this.ryw_bannerCreateFailNum=3,this.ryw_bannerTodayBannerMax=10,this.ryw_adSwitch=1,this.ryw_wudianSceneList=new Array,this.ryw_continueBtnDelayTime=2,this.ryw_bannerShowTime=30,this.fakeBtn=0,this.ryw_popAd=0,this.ryw_continueBanner=0,this.ryw_continueBannerShowTime=2,this.ryw_continueBannerHideTime=2,this.ryw_oppocfg=new m,this.ryw_qqcfg=new B,this.ryw_ttcfg=new L,this.ryw_vivocfg=new v,this.ryw_wxcfg=new u}get wudianTimeAvaliable(){return 1==this.wudianAvailableTime[(new Date).getHours()]}}class u{constructor(){this.ryw_kuangdianBanner=0,this.ryw_kuangdianLevelSpcacing=0}}class m{constructor(){this.ryw_yuansheng=100,this.ryw_yuanshengSwitch=1,this.ryw_addToDesktop=0,this.ryw_oppoversions="",this.ryw_btnShowTimer=0,this.ryw_indexAdSwitch=0,this.ryw_endAdSwitch=0,this.ryw_yuansheng2=100,this.ryw_yuanshengSwitch2=1}}class B{constructor(){this.ryw_kuangdianBanner=0,this.ryw_kuangdianBox=0,this.ryw_box=0,this.ryw_weiyi=0,this.ryw_qqversions=""}}class L{constructor(){this.ryw_moreGameSwitch=0,this.ryw_kuangdianBanner=0,this.ryw_luping=0,this.ryw_ttversions=""}}class v{constructor(){this.ryw_yuanshengSwitch=1,this.ryw_yuansheng=100,this.ryw_yuanshengSwitch2=1,this.ryw_yuansheng2=100,this.ryw_chapingSwitch=1,this.ryw_chaping=100,this.ryw_addToDesktop=1,this.ryw_vivoversions="",this.btnShowTimer=1}}class C{constructor(){this.ryw__data=new Array}static ryw_getInstance(){return null==C.ryw__instance&&(C.ryw__instance=C.ryw_load()),C.ryw__instance}static ryw_load(){var e=new C,t=Laya.loader.getRes(c.ryw_ResServer+"/json/appswitch.json");if(console.log("********************************  AppSwitchConfig load   json ",t),t){for(var r=0;r<t.length;++r){var i=t[r],n=new p;n.ryw_version=String(i.version),n.ryw_banner=Number(i.banner),n.ryw_wudian=Number(i.wudian),n.wudianAvailableTime=Object(i.wudianTime),n.ryw_mailiang=Number(i.mailiang);var a=i.mailianglist;if(null!=a)for(var s=0;s<a.length;++s){var o=Number(a[s]);n.ryw_mailianglist.push(o)}var _=i.mailiangScenelist;if(null!=_)for(s=0;s<_.length;++s){var y=Number(_[s]);n.ryw_mailiangSceneList.push(y)}var w=i.wxwudianbanners;if(null!=w)for(s=0;s<w.length;++s){let e=String(w[s]);n.ryw_wxWuDianBanners.push(e)}var l=i.recreateBannerIDList;if(null!=l)for(s=0;s<l.length;++s){let e=String(l[s]);n.ryw_recreateBannerIDList.push(e)}n.ryw_bannerRecreateTime=null!=i.bannerRecreateTime?Number(i.bannerRecreateTime):n.ryw_bannerRecreateTime,n.ryw_kuangdianjiange=null!=i.kuangdianjiange?Number(i.kuangdianjiange):n.ryw_kuangdianjiange,n.ryw_btnMoveTimer=Number(i.btnMoveTimer),n.ryw_bannerMoveTimer=Number(i.bannerMoveTimer),n.ryw_bannerCreateFailNum=Number(i.createFailNum),n.ryw_bannerFreshTimer=Number(i.bannerFreshTimer),n.ryw_bannerTodayBannerMax=Number(i.todayBannerMax),n.ryw_adSwitch=Number(i.adSwitch);var h=i.wudianSceneList;if(null!=h)for(s=0;s<h.length;++s){var d=Number(h[s]);n.ryw_wudianSceneList.push(d)}if(n.ryw_continueBtnDelayTime=Number(i.continueBtnDelayTime),n.ryw_bannerShowTime=Number(i.bannerShowTime),n.fakeBtn=null!=i.fakeBtn?Number(i.fakeBtn):n.fakeBtn,n.ryw_popAd=null!=i.popAd?Number(i.popAd):n.ryw_popAd,n.ryw_continueBanner=null!=i.continueBanner?Number(i.continueBanner):n.ryw_continueBanner,n.ryw_continueBannerShowTime=null!=i.continueBannerShowTime?Number(i.continueBannerShowTime):n.ryw_continueBannerShowTime,n.ryw_continueBannerHideTime=null!=i.continueBannerHideTime?Number(i.continueBannerHideTime):n.ryw_continueBannerHideTime,null!=i.oppocfg){let e=i.oppocfg;n.ryw_oppocfg.ryw_yuansheng=Number(e.yuansheng),n.ryw_oppocfg.ryw_yuanshengSwitch=Number(e.yuanshengSwitch),n.ryw_oppocfg.ryw_addToDesktop=Number(e.addToDesktop),n.ryw_oppocfg.ryw_oppoversions=String(e.oppoversions),n.ryw_oppocfg.ryw_btnShowTimer=Number(e.btnShowTimer),n.ryw_oppocfg.ryw_indexAdSwitch=Number(e.indexAdSwitch),n.ryw_oppocfg.ryw_endAdSwitch=Number(e.endAdSwitch),n.ryw_oppocfg.ryw_yuansheng2=null!=e.yuansheng2?Number(e.yuansheng2):n.ryw_oppocfg.ryw_yuansheng2,n.ryw_oppocfg.ryw_yuanshengSwitch2=null!=e.yuanshengSwitch2?Number(e.yuanshengSwitch2):n.ryw_oppocfg.ryw_yuanshengSwitch2}if(null!=i.qqcfg){let e=i.qqcfg;n.ryw_qqcfg.ryw_kuangdianBanner=Number(e.kuangdianBanner),n.ryw_qqcfg.ryw_kuangdianBox=Number(e.kuangdianBox),n.ryw_qqcfg.ryw_box=Number(e.box),n.ryw_qqcfg.ryw_weiyi=Number(e.weiyi),n.ryw_qqcfg.ryw_qqversions=String(e.qqversions)}if(null!=i.ttcfg){let e=i.ttcfg;n.ryw_ttcfg.ryw_moreGameSwitch=Number(e.moreGameSwitch),n.ryw_ttcfg.ryw_kuangdianBanner=Number(e.kuangdianBanner),n.ryw_ttcfg.ryw_luping=Number(e.luping),n.ryw_ttcfg.ryw_ttversions=String(e.ttversions)}if(null!=i.vivocfg){let e=i.vivocfg;n.ryw_vivocfg.ryw_yuanshengSwitch=Number(e.yuanshengSwitch),n.ryw_vivocfg.ryw_yuansheng=Number(e.yuansheng),n.ryw_vivocfg.ryw_yuanshengSwitch2=Number(e.yuanshengSwitch2),n.ryw_vivocfg.ryw_yuansheng2=Number(e.yuansheng2),n.ryw_vivocfg.ryw_chapingSwitch=Number(e.chapingSwitch),n.ryw_vivocfg.ryw_chaping=Number(e.chaping),n.ryw_vivocfg.ryw_addToDesktop=Number(e.addToDesktop),n.ryw_vivocfg.ryw_vivoversions=String(e.vivoversions),n.ryw_vivocfg.btnShowTimer=Number(e.btnShowTimer)}if(null!=i.wxcfg){let e=i.wxcfg;n.ryw_wxcfg.ryw_kuangdianBanner=Number(e.kuangdianBanner),n.ryw_wxcfg.ryw_kuangdianLevelSpcacing=Number(e.kuangdianLevelSpcacing)}e.ryw__data.push(n)}return e}return e.ryw__data.push(new p),e}ryw_getAppSwitchData(){return this.ryw__data[0]}}class S{static ryw_wxLogin(e,t){Laya.Browser.onMiniGame&&Laya.Browser.window.wx.login({success:t=>{if(t.code){let r=t.code;e(r),console.log("登陆成功,获取到code : "+r)}}})}static ryw_onRewardedVideoAdLoad(){console.log("激励视频 广告加载完成")}static ryw_onRewardedVideoAdError(e){console.log("激励视频 广告加载失败"+e),S.ryw__onRewardedVideoAdFailed&&S.ryw__onRewardedVideoAdFailed()}static ryw_onRewardedVideoAdClose(e){e&&e.isEnded||null==e?(console.log("激励视频 已完整观看"),S.ryw__onRewardedVideoAdClose&&S.ryw__onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),S.ryw__onRewardedVideoAdClose&&S.ryw__onRewardedVideoAdClose(!1))}static ryw_regRewardedVideoAdEvent(e){e.onLoad(S.ryw_onRewardedVideoAdLoad),e.onError(S.ryw_onRewardedVideoAdError),e.onClose(S.ryw_onRewardedVideoAdClose),S.ryw__isRegRewardedVideoAdEvent=!0}static ryw_showRewardedVideoAd(e,t){if(Laya.Browser.onMiniGame){S.ryw__onRewardedVideoAdClose=e,S.ryw__onRewardedVideoAdFailed=t;var r=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:S.ryw_adUnitId});S.ryw__isRegRewardedVideoAdEvent||S.ryw_regRewardedVideoAdEvent(r),r.load().then(()=>{var e=r.show();e.then(()=>console.log("激励视频 广告显示成功")),e.catch(e=>{r.load().then(()=>r.show()).catch(e=>{console.log("激励视频 广告显示失败"),t&&t()})})}).catch(e=>{console.log("激励视频 广告加载失败"),t&&t()})}else e(!0)}static ryw_navigateToMiniProgram(e,t,r,i,n){Laya.Browser.onMiniGame&&(console.log("跳转游戏： "+e),Laya.Browser.window.wx.navigateToMiniProgram({appId:e,path:t,extraData:{foo:"bar"},envVersion:"release",success(e){r&&r(e)},fail(e){i&&i(e)},complete(e){n&&n(e)}}))}static ryw_share(e,t,r){Laya.Browser.onMiniGame&&(S.ryw__onShow=(()=>{Laya.Browser.window.wx.offShow(S.ryw__onShow),S.ryw__onShow=null;Date.now(),this.ryw__lastShareTime;e&&(Date.now()-this.ryw__lastShareTime>2e3?e(!0):e(!1))}),Laya.Browser.window.wx.onShow(S.ryw__onShow),S.ryw__lastShareTime=Date.now(),Laya.Browser.window.wx.shareAppMessage({title:t,imageUrl:r}))}static ryw_showInterstitialAd(e,t){if(Laya.Browser.onMiniGame){var r=Laya.Browser.window.wx.createInterstitialAd({adUnitId:S.ryw_InsAdUnitId});r.onLoad(()=>{console.log("插屏广告 加载完成"),r.show().catch(e=>{console.log("插屏广告 显示失败 ："+e),t&&t()})}),r.onError(e=>{console.log("插屏广告 加载失败"+e),t&&t()}),r.onClose(()=>{console.log("插屏广告 关闭"),e&&e()})}else e()}static ryw_getLaunchOptionsSync(){if(Laya.Browser.onMiniGame){let e=Laya.Browser.window.wx.getLaunchOptionsSync();console.log("场景值 "+e.scene);let t=JSON.stringify(e.query);console.log("Query参数 "+t);let r=e.query.key;return console.log("Query参数：key "+r),console.log("ShareTicket "+e.shareTicket),console.log("ReferrerInfo.appId "+e.referrerInfo.appId),console.log("ReferrerInfo.extraData "+e.referrerInfo.extraData),e}return{scene:1001,query:"",shareTicket:"",appId:"",extraData:""}}static ryw_SetShareMenu(e,t,r,i,n){Laya.Browser.onMiniGame&&(console.log("小游戏设置转发按钮"),Laya.Browser.window.wx.showShareMenu({withShareTicket:!1,success:r,fail:i,complete:n}),Laya.Browser.window.wx.onShareAppMessage(function(){return{title:e,imageUrl:t}}))}static ryw_checkUpdate(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getUpdateManager();e.onCheckForUpdate(function(e){console.log("是否需要更新 : ",e.hasUpdate)}),e.onUpdateReady(function(){Laya.Browser.window.wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启小游戏？",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){console.log("新版本下载失败!!!")})}}static tryShowWXCrazyClick(e,t,i,n){if(!A.ryw_WudianFlag||1!=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wxcfg.ryw_kuangdianBanner)return void(n&&n());let a=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wxcfg.ryw_kuangdianLevelSpcacing;if(0!=a){0==S._crazyClickShowCounter%a?k.ryw_instance.ryw_openView(r.ryw_WXCrazyClick,{Complete:t,titel:e},e=>{i&&i()}):n&&n(),++S._crazyClickShowCounter}else k.ryw_instance.ryw_openView(r.ryw_WXCrazyClick,{Complete:t,titel:e},e=>{i&&i()})}}S.ryw_adUnitId="adunit-a97731c5fea902b9",S.ryw_bannerAdUnitId="adunit-e848f3f13116bdc4",S.ryw_InsAdUnitId="",S.GameRecorder=new class{constructor(){this._recorder=null}get recorder(){return this._recorder}start(){null!=this.recorder&&this.recorder.start()}stop(){null!=this.recorder&&this.recorder.stop()}pause(){null!=this.recorder&&this.recorder.pause()}resume(){null!=this.recorder&&this.recorder.resume()}abort(){null!=this.recorder&&this.recorder.abort()}showShareBtn(){null!=this.recorder&&Laya.Browser.window.wx.createGameRecorderShareButton({style:{left:10,top:150,height:50,color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4,iconMarginRight:16,paddingLeft:1,paddingRight:30},image:"button.jpg",text:"自定义文案",icon:"icon.jpg",share:{query:"a=1&b=2",bgm:"walkin.mp3",timeRange:[[0,1e3],[2e3,3e3]],title:{template:"default.score",data:{score:6500}},button:{template:"default.enter"}}})}},S.ryw__isRegRewardedVideoAdEvent=!1,S.ryw__onRewardedVideoAdFailed=null,S.ryw__onRewardedVideoAdClose=null,S.ryw__onShow=null,S.ryw__lastShareTime=0,S._crazyClickShowCounter=0;class f{static ryw_Login(e,t){Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.login({success:t=>{if(t.code){let r=t.code;e(r),console.log("登陆成功,获取到code : "+r)}}})}static ryw_onRewardedVideoAdLoad(){console.log("激励视频 广告加载完成")}static ryw_onRewardedVideoAdError(e){console.log("激励视频 广告加载失败"+e),f.ryw__onRewardedVideoAdFailed&&f.ryw__onRewardedVideoAdFailed()}static ryw_onRewardedVideoAdClose(e){e&&e.isEnded||null==e?(console.log("激励视频 已完整观看"),f.ryw__onRewardedVideoAdClose&&f.ryw__onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),f.ryw__onRewardedVideoAdClose&&f.ryw__onRewardedVideoAdClose(!1))}static ryw_regRewardedVideoAdEvent(e){e.onLoad(f.ryw_onRewardedVideoAdLoad),e.onError(f.ryw_onRewardedVideoAdError),e.onClose(f.ryw_onRewardedVideoAdClose),f.ryw__isRegRewardedVideoAdEvent=!0}static ryw_showRewardedVideoAd(e,t){if(Laya.Browser.onQQMiniGame){f.ryw__onRewardedVideoAdClose=e,f.ryw__onRewardedVideoAdFailed=t;var r=Laya.Browser.window.qq.createRewardedVideoAd({adUnitId:f.ryw_adUnitId});f.ryw__isRegRewardedVideoAdEvent||f.ryw_regRewardedVideoAdEvent(r),r.load().then(()=>{var e=r.show();e.then(()=>console.log("激励视频 广告显示成功")),e.catch(e=>{r.load().then(()=>r.show()).catch(e=>{console.log("激励视频 广告显示失败"),t&&t()})})}).catch(e=>{console.log("激励视频 广告加载失败"),t&&t()})}else e(!0)}static ryw_navigateToMiniProgram(e,t,r,i,n){Laya.Browser.onQQMiniGame&&(console.log("跳转游戏： "+e),Laya.Browser.window.qq.navigateToMiniProgram({appId:e,path:t,extraData:{foo:"bar"},envVersion:"release",success(e){r&&r(e)},fail(e){i&&i(e)},complete(e){n&&n(e)}}))}static ryw_share(e,t,r){Laya.Browser.onQQMiniGame&&(f.ryw__onShow=(()=>{Laya.Browser.window.qq.offShow(f.ryw__onShow),f.ryw__onShow=null;Date.now(),this.ryw__lastShareTime;e&&(Date.now()-this.ryw__lastShareTime>2e3?e(!0):e(!1))}),Laya.Browser.window.qq.onShow(f.ryw__onShow),f.ryw__lastShareTime=Date.now(),Laya.Browser.window.qq.shareAppMessage({title:t,imageUrl:r}))}static ryw_showInterstitialAd(e,t){if(Laya.Browser.onQQMiniGame){var r=Laya.Browser.window.qq.createInterstitialAd({adUnitId:f.ryw_InsAdUnitId});let i=()=>{console.log("插屏广告 加载完成"),r.show().catch(e=>{console.log("插屏广告 显示失败 ："+e),r.offLoad(i),r.offError(n),r.offClose(a),r.destroy(),t&&t()})};r.onLoad(i);let n=e=>{console.log("插屏广告 加载失败"+e),r.offLoad(i),r.offError(n),r.offClose(a),r.destroy(),t&&t()};r.onError(n);let a=()=>{console.log("插屏广告 关闭"),r.offLoad(i),r.offError(n),r.offClose(a),r.destroy(),e&&e()};r.onClose(a)}else e()}static ryw_LoadAppBoxAd(e,t){Laya.Browser.onQQMiniGame?(f.ryw_mAppboxAd=Laya.Browser.window.qq.createAppBox({adUnitId:f.ryw_AppBoxId}),f.ryw_mAppboxAd.load().then(()=>{console.log("盒子广告 加载完成")}),f.ryw_mAppboxAd.onError(e=>{console.log("盒子广告 加载失败"+e),t&&t()}),f.ryw_onBoxAdClose=(()=>{console.log("盒子广告 关闭"),e&&e()}),f.ryw_mAppboxAd.onClose(f.ryw_onBoxAdClose)):e()}static ryw_showAppBoxAd(e,t){f.ryw_mAppboxAd?(console.log("显示盒子广告"),f.ryw_mAppboxAd.offClose(f.ryw_onBoxAdClose),f.ryw_onBoxAdClose=(()=>{console.log("盒子广告 关闭"),t&&t()}),f.ryw_mAppboxAd.onClose(f.ryw_onBoxAdClose),f.ryw_mAppboxAd.show().catch(t=>{console.log("盒子广告 显示失败 ："+t),e&&e()})):f.ryw_LoadAppBoxAd(t,e)}static ryw_getLaunchOptionsSync(){if(Laya.Browser.onQQMiniGame){let e=Laya.Browser.window.qq.getLaunchOptionsSync();console.log("场景值 "+e.scene);let t=JSON.stringify(e.query);console.log("Query参数 "+t);let r=e.query.key;return console.log("Query参数：key "+r),console.log("ShareTicket "+e.shareTicket),console.log("ReferrerInfo.appId "+e.referrerInfo.appId),console.log("ReferrerInfo.extraData "+e.referrerInfo.extraData),e}return{scene:1001,query:"",shareTicket:"",appId:"",extraData:""}}static ryw_SetShareMenu(e,t,r,i,n){Laya.Browser.onQQMiniGame&&(console.log("小游戏设置转发按钮"),Laya.Browser.window.qq.showShareMenu({withShareTicket:!1,success:r,fail:i,complete:n}),Laya.Browser.window.qq.onShareAppMessage(function(){return{title:e,imageUrl:t}}))}static showQQCreazyClick(e,t,i){let n=f.ryw_getLaunchOptionsSync().scene,a=!0,s=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList;for(let e=0;e<s.length;++e){n==s[e]&&(a=!1)}let o=A.ryw_GetIpBlocked(),_=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudian,y=C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_kuangdianBanner;c.ryw_Versions==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_qqversions&&o&&a&&1==_&&1==y?k.ryw_instance.ryw_openView(r.ryw_QQCrazyClickView,e,()=>{null!=t&&t()}):null!=i&&i()}static showQQCreazyClick2(e,t,i){let n=f.ryw_getLaunchOptionsSync().scene,a=!0,s=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList;for(let e=0;e<s.length;++e){n==s[e]&&(a=!1)}let o=A.ryw_GetIpBlocked(),_=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudian,y=C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_kuangdianBox;c.ryw_Versions==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_qqversions&&o&&a&&1==_&&1==y?k.ryw_instance.ryw_openView(r.ryw_QQCrazyClickView2,e,()=>{null!=t&&t()}):null!=i&&i()}}f.ryw_adUnitId="",f.ryw_bannerAdUnitId="",f.ryw_InsAdUnitId="",f.ryw_AppBoxId="",f.ryw__isRegRewardedVideoAdEvent=!1,f.ryw__onRewardedVideoAdFailed=null,f.ryw__onRewardedVideoAdClose=null,f.ryw__onShow=null,f.ryw__lastShareTime=0,f.ryw_mAppboxAd=null,f.ryw_onBoxAdClose=null;class A{static ryw_IpBlockFlag(){return A.ryw__ipBlockFlag}static ryw_UpdateIpBlockState(){g.ryw_GetIpBlock(function(e){console.log("调用IpBlock接口成功,结果为:",e),A.ryw__ipBlockFlag=e.code,w.ryw_instance.ryw_dispatch(t.ryw_App_OnUpdateIpBlockState,{ipBlockFlag:A.ryw__ipBlockFlag})},null)}static ryw_GetIpBlocked(){return 0==A.ryw__ipBlockFlag}static ryw_GetEntryScene(){return 1006==S.ryw_getLaunchOptionsSync().scene}static ryw_IsSwitchOpen(){let e=1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudian,t=C.ryw_getInstance().ryw_getAppSwitchData().wudianTimeAvaliable;return console.log("误点Flag状态: ","总开关:",e,"打开时间",t),e&&t}static get ryw_WudianFlag(){let e=1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudian,t=null;Laya.Browser.onMiniGame?t=S.ryw_getLaunchOptionsSync().scene:Laya.Browser.onQQMiniGame&&(t=f.ryw_getLaunchOptionsSync().scene);let r=!0;for(var i=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList,n=0;n<i.length;++n){t==i[n]&&(r=!1)}let a=C.ryw_getInstance().ryw_getAppSwitchData().wudianTimeAvaliable,s=0==A.ryw__ipBlockFlag;return console.log("误点Flag状态: ","总开关:",e,"场景进入",r,"IP未被屏蔽",s,"打开时间",a),e&&r&&s&&a}static get ryw_NoTimeWudianFlag(){let e=1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudian,t=null;Laya.Browser.onMiniGame?t=S.ryw_getLaunchOptionsSync().scene:Laya.Browser.onQQMiniGame&&(t=f.ryw_getLaunchOptionsSync().scene);let r=!0;for(var i=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList,n=0;n<i.length;++n){t==i[n]&&(r=!1)}let a=0==A.ryw__ipBlockFlag;return console.log("误点Flag状态: ","总开关:",e,"场景进入",r,"IP未被屏蔽"),e&&r&&a}}A.ryw__ipBlockFlag=-1,function(e){e.ryw_None="",e.ryw_TipsView="View/TipsView.json",e.ryw_ClickGetPrize="View/ClickGetPrize.json",e.ryw_MainView="View/Template/MainViewTemplate.json",e.ryw_MiniGameView="View/Template/MiniGameViewTemplate.json",e.ryw_RewardView="View/Template/RewardViewTemplate.json",e.ryw_InGameView="View/Template/InGameViewTemplate.json",e.ryw_GameWinView="View/Template/GameWinViewTemplate.json",e.ryw_GameFailView="View/Template/GameFailViewTemplate.json",e.ryw_ExportView="View/Template/ExportViewTemplate.json",e.ryw_Export2View="View/Template/Export2ViewTemplate.json",e.ryw_Export3View="View/Template/Export3ViewTemplate.json",e.ryw_WXCrazyClick="View/Template/WXCrazyClick.json",e.ryw_OPPONativeView="View/Template/OPPONativeViewTemplate.json",e.ryw_QQCrazyClickView="View/Template/QQ/QQCrazyClick.json",e.ryw_QQCrazyClickView2="View/Template/QQ/QQCrazyClick2.json",e.ryw_TTStoreView="View/Template/TT/TTStore.json",e.ryw_TTSignInView="View/Template/TT/TTSignIn.json",e.TTRewardView="View/Template/TT/TTReward.json",e.VVNativeView1="View/Template/VV/VVNativeView1Template.json",e.VVNativeView2="View/Template/VV/VVNativeView2Template.json",e.GameView="subRes/GameView.scene"}(r||(r={}));class k{constructor(){this.ryw__views={},this.ryw__loadingList=new Array}ryw_openView(e,t,r){if(this.ryw__views[e]){let i=this.ryw__views[e]._components,n=null;if(i)for(let e=0;e<i.length;e++){const r=i[e];if(r._viewBase){(n=r).ryw_openView(t);break}}r&&r(n)}else{for(let t=0;t<this.ryw__loadingList.length;++t){let r=this.ryw__loadingList[t];if(r==e)return void console.log("界面 : "+String(r)+" 正在加载中，请不要重复加载")}var i=String(e),n=this;this.ryw__loadingList.push(e),Laya.Scene.load(i,Laya.Handler.create(this,function(i){Laya.stage.addChild(i);var a=i;n.ryw__views[e]=a;let s=i._components,o=null;if(s)for(let r=0;r<s.length;r++){const i=s[r];if(i._viewBase){o=i,i._viewDef=e,o.ryw_openView(t);break}}for(let t=0;t<n.ryw__loadingList.length;++t){if(n.ryw__loadingList[t]==e){n.ryw__loadingList.splice(t,1);break}}r&&r(o)}))}}ryw_closeView(e){var t=this.ryw__views[e];if(t){let r=t._components;if(r)for(let e=0;e<r.length;e++){const t=r[e];if(t._viewBase){t.onClose();break}}t.removeSelf(),t.destroy(),this.ryw__views[e]=null}}ryw_ShowView(e){var t=this.ryw__views[e];if(t){let e=t._components;if(e)for(let t=0;t<e.length;t++){const r=e[t];if(r._viewBase){r.ryw_show();break}}}}ryw_hideView(e){var t=this.ryw__views[e];if(t){let e=t._components;if(e)for(let t=0;t<e.length;t++){const r=e[t];if(r._viewBase){r.ryw_hide();break}}}}ryw_getView(e){return this.ryw__views[e]}ryw_showTips(e){this.ryw_openView(r.ryw_TipsView,e)}tryShowPopAd(e){1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_popAd&&A.ryw_WudianFlag?k.ryw_instance.ryw_openView(r.ryw_Export3View,null,t=>{null!=e&&e(t)}):null!=e&&e(null)}}k.ryw_instance=new k;class T{static get ryw_BannerInstance(){return T.ryw__banner}static ryw_Login(e,t){Laya.Browser.onQGMiniGame&&Laya.Browser.window.qg.login({success:t=>{let r=t.data.token;for(var i in e(r),console.log("OPPO 登陆成功,获取到 token : "+r),t)console.log(i,t[i])},fail:e=>{for(var t in console.log("OPPO 登陆失败",e),e)console.log(t,e[t])}})}static ryw_initAdService(e,t,r){Laya.Browser.window.qg.initAdService({appId:c.ryw_AppID,isDebug:!1,success:function(t){console.log("oppo initAdService success"),e&&e(t)},fail:function(e){console.log("oppo initAdService fail: ",e.code,e.msg),t&&t(e)},complete:function(e){console.log("oppo initAdService complete"),r&&r(e)}})}static ryw_showRewardedVideoAd(e,t){if(Laya.Browser.onQGMiniGame){var r=Laya.Browser.window.qg.createRewardedVideoAd({posId:T.ryw_adUnitId});r.onLoad(()=>{console.log("oppo 视频广告加载完成"),r.show()}),r.onVideoStart(()=>{console.log("oppo 视频广告开始播放")}),r.onClose(t=>{t.isEnded?(console.log("oppo 视频广告观看 完成"),e(!0)):(console.log("oppo 视频广告观看 未完成"),e(!1)),r.destroy()}),r.onError(e=>{console.log("oppo 视频广告获取失败",e),r.destroy(),t()}),r.load()}else e(!0)}static ryw_navigateToMiniProgram(e,t,r,i,n,a){if(Laya.Browser.onQGMiniGame){console.log("OPPO 跳转游戏： "+e),g.ryw_reportExport(e,t,e=>{1==e.code?console.log("OPPO 导出上报成功"):console.log("OPPO 导出上报失败",e.msg)},e=>{for(var t in console.log("OPPO 导出上报失败"),e)console.log(t,e[t])});let a=Date.now();for(;Date.now()-a<=500;);Laya.Browser.window.qg.navigateToMiniGame({pkgName:e,path:r,extraData:{from:c.ryw_AppID},envVersion:"release",success(e){i&&i(e)},fail(e){n&&n(e)}})}}static ryw_showInterstitialAd(e,t){if(Laya.Browser.onQGMiniGame){var r=qg.createInsertAd({posId:T.ryw_InsAdUnitId});r.load(),r.onLoad(()=>{console.log("插屏广告加载完成"),r.show()}),r.onShow(()=>{console.log("插屏广告显示成功")}),r.onError(e=>{console.log("插屏广告拉取失败",e),r.destroy(),t&&t()})}else e()}static ryw_showBannaer(){if(T.ryw__banner)T.ryw__banner.show();else{var e=qg.createBannerAd({posId:T.ryw_bannerAdUnitId});e.show(),T.ryw__banner=e}}static ryw_hideBanner(){T.ryw__banner&&T.ryw__banner.hide()}static ryw_destroyBanner(){T.ryw__banner&&T.ryw__banner.destroy(),T.ryw__banner=null}static ryw_getLaunchOptionsSync(){let e={query:"",referrerInfo:{package:"",extraData:{appid:""}}};if(Laya.Browser.onQGMiniGame){var t=Laya.Browser.window.qg.getLaunchOptionsSync();return null!=t&&""!=t?e=t:console.log("没有启动设置！！！"),e}return e}static ryw_share(e,t,r){e(!1)}static ryw_createDesktopIcon(e,t){Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(r){0==r?Laya.Browser.window.qg.installShortcut({success:function(){e&&e()},fail:function(e){for(var r in t&&t(),console.log("创建桌面图标失败！！！！",e),e)console.log(r,e)},complete:function(){}}):(console.log("桌面图标已存在！！！！"),t&&t())},fail:function(e){for(var r in t&&t(),console.log("判断桌面图标是否存在失败！！！",e),e)console.log(r,e)},complete:function(){}}):t&&t()}static ryw_autoPopCreateDestopIcon(e,t){if(!Laya.Browser.onQGMiniGame)return void(null!=t&&t());Math.floor(100*Math.random())<=C.ryw_getInstance().ryw_getAppSwitchData().ryw_oppocfg.ryw_addToDesktop?T.ryw_createDesktopIcon(e,t):null!=t&&t()}static ryw_showNativeAd(e,t){Laya.Browser.onQGMiniGame&&1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_oppocfg.ryw_yuanshengSwitch?k.ryw_instance.ryw_openView(r.ryw_OPPONativeView,null,t=>{null!=e&&e(t)}):null!=t&&t()}}T.ryw_adUnitId="",T.ryw_bannerAdUnitId="",T.ryw_InsAdUnitId="",T.ryw_OpenScreenAdUnitId="",T.ryw_NativeAdId="",T.ryw__banner=null;class I{static ryw_request(e){e.ryw_url.indexOf("https://")>-1||e.ryw_url.indexOf("http://")>-1?e.ryw_url=e.ryw_url:e.ryw_url=I.ryw_mainUrl+e.ryw_url;var t=new Laya.HttpRequest;if(t.once(Laya.Event.COMPLETE,I,t=>{console.log(t,"MaiLiang http Success"),"200"==(t=JSON.parse(t)).Status?(null!=t.Result.OpenId&&""!=t.Result.OpenId?(I.ryw_MaiLiangOpenId=t.Result.OpenId,I.ryw_time=e.ryw_data.posttime,console.log("获得买量系统OpenId "+I.ryw_MaiLiangOpenId)):console.log("上报买量系统停留时间成功"),e.ryw_onSuccess&&e.ryw_onSuccess(t)):e.ryw_onFail&&e.ryw_onFail(t),e.ryw_onSuccess=null,e=null}),t.once(Laya.Event.ERROR,I,t=>{console.log(t,"MaiLiang http fail"),e.ryw_onFail&&e.ryw_onFail(t),e.ryw_onFail=null,e=null}),"get"==e.ryw_meth){var r="";for(const t of Object.keys(e.ryw_data)){r+=t+"="+e.ryw_data[t]+"&"}e.ryw_url=e.ryw_url+"?"+r,t.send(e.ryw_url,null,e.ryw_meth)}else{r="";for(const t of Object.keys(e.ryw_data)){r+=t+"="+e.ryw_data[t]+"&"}t.send(e.ryw_url,r,e.ryw_meth,null,["Content-Type","application/x-www-form-urlencoded"])}}static ryw_GetMaiLiangOpenId(e,t){if(Laya.Browser.onMiniGame){let r=S.ryw_getLaunchOptionsSync();if(null!=r){let i=r.query.key;if(null!=i&&""!=i&&""!=l.ryw_openId){I.ryw_key=i;let r=new d;r.ryw_url=I.ryw_uclick,r.ryw_onSuccess=e,r.ryw_onFail=t,r.ryw_data.appid=c.ryw_AppID,r.ryw_data.openid="";let n=(new Date).getTime()/1e3;r.ryw_data.posttime=n,r.ryw_data.auth=0,r.ryw_data.key=i,r.ryw_data.wxopenid=l.ryw_openId,r.ryw_meth="POST",console.log("发送买量数据接口"),I.ryw_request(r)}}else console.log("上报买量数据失败"),t(null)}else if(Laya.Browser.onQGMiniGame){let e=T.ryw_getLaunchOptionsSync();g.ryw_reportImport(e.referrerInfo.package,e.referrerInfo.extraData.appid,e=>{1==e.code?console.log("OPPO 上报买量数据成功"):console.log("OPPO 上报买量数据失败",e.msg)},e=>{for(var t in console.log("OPPO 上报买量数据失败"),e)console.log(t,e[t])})}else console.log("不在微信模式下调用，默认上报买量数据失败"),t(null)}static ryw_ReportStayTime(e,t){if(Laya.Browser.onMiniGame){if(""!=I.ryw_MaiLiangOpenId){let r=new d;r.ryw_url=I.ryw_stay,r.ryw_onSuccess=e,r.ryw_onFail=t,r.ryw_data.appid=c.ryw_AppID,r.ryw_data.openid=I.ryw_MaiLiangOpenId;let i=(new Date).getTime()/1e3;r.ryw_data.posttime=i;let n=0!=I.ryw_time?i-I.ryw_time:0;r.ryw_data.time=n,r.ryw_meth="POST",console.log("发送停留时间至买量接口"),I.ryw_request(r)}}else console.log("不在微信模式下调用，默认发送停留时间至买量接口失败"),t(null)}}I.ryw_mainUrl="https://swtj.mrkzx.cn",I.ryw_uclick="/v1.1/api/Activity/uclick.html",I.ryw_stay="/v1.1/api/Activity/stay.html",I.ryw_key="",I.ryw_MaiLiangOpenId="",I.ryw_time=0;class b{static ryw_preloadBanner(){for(var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wxWuDianBanners,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerTodayBannerMax,r=new Array,i=0;i<e.length;++i)r.push(e[i]);if(r.length>t){var n=r.length-t;for(i=0;i<n;++i)r.splice(Math.floor(Math.random()*r.length),1)}console.log("开始预创建微信Bannaer",r),console.log("Bannaer 最大数限制 ：",t);var a=0;Laya.timer.loop(2e3,b.ryw__preLoopObj,()=>{if(a>=r.length)Laya.timer.clearAll(b.ryw__preLoopObj);else{var e=r[a],t=b.ryw__bannerCache[e];null==t&&null!=(t=b.ryw_create(e))&&(b.ryw__bannerCache[e]=t,console.log("预创建微信Bannaer",e,"完成")),++a}})}static ryw_getBanner(e){if(null==e||""==e)return null;var t=b.ryw__bannerCache[e];return null==t&&null!=(t=b.ryw_create(e))&&(b.ryw__bannerCache[e]=t),t}static ryw_create(e){if(Laya.Browser.onMiniGame){var t=Laya.Browser.window.wx.getSystemInfoSync(),r=t.screenWidth,i=t.screenHeight,n=Laya.Browser.window.wx.createBannerAd({adUnitId:e,adIntervals:30,style:{left:0,top:(Laya.stage.height-240)/Laya.stage.height*i,width:r}});return n&&(n.onLoad(t=>{console.log("CachedWXBanner 广告 加载完成",e),console.log(t)}),n.onError(t=>{console.log("CachedWXBanner 广告 加载失败",e),console.log(t)}),n.onResize(e=>{console.log(n.style.realWidth,n.style.realHeight)})),n}return null}static ryw_show(){null!=b.ryw__curBanner&&(b.ryw__curBanner.hide(),b.ryw__curBanner=null);var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wxWuDianBanners,t=e[Math.floor(Math.random()*e.length)],r=b.ryw_getBanner(t);if(r){b.ryw__curBanner=r;var i=Laya.Browser.window.wx.getSystemInfoSync(),n=(i.screenWidth,i.screenHeight);b.ryw__curBanner.style.top=(Laya.stage.height-240)/Laya.stage.height*n,b.ryw__curBanner.show(),console.log("CachedWXBanner 广告显示 bannerid ： ",t)}C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerFreshTimer}static ryw_hide(){Laya.timer.clearAll(b),null!=b.ryw__curBanner&&(b.ryw__curBanner.hide(),b.ryw__curBanner=null),console.log("CachedWXBanner 广告隐藏")}static ryw_changeShow(){null!=b.ryw__curBanner&&(b.ryw__curBanner.hide(),b.ryw__curBanner=null),b.ryw_show()}static ryw_clear(){for(var e in Laya.timer.clearAll(b),b.ryw__bannerCache){var t=b.ryw__bannerCache[e];null!=t&&t.destroy(),b.ryw__bannerCache[e]=null}}}b.ryw__bannerCache={},b.ryw__curBanner=null,b.ryw__preLoopObj={},function(e){e.None="",e.ReportAdClickSuccess="广告导出成功",e.ReportAdClickFail="广告导出失败",e.ReportLaunchOptions="用户启动参数",e.EnterLevelGame="进入游戏关卡",e.CompleteLevelGame="胜利游戏关卡",e.FailLevelGame="失败游戏关卡",e.AgainLevelGame="重来游戏关卡",e.TipLevelGame="提示游戏关卡"}(i||(i={}));class D{static ryw_aldSendOpenId(e){Laya.Browser.onMiniGame?(Laya.Browser.window.wx.aldSendOpenid(e),console.log("ALD 上报 openid : ",e)):Laya.Browser.onQQMiniGame&&(Laya.Browser.window.qq.aldSendOpenid(e),console.log("ALD 上报 openid : ",e))}static ryw_aldSendEvent(e,t){var r=e;Laya.Browser.onMiniGame?Laya.Browser.window.wx.aldSendEvent(r,t):Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.aldSendEvent(r,t)}static ryw_aldSendReportAdClickSuccess(e){var t=i.ReportAdClickSuccess+" "+e.title+":"+String(e.appid);D.ryw_aldSendEvent(t,{"导出成功":e.title+":"+String(e.appid)})}static ryw_aldSendReportAdClickFail(e){var t=i.ReportAdClickFail+" "+e.title+":"+String(e.appid);D.ryw_aldSendEvent(t,{"导出失败":e.title+":"+String(e.appid)})}static ryw_aldSendReportLaunchOptions(e,t,r){var n=i.ReportLaunchOptions;D.ryw_aldSendEvent(n,{"场景值：":String(e),"Ip：":String(t),"地区：":JSON.stringify(r)})}}class V{constructor(e){this.ryw__id=null,this.ryw__banner=null,this.ryw__createTime=0,this.ryw__destroyed=!1,this.ryw__error=null,this.ryw__loading=!1,this.ryw__retryCount=0,this.ryw__bannerTotalShowTime=0,this.ryw__lastShowTime=0,this.ryw__id=e}get ryw_Id(){return this.ryw__id}get ryw_CreateTime(){return this.ryw__createTime}get ryw_Destroyed(){return this.ryw__destroyed}get ryw_isReady(){return null!=this.ryw__banner}get ryw_isError(){return null!=this.ryw__error}get ryw_Error(){return this.ryw__error}get ryw_Loading(){return this.ryw__loading}get ryw_RetryCount(){return this.ryw__retryCount}get ryw_BannerTotalShowTime(){return this.ryw__bannerTotalShowTime}ryw_show(){if(this.ryw_isReady){this.ryw__banner.hide();let e=Laya.Browser.window.wx.getSystemInfoSync(),t=e.screenWidth,r=e.screenHeight,i=(new Laya.Point(0,0),t/2-300/2),n=r-130;this.ryw__banner.style.left=i,this.ryw__banner.style.top=n,this.ryw__lastShowTime=Laya.timer.currTimer,this.ryw__banner.show()}}ryw_hide(){this.ryw_isReady&&(this.ryw__banner.hide(),this.ryw__bannerTotalShowTime+=Laya.timer.currTimer-this.ryw__lastShowTime)}ryw_destroy(){this.ryw__destroyed?console.log("BannerAd 已经被销毁"):this.ryw__loading?console.log("BannerAd 正在加载中，无法进行销毁"):(null!=this.ryw__banner&&this.ryw__banner.destroy(),this.ryw__banner=null,this.ryw__destroyed=!0)}ryw_retry(e){if(this.ryw__destroyed)return void console.log("BannerAd 已被销毁，无法重试");if(this.ryw_isReady)return void console.log("BannerAd 已创建成功，无需重试");if(this.ryw__loading)return void console.log("BannerAd 正在创建中");if(this.ryw__retryCount>=V.ryw_MAX_RETRY_COUNT)return void console.log("此 BannerAd 重试次数已达最大");let t=this;this.ryw__create(r=>{null!=e&&e(r),++t.ryw__retryCount})}ryw__create(e){if(!Laya.Browser.onMiniGame)return void(null!=e&&e(!1));let t=null;if(Laya.Browser.onMiniGame?t=Laya.Browser.window.wx.createBannerAd({adUnitId:this.ryw__id,adIntervals:30,style:{left:0,top:0,width:300}}):Laya.Browser.onQQMiniGame&&(t=Laya.Browser.window.qq.createBannerAd({adUnitId:this.ryw__id,adIntervals:30,style:{left:0,top:0,width:300}})),null!=t){let r=this;this.ryw__loading=!0,t.onLoad(i=>{console.log("BannderAd 加载完成",r.ryw__id,i),r.ryw__banner=t,r.ryw__createTime=Laya.timer.currTimer,r.ryw__loading=!1,null!=e&&e(!0)}),t.onError(i=>{console.log("BannderAd 加载失败",r.ryw__id,i),r.ryw__error=i,r.ryw__loading=!1,t.destroy(),null!=e&&e(!1)})}}}V.ryw_MAX_RETRY_COUNT=3;class x{constructor(e){this.ryw__id=null,this.ryw__gridAd=null,this.ryw__createTime=0,this.ryw__destroyed=!1,this.ryw__error=null,this.ryw__loading=!1,this.ryw__id=e}get ryw_CreateTime(){return this.ryw__createTime}get ryw_Destroyed(){return this.ryw__destroyed}get ryw_isReady(){return null!=this.ryw__gridAd}get ryw_isError(){return null!=this.ryw__error}get ryw_Error(){return this.ryw__error}get ryw_Loading(){return this.ryw__loading}ryw_show(){this.ryw_isReady&&this.ryw__gridAd.show()}ryw_hide(){this.ryw_isReady&&this.ryw__gridAd.hide()}ryw_destroy(){this.ryw__destroyed?console.log("GridAD 已经被销毁"):this.ryw__loading?console.log("GridAD 正在加载中，无法进行销毁"):(null!=this.ryw__gridAd&&this.ryw__gridAd.destroy(),this.ryw__gridAd=null,this.ryw__destroyed=!0)}ryw_retry(e){if(this.ryw__destroyed)return void console.log("GridAD 已被销毁，无法重试");if(this.ryw_isReady)return void console.log("GridAD 已创建成功，无需重试");if(this.ryw__loading)return void console.log("GridAD 正在创建中");this.ryw__create(t=>{null!=e&&e(t)})}ryw__create(e){if(!Laya.Browser.onMiniGame)return void(null!=e&&e(!1));let t=Laya.Browser.window.wx.createGridAd({adUnitId:this.ryw__id,adIntervals:30,style:{left:0,top:0,width:300,height:150}});if(null!=t){let r=this;this.ryw__loading=!0,t.onLoad(i=>{console.log("GridAD 加载完成",r.ryw__id,i),r.ryw__gridAd=t,r.ryw__createTime=Laya.timer.currTimer,r.ryw__loading=!1,null!=e&&e(!0)}),t.onError(i=>{console.log("GridAD 加载失败",r.ryw__id,i),r.ryw__error=i,r.ryw__loading=!1,t.destroy(),null!=e&&e(!1)})}}}class E{static ryw_init(){if(E.ryw__inited)return;let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wxWuDianBanners;for(let t=0;t<e.length;++t)E.ryw__bannerIds.push(e[t]);for(let t=0;t<E.ryw__bannerIds.length;++t){E.ryw__bannerIds[t];E.ryw__bannerIds[t]=e[Math.floor(Math.random()*e.length)]}E.ryw__createBannerAd();let t=1e3*C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerCreateFailNum;Laya.timer.loop(t,E,()=>{E.ryw__checkBannerAd(),E.ryw__createBannerAd()}),E.ryw__inited=!0}static ryw_getBanner(e){let t=[],r=[];for(let e=0;e<E.ryw__banners.length;++e){let i=E.ryw__banners[e];i.ryw_Destroyed||(i.ryw_isReady?t.push(i):r.push(i))}E.ryw__curBannerGetIndex>=t.length&&(E.ryw__curBannerGetIndex=0);let i=t[E.ryw__curBannerGetIndex];++E.ryw__curBannerGetIndex,null!=i?e(i):(null==(i=E.ryw__createBannerAd())&&(i=E.ryw__banners[Math.floor(Math.random()*E.ryw__banners.length)]),null==i?e(null):i.ryw_retry(t=>{e(t?i:null)}))}static ryw__createBannerAd(){if(E.ryw__curBannerCreateIndex>=E.ryw__bannerIds.length)return null;let e=new V(E.ryw__bannerIds[E.ryw__curBannerCreateIndex]);return E.ryw__banners.push(e),e.ryw_retry(),++E.ryw__curBannerCreateIndex,e}static ryw__checkBannerAd(){let e=[],t=[];for(let r=0;r<E.ryw__banners.length;++r){let i=E.ryw__banners[r];i.ryw_Destroyed||(i.ryw_isReady?e.push(i):t.push(i))}for(let t=0;t<E.ryw__banners.length;++t){let r=E.ryw__banners[t],i=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerShowTime;r.ryw_isReady?e.length>=2&&r.ryw_BannerTotalShowTime>=1e3*i&&(console.log("BannerAd 展示时间超过限制，销毁 : ",r.ryw_Id),r.ryw_destroy()):r.ryw_RetryCount>=V.ryw_MAX_RETRY_COUNT?(console.log("BannerAd 超过重试次数，销毁 : ",r.ryw_Id),r.ryw_destroy()):r.ryw_retry()}}static ryw_getBoxAd(e){if(E.ryw__wxGridAd.ryw_isReady)e(E.ryw__wxGridAd);else{let t=E.ryw__wxGridAd;t.ryw_retry(r=>{e(r?t:null)})}}static ryw__createGirdAd(){if(null!=E.ryw__wxGridAd)return;let e=new x("");e.ryw_retry(),E.ryw__wxGridAd=e}}E.ryw__inited=!1,E.ryw__bannerIds=new Array,E.ryw__banners=new Array,E.ryw__curBannerCreateIndex=0,E.ryw__curBannerGetIndex=0,E.ryw__wxGridAd=null;class N{static preloadBanner(){}static show(e){let t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wxWuDianBanners;C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerTodayBannerMax;if(e=t[Math.floor(Math.random()*t.length)],Laya.Browser.onQQMiniGame&&null!=e){let t=Laya.Browser.window.qq.getSystemInfoSync(),r=t.screenWidth,i=t.screenHeight,n=Laya.Browser.window.qq.createBannerAd({adUnitId:e,adIntervals:30,style:{left:0,top:(Laya.stage.height-240)/Laya.stage.height*i,width:r}});if(n){let t=this;N.ryw__onLoad=(r=>{console.log("CachedQQBanner 广告 加载完成",e),console.log(r),t.ryw__isHide?(n.offLoad(N.ryw__onLoad),n.offError(N.ryw__onError),n.destroy()):n.show()}),n.onLoad(N.ryw__onLoad),N.ryw__onError=(t=>{console.log("CachedQQBanner 广告 加载失败",e),console.log(t),n.offLoad(N.ryw__onLoad),n.offError(N.ryw__onError),n.destroy()}),n.onError(N.ryw__onError),N.ryw__curBanner=n}}N.ryw__isHide=!1}static hide(){N.ryw__isHide=!0,Laya.timer.clearAll(N),null!=N.ryw__curBanner&&(N.ryw__curBanner.hide(),N.ryw__curBanner.offLoad(N.ryw__onLoad),N.ryw__curBanner.offError(N.ryw__onError),N.ryw__curBanner.destroy(),N.ryw__curBanner=null,console.log("CachedQQBanner 广告隐藏"))}static changeShow(){null!=N.ryw__curBanner&&(N.ryw__curBanner.hide(),N.ryw__curBanner=null),N.show()}static clear(){}}N.ryw__curBanner=null,N.ryw__onLoad=null,N.ryw__onError=null,N.ryw__isHide=!0;class G{constructor(){this.ryw__enabled=!0}get ryw_Enabled(){return this.ryw__enabled}set ryw_Enabled(e){e||this.ryw_stopBGM(),this.ryw__enabled=e}ryw_getSoundUrl(e){return G.ryw_soundResPath+e+".ogg"}ryw_playSound(e){if(this.ryw__enabled){var t=this.ryw_getSoundUrl(e);if(Laya.Browser.onMiniGame){var r=Laya.Pool.getItem(e);null==r&&((r=wx.createInnerAudioContext()).src=G.ryw_soundResPath+e+".ogg",r.onEnded(()=>{Laya.Pool.recover(e,r),r.offEnded()})),r.play()}else Laya.SoundManager.playSound(t,1)}}ryw_playBGM(e){if(!this.ryw__enabled)return;let t=this.ryw_getSoundUrl(e);Laya.Browser.onMiniGame?(this.ryw_bgm||(this.ryw_bgm=wx.createInnerAudioContext()),this.ryw_bgm.pause(),this.ryw_bgm.src=t,this.ryw_bgm.loop=!0,this.ryw_bgm.play()):Laya.SoundManager.playMusic(t,0)}ryw_stopBGM(){Laya.Browser.onMiniGame?this.ryw_bgm&&this.ryw_bgm.pause():Laya.SoundManager.stopMusic()}}G.ryw_soundResPath="subRes/sound/",G.ryw_instance=new G;class M{static onVideoFail(){console.debug("onVideoFail --------- ------------ "),w.ryw_instance.ryw_dispatch(t.RewardVideoFail),G.ryw_instance.ryw_playBGM("bg")}static onVideoSuccess(e){console.debug("onVideoSuccess    --------- ------------ "),w.ryw_instance.ryw_dispatch(t.RewardVideoSuccess,e),G.ryw_instance.ryw_playBGM("bg")}static onInsertVideoEnd(){console.debug("onInsertVideoEnd    --------- ------------ "),w.ryw_instance.ryw_dispatch(t.InsertVideoEnd)}static CallNativeFunc(e){Laya.Browser.onAndroid?window.PlatformClass.createClass("demo.JSBridge").call(e):Laya.Browser.onIOS}static ShowLog(e){(console.log("输出native日志---"+e),Laya.Browser.onAndroid)?window.PlatformClass.createClass("demo.JSBridge").call("showLog",e):Laya.Browser.onIOS}}M.NowVideoType="",M.conchIOS="Conch-ios",M.conchAndroid="Conch-android",M.os="";class R{constructor(){this.openBanner=1,this.openVideo=1,this.openInsert=1}static getInstance(){return null==R._instance&&R.load(),R._instance}static load(){R._instance=new R,""!=R.resUrl&&Laya.loader.load(R.resUrl,Laya.Handler.create(this,e=>{if(e){for(const t of Object.keys(e))R._instance[t]=e[t];R._instance.SetBannerActive()}R._instance.SetBannerActive()}))}hideBanner(){M.CallNativeFunc("hideBanner")}SetBannerActive(){1==this.openBanner?M.CallNativeFunc("showBanner"):M.CallNativeFunc("hideBanner")}}R.resUrl="";class P extends Laya.Script{constructor(){super(),P.ryw__instance=this}static ryw_getInstance(){return P.ryw__instance}onAwake(){I.ryw_GetMaiLiangOpenId(function(e){console.log("GameUI 买量数据上报成功"),Laya.Browser.window.wx.onShow(function(){I.ryw_GetMaiLiangOpenId(null,null)}),Laya.Browser.window.wx.onHide(function(){I.ryw_ReportStayTime(null,null)})},function(e){console.log("GameUI 买量数据上报失败")}),S.ryw_SetShareMenu("","",()=>{},()=>{},()=>{}),A.ryw_UpdateIpBlockState(),this.ryw_reportLaunchOptions(),Laya.Browser.onMiniGame?(b.ryw_preloadBanner(),E.ryw_init()):Laya.Browser.onQQMiniGame?(N.preloadBanner(),f.ryw_LoadAppBoxAd(()=>{},()=>{})):Laya.Browser.onQGMiniGame&&null!=Laya.Browser.window.qg.reportMonitor&&"function"==typeof Laya.Browser.window.qg.reportMonitor&&Laya.Browser.window.qg.reportMonitor("game_scene",0)}onStart(){this.ryw_preCreateGame()}ryw_preCreateGame(){Laya.URL.customFormat=(e=>-1==e.indexOf(".ls")&&e.indexOf(c.ryw_ResServer+"/LayaScene")>-1?e=e.replace(c.ryw_ResServer+"/LayaScene","subRes/LayaScene"):e),R.getInstance().SetBannerActive(),k.ryw_instance.ryw_openView(r.GameView,null,e=>{e.owner.zOrder=1})}ryw_saveGameData(){Laya.LocalStorage.setItem("Game_Data",l.ryw_getSaveData())}ryw_reportLaunchOptions(){g.ryw_Getuserip(e=>{if(1==e.code){console.log("获取玩家ip,地区成功 ：",e.data.dqip,e.data.ipxq);let t=null;Laya.Browser.onMiniGame?t=S.ryw_getLaunchOptionsSync():Laya.Browser.onQQMiniGame&&(t=f.ryw_getLaunchOptionsSync()),null!=t&&D.ryw_aldSendReportLaunchOptions(t.scene,e.data.dqip,e.data.ipxq)}},e=>{console.log("获取玩家ip,地区失败");let t=null;Laya.Browser.onMiniGame?t=S.ryw_getLaunchOptionsSync():Laya.Browser.onQQMiniGame&&(t=f.ryw_getLaunchOptionsSync()),null!=t&&D.ryw_aldSendReportLaunchOptions(t.scene,"","")})}}P.ryw__instance=null;class O{static ryw_refreshAd(e){}static ryw_getADVs(e,t,r,i,n){}static ryw_reportUserClick(e){}static ryw_getRandomADPosID(){return O.ryw_AdLocationids[Math.floor(Math.random()*O.ryw_AdLocationids.length)]}static ryw_request(e){}static ryw_getAdPosData(e,t){}static ryw_reqUserClick(e,t,r){}static ryw_getADVData(e,t,r){}static ryw_RandomJump(e=1){}static ryw_isNeedShowAd(){return!0}static ryw_sortDatas(e){}}O.ryw_mainUrl="",O.ryw_getAdPostion="",O.ryw_getAdv="",O.ryw_userClick="",O.ryw_LoopAdLocationID=532,O.ryw_BannerAdLocationID=531,O.ryw_InsertAdLocationID=-1,O.ryw_AniAdLocationID=-1,O.ryw_HistoryLocationID=534,O.ryw_MoreGameLocationID=533,O.ryw_UseRandomAdPos=!1,O.ryw_AdLocationids=[],O.ryw__adPosition={},O.ryw__adv={},O.ryw__iphoneIgnoreAppIds=["",""];class U{static ryw_ttLogin(e,t){c.onTTMiniGame&&(Laya.Browser.window.tt.login({force:!1,success:r=>{console.log("登陆成功1");let i=r.code;i?e(i):(console.log("用户没有登陆，采用临时code"),t())},fail:()=>{console.log("登陆失败1"),t()}}),U.ryw_initRecord())}static ryw_onRewardedVideoAdLoad(){console.log("激励视频 广告加载完成")}static ryw_onRewardedVideoAdError(e){console.log("激励视频 广告加载失败"+e),U.ryw__onRewardedVideoAdFailed&&U.ryw__onRewardedVideoAdFailed()}static ryw_onRewardedVideoAdClose(e){e&&e.isEnded||null==e?(console.log("激励视频 已完整观看"),U.ryw__onRewardedVideoAdClose&&U.ryw__onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),U.ryw__onRewardedVideoAdClose&&U.ryw__onRewardedVideoAdClose(!1))}static ryw_regRewardedVideoAdEvent(e){e.onLoad(U.ryw_onRewardedVideoAdLoad),e.onError(U.ryw_onRewardedVideoAdError),e.onClose(U.ryw_onRewardedVideoAdClose),U.ryw__isRegRewardedVideoAdEvent=!0}static ryw_showRewardedVideoAd(e,t){if(c.onTTMiniGame){U.ryw__onRewardedVideoAdClose=e,U.ryw__onRewardedVideoAdFailed=t;var r=Laya.Browser.window.tt.createRewardedVideoAd({adUnitId:U.ryw_adUnitId});U.ryw__isRegRewardedVideoAdEvent||U.ryw_regRewardedVideoAdEvent(r),r.load().then(()=>{var e=r.show();e.then(()=>console.log("激励视频 广告显示成功")),e.catch(e=>{r.load().then(()=>r.show()).catch(e=>{console.log("激励视频 广告显示失败"),t&&t()})})}).catch(e=>{console.log("激励视频 广告加载失败"),t&&t()})}else e(!0)}static ryw_initRecord(){U.ryw_record=Laya.Browser.window.tt.getGameRecorderManager(),null!=U.ryw_record&&(U.ryw_record.onStart(e=>{console.log("录屏开始"),U.ryw_recordRes=""}),U.ryw_record.onStop(e=>{console.log("录屏结束"),U.ryw_recordRes=e.videoPath}))}static ryw_startRecord(e=300){c.onTTMiniGame&&U.ryw_record.start({duration:e})}static ryw_stopRecord(){c.onTTMiniGame&&U.ryw_record.stop()}static ryw_shareRecord(e=null,t=null){c.onTTMiniGame&&(""!=U.ryw_recordRes?window.tt.shareAppMessage({channel:"video",extra:{videoPath:U.ryw_recordRes,videoTopics:[c.ryw_GameName]},success(){null!=e&&e(),console.log("分享视频成功")},fail(e){console.log("分享视频失败"),null!=t&&t()}}):(null!=t&&t(),console.log("分享视频为空")))}static ryw_share(e=null){c.onTTMiniGame&&window.tt.shareAppMessage({templateId:U.ryw__templateId,success(){null!=e&&e()},fail(){console.log("分享失败")}})}static ryw_showBanner(){}static ryw_hideBanner(){null!=U.ryw__banner&&U.ryw__banner.hide()}static ryw_showMoreGamesModal(e,t){"ios"!==Laya.Browser.window.tt.getSystemInfoSync().platform?Laya.Browser.window.tt.showMoreGamesModal({appLaunchOptions:[{appId:c.ryw_AppID,query:"foo=bar&baz=qux",extraData:{}}],success(t){console.log("success",t.errMsg),e&&e()},fail(e){console.log("fail",e.errMsg),t&&t()}}):t&&t()}static autoOpenSignInView(e){g.GetSignIn(t=>{let i=t.data.is_sign;t.data.sign_day_num;0==i?k.ryw_instance.ryw_openView(r.ryw_TTSignInView,null,()=>{e(!0)}):e(!1)},()=>{e(!1)})}}U.ryw_adUnitId="",U.ryw_bannerAdUnitId="",U.ryw_InsAdUnitId="",U.ryw__templateId="",U.ryw_recordRes="",U.ryw__banner=null,U.ryw__isRegRewardedVideoAdEvent=!1,U.ryw__onRewardedVideoAdFailed=null,U.ryw__onRewardedVideoAdClose=null;class Z{static get BannerInstance(){return this._banner}static Login(e,t){Laya.Browser.window.qg.getSystemInfoSync().platformVersionCode>=1053?(console.log("vivo 开始登陆 >= 1053"),Laya.Browser.window.qg.login().then(r=>{if(r.data.token){let t=r.data.token;e(t,!0),console.log("vivo 登陆成功,获取到 token : "+t)}else console.log("登录失败 res.data.token 为 null"),t()},e=>{console.log("登录失败"+JSON.stringify(e)),t()})):(console.log("vivo 开始登陆 < 1053"),Laya.Browser.window.qg.authorize({type:"token",success:function(r){Laya.Browser.window.qg.getProfile({token:r.accessToken,success:function(t){console.log("openid获取成功",t.openid),e(t.openid,!1)},fail:function(e,r){console.log("获取openid失败 : "+r),t()}})},fail:function(e,r){console.log("登录失败"+r),t()}}))}static showDialog(e,t,r,i,n,a){Laya.Browser.window.qg.showDialog({title:e,message:t,buttons:r,success:function(e){console.log("handling callback"),i()},cancel:function(){console.log("handling cancel"),n()},fail:function(e,t){console.log(`handling fail, code = ${t}`),a()}})}static createRewardedVideoAd(){Laya.Browser.onVVMiniGame&&(Z.rewardedAd=Laya.Browser.window.qg.createRewardedVideoAd({posId:Z.adUnitId,style:{}}),Z.rewardedAd.onError(e=>{switch(e.errCode){case-3:console.log("激励广告加载失败---调用太频繁",JSON.stringify(e));break;case-4:console.log("激励广告加载失败--- 一分钟内不能重复加载",JSON.stringify(e));break;case 30008:break;default:console.log("激励广告展示失败"),console.log(JSON.stringify(e))}}))}static showRewardedVideoAd(e,t){if(Laya.Browser.onVVMiniGame){if(G.ryw_instance.ryw_stopBGM(),console.log("---------------------------------- VIVOAPI.rewardedAd:",Z.rewardedAd+",VIVOAPI.rewardedAdNum:",Z.rewardedAdNum),0==Z.rewardedAdNum)Z.createRewardedVideoAd();else{let e=Z.rewardedAd.load();e&&e.catch(e=>{console.log("激励广告load失败"+JSON.stringify(e)),t()})}Z.rewardedAdNum=1,console.log("近来showRewardedVideoAd"),Z.rewardedAd.onLoad(()=>{let e=Z.rewardedAd.show();e&&e.then(()=>{console.log("激励广告展示成功")}).catch(e=>{console.log("激励广告展示失败"+JSON.stringify(e)),t()})}),Z.rewardedAd.onClose(t=>{t&&t.isEnded?(console.log("正常播放结束，可以下发游戏奖励"),e(!0)):(console.log("播放中途退出，不下发游戏奖励"),e(!1))})}}static showBannerAd(){if(Laya.Browser.onVVMiniGame){console.log("===========bannerAd showBanerAd");var e=Laya.Browser.window.qg.getSystemInfoSync();e.screenWidth,e.screenHeight;this.mBannerAd=qg.createBannerAd({posId:Z.bannerAdUnitId,style:{}});let t=this.mBannerAd.show();t&&t.then(()=>{console.log("banner广告展示成功")}).catch(e=>{switch(e.code){case 30003:console.log("新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入");break;case 30009:console.log("10秒内调用广告次数超过1次，10秒后再调用");break;case 30002:console.log("加载广告失败，重新加载广告");break;default:console.log("banner广告展示失败"),console.log(JSON.stringify(e))}}),this.mBannerAd.onError(function(e){console.log("Banner广告加载失败111:"+JSON.stringify(e))})}}static hideBannerAd(){this.mBannerAd?(console.log("===========bannerAd 隐藏"),this.mBannerAd.hide(),this.mBannerAd.destroy(),this.mBannerAd=null):console.log("===========bannerAd 为空")}static navigateToMiniProgram(e,t,r,i,n){Laya.Browser.onVVMiniGame&&(console.log("vivo 跳转游戏： "+e),Laya.Browser.window.qg.navigateToMiniGame({pkgName:e,path:t,extraData:{from:c.ryw_AppID},envVersion:"release",success(e){r&&r(e)},fail(e){i&&i(e)},complete(e){n&&n(e)}}))}static showInterstitialAd(e,t){if(Laya.Browser.onVVMiniGame){var r=Laya.Browser.window.qg.createInterstitialAd({posId:Z.InsAdUnitId});r.onLoad(()=>{console.log("插屏广告加载完成")}),r.onClose(()=>{e&&e()}),r.onError(e=>{console.log("插屏广告拉取失败",JSON.stringify(e)),t&&t()}),r.show().then(()=>{console.log("插屏广告显示成功")}).catch(e=>{t&&t()})}else e&&e()}static getLaunchOptionsSync(){return{}}static share(e){Laya.Browser.onVVMiniGame&&Laya.Browser.window.qg.share({success(){null!=e&&e(!0),Laya.Browser.window.qg.showToast({message:"分享成功"})},fail(e,t){Laya.Browser.window.qg.showToast({message:"分享失败"})},cancel(){Laya.Browser.window.qg.showToast({message:"分享失败"})},complete(){}})}static createDesktopIcon(e,t){Laya.Browser.onVVMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(r){0==r?Laya.Browser.window.qg.installShortcut({success:function(){e&&e()},fail:function(e){for(var r in t&&t(),console.log("创建桌面图标失败！！！！",e),e)console.log(r,e)},complete:function(){}}):(console.log("桌面图标已存在！！！！"),t&&t())},fail:function(e){for(var r in t&&t(),console.log("判断桌面图标是否存在失败！！！",e),e)console.log(r,e)},complete:function(){}}):t&&t()}static showNativeAd(e,t,r){1==r?Z.tryShowNativeAd1(e,t):2==r&&Z.tryShowNativeAd2(e,t)}static tryShowNativeAd1(e,t){if(!Laya.Browser.onVVMiniGame)return void(null!=t&&t());let i=C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_yuanshengSwitch,n=C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_vivoversions;1==i&&n==c.ryw_Versions?k.ryw_instance.ryw_openView(r.VVNativeView1,null,t=>{null!=e&&e()}):null!=t&&t()}static tryShowNativeAd2(e,t){if(!Laya.Browser.onVVMiniGame)return void(null!=t&&t());let i=C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_yuanshengSwitch2,n=C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_vivoversions;1==i&&n==c.ryw_Versions?k.ryw_instance.ryw_openView(r.VVNativeView2,null,t=>{null!=e&&e()}):null!=t&&t()}static tryPopCreateDestopIcon(e,t){Laya.Browser.onVVMiniGame&&1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_addToDesktop?Z.createDesktopIcon(e,t):null!=t&&t()}static tryShowInsAd(e,t){if(1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_chapingSwitch){100*Math.random()<=C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_chaping?Z.showInterstitialAd(()=>{e&&e()},()=>{t&&t()}):t&&t()}else t&&t()}}Z.adUnitId="",Z.bannerAdUnitId="",Z.nativeAdId="",Z.InsAdUnitId="",Z.rewardedAd=null,Z.rewardedAdNum=0,Z._banner=null,Z.mBannerAd=null;class q extends Laya.Script{constructor(){super(...arguments),this.ryw_AdPosID=-10086,this.ryw__datas=[],this.ryw__data=null}get ryw_Sprite(){return this.owner}get ryw_Data(){return this.ryw__data}ryw_refresh(e){let t=this;O.ryw_getADVs(this.ryw_AdPosID,r=>{null!=r&&(t.ryw__datas=r,t.ryw__data=t.ryw__datas[Math.floor(Math.random()*r.length)],null!=e&&e())},!1)}ryw_navigateToMiniProgram(e){var r=null==e?this.ryw__data:e;r&&(console.log("跳转游戏： "+r.title),Laya.Browser.onMiniGame?S.ryw_navigateToMiniProgram(r.appid,r.url,e=>{console.log("跳转成功"),O.ryw_reportUserClick(r.appid),D.ryw_aldSendReportAdClickSuccess(r)},e=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==e.errMsg&&(console.log("用户取消跳转"),D.ryw_aldSendReportAdClickFail(r))},e=>{console.log("跳转完成")}):Laya.Browser.onQGMiniGame?T.ryw_navigateToMiniProgram(r.appid,r.title,r.url,e=>{console.log("跳转成功"),O.ryw_reportUserClick(r.appid)},e=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail)},e=>{console.log("跳转完成")}):Laya.Browser.onQQMiniGame?f.ryw_navigateToMiniProgram(r.appid,r.url,e=>{console.log("跳转成功"),O.ryw_reportUserClick(r.appid)},e=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail)},e=>{console.log("跳转完成")}):Laya.Browser.onVVMiniGame?Z.navigateToMiniProgram(r.appid,r.url,e=>{console.log("跳转成功"),O.ryw_reportUserClick(r.appid)},e=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail)},e=>{console.log("跳转完成")}):c.onTTMiniGame&&U.ryw_showMoreGamesModal(()=>{console.log("跳转成功"),O.ryw_reportUserClick(r.appid)},()=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail)}))}ryw_show(){this.ryw_Sprite.visible=!0}ryw_hide(){this.ryw_Sprite.visible=!1}ryw_autoScrollText(e){if(e.overflow!=Laya.Text.SCROLL)return;let t=!0,r=0;Laya.timer.frameLoop(1,e,()=>{let i=Laya.timer.delta/1e3*10;(r+=i)>=e.textWidth/2&&(t=!t,r=0),t?e.scrollX+=i:e.scrollX-=i})}}class H extends q{constructor(){super(...arguments),this.ryw__originW=170,this.ryw__originH=170}onAwake(){this.ryw__displaySp=this.owner.getChildByName("Display"),this.ryw__originW=this.ryw__displaySp.width,this.ryw__originH=this.ryw__displaySp.height,this.ryw__disText=this.owner.getChildByName("TitelText"),this.ryw__disText.overflow=Laya.Text.SCROLL,this.ryw__disText.text=""}onStart(){this.ryw_autoScrollText(this.ryw__disText)}onEnable(){this.ryw_Sprite.on(Laya.Event.CLICK,this,this.ryw_onClickAd)}onDisable(){this.ryw_Sprite.off(Laya.Event.CLICK,this,this.ryw_onClickAd)}ryw_onClickAd(){this.ryw_navigateToMiniProgram()}ryw_setData(e){if(this.ryw__data=e,null!=this.ryw__data){let e=this;this.ryw__displaySp.loadImage(this.ryw__data.logo,Laya.Handler.create(this,function(){e.ryw__displaySp.destroyed||(e.ryw__displaySp.width=e.ryw__originW,e.ryw__displaySp.height=e.ryw__originH)}));let t=String(this.ryw__data.title);this.ryw__disText.text=t}}}class Q extends q{constructor(){super(...arguments),this.ryw_isEnable=!0,this.ryw_useMovePause=!0,this.ryw_useLocalRandom=!1,this.ryw_useRandom=!1,this.ryw_sortDatas=null,this.ryw__scrollForward=!0,this.ryw__cellSize=new Laya.Point}get ryw_Clip(){return this.owner}onAwake(){this.ryw_AdPosID=O.ryw_LoopAdLocationID,this.ryw__list=this.owner.getChildByName("List"),this.ryw__list.renderHandler=Laya.Handler.create(this,this.ryw_onListRender,null,!1),this.ryw__list.hScrollBarSkin=""}onStart(){let e=this;this.ryw__list.width=e.ryw_Clip.width,this.ryw__list.height=e.ryw_Clip.height,e.ryw_refresh(()=>{if(null!=e.ryw__list.cells&&e.ryw__list.cells.length>0){let t=e.ryw__list.cells[0];e.ryw__cellSize.x=t.width,e.ryw__cellSize.y=t.height,e.ryw_useMovePause&&setTimeout(()=>{e.ryw__list.scrollBar&&(e.ryw__list.scrollBar.value=0,e.ryw_move())},2e3)}})}ryw_refresh(e){if(!this.ryw_isEnable)return void(null!=e&&e());let t=this;O.ryw_getADVs(this.ryw_AdPosID,r=>{null!=r&&r.length>0?(t.ryw__datas=r,t.ryw__list.array=t.ryw__datas,null==t.ryw_Sprite||t.ryw_Sprite.destroyed||(t.ryw_Sprite.visible=!0),null!=e&&e()):null==t.ryw_Sprite||t.ryw_Sprite.destroyed||(t.ryw_Sprite.visible=!1)},this.ryw_useRandom,this.ryw_useLocalRandom,this.ryw_sortDatas)}ryw_onListRender(e,t){var r=this.ryw__list.array[t];e.getComponent(H).ryw_setData(r)}ryw_move(){let e=this.ryw__cellSize.x+this.ryw__list.spaceX,t=0;if(this.ryw__scrollForward?t=this.ryw__list.scrollBar.value%e:(e*=-1,t=(this.ryw__list.scrollBar.max-this.ryw__list.scrollBar.value)%e*-1),this.ryw__list.scrollBar){this.ryw__list.scrollBar.stopScroll();let r=e;0!=t&&(r=2*e-t);let i=this;Laya.Tween.to(i.ryw__list.scrollBar,{value:i.ryw__list.scrollBar.value+r},1e3,null,Laya.Handler.create(i,()=>{})),Laya.timer.once(1010,i,()=>{i.ryw__list.scrollBar.value>=i.ryw__list.scrollBar.max?i.ryw__scrollForward=!1:i.ryw__list.scrollBar.value<=0&&(i.ryw__scrollForward=!0),Laya.timer.once(3e3,i,()=>{i.ryw__list.scrollBar&&i.ryw_move()})})}}onUpdate(){this.ryw_useMovePause||(this.ryw__scrollForward?(this.ryw__list.scrollBar.value+=100*Laya.timer.delta/1e3,this.ryw__list.scrollBar.value>=this.ryw__list.scrollBar.max&&(this.ryw__scrollForward=!1)):(this.ryw__list.scrollBar.value-=100*Laya.timer.delta/1e3,this.ryw__list.scrollBar.value<=0&&(this.ryw__scrollForward=!0)))}}class F extends Q{onAwake(){this.ryw_AdPosID=O.ryw_MoreGameLocationID,this.ryw__list=this.owner.getChildByName("List"),this.ryw__list.renderHandler=Laya.Handler.create(this,this.ryw_onListRender,null,!1),this.ryw__list.vScrollBarSkin=""}ryw_move(){let e=this.ryw__cellSize.y+this.ryw__list.spaceY,t=0;if(this.ryw__scrollForward?t=this.ryw__list.scrollBar.value%e:(e*=-1,t=(this.ryw__list.scrollBar.max-this.ryw__list.scrollBar.value)%e*-1),this.ryw__list.scrollBar){this.ryw__list.scrollBar.stopScroll();let r=e;0!=t&&(r=2*e-t);let i=this;Laya.Tween.to(i.ryw__list.scrollBar,{value:i.ryw__list.scrollBar.value+r},1e3,null,Laya.Handler.create(i,()=>{})),Laya.timer.once(1010,i,()=>{i.ryw__list.scrollBar.value>=i.ryw__list.scrollBar.max?i.ryw__scrollForward=!1:i.ryw__list.scrollBar.value<=0&&(i.ryw__scrollForward=!0),Laya.timer.once(3e3,i,()=>{i.ryw__list.scrollBar&&i.ryw_move()})})}}}class z extends q{constructor(){super(...arguments),this.ryw__wxBanner=null,this.ryw__onLoad=null,this.ryw__onError=null,this.ryw__onResize=null,this.ryw__isCreating=!1,this.ryw__isDestroyed=!1,this.ryw__isHide=!1}get ryw_Clip(){return this.owner}onGetWXBanner(){return this.ryw__wxBanner}onAwake(){this.ryw_AdPosID=O.ryw_BannerAdLocationID}onStart(){this.ryw_refresh()}onEnable(){this.ryw_Sprite.on(Laya.Event.CLICK,this,this.ryw_onClickAd)}onDisable(){this.ryw_Sprite.off(Laya.Event.CLICK,this,this.ryw_onClickAd)}ryw_onClickAd(){this.ryw_navigateToMiniProgram()}ryw_refresh(e){if(this.ryw__isDestroyed)return;if(1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_banner){if(this.ryw_refreshWXBanner(),Laya.Browser.onQQMiniGame&&A.ryw_GetIpBlocked()){let e=f.ryw_getLaunchOptionsSync().scene,t=!0,r=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList;for(let i=0;i<r.length;++i){e==r[i]&&(t=!1)}if(t){let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerRecreateTime;Laya.timer.loop(1e3*e,this,this.ryw_refreshWXBanner)}}}else if(this.ryw_refreshBanner(),Laya.Browser.onQQMiniGame&&A.ryw_GetIpBlocked()){let e=f.ryw_getLaunchOptionsSync().scene,t=!0,r=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList;for(let i=0;i<r.length;++i){e==r[i]&&(t=!1)}if(t){let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerRecreateTime;Laya.timer.loop(1e3*e,this,this.ryw_refreshWXBanner)}}}ryw_refreshBanner(){null!=this.ryw_Sprite&&this.ryw_Sprite.visible&&(this.ryw__isCreating||this.ryw__isDestroyed||(this.ryw__isCreating=!0,super.ryw_refresh(()=>{if(null!=this.ryw__data){let e=this;this.ryw_Sprite.loadImage(this.ryw__data.logo,Laya.Handler.create(this,function(){null==e.ryw_Sprite||e.ryw_Sprite.destroyed||(e.ryw_Sprite.width=600,e.ryw_Sprite.height=205)}))}this.ryw__isCreating=!1})))}ryw_refreshWXBanner(){if(!Laya.Browser.onMiniGame&&!Laya.Browser.onQQMiniGame||null==this.ryw_Sprite||this.ryw_Sprite.destroyed||!this.ryw_Sprite.visible)return Laya.timer.clearAll(this),void this.ryw_clearWXBaner();if(this.ryw__isCreating||this.ryw__isDestroyed||this.ryw__isHide)return;this.ryw_clearWXBaner();let e=this,t=null;Laya.Browser.onMiniGame?t=Laya.Browser.window.wx.getSystemInfoSync():Laya.Browser.onQQMiniGame&&(t=Laya.Browser.window.qq.getSystemInfoSync());let r=t.screenWidth,i=t.screenHeight,n=this.ryw_Sprite.localToGlobal(new Laya.Point(0,0)),a=(r*(e.ryw_Sprite.width/Laya.stage.width)-300)/2,s=n.x/Laya.stage.width*r+a,o=n.y/Laya.stage.height*i;if(Laya.Browser.onMiniGame){e.ryw__isCreating=!0;let t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_recreateBannerIDList,r=t[Math.floor(Math.random()*t.length)];null==r&&(r=S.ryw_bannerAdUnitId),this.ryw__wxBanner=Laya.Browser.window.wx.createBannerAd({adUnitId:r,adIntervals:30,style:{left:s,top:o,width:300}}),null!=e.ryw__wxBanner?(e.ryw__wxBanner.onLoad(t=>{console.log("KRQ  WXBanner广告 加载完成 : ",r),console.log(t),e.ryw__isCreating=!1,e.ryw__isDestroyed||null==e.ryw__wxBanner||e.ryw__isHide?e.ryw_clearWXBaner():e.ryw__wxBanner.show()}),e.ryw__wxBanner.onError(t=>{console.log("KRQ WXBanner广告 加载失败 : ",r),console.log(t),e.ryw__isCreating=!1,e.ryw_clearWXBaner(),e.ryw__isDestroyed||e.ryw__isHide||e.ryw_refreshBanner()}),e.ryw__wxBanner.onResize(e=>{})):e.ryw_refreshBanner()}else if(Laya.Browser.onQQMiniGame){e.ryw__isCreating=!0;let t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_recreateBannerIDList,r=t[Math.floor(Math.random()*t.length)];null==r&&(r=f.ryw_bannerAdUnitId),e.ryw__wxBanner=Laya.Browser.window.qq.createBannerAd({adUnitId:r,adIntervals:30,style:{left:s,top:o,width:300}}),null!=e.ryw__wxBanner?(e.ryw__onLoad=(t=>{console.log("KRQ QQBanner广告 加载完成 : ",r),console.log(t),e.ryw__isCreating=!1,e.ryw__isDestroyed||null==e.ryw__wxBanner||e.ryw__isHide?e.ryw_clearWXBaner():e.ryw__wxBanner.show()}),e.ryw__wxBanner.onLoad(e.ryw__onLoad),e.ryw__onError=(t=>{console.log("KRQ QQBanner广告 加载失败 : ",r),console.log(t),e.ryw__isCreating=!1,e.ryw_clearWXBaner(),e.ryw__isDestroyed||null==e.ryw__wxBanner||e.ryw__isHide||e.ryw_refreshBanner()}),e.ryw__wxBanner.onError(e.ryw__onError),e.ryw__onResize=(e=>{}),e.ryw__wxBanner.onResize(e.ryw__onResize)):e.ryw_refreshBanner()}}ryw_clearWXBaner(){this.ryw__wxBanner&&(this.ryw__wxBanner.hide(),this.ryw__wxBanner.offLoad(this.ryw__onLoad),this.ryw__wxBanner.offError(this.ryw__onError),this.ryw__wxBanner.offResize(this.ryw__onResize),this.ryw__wxBanner.destroy()),this.ryw__wxBanner=null}onViewShow(){if(this.ryw__isHide=!1,1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_banner){if(null==this.ryw__wxBanner&&(this.ryw_refreshWXBanner(),Laya.Browser.onQQMiniGame&&A.ryw_GetIpBlocked())){let e=f.ryw_getLaunchOptionsSync().scene,t=!0,r=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList;for(let i=0;i<r.length;++i){e==r[i]&&(t=!1)}if(t){let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerRecreateTime;Laya.timer.loop(1e3*e,this,this.ryw_refreshWXBanner)}}}else if(this.ryw_refreshBanner(),Laya.Browser.onQQMiniGame&&A.ryw_GetIpBlocked()){let e=f.ryw_getLaunchOptionsSync().scene,t=!0,r=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList;for(let i=0;i<r.length;++i){e==r[i]&&(t=!1)}if(t){let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerRecreateTime;Laya.timer.loop(1e3*e,this,this.ryw_refreshWXBanner)}}}onViewHide(){this.ryw_clearWXBaner(),Laya.timer.clearAll(this),this.ryw__isHide=!0}onDestroy(){this.ryw_clearWXBaner(),Laya.timer.clearAll(this),this.ryw__isDestroyed=!0}ryw_show(){super.ryw_show(),this.onViewShow()}ryw_hide(){super.ryw_hide(),this.onViewHide()}}class K extends Laya.Script{constructor(){super(...arguments),this.ryw_onShow=null,this.ryw_onHide=null}get ryw_Sprite(){return this.owner}ryw_show(){this.ryw_Sprite.visible=!0,null!=this.ryw_onShow&&this.ryw_onShow()}ryw_hide(){this.ryw_Sprite.visible=!1,null!=this.ryw_onHide&&this.ryw_onHide()}}class W{static ryw_Lerp(e,t,r){return e==t?t:e>t?(i=e-r)<=t?t:i:e<t?(i=e+r)>=t?t:i:void 0;var i}static ryw_lerpEulerAngle(e,t,r){return e=(e=e%360)>=0?e:360+e,t=(t=t%360)>=0?t:360+t,Math.abs(t-e)>180&&(e<t?t-=360:e>t&&(t+=360)),W.ryw_Lerp(e,t,r)}static ryw_getRotationByDir(e){var t=(e.x*W.ryw_poinDown.x+e.y*W.ryw_poinDown.y)/(e.distance(0,0)*W.ryw_poinDown.distance(0,0)),r=Math.acos(t)/(2*Math.PI)*360;return e.x<0&&(r=-r),r}static ryw_getRotationByDirOn3DSpace(e){var t=(e.x*W.ryw_poinUp.x+e.y*W.ryw_poinUp.y)/(e.distance(0,0)*W.ryw_poinUp.distance(0,0)),r=Math.acos(t)/(2*Math.PI)*360;return e.x<0&&(r+=2*(180-r)),r}static ryw_getDirByRotation(e){var t=(e-90)*Math.PI/180,r=Math.cos(t),i=Math.sin(t),n=new Laya.Point(r,i);return n.normalize(),n}static ryw_getDirDirAngle(e,t){var r=(e.x*t.x+e.y*t.y)/(e.distance(0,0)*t.distance(0,0));return Math.acos(r)/(2*Math.PI)*360}static ryw_getDirScalarLength(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static ryw_setSpOnParentCenter(e){if(null!=e.parent){var t=e.parent,r=0,i=(i=0)-e.width/2*e.scaleX+t.width/2;r=r-e.height/2*e.scaleY+t.height/2;e.x=i,e.y=r}}static ryw_getPointToLineDistance(e,t,r,i){var n=new Laya.Point(e-r.x,t-r.y),a=new Laya.Point(e-i.x,t-i.y),s=new Laya.Point(i.x-r.y,i.y-r.y),o=s.x*n.x+s.y*n.y;if(o<=0)return n.distance(0,0);if(s.x*a.x+s.y*a.y<=0)return a.distance(0,0);var _=n.distance(0,0),y=o/(_*s.distance(0,0)),w=Math.acos(y);return Math.sin(w)*_}static ryw_isIphoneX(){return!!Laya.Browser.onIPhone&&(2436==Laya.Browser.width&&1125==Laya.Browser.height||2436==Laya.Browser.height&&1125==Laya.Browser.width)}static ryw_isIphone(){return Laya.Browser.onIPhone}static ryw_getChild(e,t){for(var r=0;r<e.numChildren;++r){var i=e.getChildAt(r);if(i.name==t)return i;var n=W.ryw_getChild(i,t);if(n)return n}return null}static ryw_forEachChild(e,t){for(let r=0;r<e.numChildren;++r){let i=e.getChildAt(r);t(i),W.ryw_forEachChild(i,t)}}}W.ryw_OriginStageWidth=1334,W.ryw_OriginStageHeight=750,W.ryw_grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],W.ryw_grayscaleFilter=new Laya.ColorFilter(W.ryw_grayscaleMat),W.ryw_poinDown=new Laya.Point(0,-1),W.ryw_poinUp=new Laya.Point(0,1);class X extends q{constructor(){super(...arguments),this.ryw__icon=null,this.ryw__text=null,this.ryw__mark=null}onAwake(){this.ryw__icon=this.ryw_Sprite.getChildByName("Icon"),this.ryw__text=this.ryw_Sprite.getChildByName("Text"),this.ryw__text.overflow=Laya.Text.SCROLL,this.ryw__text.text="",this.ryw__mark=this.ryw_Sprite.getChildByName("Mark"),this.ryw__mark.visible=!1}onStart(){this.ryw_autoScrollText(this.ryw__text)}onEnable(){this.ryw_Sprite.on(Laya.Event.CLICK,this,this.ryw_onClickAd)}onDisable(){this.ryw_Sprite.off(Laya.Event.CLICK,this,this.ryw_onClickAd)}ryw_onClickAd(){this.ryw_navigateToMiniProgram()}ryw_setData(e,t){if(this.ryw__data=e,null!=this.ryw__data){var r=this;this.ryw__icon.loadImage(this.ryw__data.logo,Laya.Handler.create(this,function(){r.ryw__icon.destroyed||(r.ryw__icon.width=100,r.ryw__icon.height=100)}));var i=String(this.ryw__data.title);this.ryw__text.text=i,this.ryw__mark.visible=t}}}class j extends q{constructor(){super(...arguments),this.ryw_OnBackBtnClick=null,this.ryw__topZone=null,this.ryw__backBtn=null,this.ryw__startList=new Array}onAwake(){this.ryw_AdPosID=O.ryw_HistoryLocationID,this.ryw__topZone=this.ryw_Sprite.getChildByName("TopZone"),this.ryw__backBtn=this.ryw__topZone.getChildByName("BackBtn"),this.ryw__list=this.ryw_Sprite.getChildByName("List"),this.ryw__list.renderHandler=Laya.Handler.create(this,this.ryw_onListRender,null,!1),this.ryw__list.vScrollBarSkin=""}onStart(){this.ryw_refresh()}onEnable(){this.ryw__backBtn.on(Laya.Event.CLICK,this,this.ryw_onBackBtn)}onDisable(){this.ryw__backBtn.off(Laya.Event.CLICK,this,this.ryw_onBackBtn)}ryw_refresh(e){let t=this;O.ryw_getADVs(this.ryw_AdPosID,e=>{if(null!=e){t.ryw__datas=e,t.ryw__startList.splice(0);for(let e=0;e<t.ryw__datas.length;++e)t.ryw__startList.push(!1);let r=Math.floor(.33*t.ryw__startList.length);for(;r>0;){let e=Math.floor(Math.random()*t.ryw__startList.length);0==t.ryw__startList[e]&&(t.ryw__startList[e]=!0,--r)}t.ryw__list.array=t.ryw__datas}},!1)}ryw_onListRender(e,t){let r=this.ryw__list.array[t],i=this.ryw__startList[t];e.getComponent(X).ryw_setData(r,i)}ryw_onBackBtn(){this.ryw_hide(),null!=this.ryw_OnBackBtnClick&&this.ryw_OnBackBtnClick()}ryw_show(){super.ryw_show(),this.ryw_refresh()}}class Y extends K{constructor(){super(...arguments),this.ryw_onContinueBtnClick=null,this.ryw__topZone=null,this.ryw__backBtn=null,this.ryw__centerZone=null,this.ryw__continueBtn=null,this.ryw__krqHistory=null,this.ryw__krqBanner=null}get ryw_BackBtn(){return null==this.ryw__backBtn&&(this.ryw__backBtn=this.ryw_Sprite.getChildByName("TopZone").getChildByName("BackBtn")),this.ryw__backBtn}get ryw_ContinueBtn(){return null==this.ryw__continueBtn&&(this.ryw__continueBtn=this.ryw_Sprite.getChildByName("CenterZone").getChildByName("ContinueBtn")),this.ryw__continueBtn}onAwake(){this.ryw__topZone=this.ryw_Sprite.getChildByName("TopZone"),W.ryw_isIphoneX()&&(this.ryw__topZone.top=this.ryw__topZone.top+75),this.ryw__backBtn=this.ryw__topZone.getChildByName("BackBtn"),this.ryw__centerZone=this.ryw_Sprite.getChildByName("CenterZone"),W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__continueBtn=this.ryw__centerZone.getChildByName("ContinueBtn"),this.ryw__krqHistory=this.owner.getChildByName("KRQ_History").getComponent(j),this.ryw__krqBanner=this.owner.getChildByName("KRQ_Banner").getComponent(z);let e=this;this.ryw__krqHistory.ryw_OnBackBtnClick=(()=>{e.ryw__krqBanner.ryw_show()})}onEnable(){this.ryw__backBtn.on(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__continueBtn.on(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}onDisable(){this.ryw__backBtn.off(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__continueBtn.off(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ryw_onBackBtn(){this.ryw__krqHistory.ryw_show(),this.ryw__krqBanner.ryw_hide()}ryw_onContinueBtn(){null!=this.ryw_onContinueBtnClick&&this.ryw_onContinueBtnClick()}}class J extends q{constructor(){super(...arguments),this.ryw__originW=300,this.ryw__originH=300}onAwake(){this.ryw_AdPosID=O.ryw_LoopAdLocationID,this.ryw__display=this.ryw_Sprite.getChildByName("Display"),this.ryw__text=this.ryw_Sprite.getChildByName("Text"),this.ryw__text.overflow=Laya.Text.SCROLL,this.ryw__text.text=""}onEnable(){this.ryw_Sprite.on(Laya.Event.CLICK,this,this.ryw_onClickAd)}onDisable(){this.ryw_Sprite.off(Laya.Event.CLICK,this,this.ryw_onClickAd)}onStart(){this.ryw_autoScrollText(this.ryw__text),this.ryw_refresh()}ryw_refresh(e){let t=this;O.ryw_getADVs(this.ryw_AdPosID,r=>{if(null!=r){if(t.ryw__datas=r,t.ryw_Sprite&&!t.ryw_Sprite.destroyed){for(let e=0;e<t.ryw__datas.length;++e){let r=!1,i=t.ryw__datas[e];for(let e=0;e<J.ryw__repeatCheckList.length;++e){if(J.ryw__repeatCheckList[e]==i.appid){r=!0;break}}if(!r){t.ryw_clearRepeat(),t.ryw__data=i;break}}if(null==t.ryw__data&&(t.ryw__data=t.ryw__datas[Math.floor(Math.random()*r.length)]),null!=t.ryw__data){t.ryw__display.loadImage(t.ryw__data.logo,Laya.Handler.create(t,function(){null==t.ryw_Sprite||t.ryw_Sprite.destroy||(t.ryw_Sprite.visible=!0,e&&e())}));var i=t.ryw__data.title;t.ryw__text.text=i;let r=!1;for(let e=0;e<J.ryw__repeatCheckList.length;++e){if(J.ryw__repeatCheckList[e]==t.ryw__data.appid){r=!0;break}}r||J.ryw__repeatCheckList.push(t.ryw__data.appid)}else null==t.ryw_Sprite||t.ryw_Sprite.destroy||(t.ryw_Sprite.visible=!1),e&&e()}}else t.ryw_Sprite.visible=!1,e&&e()})}ryw_hide(){this.ryw_Sprite.visible=!1,this.ryw_clearRepeat()}ryw_clearRepeat(){if(null!=this.ryw__data)for(let e=0;e<J.ryw__repeatCheckList.length;++e){if(J.ryw__repeatCheckList[e]==this.ryw__data.appid){J.ryw__repeatCheckList.splice(e,1);break}}}ryw_onClickAd(){this.ryw_navigateToMiniProgram(),this.ryw_refresh()}onDestroy(){this.ryw_clearRepeat()}}J.ryw__repeatCheckList=new Array;class $ extends J{ryw_playAni(e){let t=this;t.ryw_Sprite.rotation=0,Laya.Tween.to(t.ryw_Sprite,{rotation:20},250,Laya.Ease.linearNone,Laya.Handler.create(t,()=>{Laya.Tween.to(t.ryw_Sprite,{rotation:0},250,Laya.Ease.linearNone,Laya.Handler.create(t,()=>{t.ryw_Sprite.rotation=0,null!=e&&e()}))}))}}class ee extends K{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__rockSingleAds=new Array,this.ryw__aniSpaceing=3e3}onAwake(){this.ryw__centerZone=this.ryw_Sprite.getChildByName("CenterZone");for(let e=0;e<this.ryw__centerZone.numChildren;++e){let t=this.ryw__centerZone.getChildAt(e);if(t.visible){let e=t.getComponent($);this.ryw__rockSingleAds.push(e)}}}onStart(){let e=this;e.ryw_playAni(),Laya.timer.loop(this.ryw__rockSingleAds.length*(this.ryw__aniSpaceing+500),this,()=>{e.ryw_playAni(()=>{e.ryw_refreshAd()})})}ryw_refreshAd(){for(let e=0;e<this.ryw__rockSingleAds.length;++e){let t=this.ryw__rockSingleAds[e];null==t.ryw_Data&&(t.ryw_Sprite.visible=!1),t.ryw_refresh()}}ryw_playAni(e){let t=this.ryw__rockSingleAds.length;for(let r=0;r<this.ryw__rockSingleAds.length;++r){let i=r,n=this.ryw__rockSingleAds[i];Laya.timer.once(this.ryw__aniSpaceing*r,n,()=>{i==t-1?n.ryw_playAni(e):n.ryw_playAni()})}}}class te extends J{constructor(){super(...arguments),this._originX=null}onAwake(){super.onAwake(),this._originX=this.ryw_Sprite.x,this.ryw_Sprite.x-=Laya.stage.width}ryw_playAni(e){let t=this._originX,r=t-Laya.stage.width;this.ryw_Sprite.x=r,Laya.Tween.to(this.ryw_Sprite,{rotation:360},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.ryw_Sprite.rotation=0})),Laya.Tween.to(this.ryw_Sprite,{x:t},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.ryw_Sprite.x=t,null!=e&&e()}))}}class re extends K{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__rollSingleAds=new Array}onAwake(){this.ryw__centerZone=this.ryw_Sprite.getChildByName("CenterZone");for(let e=0;e<this.ryw__centerZone.numChildren;++e){let t=this.ryw__centerZone.getChildAt(e).getComponent(te);this.ryw__rollSingleAds.push(t)}}onStart(){for(let e=0;e<this.ryw__rollSingleAds.length;++e){let t=this.ryw__rollSingleAds[e];Laya.timer.once(150*(this.ryw__rollSingleAds.length-e),this,()=>{t.ryw_playAni()})}}}class ie extends K{constructor(){super(...arguments),this.ryw__krqVLoopAd=null,this.ryw__pullBtn=null}onAwake(){this.ryw__krqVLoopAd=this.ryw_Sprite.getChildByName("KRQ_VLoopAd").getComponent(F),this.ryw__pullBtn=this.ryw__krqVLoopAd.ryw_Sprite.getChildByName("PullBtn"),this.ryw__krqVLoopAd.ryw_Sprite.x=-this.ryw__krqVLoopAd.ryw_Sprite.width}onEnable(){this.ryw__pullBtn.on(Laya.Event.CLICK,this,this.ryw_onPullBtn)}onDisable(){this.ryw__pullBtn.off(Laya.Event.CLICK,this,this.ryw_onPullBtn)}ryw_onPullBtn(){this.ryw__krqVLoopAd.ryw_Sprite.x<0?this.ryw_pull():this.ryw_push()}ryw_pull(){Laya.Tween.to(this.ryw__krqVLoopAd.ryw_Sprite,{x:0},200,Laya.Ease.linearNone,null,0,!0)}ryw_push(){Laya.Tween.to(this.ryw__krqVLoopAd.ryw_Sprite,{x:-this.ryw__krqVLoopAd.ryw_Sprite.width},200,Laya.Ease.linearNone,null,0,!0)}ryw_onShareAdFail(){this.ryw_pull()}}!function(e){e[e.Normal=0]="Normal",e[e.NoLoopAd=1]="NoLoopAd",e[e.NoBannerAd=2]="NoBannerAd"}(n||(n={}));class ne extends K{constructor(){super(...arguments),this.ryw__topZone=null,this.ryw__historyBtn=null,this.ryw__krqLoopAd=null,this.ryw__bottomZone=null,this.ryw__krqBanner=null,this.ryw__krqHistory=null}onAwake(){this.ryw__topZone=this.ryw_Sprite.getChildByName("TopZone"),this.ryw__historyBtn=this.ryw__topZone.getChildByName("HistoryBtn"),this.ryw__historyBtn.visible=!1,W.ryw_isIphoneX()&&(this.ryw__topZone.top=this.ryw__topZone.top+75),this.ryw__krqLoopAd=this.ryw_Sprite.getChildByName("KRQ_HLoopAd").getComponent(Q),this.ryw__krqBanner=this.ryw_Sprite.getChildByName("KRQ_Banner").getComponent(z),this.ryw__krqHistory=this.ryw_Sprite.getChildByName("KRQ_History").getComponent(j);let e=this,t=Laya.stage.width/Laya.stage.height;this.ryw__krqHistory.ryw_OnBackBtnClick=(()=>{t<.5&&e.ryw__krqBanner.ryw_show()}),this.ryw__krqLoopAd.ryw_Sprite.visible=!1,t<.5?(this.ryw__krqLoopAd.ryw_Clip.top=100,W.ryw_isIphoneX()&&(this.ryw__krqLoopAd.ryw_Clip.top=this.ryw__krqLoopAd.ryw_Clip.top+75),this.ryw__krqBanner.ryw_Sprite.visible=!0):(this.ryw__krqLoopAd.ryw_Clip.top=Laya.stage.height-280,this.ryw__krqBanner.ryw_Sprite.visible=!1)}ryw_switchState(e){if(e==n.Normal){Laya.stage.width/Laya.stage.height<.5?(this.ryw__krqLoopAd.ryw_Clip.top=100,W.ryw_isIphoneX()&&(this.ryw__krqLoopAd.ryw_Clip.top=this.ryw__krqLoopAd.ryw_Clip.top+75),this.ryw__krqBanner.ryw_Sprite.visible=!0):(this.ryw__krqLoopAd.ryw_Clip.top=Laya.stage.height-280,this.ryw__krqBanner.ryw_Sprite.visible=!1)}else e==n.NoLoopAd?(this.ryw__krqLoopAd.ryw_isEnable=!1,this.ryw__krqLoopAd.ryw_Sprite.visible=!1,this.ryw__krqBanner.ryw_Sprite.visible=!0):e==n.NoBannerAd&&(this.ryw__krqLoopAd.ryw_Clip.top=Laya.stage.height-280,this.ryw__krqBanner.ryw_AdPosID=-1,this.ryw__krqBanner.ryw_Sprite.visible=!1)}onEnable(){this.ryw__historyBtn.on(Laya.Event.CLICK,this,this.ryw_onHistoryBtn)}onDisable(){this.ryw__historyBtn.off(Laya.Event.CLICK,this,this.ryw_onHistoryBtn)}ryw_onHistoryBtn(){this.ryw__krqHistory.ryw_show(),this.ryw__krqBanner.ryw_hide()}}class ae extends z{ryw_refresh(e){let t=null;Laya.Browser.onMiniGame?t=S.ryw_getLaunchOptionsSync().scene:Laya.Browser.onQQMiniGame&&(t=f.ryw_getLaunchOptionsSync().scene);let r=!0,i=C.ryw_getInstance().ryw_getAppSwitchData().ryw_wudianSceneList;for(let e=0;e<i.length;++e){t==i[e]&&(r=!1)}if(!A.ryw_GetIpBlocked()||!r)return this.ryw_Sprite.visible=!1,void(null!=e&&e());1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_banner?this.ryw_refreshWXBanner():super.ryw_refresh(()=>{this.ryw_refreshBanner(),null!=e&&e()})}}function isIViewStateListener(e){return null!=e.onViewShow&&"function"==typeof e.onViewShow&&null!=e.onViewHide&&"function"==typeof e.onViewHide}class se extends Laya.Script{constructor(){super(...arguments),this.ryw_onCloseEvent=null,this.ryw_onOpenEvent=null,this._viewBase=!0,this._viewDef=r.ryw_None,this._data={}}get ryw_View(){return this.owner}onAwake(){this.ryw_View.autoDestroyAtClosed=!0}onEnable(){this.ryw_addEvent()}onDisable(){this.ryw_removeEvent()}onDestroy(){this.ryw_removeEvent()}ryw_openView(e){this._data=e,this.ryw_show(),w.ryw_instance.ryw_dispatch(t.ryw_Game_OnViewOpen,{view:this._viewDef}),this.ryw_onOpenEvent&&this.ryw_onOpenEvent()}ryw_addEvent(){}ryw_removeEvent(){Laya.timer.clearAll(this)}ryw_closeView(){k.ryw_instance.ryw_closeView(this._viewDef)}ryw_hide(){this.ryw_View.visible=!1,this.onHide(),W.ryw_forEachChild(this.owner,e=>{let t=e._components;if(t)for(let e=0;e<t.length;e++){const r=t[e];isIViewStateListener(r)&&r.onViewHide(this)}})}ryw_show(){this.ryw_View.visible=!0,this.onShow(),W.ryw_forEachChild(this.owner,e=>{let t=e._components;if(t)for(let e=0;e<t.length;e++){const r=t[e];isIViewStateListener(r)&&r.onViewShow(this)}})}ryw_viewIsHide(){return this.ryw_View.visible}onHide(){}onShow(){}onClose(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),w.ryw_instance.ryw_dispatch(t.ryw_Game_OnViewClose,{view:this._viewDef}),this.ryw_onCloseEvent&&this.ryw_onCloseEvent()}}class oe extends se{constructor(){super(...arguments),this._backBtn=null}onAwake(){this._backBtn=this.owner.getChildByName("KRQ_History").getChildByName("TopZone").getChildByName("BackBtn")}ryw_addEvent(){this._backBtn.on(Laya.Event.CLICK,this,this.onBackBtn)}ryw_removeEvent(){this._backBtn.off(Laya.Event.CLICK,this,this.onBackBtn)}onBackBtn(){console.log("MoreGameView  onBackBtn"),this.ryw_closeView()}}class _e extends Laya.Script{constructor(){super(),this.ryw_useSound=!0}onAwake(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.ryw_onDown),this.owner.on(Laya.Event.MOUSE_UP,this,this.ryw_onUp),this.owner.on(Laya.Event.MOUSE_OUT,this,this.ryw_onUp)}onDisable(){this.owner.offAll(),Laya.Tween.clearAll(this)}ryw_onDown(){Laya.Tween.to(this.owner,{scaleX:.9,scaleY:.9},50),this.ryw_useSound&&G.ryw_instance.ryw_playSound("anniu")}ryw_onUp(){Laya.Tween.to(this.owner,{scaleX:1,scaleY:1},50)}}class ye extends Laya.Script{constructor(){super(...arguments),this._bg=null,this._diImg=null,this._guanImg=null,this._fontClip=null}onAwake(){this._bg=this.owner,this._diImg=this.owner.getChildByName("di"),this._guanImg=this.owner.getChildByName("guan"),this._fontClip=this.owner.getChildByName("fontClip")}onStart(){}setLevelString(e){let t=e.toString();this._fontClip.value=t}}!function(e){e.None="",e.ryw_Warrior="Warrior",e.ryw_Queen="Queen",e.ryw_Arrow="Arrow",e.ryw_Bomb="Bomb",e.ryw_Cannon="Cannon",e.ryw_CannonGravity="CannonGravity",e.ryw_Cannonball="Cannonball",e.ryw_Bear="Bear",e.ryw_Tiger="Tiger",e.ryw_Wolf="Wolf"}(a||(a={})),function(e){e[e.None=0]="None",e[e.ryw_Run=1]="ryw_Run",e[e.ryw_Attack=2]="ryw_Attack",e[e.ryw_Death=3]="ryw_Death"}(s||(s={}));class we extends Laya.Script3D{constructor(){super(...arguments),this._targetArr=new Array,this._naturalEnemyArr=new Array,this._isInitEnd=!1,this._boxHeighy=0,this.ryw__gracityLenght=-.3,this.ryw__currentGravitySpeed=-40,this._g=0,this.ryw_standOnTheGround=!0,this._defaultTimerDelta=16,this.ryw__outHitArr=new Array,this.ryw__boxWidth=0,this._subPosX=.3,this.ryw_state=s.None}ryw_onLastInit(){}ryw_onAssaulted(e){}ryw_onBeAssaulted(e){}get Type(){return this._type}get Scene3D(){return this._scene3D}get Sprite3D(){return this._ownerSprite3D}get transform(){return this._transform}ryw_onInit(e,t){this._type=t,this._scene3D=e,this._ownerSprite3D=this.owner,this._transform=this._ownerSprite3D.transform,this.ryw_onLastInit()}onStart(){}onEnable(){}onDisable(){}onUpdate(){}onLateUpdate(){}ryw_onGravityCheck(){if(0==this._isInitEnd)return;null==this.ryw__lastGravityPos&&(this.ryw__lastGravityPos=this.transform.localPosition.y-this._boxHeighy);var e=this._defaultTimerDelta/1e3;let t=this.ryw__currentGravitySpeed*e+.5*this._g*e*e;t>-.3&&(t=-.3);var r=this.ryw__lastGravityPos+t,i=new Laya.Vector3(this.transform.localPosition.x,this.ryw__lastGravityPos,this.transform.localPosition.z),n=new Laya.Vector3(this.transform.localPosition.x,r,this.transform.localPosition.z);this.ryw_onFallDetection(i,n)?(this.ryw__currentGravitySpeed=-40,this.ryw_standOnTheGround=!0):(this.transform.localPositionY=r+this._boxHeighy,this.ryw__currentGravitySpeed+=this._g*e,this.ryw_standOnTheGround=!1,this.ryw__lastGravityPos=r)}ryw_onFallDetection(e,t){if(this.Scene3D.physicsSimulation.raycastAllFromTo(e,t,this.ryw__outHitArr),0==this.ryw__outHitArr.length)return!1;var r=!1;for(let e=0;e<this.ryw__outHitArr.length;e++){let t=this.ryw__outHitArr[e];if(t.succeeded){var i=t.collider.owner;if(null==i||this.Sprite3D==i)continue;var n=i.getComponent(we);if(null==n){r=!0;continue}if(s.ryw_Death==n.ryw_state)continue;if(s.ryw_Death==this.ryw_state)continue;return n.ryw_onBeAssaulted(this.Type),n.ryw_onAssaulted(this.Type),this.ryw_onBeAssaulted(n.Type),this.ryw_onAssaulted(n.Type),r=!0}}return r}ryw_onAssaultedArea(){if(s.ryw_Death==this.ryw_state)return;null==this._lastPos&&(this._lastPos=new Laya.Vector3(this.transform.localPosition.x,this.transform.localPosition.y,this.transform.localPosition.z));var e=new Laya.Vector3(this.transform.localPosition.x,this.transform.localPosition.y,this.transform.localPosition.z),t=new Laya.Vector3(e.x,e.y,e.z);let r=this.ryw_onAreaDetection(this._lastPos,e);return this._lastPos=t,r}ryw_onAreaDetection(e,t){if(this.Scene3D.physicsSimulation.raycastAllFromTo(e,t,this.ryw__outHitArr),0!=this.ryw__outHitArr.length){for(let e=0;e<this.ryw__outHitArr.length;e++){let t=this.ryw__outHitArr[e];if(t.succeeded){var r=t.collider.owner;if(null==r||this.Sprite3D==r)continue;var i=r.getComponent(we);if(null==i)return!0;if(s.ryw_Death==i.ryw_state)continue;for(let e=0;e<this._targetArr.length;e++){let t=this._targetArr[e];if(i.Type==t){i.ryw_onBeAssaulted(this.Type),this.ryw_onAssaulted(i.Type);break}}return!0}}return!1}}ryw_destroyUnit(){this._ownerSprite3D.removeSelf(),this._ownerSprite3D.destroy(!0),this.ryw_standOnTheGround=!0,this.ryw_state=s.ryw_Death}onDestroy(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),Laya.Tween.clearAll(this.Sprite3D),Laya.timer.clearAll(this.Sprite3D),Laya.Tween.clearAll(this.transform),Laya.timer.clearAll(this.transform)}}class le extends we{constructor(){super(...arguments),this.ryw__speedX=40,this.ryw_directionX=1,this.ryw__lastStand=!0,this.ryw__lastState=s.None}onAwake(){this._targetArr.push(a.ryw_Queen),this._naturalEnemyArr.push(a.ryw_Bear),this._naturalEnemyArr.push(a.ryw_Tiger),this._naturalEnemyArr.push(a.ryw_Wolf),this._naturalEnemyArr.push(a.ryw_Arrow),this._naturalEnemyArr.push(a.ryw_Bomb),this._naturalEnemyArr.push(a.ryw_Cannon)}ryw_onLastInit(){this.ryw__collision=this.Sprite3D.getComponent(Laya.PhysicsCollider).colliderShape,this._boxHeighy=this.ryw__collision.sizeY/2,console.log("Warrior  this._boxHeighy = "+this._boxHeighy),this.ryw__ani=this.Sprite3D.getChildByName("hm_xb").getComponent(Laya.Animator),this.ryw__ani.play("daiji"),this._isInitEnd=!0}ryw_onWarriorMove(e){this.ryw__queenVec=e,this.transform.localPosition.x>e.x?this.ryw_directionX=-1:this.ryw_directionX=1,this.ryw_state=s.ryw_Run}ryw_onRun(){if(this.ryw_state!=s.ryw_Death){var e=this._defaultTimerDelta/1e3;this.ryw__lastStand==this.ryw_standOnTheGround&&this.ryw_state==this.ryw__lastState||null!=this.ryw__queenVec&&this.ryw_onWarriorMove(this.ryw__queenVec),this.ryw_standOnTheGround&&(this.transform.localRotationEulerY=90*this.ryw_directionX,this.transform.localPositionX+=this.ryw__speedX*e*this.ryw_directionX)}}ryw_onOpenUpdate(){this._isInitEnd=!0}onLateUpdate(){if(0!=this._isInitEnd){if(this.ryw_onGravityCheck(),this.ryw_onAssaultedArea()&&s.ryw_Run==this.ryw_state&&(this.ryw_state=s.None),s.ryw_Run==this.ryw_state&&this.ryw_onRun(),1==this.ryw__lastStand&&0==this.ryw_standOnTheGround?(this.transform.localRotationEulerY=180-45*this.ryw_directionX,this.ryw__ani.play("diaoluo02")):0==this.ryw__lastStand&&1==this.ryw_standOnTheGround?s.None==this.ryw_state?(this.transform.localRotationEulerY=180,this.ryw__ani.play("daiji")):s.ryw_Run==this.ryw_state&&this.ryw__ani.play("pao01"):1==this.ryw__lastStand&&1==this.ryw_standOnTheGround&&(s.None==this.ryw__lastState&&s.ryw_Run==this.ryw_state?this.ryw__ani.play("pao01"):s.ryw_Run==this.ryw__lastState&&s.None==this.ryw_state&&this.ryw__ani.play("daiji")),this.transform.localPositionY<-100){G.ryw_instance.ryw_playSound("queenWin"),w.ryw_instance.ryw_dispatch(t.Game_onOverAction,{result:0});Laya.timer.frameLoop(30,this,function(){w.ryw_instance.ryw_dispatch(t.Game_onOver,{result:1})})}this.ryw__lastStand=this.ryw_standOnTheGround,this.ryw__lastState=this.ryw_state}}ryw_onAssaulted(e){for(let r=0;r<this._targetArr.length;r++){if(this._targetArr[r]==e){console.log(this.Type+" 攻击 "+e),this.ryw_state=s.ryw_Attack,this.ryw__ani.play("qingzhu04");let r=!0,i=0;i=this.Sprite3D.transform.localRotationEulerY<0?-90:90,Laya.Tween.to(this.Sprite3D.transform,{localRotationEulerY:this.Sprite3D.transform.localRotationEulerY+i},500);var t=function(){if(this.ryw__ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==r)return Laya.timer.clear(this,t),void this.ryw_onWin();r=!1};Laya.timer.frameLoop(1,this,t);break}}}ryw_onBeAssaulted(e){for(let i=0;i<this._naturalEnemyArr.length;i++){if(this._naturalEnemyArr[i]==e){console.log(this.Type+" 被攻击 "+e),this.ryw_state=s.ryw_Death,this.ryw__ani.play("shibai03"),w.ryw_instance.ryw_dispatch(t.Game_onOverAction,{result:2}),G.ryw_instance.ryw_playSound("warriorWin");let i=!0;var r=function(){if(this.ryw__ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==i)return Laya.timer.clear(this,r),this.ryw__ani.play("ku03"),void this.ryw_onDeath();i=!1};Laya.timer.frameLoop(1,this,r);break}}}ryw_onWin(){G.ryw_instance.ryw_playSound("win")}ryw_onDeath(){G.ryw_instance.ryw_playSound("lost"),console.log("Warrior onDeath"),Laya.timer.once(1200,this,()=>{w.ryw_instance.ryw_dispatch(t.Game_onOver,{result:0}),this.ryw_state=s.None,this.ryw_destroyUnit()})}}class he extends we{constructor(){super(...arguments),this.ryw__lastStand=!0}onAwake(){this._naturalEnemyArr.push(a.ryw_Bear),this._naturalEnemyArr.push(a.ryw_Tiger),this._naturalEnemyArr.push(a.ryw_Wolf),this._naturalEnemyArr.push(a.ryw_Arrow),this._naturalEnemyArr.push(a.ryw_Bomb),this._naturalEnemyArr.push(a.ryw_Cannon),this._naturalEnemyArr.push(a.ryw_Warrior),this.ryw__gracityLenght=-.5}ryw_onLastInit(){this.ryw__collision=this.Sprite3D.getComponent(Laya.PhysicsCollider).colliderShape,this._boxHeighy=this.ryw__collision.sizeY/2,this.ryw__ani=this.Sprite3D.getChildByName("Queen").getComponent(Laya.Animator),this.ryw__ani.enabled=!1,this._isInitEnd=!0}ryw_onOpenUpdate(){this._isInitEnd=!0}onLateUpdate(){0!=this._isInitEnd&&(this.ryw_onGravityCheck(),0==this.ryw__lastStand&&1==this.ryw_standOnTheGround&&w.ryw_instance.ryw_dispatch(t.Game_onQueenStand),this.ryw__lastStand=this.ryw_standOnTheGround)}ryw_onAssaulted(e){for(let t=0;t<this._targetArr.length;t++){if(this._targetArr[t]==e){console.log(this.Type+" 攻击 "+e),this.ryw_state=s.None;break}}}ryw_onBeAssaulted(e){if(s.ryw_Death!=this.ryw_state)for(let i=0;i<this._naturalEnemyArr.length;i++){if(this._naturalEnemyArr[i]==e){if(console.log(this.Type+" 被攻击 "+e),a.ryw_Warrior==e){this.ryw__ani.enabled=!0,this.ryw__ani.play("open"),G.ryw_instance.ryw_playSound("queenWin"),w.ryw_instance.ryw_dispatch(t.Game_onOverAction,{result:0});let e=!0;var r=function(){if(this.ryw__ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==e)return this.ryw__ani.enabled=!1,Laya.timer.clear(this,r),void Laya.timer.once(2e3,this,()=>{this.ryw_onWin()});e=!1};Laya.timer.frameLoop(1,this,r),console.log("UnitType.Queen   胜利")}else{this.ryw_state=s.ryw_Death,this.ryw__ani.enabled=!0,this.ryw__ani.play("broken"),w.ryw_instance.ryw_dispatch(t.Game_onOverAction,{result:1});let e=!0;r=function(){if(this.ryw__ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==e)return this.ryw__ani.enabled=!1,Laya.timer.clear(this,r),void this.ryw_onDeath();e=!1};Laya.timer.frameLoop(1,this,r)}break}}}ryw_onWin(){w.ryw_instance.ryw_dispatch(t.Game_onOver,{result:1})}ryw_onDeath(){G.ryw_instance.ryw_playSound("lost"),console.log("Queen onDeath"),Laya.timer.once(1200,this,()=>{w.ryw_instance.ryw_dispatch(t.Game_onOver,{result:0}),this.ryw_state=s.None,this.ryw_destroyUnit()})}}class ce extends we{constructor(){super(...arguments),this._speedX=-350}onAwake(){this._targetArr.push(a.ryw_Warrior),this._targetArr.push(a.ryw_Queen),this._targetArr.push(a.ryw_Bear),this._targetArr.push(a.ryw_Tiger),this._targetArr.push(a.ryw_Wolf),this._naturalEnemyArr.push(a.ryw_Bomb)}ryw_onLastInit(){this._collision=this.Sprite3D.getComponent(Laya.PhysicsCollider).colliderShape,this._boxHeighy=this._collision.sizeY/2,this._isInitEnd=!0}ryw_onOpenUpdate(){this._isInitEnd=!0,this.Sprite3D.active}onLateUpdate(){if(0==this._isInitEnd)return;this.ryw_onAssaultedArea();let e=new Laya.Vector3;this.transform.getRight(e),e.x*=10*this._speedX,e.y*=10*this._speedX,e.z*=10*this._speedX;var t=this.transform.localPosition;let r=new Laya.Vector3;r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z;var i=this._defaultTimerDelta/1e3;s.ryw_Run==this.ryw_state?this.ryw_runAssaulted(i):s.None==this.ryw_state&&this.ryw_onRayCastSprite(t,r)&&this.ryw_runAssaulted(i)}ryw_onRayCastSprite(e,t){var r=new Laya.HitResult;if(this.Scene3D.physicsSimulation.raycastFromTo(e,t,r),r.succeeded){let e=r.collider.owner;if(null==e||e==this.Sprite3D)return!1;let t=e.name,i=e.getComponent(we);if(null==i)return!1;if(s.ryw_Death==i.ryw_state)return!1;for(let e=0;e<this._targetArr.length;e++){let r=this._targetArr[e];if(i.Type==r)return console.log(this.Sprite3D.name+" 检测到 "+t),!0}}return!1}ryw_runAssaulted(e){s.None==this.ryw_state&&(this.ryw_state=s.ryw_Run,Laya.timer.once(3e3,this,this.ryw_destroyUnit),G.ryw_instance.ryw_playSound("arrow"));let t=new Laya.Vector3;this.transform.getRight(t),t.x*=this._speedX*e,t.y*=this._speedX*e,t.z*=this._speedX*e,this.transform.localPositionX+=t.x,this.transform.localPositionY+=t.y,this.transform.localPositionZ+=t.z}ryw_onAssaulted(e){if(s.ryw_Death!=this.ryw_state)for(let t=0;t<this._targetArr.length;t++){if(this._targetArr[t]==e){console.log(this.Type+" 攻击 "+e),this.ryw_destroyUnit();break}}}ryw_onBeAssaulted(e){if(s.ryw_Death!=this.ryw_state)for(let t=0;t<this._naturalEnemyArr.length;t++){if(this._naturalEnemyArr[t]==e){console.log(this.Type+" 被攻击 "+e),this.ryw_destroyUnit();break}}}onMouseDown(){}}class de extends we{onAwake(){this._targetArr.push(a.ryw_Warrior),this._targetArr.push(a.ryw_Queen),this._targetArr.push(a.ryw_Bear),this._targetArr.push(a.ryw_Tiger),this._targetArr.push(a.ryw_Wolf),this._targetArr.push(a.ryw_Cannon),this._targetArr.push(a.ryw_Arrow)}ryw_onLastInit(){this._special=this.Sprite3D.getChildByName("GameObject").getChildByName("FX_BOOM").getChildByName("boom"),this._special.active=!1;var e=this.Sprite3D.getComponent(Laya.PhysicsCollider);e.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER1,this._collision=e.colliderShape,this._boxHeighy=this._collision.radius,this._isInitEnd=!0}ryw_onOpenUpdate(){this._isInitEnd=!0}onLateUpdate(){0!=this._isInitEnd&&(this.ryw_onGravityCheck(),this.ryw_onAssaultedArea())}ryw_onGravityCheck(){if(0==this._isInitEnd)return;null==this.ryw__lastGravityPos&&(this.ryw__lastGravityPos=this.transform.localPosition.y-this._boxHeighy);var e=this._defaultTimerDelta/1e3;let t=this.ryw__currentGravitySpeed*e+.5*this._g*e*e;t>-.3&&(t=-.3);var r=this.ryw__lastGravityPos+t,i=new Laya.Vector3(this.transform.localPosition.x,this.ryw__lastGravityPos,this.transform.localPosition.z),n=new Laya.Vector3(this.transform.localPosition.x,r,this.transform.localPosition.z);this.ryw_onFallDetection(i,n)?(this.ryw__currentGravitySpeed=-40,this.ryw_standOnTheGround=!0):(this.transform.localPositionY=r+this._boxHeighy,this.ryw__currentGravitySpeed+=this._g*e,this.ryw_standOnTheGround=!1,this.ryw__lastGravityPos=r)}ryw_onFallDetection(e,t){if(this.Scene3D.physicsSimulation.shapeCastAll(this._collision,e,t,this.ryw__outHitArr),0==this.ryw__outHitArr.length)return;let r=!1;for(let e=0;e<this.ryw__outHitArr.length;e++){let t=this.ryw__outHitArr[e];if(t.succeeded){var i=t.collider.owner;if(null==i||this.Sprite3D==i)continue;let e=i.getComponent(we);if(null==e){r=!0;continue}if(s.ryw_Death==this.ryw_state)continue;for(let t=0;t<this._targetArr.length;t++){let r=this._targetArr[t];if(e.ryw_state==s.ryw_Death)break;if(e.Type==r){console.log("发生爆炸"),e.ryw_onBeAssaulted(this.Type),this.ryw_onAssaulted(e.Type);break}}return r=!0}}return r}ryw_onAssaultedArea(){if(s.ryw_Death==this.ryw_state)return;var e=new Laya.Vector3(this.transform.localPosition.x-1*this._boxHeighy,this.transform.localPosition.y,this.transform.localPosition.z),t=new Laya.Vector3(this.transform.localPosition.x+1*this._boxHeighy,this.transform.localPosition.y,this.transform.localPosition.z);return this.ryw_onAreaDetection(e,t)}ryw_onAreaDetection(e,t){if(s.ryw_Death!=this.ryw_state&&(this.Scene3D.physicsSimulation.raycastAllFromTo(e,t,this.ryw__outHitArr),0!=this.ryw__outHitArr.length)){for(let e=0;e<this.ryw__outHitArr.length;e++){let t=this.ryw__outHitArr[e];if(t.succeeded){var r=t.collider.owner;if(null==r||this.Sprite3D==r)continue;var i=r.getComponent(we);if(null==i)continue;if(s.ryw_Death==i.ryw_state)continue;for(let e=0;e<this._targetArr.length;e++){let t=this._targetArr[e];if(i.Type==t){i.ryw_onBeAssaulted(this.Type),this.ryw_onAssaulted(i.Type);break}}return!0}}return!1}}ryw_onAssaulted(e){if(s.ryw_Death!=this.ryw_state)for(let t=0;t<this._targetArr.length;t++){if(this._targetArr[t]==e){console.log(this.Type+" 攻击 "+e),this.ryw_state=s.ryw_Death,this.onBombExplosion();break}}}ryw_onBeAssaulted(e){if(s.ryw_Death!=this.ryw_state)for(let t=0;t<this._naturalEnemyArr.length;t++){if(this._naturalEnemyArr[t]==e){console.log(this.Type+" 被攻击 "+e),this.ryw_state=s.ryw_Death,this.onBombExplosion();break}}}onBombExplosion(){this.ryw_state=s.ryw_Death,G.ryw_instance.ryw_playSound("bomb"),this._special.active=!0,this.transform.localScale=new Laya.Vector3,Laya.timer.once(1e3,this,()=>{this._special.active=!1,this.ryw_destroyUnit()})}}class ge extends Laya.Script3D{constructor(){super(...arguments),this._targetArr=new Array,this._outHitArr=new Array,this._boxWidth=0,this._directionX=1,this._speedBallX=300,this._isStop=!1,this._defaultTimerDelta=16}onAwake(){this._targetArr.push(a.ryw_Warrior),this._targetArr.push(a.ryw_Queen),this._targetArr.push(a.ryw_Bear),this._targetArr.push(a.ryw_Tiger),this._targetArr.push(a.ryw_Wolf),this._transform=this.owner.transform,this._special=this.owner.getChildByName("Bomb").getChildByName("FX_BOOM").getChildByName("boom"),this._special.active=!1,this._collision=this.owner.getComponent(Laya.PhysicsCollider).colliderShape,this._boxWidth=this._collision.radius}onLateUpdate(){if(0!=this.owner.active&&!this._isStop){null==this._lastPos&&(this._lastPos=this._transform.localPosition);var e=new Laya.Vector3;e.x=this._transform.localPosition.x+this._boxWidth,e.y=this._transform.localPosition.y,e.z=this._transform.localPosition.z,this.ryw_onAssaultedDetection(this._lastPos,e)||this.ryw_runAssaulted(),this._lastPos=e}}ryw_onSetCannon(e,t){this._cannon=e,this._scene3D=e.Scene3D,this._type=e.Type,this._barrel=e.ryw_getBarrel(),this._orientation=t,this.owner.active=!0,Laya.timer.once(1e3,this,this.ryw_destroyUnit)}ryw_onAssaultedDetection(e,t){if(this._scene3D.physicsSimulation.shapeCastAll(this._collision,e,t,this._outHitArr),0!=this._outHitArr.length){for(let e=0;e<this._outHitArr.length;e++){let t=this._outHitArr[e];if(t.succeeded){var r=t.collider.owner;if(null==r||this.owner==r)continue;let e=r.getComponent(we);if(null==e||e.ryw_state==s.ryw_Death||a.ryw_Cannon==e.Type)continue;let i=!1;for(let t=0;t<this._targetArr.length;t++){let r=this._targetArr[t];if(e.Type==r){e.ryw_onBeAssaulted(this._type),this.ryw_onAssaulted(e.Type),i=!0;break}}return i||(console.log(t.collider.owner.name),this.ryw_onAssaulted(a.None)),!0}}return!1}}ryw_runAssaulted(){let e=new Laya.Vector3;var t=this._defaultTimerDelta/1e3;e.x=this._speedBallX*t*this._orientation.x,e.y=this._speedBallX*t*this._orientation.y,e.z=this._speedBallX*t*this._orientation.z,this._transform.localPositionX+=e.x,this._transform.localPositionY+=e.y,this._transform.localPositionZ+=e.z}ryw_onAssaulted(e){console.log(this._type+" 攻击 "+e),this._cannon.ryw_state=s.None,this._isStop=!0,this.ryw_onBombExplosion()}ryw_onBeAssaulted(e){console.log(e+" 被攻击 "+this._type),this._cannon.ryw_state=s.None,this._isStop=!0,this.ryw_onBombExplosion()}ryw_onBombExplosion(){G.ryw_instance.ryw_playSound("bomb"),this._special.active=!0,this.owner.transform.localScale=new Laya.Vector3,Laya.timer.once(1e3,this,()=>{this._special.active=!1,this.ryw_destroyUnit()})}ryw_destroyUnit(){this.owner.removeSelf(),this.owner.destroy(!0)}onDestroy(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),Laya.Tween.clearAll(this.owner),Laya.timer.clearAll(this.owner),Laya.Tween.clearAll(this._transform),Laya.timer.clearAll(this._transform)}}class pe extends we{constructor(){super(...arguments),this.directionX=1,this._speedX=20}onAwake(){this._targetArr.push(a.ryw_Warrior),this._targetArr.push(a.ryw_Queen),this._targetArr.push(a.ryw_Bear),this._targetArr.push(a.ryw_Tiger),this._targetArr.push(a.ryw_Wolf),this._naturalEnemyArr.push(a.ryw_Bomb)}ryw_onLastInit(){this._barrel=this.Sprite3D.getChildByName("Barrel"),this._ballSprite3D=this.Scene3D.getChildByName("Cannonball1"),this._collision=this.Sprite3D.getComponent(Laya.PhysicsCollider).colliderShape,this._boxHeighy=this._collision.sizeY/2-this._collision.localOffset.y,this._ani=this.Sprite3D.getChildByName("Cannon").getChildByName("Cannon").getComponent(Laya.Animator),console.log("Cannon  ryw_onLastInit "),this._ani.enabled=!1,this._isInitEnd=!0}ryw_onOpenUpdate(){this._isInitEnd=!0}ryw_getBarrel(){return this._barrel}onLateUpdate(){if(0==this._isInitEnd)return;this.ryw_onGravityCheck();let e=new Laya.Vector3;this.transform.getRight(e);var t=this.transform.localPosition;let r=new Laya.Vector3;r.x=e.x*this._speedX*5+t.x,r.y=e.y*this._speedX*5+t.y,r.z=e.z*this._speedX*5+t.z;var i=this._defaultTimerDelta/1e3;s.None==this.ryw_state&&this.ryw_onRayCastSprite(t,r)&&this.ryw_runAssaulted(i,e)}ryw_onRayCastSprite(e,t){var r=new Laya.HitResult;if(this.Scene3D.physicsSimulation.raycastFromTo(e,t,r),r.succeeded){let e=r.collider.owner;if(null==e||e==this.Sprite3D)return!1;e.name;let t=e.getComponent(we);if(null==t)return!1;if(s.ryw_Death==t.ryw_state)return!1;for(let e=0;e<this._targetArr.length;e++){let r=this._targetArr[e];if(t.Type==r)return t.Sprite3D.transform.localPositionX<this.Sprite3D.transform.localPositionX&&(this.directionX=-1),!0}}return!1}ryw_runAssaulted(e,t){if(s.None==this.ryw_state){this._ani.enabled=!0,console.log("Cannon  ryw_runAssaulted  play gongji"),this.ryw_state=s.ryw_Run;let e=!0;var r=function(){if(this._ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==e)return Laya.timer.clear(this,r),void(this._ani.enabled=!1);e=!1};Laya.timer.frameLoop(1,this,r),Laya.timer.once(0,this,()=>{G.ryw_instance.ryw_playSound("cannon");var e=Laya.Sprite3D.instantiate(this._ballSprite3D),r=e.addComponent(ge);this.Scene3D.addChild(e),e.transform.localPosition=this.Sprite3D.transform.localPosition,r.ryw_onSetCannon(this,t)})}}ryw_onAssaulted(e){if(s.ryw_Death!=this.ryw_state)for(let t=0;t<this._targetArr.length;t++){if(this._targetArr[t]==e){console.log(this.Type+" 攻击 "+e);break}}}ryw_onBeAssaulted(e){for(let t=0;t<this._naturalEnemyArr.length;t++){if(this._naturalEnemyArr[t]==e){console.log(this.Type+" 被攻击 "+e),this.ryw_state=s.None,this.ryw_destroyUnit();break}}}}class ue extends we{constructor(){super(...arguments),this._speedX=50,this._directionX=1}onAwake(){this._targetArr.push(a.ryw_Warrior),this._targetArr.push(a.ryw_Queen),this._targetArr.push(a.ryw_Wolf),this._targetArr.push(a.ryw_Tiger),this._naturalEnemyArr.push(a.ryw_Arrow),this._naturalEnemyArr.push(a.ryw_Bomb),this._naturalEnemyArr.push(a.ryw_Cannon)}ryw_onLastInit(){this._collision=this.Sprite3D.getComponent(Laya.PhysicsCollider).colliderShape,this._boxHeighy=this._collision.sizeY/2-this._collision.localOffset.y,this._ani=this.Sprite3D.getChildByName("Bear").getComponent(Laya.Animator),this._ani.play("lod"),this._isInitEnd=!0}ryw_onOpenUpdate(){this._isInitEnd=!0}onLateUpdate(){if(0!=this._isInitEnd)if(this.ryw_onGravityCheck(),this.ryw_onAssaultedArea()&&(s.None,this.ryw_state),this.ryw_standOnTheGround)this.ryw_onEnemyCheck();else if(s.ryw_Run==this.ryw_state){var e=this._defaultTimerDelta/1e3;this.ryw_runAssaulted(e)}}ryw_runAssaulted(e){this.ryw_state!=s.ryw_Death&&(s.None==this.ryw_state&&(this.ryw_state=s.ryw_Run,this._ani.play("pao"),this.transform.localRotationEulerY=1==this._directionX?180:0),this._speedX=this.ryw_standOnTheGround?50:10,this.transform.localPositionX+=this._speedX*this._directionX*e)}ryw_onEnemyCheck(){if(this.ryw_state!=s.ryw_Death){var e=this.transform.localPosition,t=new Laya.Vector3;t.y=e.y,t.z=e.z;var r=this._defaultTimerDelta/1e3;s.ryw_Run==this.ryw_state?this.ryw_runAssaulted(r):s.None==this.ryw_state&&(this._directionX=1,t.x=e.x+100*this._directionX,this.ryw_onRayCastSprite(e,t)?this.ryw_runAssaulted(r):(this._directionX=-1,t.x=e.x+100*this._directionX,this.ryw_onRayCastSprite(e,t)&&this.ryw_runAssaulted(r)))}}ryw_onAssaulted(e){if(s.ryw_Death!=this.ryw_state)for(let r=0;r<this._targetArr.length;r++){if(this._targetArr[r]==e){console.log(this.Type+" 攻击 "+e),this.ryw_state=s.ryw_Attack,this._ani.play("gongji"),G.ryw_instance.ryw_playSound("bear");let r=!0;var t=function(){if(this._ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==r)return s.ryw_Death!=this.ryw_state&&(this._ani.play("lod"),this.ryw_state=s.None),void Laya.timer.clear(this,t);r=!1};Laya.timer.frameLoop(1,this,t);break}}}ryw_onBeAssaulted(e){if(this.ryw_state!=s.ryw_Death){console.log("onBeAssaulted  unit = "+e);for(let r=0;r<this._naturalEnemyArr.length;r++){if(this._naturalEnemyArr[r]==e){console.log(this.Type+" 被攻击 "+e),this.ryw_state=s.ryw_Death,this._ani.play("die"),G.ryw_instance.ryw_playSound("animalDeath");let r=!0;var t=function(){if(this._ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==r)return this._ani.speed=0,Laya.timer.clear(this,t),void this.ryw_onDeath();r=!1};Laya.timer.frameLoop(1,this,t);break}}}}ryw_onDeath(){let e=0;var t=function(){e>=5&&(Laya.timer.clear(this,t),console.log("Bear onDeath index>=5"),this.ryw_destroyUnit()),this.transform.localScale=e%2==0?new Laya.Vector3:new Laya.Vector3(1,1,1),e++};Laya.timer.loop(150,this,t)}ryw_onRayCastSprite(e,t){var r=new Laya.HitResult;if(this.Scene3D.physicsSimulation.raycastFromTo(e,t,r,Laya.Physics3DUtils.COLLISIONFILTERGROUP_DEFAULTFILTER,Laya.Physics3DUtils.COLLISIONFILTERGROUP_ALLFILTER^Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER1),r.succeeded){let e=r.collider.owner;if(null==e||e==this.Sprite3D)return!1;e.name;let t=e.getComponent(we);if(null==t)return!1;if(s.ryw_Death==t.ryw_state)return!1;for(let e=0;e<this._targetArr.length;e++){let r=this._targetArr[e];if(t.Type==r)return!0}}return!1}}class me extends we{constructor(){super(...arguments),this._speedX=40,this._directionX=1,this._lastStand=!0}onAwake(){this._targetArr.push(a.ryw_Warrior),this._targetArr.push(a.ryw_Queen),this._naturalEnemyArr.push(a.ryw_Bear),this._naturalEnemyArr.push(a.ryw_Arrow),this._naturalEnemyArr.push(a.ryw_Bomb),this._naturalEnemyArr.push(a.ryw_Cannon)}ryw_onLastInit(){this._collision=this.Sprite3D.getComponent(Laya.PhysicsCollider).colliderShape,this._boxHeighy=this._collision.sizeY/2-this._collision.localOffset.y,console.log(" this._collision.localOffset.y = "+this._collision.localOffset.y),this._ani=this.Sprite3D.getChildByName("Tiger").getComponent(Laya.Animator),this._ani.speed=.5,this._ani.play("load"),this._isInitEnd=!0}ryw_onOpenUpdate(){this._isInitEnd=!0}onLateUpdate(){if(0!=this._isInitEnd){if(this.ryw_onGravityCheck(),this.ryw_onAssaultedArea(),this.ryw_standOnTheGround)this.ryw_onEnemyCheck();else if(s.ryw_Run==this.ryw_state){var e=this._defaultTimerDelta/1e3;this.ryw_runAssaulted(e)}this._lastStand=this.ryw_standOnTheGround}}ryw_onEnemyCheck(){if(this.ryw_state!=s.ryw_Death){var e=this.transform.localPosition,t=new Laya.Vector3;t.y=e.y,t.z=e.z;var r=this._defaultTimerDelta/1e3;this.ryw_standOnTheGround?(this._directionX=1,t.x=e.x+100*this._directionX,this.ryw_onRayCastSprite(e,t)?this.ryw_runAssaulted(r):(this._directionX=-1,t.x=e.x+100*this._directionX,this.ryw_onRayCastSprite(e,t)?this.ryw_runAssaulted(r):s.ryw_Run==this.ryw_state&&(this.ryw_state=s.None,this._ani.play("load")))):s.ryw_Run==this.ryw_state&&this.ryw_runAssaulted(r)}}ryw_runAssaulted(e){this.ryw_state!=s.ryw_Death&&(s.None==this.ryw_state&&(this.ryw_state=s.ryw_Run,this._ani.play("walk"),this.transform.localRotationEulerY=1==this._directionX?180:0),this._speedX=this.ryw_standOnTheGround?40:10,this.transform.localPositionX+=this._speedX*this._directionX*e)}ryw_onRayCastSprite(e,t){var r=new Laya.HitResult;if(this.Scene3D.physicsSimulation.raycastFromTo(e,t,r,Laya.Physics3DUtils.COLLISIONFILTERGROUP_DEFAULTFILTER,Laya.Physics3DUtils.COLLISIONFILTERGROUP_ALLFILTER^Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER1),r.succeeded){let e=r.collider.owner;if(null==e||e==this.Sprite3D)return!1;e.name;let t=e.getComponent(we);if(null==t)return!1;if(s.ryw_Death==t.ryw_state)return!1;for(let e=0;e<this._targetArr.length;e++){let r=this._targetArr[e];if(t.Type==r)return!0}}return!1}ryw_onAssaulted(e){if(s.ryw_Death!=this.ryw_state)for(let r=0;r<this._targetArr.length;r++){if(this._targetArr[r]==e){console.log(this.Type+" 攻击 "+e),this.ryw_state=s.ryw_Attack,this._ani.play("gongji"),G.ryw_instance.ryw_playSound("tiger");let r=!0;var t=function(){if(this._ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==r)return s.ryw_Death!=this.ryw_state&&(this._ani.play("load"),this.ryw_state=s.None),void Laya.timer.clear(this,t);r=!1};Laya.timer.frameLoop(1,this,t);break}}}ryw_onBeAssaulted(e){if(this.ryw_state!=s.ryw_Death)for(let r=0;r<this._naturalEnemyArr.length;r++){if(this._naturalEnemyArr[r]==e){console.log(this.Type+" 被攻击 "+e),this.ryw_state=s.ryw_Death,this._ani.play("die"),G.ryw_instance.ryw_playSound("animalDeath");let r=!0;var t=function(){if(this._ani.getCurrentAnimatorPlayState().normalizedTime>=1&&0==r)return this._ani.speed=0,Laya.timer.clear(this,t),void this.ryw_onDeath();r=!1};Laya.timer.frameLoop(1,this,t);break}}}ryw_onDeath(){let e=0;var t=function(){e>=5&&(Laya.timer.clear(this,t),this.ryw_destroyUnit()),this.transform.localScale=e%2==0?new Laya.Vector3:new Laya.Vector3(1,1,1),e++};Laya.timer.loop(150,this,t)}}class Be extends we{constructor(){super(...arguments),this._speedX=20,this._directionX=1}onAwake(){this._targetArr.push(a.ryw_Warrior),this._targetArr.push(a.ryw_Queen),this._naturalEnemyArr.push(a.ryw_Bear),this._naturalEnemyArr.push(a.ryw_Arrow),this._naturalEnemyArr.push(a.ryw_Bomb),this._naturalEnemyArr.push(a.ryw_Cannon)}ryw_onLastInit(){this._collision=this.Sprite3D.getComponent(Laya.PhysicsCollider).colliderShape,this._boxHeighy=this._collision.sizeY/2-this._collision.localOffset.y,this._ani=this.Sprite3D.getChildByName("Wolf").getComponent(Laya.Animator),this._ani.play("lod"),this._isInitEnd=!0}ryw_onOpenUpdate(){this._isInitEnd=!0}onLateUpdate(){if(0!=this._isInitEnd){this.ryw_onGravityCheck(),this.ryw_onAssaultedArea()&&(s.None,this.ryw_state);var e=this.transform.localPosition,t=new Laya.Vector3;t.y=e.y,t.z=e.z;var r=this._defaultTimerDelta/1e3;s.ryw_Run==this.ryw_state?this.ryw_runAssaulted(r):s.None==this.ryw_state&&(this._directionX=1,t.x=e.x+100*this._directionX,this.ryw_onRayCastSprite(e,t)?this.ryw_runAssaulted(r):(this._directionX=-1,t.x=e.x+100*this._directionX,this.ryw_onRayCastSprite(e,t)&&this.ryw_runAssaulted(r)))}}ryw_onRayCastSprite(e,t){var r=new Laya.HitResult;if(this.Scene3D.physicsSimulation.raycastFromTo(e,t,r),r.succeeded){let e=r.collider.owner;if(null==e||e==this.Sprite3D)return!1;e.name;let t=e.getComponent(we);if(null==t)return!1;if(s.ryw_Death==t.ryw_state)return!1;for(let e=0;e<this._targetArr.length;e++){let r=this._targetArr[e];if(t.Type==r)return!0}}return!1}ryw_runAssaulted(e){s.None==this.ryw_state&&(this.ryw_state=s.ryw_Run,this._ani.play("pao"),1==this._directionX&&(this.transform.localRotationEulerY=1==this._directionX?180:0)),this.transform.localPositionX+=this._speedX*this._directionX*e}ryw_onAssaulted(e){for(let t=0;t<this._targetArr.length;t++){if(this._targetArr[t]==e){console.log(this.Type+" 攻击 "+e),this.ryw_state=s.ryw_Attack,this._ani.play("gongji"),Laya.timer.frameOnce(1,this,function(){this._ani.getCurrentAnimatorPlayState().normalizedTime>=1&&(this._ani.play("load"),this.ryw_state=s.None)});break}}}ryw_onBeAssaulted(e){for(let t=0;t<this._naturalEnemyArr.length;t++){if(this._naturalEnemyArr[t]==e){console.log(this.Type+" 被攻击 "+e),this.ryw_state=s.ryw_Death,this._ani.play("die"),Laya.timer.frameOnce(1,this,function(){this._ani.getCurrentAnimatorPlayState().normalizedTime>=1&&(this.ryw_state=s.None,this.ryw_onDeath())});break}}}ryw_onDeath(){G.ryw_instance.ryw_playSound("animalDeath"),this.ryw_destroyUnit()}}class Le extends pe{ryw_onGravityCheck(){}}class ve{constructor(e){this.ryw__level=e}ryw_create(e,t){var r=null==t?String(e):t;if(r){var i=this.ryw__level.Scene3D.getChildByName(r);if(i){console.log("UnitFactory  name = "+r);var n=null;switch(e){case a.ryw_Warrior:n=i.addComponent(le);break;case a.ryw_Queen:n=i.addComponent(he);break;case a.ryw_Arrow:n=i.addComponent(ce);break;case a.ryw_Bomb:n=i.addComponent(de);break;case a.ryw_Cannon:n=i.addComponent(pe);break;case a.ryw_CannonGravity:n=i.addComponent(Le);break;case a.ryw_Cannonball:n=i.addComponent(ge);break;case a.ryw_Bear:n=i.addComponent(ue);break;case a.ryw_Tiger:n=i.addComponent(me);break;case a.ryw_Wolf:n=i.addComponent(Be);break;default:n=i.addComponent(we)}return e&&(e==a.ryw_CannonGravity&&(e=a.ryw_Cannon),n.ryw_onInit(this.ryw__level.Scene3D,e)),n}}return null}}class Ce{static ryw_vibrateShort(){Ce.ryw_isEnable&&(Laya.Browser.onMiniGame?Laya.Browser.window.wx.vibrateShort():Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.vibrateShort():Laya.Browser.onQQMiniGame?Laya.Browser.window.qq.vibrateShort():M.CallNativeFunc("vibrateShort"))}static ryw_vibrateLong(){Ce.ryw_isEnable&&(Laya.Browser.onMiniGame?Laya.Browser.window.wx.vibrateLong():Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.vibrateLong():Laya.Browser.onQQMiniGame?Laya.Browser.window.qq.vibrateLong():M.CallNativeFunc("vibrateLong"))}static ryw_vibrate(e){if(Ce.ryw_isEnable)if(Laya.Browser.onMiniGame){let t=e/15,r=0,i={count:t,index:r};Laya.timer.loop(16,i,function(){Ce.ryw_vibrateShort(),++r>t&&Laya.timer.clearAll(i)})}else if(Laya.Browser.onQGMiniGame){let t=e/20,r=0,i={count:t,index:r};Laya.timer.loop(21,i,function(){Ce.ryw_vibrateShort(),++r>t&&Laya.timer.clearAll(i)})}else if(Laya.Browser.onQQMiniGame){let t=e/20,r=0,i={count:t,index:r};Laya.timer.loop(21,i,function(){Ce.ryw_vibrateShort(),++r>t&&Laya.timer.clearAll(i)})}else if(Laya.Browser.onAndroid||Laya.Browser.onIOS){let t=e/20,r=0,i={count:t,index:r};Laya.timer.loop(21,i,function(){Ce.ryw_vibrateShort(),++r>t&&Laya.timer.clearAll(i)})}}}Ce.ryw_isEnable=!0;class Se extends Laya.Script3D{constructor(){super(...arguments),this.ryw__isAllowTouch=!0}onAwake(){this.ryw__collider=this.owner.getComponent(Laya.PhysicsCollider)}onEnable(){w.ryw_instance.ryw_regEvemt(t.Game_onAllowTouch,this,this.ryw_onAllowTouch),w.ryw_instance.ryw_regEvemt(t.Game_OnMovePike,this,this.ryw_onForbidTouch)}onDisable(){w.ryw_instance.ryw_removeEvent(t.Game_onAllowTouch,this,this.ryw_onAllowTouch),w.ryw_instance.ryw_removeEvent(t.Game_OnMovePike,this,this.ryw_onForbidTouch)}ryw_onAllowTouch(){this.ryw__isAllowTouch=!0}ryw_onForbidTouch(){this.ryw__isAllowTouch=!1}ryw_onSetPike(e){this.ryw__pike=e}ryw_onMyPikeMouseDown(){return this.ryw__pike.ryw_tipsModeForbid?(console.log("提示模式 此钎子不能动 ",this.ryw__pike.owner.name),G.ryw_instance.ryw_playSound("err"),this.ryw__pike.ryw_onVibrate(),void Ce.ryw_vibrateShort()):0==this.ryw__isAllowTouch?(G.ryw_instance.ryw_playSound("err"),this.ryw__pike.ryw_onVibrate(),void Ce.ryw_vibrateShort()):(this.ryw__isAllowTouch=!1,this.ryw__collider.enabled=!1,void this.ryw__pike.ryw_onMyMouseDown())}}class fe extends Laya.Script3D{constructor(){super(...arguments),this.ryw__gravitySpeed=784,this.ryw__gravityTIme=3,this.ryw_isMove=!1,this._isVirate=!1,this.ryw_tipsModeForbid=!1}onAwake(){this._transform=this.owner.transform,this.owner.getChildByName("Cylinder").getChildByName("Cylinder_0").addComponent(Se).ryw_onSetPike(this),this.owner.getChildByName("pb_Mesh").addComponent(Se).ryw_onSetPike(this)}ryw_onAssaulted(e){}ryw_onBeAssaulted(e){}ryw_showTipsImage(){}ryw_onVibrate(){if(this._isVirate)return;this._isVirate=!0,this._beginVibratePos=new Laya.Vector3(this._transform.localPosition.x,this._transform.localPosition.y,this._transform.localPosition.z);let e=new Laya.Vector3;this._transform.getRight(e);var t=this;var r=0,i=function(){Laya.Tween.to(t._transform,{localPositionX:.5*e.x*-1+t._beginVibratePos.x,localPositionY:.5*e.y*-1+t._beginVibratePos.y,localPositionZ:.5*e.z*-1+t._beginVibratePos.z},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{r>=1?function(){Laya.Tween.to(t._transform,{localPositionX:t._beginVibratePos.x,localPositionY:t._beginVibratePos.y,localPositionZ:t._beginVibratePos.z},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{t._isVirate=!1}))}():n(),r++}))},n=function(){Laya.Tween.to(t._transform,{localPositionX:.5*e.x+t._beginVibratePos.x,localPositionY:.5*e.y+t._beginVibratePos.y,localPositionZ:.5*e.z+t._beginVibratePos.z},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{i()}))};n()}ryw_onMyMouseDown(){this._isVirate&&(this._isVirate=!1,this.ryw_onClearTweenAndTimer(),this._transform.localPositionX=this._beginVibratePos.x,this._transform.localPositionY=this._beginVibratePos.y,this._transform.localPositionZ=this._beginVibratePos.z);let e=new Laya.Vector3;this._transform.getRight(e),e.x*=this.ryw__gravitySpeed*this.ryw__gravityTIme,e.y*=this.ryw__gravitySpeed*this.ryw__gravityTIme,e.z*=this.ryw__gravitySpeed*this.ryw__gravityTIme;let r=new Laya.Vector3;r.x=e.x+this._transform.localPositionX,r.y=e.y+this._transform.localPositionY,r.z=e.z+this._transform.localPositionZ,this.ryw__gravityTween=Laya.Tween.to(this._transform,{localPositionX:r.x,localPositionY:r.y,localPositionZ:r.z},1e3*this.ryw__gravityTIme,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.ryw_destroyUnit()})),this.ryw_isMove=!0,w.ryw_instance.ryw_dispatch(t.Game_OnMovePike,{pike:this}),G.ryw_instance.ryw_playSound("chou")}ryw_destroyUnit(){this.owner.removeSelf(),this.owner.destroy(!0)}onDestroy(){this.ryw_onClearTweenAndTimer()}ryw_onClearTweenAndTimer(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),Laya.Tween.clearAll(this.owner),Laya.timer.clearAll(this.owner),Laya.Tween.clearAll(this._transform),Laya.timer.clearAll(this._transform)}}!function(e){e[e.ryw_playing=0]="ryw_playing",e[e.ryw_gameover=1]="ryw_gameover"}(o||(o={}));class Ae extends Laya.Script3D{constructor(){super(),this._onPostValue=!0,this.useBgArr={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},this.optimalSolutionPathArr={0:[0],1:[0,1,2],2:[0,2],3:[1,0],4:[2,1,0],5:[3,1,0,2,4],6:[0,2,1],7:[0,1,2],8:[2,1,0,3],9:[1,0],10:[2,1,0],11:[0,1],12:[2,0,1],13:[0,3,2,1],14:[1],15:[4,3,0,1,5,2],16:[2,1,0],17:[2,5,4,1],18:[2,0,1,5],19:[2,1,0,3,4],20:[4,1,0],21:[3,2,0,1],22:[0,2,3,1],23:[0,1,3,5],24:[1,0,3],25:[2,0,3,1,4],26:[0,2],27:[1,3,2,0,4],28:[1,2,4,3,5,0],29:[1,2,3,0],30:[1,2,3,4,0],31:[1,2,3,0],32:[1,4,3],33:[3,2,4],34:[1,0,2],35:[4,1,0,3,2],36:[1,0,3]},this._levelPikePathArr={0:[[0]],1:[[1,2]],2:[[0,2]],3:[[0,1]],4:[[0,1]],5:[[1,2,4]],6:[[1,2]],7:[[1,2]],8:[[0,1,2,3]],9:[[0,1]],10:[[0,2]],11:[[1]],12:[[1]],13:[[1,2,3]],14:[[1]],15:[[2,5]],16:[[0,2]],17:[[1,2,4]],18:[[1,2,5]],19:[[0,1,2,3,4]],20:[[0,1],[0,2]],21:[[1,2,3]],22:[[0,1,3]],23:[[1,3,5],[1,2,4,5]],24:[[0,1,3]],25:[[0,1,3,4]],26:[[0,2]],27:[[0,1,2,4]],28:[[0,1,2,5],[0,1,3,4,5]],29:[[0,1,3]],30:[[0,1,4]],31:[[0]],32:[[1,3]],33:[[2,3,4],[0,1,3,4]],34:[[0,2]],35:[[0,1,2,3,4]],36:[[0,1,3]]},this._pikePathArr=new Array,this._pikeAll=new Array,this._solutionArr=new Array,this._unitArr=new Array,this._isForbidTouch=!1,this._levelIndex=1,this._isTipMode=!1,this.point=new Laya.Vector2,this._outHitResult=new Laya.HitResult,this.gameState=o.ryw_playing}get Scene3D(){return this._ownerScene3D}onAwake(){this._isForbidTouch=!0,this.gameState=o.ryw_playing,this._ownerScene3D=this.owner,this._unitFactory=new ve(this);for(var e=0;e<this.Scene3D.numChildren;e++){var t=this.Scene3D.getChildAt(e);if(-1!=t.name.indexOf("Pike")){var r=t.addComponent(fe);this._pikeAll.push(r)}else if(-1!=t.name.indexOf("Camera")){this._camera=t;let e=Number(t.name.slice(6));console.log("Camera  num = ",e),this._camera.orthographicVerticalSize=1.9*e}else-1!=t.name.indexOf(""+a.ryw_Warrior)?this._warrior=this.ryw_addUnit(a.ryw_Warrior,t.name):-1!=t.name.indexOf(""+a.ryw_Queen)?this._queen=this.ryw_addUnit(a.ryw_Queen,t.name):-1!=t.name.indexOf(""+a.ryw_Bomb)?this.ryw_addUnit(a.ryw_Bomb,t.name):-1!=t.name.indexOf(""+a.ryw_Bear)?this.ryw_addUnit(a.ryw_Bear,t.name):-1!=t.name.indexOf(""+a.ryw_CannonGravity)?this.ryw_addUnit(a.ryw_CannonGravity,t.name):-1!=t.name.indexOf(""+a.ryw_Cannonball)||(-1!=t.name.indexOf(""+a.ryw_Cannon)?this.ryw_addUnit(a.ryw_Cannon,t.name):-1!=t.name.indexOf(""+a.ryw_Arrow)?this.ryw_addUnit(a.ryw_Arrow,t.name):-1!=t.name.indexOf(""+a.ryw_Tiger)&&this.ryw_addUnit(a.ryw_Tiger,t.name))}}ryw_onShowGameGuide(e){var r=new Laya.Vector4,i=new Laya.Vector4,n=new Laya.Vector3,a=e.owner.transform,s=e.owner.getChildByName("Cylinder").transform.scale;a.getRight(n);var o=a.position.clone(),_=new Laya.Vector3;_.x=-1*s.y*75/100*4*n.x+o.x,_.y=-1*s.y*75/100*4*n.y+o.y,_.z=-1*s.y*75/100*4*n.z+o.z;var y=new Laya.Vector3;y.x=-1*s.y*25/100*4*n.x+o.x,y.y=-1*s.y*25/100*4*n.y+o.y,y.z=-1*s.y*25/100*4*n.z+o.z,this._camera.viewport.project(_,this._camera.projectionViewMatrix,r),this._camera.viewport.project(y,this._camera.projectionViewMatrix,i),w.ryw_instance.ryw_dispatch(t.Game_onShowGuide,{x:r.x/Laya.stage.clientScaleX,y:r.y/Laya.stage.clientScaleY,endX:i.x/Laya.stage.clientScaleX,endY:i.y/Laya.stage.clientScaleY})}onStart(){var e=this._warrior.transform.localPosition,t=this._queen.transform.localPosition;e.x>t.x?this._warrior.ryw_directionX=-1:this._warrior.ryw_directionX=1,this._ray=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),this.point=new Laya.Vector2,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}onDestroy(){this.gameState=o.ryw_gameover,this.Scene3D.offAll()}onMouseDown(){if(this.point.x=Laya.MouseManager.instance.mouseX/Laya.stage.clientScaleX,this.point.y=Laya.MouseManager.instance.mouseY/Laya.stage.clientScaleY,this.gameState!=o.ryw_gameover&&(this._camera.viewportPointToRay(this.point,this._ray),this.Scene3D.physicsSimulation.rayCast(this._ray,this._outHitResult),this._outHitResult.succeeded)){let e=this._outHitResult.collider.owner.getComponent(Se);e&&(console.log("LevelBase onMouseDown PikeBody"),e.ryw_onMyPikeMouseDown())}}ryw_addUnit(e,t){var r;return r=this._unitFactory.ryw_create(e,t),this._unitArr.push(r),r}onLateUpdate(){if(0!=this._isForbidTouch){for(let e=0;e<this._unitArr.length;e++){let t=this._unitArr[e];if(null!=t&&(t.ryw_state==s.ryw_Run||t.ryw_state==s.ryw_Attack||0==t.ryw_standOnTheGround))return}this._isForbidTouch=!1,w.ryw_instance.ryw_dispatch(t.Game_onAllowTouch)}}onEnable(){w.ryw_instance.ryw_regEvemt(t.Game_OnMovePike,this,this.ryw_onMovePikeCall),w.ryw_instance.ryw_regEvemt(t.Game_onOverAction,this,this.ryw_onOverAction),w.ryw_instance.ryw_regEvemt(t.Game_onQueenStand,this,this.ryw_onSaveQueen),w.ryw_instance.ryw_regEvemt(t.Game_onOver,this,this.ryw_onOver)}onDisable(){w.ryw_instance.ryw_removeEvent(t.Game_OnMovePike,this,this.ryw_onMovePikeCall),w.ryw_instance.ryw_removeEvent(t.Game_onOverAction,this,this.ryw_onOverAction),w.ryw_instance.ryw_removeEvent(t.Game_onQueenStand,this,this.ryw_onSaveQueen),w.ryw_instance.ryw_removeEvent(t.Game_onOver,this,this.ryw_onOver)}ryw_setTipsMode(e){if(console.log("setTipsMode  value = ",e),0==e)return;this._isTipMode=!0,this.ryw_tipsSetPikeForbid(),this._solutionArr=this.optimalSolutionPathArr[this._levelIndex-1];let t=this;Laya.timer.once(1e3,this,()=>{let e=t._solutionArr[0];t.ryw_tipsSetPikeForbid(e)})}ryw_tipsSetPikeForbid(e){console.log("tipsSetPikeForbid   num = ",e);for(let t=0;t<this._pikeAll.length;t++){let r=this._pikeAll[t];if(null!=r)if(null==e)r.ryw_tipsModeForbid=!0;else{if(console.log("pike.owner.name  = ",r.owner.name),-1!=r.owner.name.indexOf("Pike"+e)){r.ryw_tipsModeForbid=!1,this.ryw_onShowGameGuide(r);break}r.ryw_tipsModeForbid=!0}}}ryw_onSetPikePath(e){this._levelIndex=e;let t=this;Laya.Sprite3D.load("subRes/LayaScene/Conventional/beijing.lh",Laya.Handler.create(null,function(e){t.Scene3D.addChild(e)})),this._pikePathArr=this._levelPikePathArr[e-1],1==e&&this.ryw_onShowGameGuide(this._pikeAll[0])}ryw_onMovePikeCall(e){var r=e.pike;if(this._isTipMode){var i=r.owner.name.substring(4);console.log("onMovePikeCall   indexStr = ",i);var n=Number(i);let e=this._solutionArr[0];if(console.log("onMovePikeCall  num2 = ",e),n==e){this._solutionArr.splice(0,1),console.log("onMovePikeCall  this._solutionArr = ",this._solutionArr);let e=this;Laya.timer.once(300,this,()=>{let t=e._solutionArr[0];console.log("onMovePikeCall  num = ",t),e.ryw_tipsSetPikeForbid(t)}),w.ryw_instance.ryw_dispatch(t.Game_onHideGuide)}}else 1==this._levelIndex&&w.ryw_instance.ryw_dispatch(t.Game_onHideGuide);for(let e=0;e<this._pikeAll.length;e++){if(r==this._pikeAll[e]){this._pikeAll.splice(e,1);break}}Laya.timer.once(100,this,()=>{this._isForbidTouch=!0;var t=e.pike.owner.name.substring(4),r=Number(t);for(let e=0;e<this._pikePathArr.length;e++){let t=this._pikePathArr[e];if(0!=t.length)for(let e=0;e<t.length;e++){if(t[e]==r){if(t.splice(e,1),this.ryw_onSaveQueen())return;break}}}})}ryw_onOver(e){this.gameState=o.ryw_gameover}ryw_onOverAction(e){if(this.gameState==o.ryw_gameover)return;this.gameState=o.ryw_gameover;let r=e.result;var i=this._queen.transform.position,n=this._warrior.transform.position,a=new Laya.Vector3;0==r?a=new Laya.Vector3(.6*i.x+.4*n.x,(i.y+n.y)/2,(i.z+n.z)/2):1==r?a=new Laya.Vector3(i.x,i.y,i.z):2==r&&(a=new Laya.Vector3(n.x,n.y,n.z)),w.ryw_instance.ryw_dispatch(t.Game_onShowShade);var s=this;Laya.Tween.to(s._camera.transform,{localPositionX:a.x,localPositionY:a.y},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{let e=new Laya.Vector4;s._camera.viewport.project(a,s._camera.projectionViewMatrix,e),console.log("this._camera  pos = ",e),w.ryw_instance.ryw_dispatch(t.Game_onMoveShade,{x:e.x/Laya.stage.clientScaleX,y:e.y/Laya.stage.clientScaleY}),Laya.Tween.to(s._camera,{orthographicVerticalSize:50},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{}))}))}ryw_onSaveQueen(){if(console.log("onSaveQueen  private onSaveQueen():boolean"),0==this._queen.ryw_standOnTheGround)return console.log("onSaveQueen  false==this._queen.standOnTheGround"),!1;for(let e=0;e<this._pikePathArr.length;e++){if(0==this._pikePathArr[e].length)return this._warrior.ryw_onWarriorMove(this._queen.transform.localPosition),console.log("猪脚去救女王"),!0}return!1}onPostRender(){this._onPostValue&&(this._onPostValue=!1,w.ryw_instance.ryw_dispatch(t.ryw_App_CloseFirstLoadingView))}}class ke extends se{constructor(){super(...arguments),this._currentLevel=1,this._showLevel=1,this._againBtn=null,this._tipBtn=null,this._tipBanner=null,this._tipNormal=null,this._isBannerLoad=!0,this._isSeverLevel=!0,this._isTipLevel=!1,this._adState=!1,this._MaxLevel=37,this._MaxlocalSave=20,this._testLevel=0}onAwake(){this._levelTitle=this.owner.getChildByName("LevelTitle").addComponent(ye),this._againBtn=this.owner.getChildByName("againImg").getChildByName("againBtn"),this._roundShade=this.owner.getChildByName("roundShade"),this._turoriaUp=this.owner.getChildByName("turoriaUp"),this._tipBtn=this.owner.getChildByName("tipBtn"),this._tipNode=this.owner.getChildByName("tipNode"),this._tipNode.visible=!1,this._tipNormal=this._tipNode.getChildByName("tipNormal"),this._tipBanner=this._tipNode.getChildByName("tipBanner"),console.log("this._roundShade  = ",this._roundShade)}onStart(){this._adState=!1,this.init3dScene();let e=()=>{this._adState&&(this._adState=!1,this._isTipLevel=!0,D.ryw_aldSendEvent(i.TipLevelGame,{"提示 当前":this._showLevel,"模板":this._currentLevel}),this.onNextLevel()),console.log("wxShowwxShowwxShowwxShowwxShow  adTouchState.Video == this._adState = ",this._adState)},t=()=>{this._adState,console.log("wxHidewxHidewxHidewxHidewxHide   this._adState",this._adState)};Laya.Browser.onMiniGame&&(Laya.Browser.window.wx.onShow(e),Laya.Browser.window.wx.onHide(t))}onRewardVidewoFail(){this._adState=!0,this.onVideoFaild()}onRewardVidewoSuccess(){this._isTipLevel=!0,this.onNextLevel(),this._tipBtn.visible=!1}ryw_addEvent(){this._againBtn.on(Laya.Event.CLICK,this,this.onAgainClick),this._tipBtn.on(Laya.Event.CLICK,this,this.onTipClick)}ryw_removeEvent(){this._againBtn.off(Laya.Event.CLICK,this,this.onAgainClick),this._tipBtn.off(Laya.Event.CLICK,this,this.onTipClick)}onTipClick(){this._level.gameState!=o.ryw_gameover&&(Laya.Browser.onAndroid||Laya.Browser.onIOS?(this._tipBtn.visible=!1,M.NowVideoType="rewardAd",M.CallNativeFunc("showRewardVideo"),G.ryw_instance.ryw_stopBGM()):(this._isTipLevel=!0,this.onNextLevel(),this._tipBtn.visible=!1))}onShareMyGame(){console.log("onShareMyGame"),S.ryw_share(()=>{console.log(" WXAPI.share")},"玩不过了，快来帮帮我！~",""),Laya.timer.once(2e3,this,()=>{this._isTipLevel=!0,D.ryw_aldSendEvent(i.TipLevelGame,{"提示 当前":this._showLevel,"模板":this._currentLevel}),this.onNextLevel()})}onVideoFaild(){console.log("onVideoFaild  ryw_WudianMgr.ryw_WudianFlag = ",A.ryw_WudianFlag),Laya.timer.once(3e3,this,()=>{this._tipBtn.visible=!0}),this._tipNode.visible=!0,this._tipBanner.visible=!1,this._tipNormal.visible=!0;let e=this,t=this._tipNormal.y;Laya.Tween.to(this._tipNormal,{y:t-100,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{e._tipNode.visible=!1,e._tipNormal.alpha=1,e._tipNormal.y=t}))}onAgainClick(){this._level.gameState!=o.ryw_gameover&&(this._isTipLevel=!1,D.ryw_aldSendEvent(i.AgainLevelGame,{"重来 当前":this._showLevel,"模板":this._currentLevel}),this.onNextLevel())}onEnable(){super.onEnable(),w.ryw_instance.ryw_regEvemt(t.Game_onOver,this,this.onGameOver),w.ryw_instance.ryw_regEvemt(t.Game_onNextGame,this,this.onNextLevel),w.ryw_instance.ryw_regEvemt(t.Game_onShowShade,this,this.onShowShade),w.ryw_instance.ryw_regEvemt(t.Game_onMoveShade,this,this.onMoveShade),w.ryw_instance.ryw_regEvemt(t.Game_onShowGuide,this,this.onShowGuide),w.ryw_instance.ryw_regEvemt(t.Game_onHideGuide,this,this.onHideGuide),w.ryw_instance.ryw_regEvemt(t.RewardVideoFail,this,this.onRewardVidewoFail),w.ryw_instance.ryw_regEvemt(t.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onDisable(){super.onDisable(),w.ryw_instance.ryw_removeEvent(t.Game_onOver,this,this.onGameOver),w.ryw_instance.ryw_removeEvent(t.Game_onNextGame,this,this.onNextLevel),w.ryw_instance.ryw_removeEvent(t.Game_onShowShade,this,this.onShowShade),w.ryw_instance.ryw_removeEvent(t.Game_onMoveShade,this,this.onMoveShade),w.ryw_instance.ryw_removeEvent(t.Game_onShowGuide,this,this.onShowGuide),w.ryw_instance.ryw_removeEvent(t.Game_onHideGuide,this,this.onHideGuide),w.ryw_instance.ryw_removeEvent(t.RewardVideoFail,this,this.onRewardVidewoFail),w.ryw_instance.ryw_removeEvent(t.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}initWinLevelData(){console.log("initWinLevelData");let e=l.getwinLevelData();if(null==e||e.length<this._showLevel){let e=new Array;for(let t=1;t<this._showLevel;t++)e.push(t);l.setwinLevelData(e)}}onFailLevelCheck(){console.log("onFailLevelCheck");let e=l.getwinLevelData();if(console.log("onFailLevelCheck   _winArr = ",e),null==e||0==e.length)return!0;for(let t=this._MaxlocalSave+1;t<=this._MaxLevel;t++)if(-1==e.indexOf(t))return this._currentLevel=t,console.log("onFailLevelCheck  this._currentLevel =",this._currentLevel),!1;return!0}onGameOver(e){1==e.result&&(this._showLevel+=1,console.log("onGameOver  this._isSeverLevel = ",this._isSeverLevel),this._isSeverLevel?l.passLevel():l.passLoaclLevel(),l.ryw_setLeveNum(this._showLevel),l.addwinLevel(this._currentLevel)),1==e.result?D.ryw_aldSendEvent(i.CompleteLevelGame,{"胜利 当前":this._showLevel,"模板":this._currentLevel}):D.ryw_aldSendEvent(i.FailLevelGame,{"失败 当前":this._showLevel,"模板":this._currentLevel}),this.onGetNextLevel(),P.ryw_getInstance().ryw_saveGameData();var t=this;1==e.result?k.ryw_instance.ryw_openView(r.ryw_GameWinView,e,e=>{t.ryw_closeView()}):k.ryw_instance.ryw_openView(r.ryw_GameFailView,e,e=>{t.ryw_closeView()})}onGetNextLevel(){console.log("onGetNextLevel");var e=l.getLevelData();if(0==e.length){let t=l.ryw_getLeveNum();if(t<this._MaxLevel)for(let r=t;r<=this._MaxLevel;r++)e.push(r);else e=this.onShuffleArithmetic(this._MaxLevel);l.setLevelData(e)}return console.log("onGetNextLevel   levelData = ",e),this._isSeverLevel=!0,this._currentLevel=e[0],console.log("onGetNextLevel   _currentLevel = ",this._currentLevel),this._currentLevel}onShuffleArithmetic(e,t=2){let r=new Array;for(let i=t;i<=e;i++)r.push(i);for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1)),i=r[e];r[e]=r[t],r[t]=i}return r}onNextLevel(){this._3dScene.offAll(),this.destroy3dScene(),null!=this._3dScene&&(this._3dScene.destroy(),this._3dScene=null,Laya.Resource.destroyUnusedResources()),null!=this._level&&(this._level.destroy(),this._level=null),this._adState=!1,this.onHideGuide(),this._isTipLevel?(this._tipNode.visible=!1,this._tipBtn.visible=!1):(this._tipNode.visible=!0,this._tipBtn.visible=!0),this.init3dScene()}init3dScene(){return this._testLevel&&0!=this._testLevel?(this._currentLevel=this._testLevel,void this.onLoadLocalScene()):(this._showLevel=l.ryw_getLeveNum(),this._showLevel<=this._MaxlocalSave?(this.initWinLevelData(),this.onGetNextLevel(),void this.onLoadLocalScene()):(this.onFailLevelCheck()&&this.onGetNextLevel(),void(this._currentLevel<=this._MaxlocalSave?this.onLoadLocalScene():this.onLoadServerScene())))}onLoadLocalScene(){console.log("onLoadLocalScene this._currentLevel =",this._currentLevel);let e=this,t=c.ryw_LocalTestReServer+"/LayaScene/Conventional/scene"+this._currentLevel+".ls";this._levelTitle.setLevelString(this._showLevel),Laya.Scene3D.load(t,Laya.Handler.create(this,function(t){e._3dScene=t,Laya.stage.addChild(t),this._level=e._3dScene.addComponent(Ae),this._level.ryw_onSetPikePath(this._currentLevel),this._level.ryw_setTipsMode(this._isTipLevel),G.ryw_instance.ryw_playBGM("bg")}))}onLoadServerScene(){console.log("onLoadServerScene this._currentLevel = ",this._currentLevel);let e=this;this._levelTitle.setLevelString(this._showLevel);let t=c.ryw_ResServer+"/LayaScene/Conventional/scene"+this._currentLevel+".ls";Laya.Scene3D.load(t,Laya.Handler.create(this,function(t){if(null==t)return e.onInit3dLocalScene(),void e.onLoadLocalScene();e._3dScene=t,Laya.stage.addChild(t),this._level=e._3dScene.addComponent(Ae),this._level.ryw_onSetPikePath(this._currentLevel),this._level.ryw_setTipsMode(this._isTipLevel),G.ryw_instance.ryw_playBGM("bg")}))}onInit3dLocalScene(){var e=l.getLocalLevelData();null==e||0==e.length?this._showLevel>this._MaxlocalSave?(e=this.onShuffleArithmetic(this._MaxlocalSave),l.setLocalLevelData(e),this._currentLevel=e[0]):this._currentLevel=this._showLevel:this._currentLevel=e[0],this._isSeverLevel=!1}onHideGuide(){this._turoriaUp&&(this._turoriaUp.visible=!1),this._tipNode.visible=!1,this._tipNormal.visible=!1,this._tipBanner.visible=!1,Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}onShowGuide(e){let t=e.x,r=e.y,i=e.endX,n=e.endY;this._turoriaUp.visible=!0,this._turoriaUp.pos(t,r),this.onShowMoveGuide(t,r,i,n),Laya.timer.loop(3e3,this,this.onShowMoveGuide,[t,r,i,n])}onShowMoveGuide(e,t,r,i){0==this._turoriaUp.visible||this.moveGuide(e,t,r,i)}moveGuide(e,t,r,i){Laya.Tween.to(this._turoriaUp,{x:r,y:i},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.waitGuide(e,t)}))}waitGuide(e,t){Laya.timer.once(1e3,this,()=>{null!=this._turoriaUp&&this._turoriaUp.pos(e,t)})}onMoveShade(e){console.log("onMoveShade   para.x = ",e.x);let t=e.x,r=e.y;this._roundShade.visible=!0;Laya.Tween.to(this._roundShade,{scaleX:.9,scaleY:.9,x:t,y:r},500,Laya.Ease.linearNone)}onShowShade(e){this._tipBtn.visible=!1,this._tipNode.visible=!1,G.ryw_instance.ryw_stopBGM(),this._roundShade.visible=!0}destroy3dScene(){null!=this._3dScene&&(this._3dScene.destroy(!0),this._3dScene=null,Laya.Resource.destroyUnusedResources()),Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}onDestroy(){this.destroy3dScene()}}class Te extends se{constructor(){super(...arguments),this._nextBtn=null,this._winImg=null,this._againBtn=null,this._lostImg=null,this._topZone=null,this._krqHistory=null}onAwake(){this._nextBtn=this.owner.getChildByName("btnClip").getChildByName("NextBtn"),this._winImg=this.owner.getChildByName("winImg"),this._againBtn=this.owner.getChildByName("btnClip").getChildByName("AgainBtn"),this._lostImg=this.owner.getChildByName("lostImg")}ryw_addEvent(){super.ryw_addEvent(),this._nextBtn.on(Laya.Event.CLICK,this,this.onNextLevelClick),this._againBtn.on(Laya.Event.CLICK,this,this.onNextLevelClick),this._topZone.on(Laya.Event.CLICK,this,this.onHistoryBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this._nextBtn.off(Laya.Event.CLICK,this,this.onNextLevelClick),this._againBtn.off(Laya.Event.CLICK,this,this.onNextLevelClick),this._topZone.off(Laya.Event.CLICK,this,this.onHistoryBtn)}onHistoryBtn(){}onNextLevelClick(){var e=this;k.ryw_instance.ryw_openView(r.ryw_Export2View,null,t=>{e.ryw_closeView()})}ryw_openView(e){super.ryw_openView(e),0==e.result?(this._againBtn.visible=!0,this._lostImg.visible=!0,this._nextBtn.visible=!1,this._winImg.visible=!1):(this._againBtn.visible=!1,this._lostImg.visible=!1,this._nextBtn.visible=!0,this._winImg.visible=!0)}}class Ie extends Laya.Script{constructor(){super(),this.TwinkleSpeed=1e3,this.TwinkleMinSize=.95,this.TwinkleMaxSize=1.05,this.ryw__aniForward=!1,this.ryw__fontSize=25,this.ryw__originSize=1}onAwake(){this.ryw__displaySp=this.owner,this.ryw__disText=this.owner.getChildByName("TitelText"),this.ryw__originSize=this.ryw__displaySp.scaleX,null!=this.ryw__disText&&(this.ryw__disText.text="",this.ryw__fontSize=this.ryw__disText.fontSize)}onEnable(){this.ryw__displaySp.scale(this.ryw__originSize,this.ryw__originSize)}onDisable(){}onUpdate(){this.ryw_displayAni()}ryw_displayAni(){if(this.ryw__aniForward){e=this.ryw__displaySp.scaleX+Laya.timer.delta/this.TwinkleSpeed;e=Math.min(e,this.TwinkleMaxSize*this.ryw__originSize),this.ryw__displaySp.scale(e,e),this.ryw__displaySp.scaleX>=this.TwinkleMaxSize*this.ryw__originSize&&(this.ryw__aniForward=!1)}else{var e=this.ryw__displaySp.scaleX-Laya.timer.delta/this.TwinkleSpeed;e=Math.max(e,this.TwinkleMinSize*this.ryw__originSize),this.ryw__displaySp.scale(e,e),this.ryw__displaySp.scaleX<=this.TwinkleMinSize*this.ryw__originSize&&(this.ryw__aniForward=!0)}}}class be extends se{constructor(){super(),this.ryw__totalClickTimer=22,this.ryw__needClickTime=10,this.ryw__bannerClickTime=7}onAwake(){this.ryw__click_Btn=this.owner.getChildByName("Click_Btn"),this.ryw__click_Btn.on(Laya.Event.CLICK,this,this.ryw_ButtonClicked),this.ryw__arrow_Img=this.ryw__click_Btn.getChildByName("Arrow_Img"),this.ryw__bg=this.owner.getChildByName("BG"),this.ryw__open_Btn=this.ryw__bg.getChildByName("Open_Btn"),this.ryw__getPrize_View=this.owner.getChildByName("GetPrize_View"),this.ryw__prizeCount_Text=this.ryw__getPrize_View.getChildByName("PrizeCount_Text"),this.ryw__confirm_Btn=this.ryw__getPrize_View.getChildByName("Confirm_Btn"),this.ryw__getPrize_View.visible=!1,this.ryw__clickTime_PBar=this.ryw__bg.getChildByName("ClickTime_PBar"),this.ryw__clickTime_PBar$Bar=this.ryw__clickTime_PBar.getChildByName("ClickTime_PBar$Bar"),this.ryw__clickBarOriginalWidth=this.ryw__clickTime_PBar$Bar.width,this.ryw__bannerAd_View=this.owner.getChildByName("BannerAd_View"),this.ryw__clickTime_PBar$Bar.width=0,this.ryw__clickTime=0,this.ryw__totalClickTime=0}onUpdate(){if(this.ryw__arrowUp?(this.ryw__arrow_Img.top+=Laya.timer.delta/5,this.ryw__arrow_Img.top>-140&&(this.ryw__arrowUp=!1)):(this.ryw__arrow_Img.top-=Laya.timer.delta/5,this.ryw__arrow_Img.top<-180&&(this.ryw__arrowUp=!0)),!this.ryw__bannerClicked){let e=2+this.ryw__clickTime_PBar$Bar.width/this.ryw__clickBarOriginalWidth*6;this.ryw__clickTime_PBar$Bar.width>=e&&(this.ryw__clickTime_PBar$Bar.width-=e),this.ryw__clickTime_PBar$Bar.width/this.ryw__clickBarOriginalWidth+.1<this.ryw__clickTime/this.ryw__needClickTime&&this.ryw__clickTime--}}ryw_openView(e){this.ryw__compeletFunction=e.Complete,this.ryw__prizeCount=e.PrizeCount,super.ryw_openView(e)}ryw_OpenPrizeWindow(){this.ryw__bg.visible=!1;let e=this;this.ryw__prizeCount_Text.text=this.ryw__prizeCount.toString(),this.ryw__getPrize_View.visible=!0,this.ryw__confirm_Btn.once(Laya.Event.CLICK,this,function(){e.ryw__compeletFunction&&e.ryw__compeletFunction(),e.ryw_closeView()})}ryw_ShowBanner(){console.log("AD_WudianBanner_Show"),b.ryw_show()}ryw_ButtonClicked(){this.ryw__clickTime++,this.ryw__totalClickTime++,this.ryw__clickTime>this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime),this.ryw__clickTime>=this.ryw__bannerClickTime?(this.ryw__clickTime>=this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime-1),this.ryw__bannerClicked=!0,console.log("误点Banner套路启动"),this.ryw_ShowBanner(),Laya.timer.once(2e3,this,function(){this.ryw_BannerClicked()})):this.ryw__totalClickTime>this.ryw__totalClickTimer&&(console.log("用户一直没点到，放他一马",this.ryw__totalClickTime),this.ryw_BannerClicked());let e=this.ryw__clickTime/this.ryw__needClickTime*this.ryw__clickBarOriginalWidth;this.ryw__clickTime_PBar$Bar.width=e}ryw_BannerClicked(){w.ryw_instance.ryw_dispatch(t.ryw_AD_WudianBanner_Hide),this.ryw__bannerClicked=!0,this.ryw__clickTime=this.ryw__needClickTime,this.ryw__clickTime_PBar$Bar.width=this.ryw__clickBarOriginalWidth,this.ryw__click_Btn.visible=!1,this.ryw__open_Btn.visible=!0,this.ryw_OpenPrizeWindow()}onDestroy(){super.onDestroy(),b.ryw_hide()}}class De extends se{constructor(){super(...arguments),this.ryw__processWidth=0}onAwake(){this.ryw__bg=this.owner.getChildByName("Bg"),this.ryw__bottomZone=this.ryw__bg.getChildByName("BottomZone"),this.ryw__processBarBg=this.ryw__bottomZone.getChildByName("processBarBg"),this.ryw__processBar=this.ryw__processBarBg.getChildByName("processBar"),this.ryw__processWidth=this.ryw__processBar.width}onStart(){}onEnable(){super.onEnable()}ryw_addEvent(){super.ryw_addEvent()}ryw_removeEvent(){super.ryw_removeEvent()}onUpdate(){this.ryw__bg.width=Laya.stage.width,this.ryw__bg.height=Laya.stage.height}ryw_setProcess(e){e<0&&(e=0),e>1&&(e=1);var t=this.ryw__processWidth*e;t<1&&(t=1),this.ryw__processBar.width=t}}class Ve extends se{constructor(){super()}onAwake(){this.ryw__bg=this.owner.getChildByName("Bg"),this.ryw__bg.x=Laya.stage.width/2-this.ryw__bg.width/2,this.ryw__tipsText=this.ryw__bg.getChildByName("Text")}ryw_openView(e){super.ryw_openView(e),this.ryw_setTipsMsg(e),Laya.timer.clearAll(this);var t=this;Laya.timer.once(3e3,this,function(){t.ryw_closeView()})}ryw_setTipsMsg(e){this.ryw__tipsText.text=e}}class xe extends Laya.Script{constructor(){super(...arguments),this.ryw__data=null,this.ryw__originW=150,this.ryw__originH=150,this.ryw__fontSize=25}onAwake(){this.ryw__displaySp=this.owner.getChildByName("Display"),this.ryw__originW=this.ryw__displaySp.width,this.ryw__originH=this.ryw__displaySp.height,this.ryw__disText=this.owner.getChildByName("TitelText"),this.ryw__disText.text="",this.ryw__fontSize=this.ryw__disText.fontSize}onEnable(){this.ryw__displaySp.on(Laya.Event.CLICK,this,this.ryw_onSpClick)}onDisable(){this.ryw__displaySp.off(Laya.Event.CLICK,this,this.ryw_onSpClick)}ryw_setData(e){if(e){var t=this;this.ryw__displaySp.loadImage(e.logo,Laya.Handler.create(this,function(){t.ryw__displaySp.destroyed||(t.ryw__displaySp.width=t.ryw__originW,t.ryw__displaySp.height=t.ryw__originH)}));var r=String(e.title),i=r.length;i=Math.max(5,i);var n=Math.floor(5/i*this.ryw__fontSize);this.ryw__disText.fontSize=n,this.ryw__disText.text=r,this.ryw__data=e}}ryw_onSpClick(){var e=this.ryw__data;e&&(console.log("跳转游戏： "+e.title),Laya.Browser.onMiniGame?S.ryw_navigateToMiniProgram(e.appid,e.url,t=>{console.log("跳转成功"),O.ryw_reportUserClick(e.appid),D.ryw_aldSendReportAdClickSuccess(e)},r=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==r.errMsg&&(console.log("用户取消跳转"),D.ryw_aldSendReportAdClickFail(e))},e=>{console.log("跳转完成")}):Laya.Browser.onQGMiniGame?T.ryw_navigateToMiniProgram(e.appid,e.title,e.url,t=>{console.log("跳转成功"),O.ryw_reportUserClick(e.appid)},e=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail)},e=>{console.log("跳转完成")}):Laya.Browser.onQQMiniGame&&f.ryw_navigateToMiniProgram(e.appid,e.url,t=>{console.log("跳转成功"),O.ryw_reportUserClick(e.appid)},e=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail)},e=>{console.log("跳转完成")}))}}class Ee extends Laya.Script{constructor(){super(...arguments),this.ryw_AdPosID=O.ryw_LoopAdLocationID,this.ryw__scrollForward=!0}onAwake(){this.ryw__list=this.owner.getChildByName("List"),this.ryw__list.renderHandler=Laya.Handler.create(this,this.ryw_onListRender,null,!1),this.ryw__list.hScrollBarSkin=""}onEnable(){var e=this;O.ryw_getADVs(this.ryw_AdPosID,t=>{if(e.owner&&!e.owner.destroyed)if(t&&t.length>0&&t.length<50){for(var r=[],i=0,n=0;n<50;++n)i>=t.length&&(i=0),r.push(t[i]),++i;var a=t.length;for(n=0;n<r.length;++n){var s=Math.floor(n/a)*a,o=Math.floor(Math.random()*a)+s,_=r[n],y=r[o];r[o]=_,r[n]=y}this.ryw__list.array=r}else this.ryw__list.array=t})}onDisable(){}onUpdate(){this.ryw__scrollForward?(this.ryw__list.scrollBar.value+=100*Laya.timer.delta/1e3,this.ryw__list.scrollBar.value>=this.ryw__list.scrollBar.max&&(this.ryw__scrollForward=!1)):(this.ryw__list.scrollBar.value-=100*Laya.timer.delta/1e3,this.ryw__list.scrollBar.value<=0&&(this.ryw__scrollForward=!0))}ryw_onListRender(e,t){var r=this.ryw__list.array[t];e.getComponent(xe).ryw_setData(r)}}class Ne extends Laya.Script{constructor(){super(...arguments),this.ryw_AdPosID=O.ryw_BannerAdLocationID,this.ryw__data=null,this.ryw__wxBanner=null,this._onLoad=null,this._onError=null,this._onResize=null}onAwake(){this.ryw__displaySp=this.owner.getChildByName("Display"),null==this.ryw__displaySp&&(this.ryw__displaySp=this.owner)}onEnable(){this.ryw__displaySp.on(Laya.Event.CLICK,this,this.ryw_onSpClick);var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_banner;if(0==e){this.ryw_refreshBannerDis();let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerRecreateTime;Laya.timer.loop(1e3*e,this,this.ryw_refreshBannerDis)}else if(1==e){this.ryw_refreshWXBanner();let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerRecreateTime;Laya.timer.loop(1e3*e,this,this.ryw_refreshWXBanner)}}onDisable(){this.ryw__displaySp.off(Laya.Event.CLICK,this,this.ryw_onSpClick),this.ryw_clearWXBaner()}ryw_refreshBannerDis(){var e=this;O.ryw_getADVs(this.ryw_AdPosID,t=>{if(t&&t.length>0){var r=t[Math.floor(Math.random()*t.length)];e.ryw__displaySp.loadImage(r.logo,Laya.Handler.create(e,function(){e.ryw__displaySp.destroyed||(e.ryw__displaySp.width=750,e.ryw__displaySp.height=256)})),e.ryw__data=r}},!1)}ryw_onSpClick(){var e=this.ryw__data;e&&(console.log("跳转游戏： "+e.title),Laya.Browser.onMiniGame?S.ryw_navigateToMiniProgram(e.appid,e.url,t=>{console.log("跳转成功"),O.ryw_reportUserClick(e.appid),D.ryw_aldSendReportAdClickSuccess(e)},r=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==r.errMsg&&(console.log("用户取消跳转"),D.ryw_aldSendReportAdClickFail(e))},e=>{console.log("跳转完成")}):Laya.Browser.onQGMiniGame?T.ryw_navigateToMiniProgram(e.appid,e.title,e.url,t=>{console.log("跳转成功"),O.ryw_reportUserClick(e.appid)},e=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail)},e=>{console.log("跳转完成")}):Laya.Browser.onQQMiniGame&&f.ryw_navigateToMiniProgram(e.appid,e.url,t=>{console.log("跳转成功"),O.ryw_reportUserClick(e.appid)},e=>{console.log("跳转失败"),w.ryw_instance.ryw_dispatch(t.ryw_AD_OnShareAdFail)},e=>{console.log("跳转完成")}))}ryw_refreshWXBanner(){if(!Laya.Browser.onMiniGame&&!Laya.Browser.onQQMiniGame||!this.owner.visible)return;this.ryw_clearWXBaner();var e=this;let t=null;Laya.Browser.onMiniGame?t=Laya.Browser.window.wx.getSystemInfoSync():Laya.Browser.onQQMiniGame&&(t=Laya.Browser.window.qq.getSystemInfoSync());var r=t.screenWidth,i=t.screenHeight,n=this.ryw__displaySp.localToGlobal(new Laya.Point(0,0)),a=n.x/Laya.stage.width*r,s=n.y/Laya.stage.height*i,o=this.ryw_WXBannerWidth?this.ryw_WXBannerWidth/Laya.stage.width*r:r;if(Laya.Browser.onMiniGame){let t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_recreateBannerIDList,r=t[Math.floor(Math.random()*t.length)];null==r&&(r=S.ryw_bannerAdUnitId),e.ryw__wxBanner=Laya.Browser.window.wx.createBannerAd({adUnitId:r,adIntervals:30,style:{left:a,top:s,width:o}}),e.ryw__wxBanner.onLoad(e=>{console.log("WXBanner广告 加载完成"),console.log(e)}),e.ryw__wxBanner.onError(t=>{console.log("WXBanner广告 加载失败"),console.log(t),e.ryw_refreshBannerDis(),e.ryw_clearWXBaner()}),e.ryw__wxBanner.onResize(e=>{}),e.ryw__wxBanner.show()}else if(Laya.Browser.onQQMiniGame){let t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_recreateBannerIDList,r=t[Math.floor(Math.random()*t.length)];null==r&&(r=f.ryw_bannerAdUnitId),e.ryw__wxBanner=Laya.Browser.window.qq.createBannerAd({adUnitId:r,adIntervals:30,style:{left:a,top:s,width:o}}),null!=e.ryw__wxBanner?(e._onLoad=(t=>{console.log("QQBanner广告 加载完成 : ",r),console.log(t),e.ryw__wxBanner.show()}),e.ryw__wxBanner.onLoad(e._onLoad),e._onError=(t=>{console.log("QQBanner广告 加载失败 : ",r),console.log(t),e.ryw_refreshBannerDis(),e.ryw_clearWXBaner()}),e.ryw__wxBanner.onError(e._onError),e._onResize=(e=>{}),e.ryw__wxBanner.onResize(e._onResize)):e.ryw_refreshBannerDis()}}ryw_clearWXBaner(){this.ryw__wxBanner&&(this.ryw__wxBanner.offLoad(this._onLoad),this.ryw__wxBanner.offError(this._onError),this.ryw__wxBanner.offResize(this._onResize),this.ryw__wxBanner.destroy()),this.ryw__wxBanner=null}onViewShow(){if(1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_banner&&null==this.ryw__wxBanner){this.ryw_refreshWXBanner();let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerRecreateTime;Laya.timer.loop(1e3*e,this,this.ryw_refreshWXBanner)}else{this.ryw_refreshBannerDis();let e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerRecreateTime;Laya.timer.loop(1e3*e,this,this.ryw_refreshBannerDis)}}onViewHide(){this.ryw_clearWXBaner(),Laya.timer.clearAll(this)}onDestroy(){this.ryw_clearWXBaner(),Laya.timer.clearAll(this)}}class Ge extends Laya.Script{onAwake(){this.ryw__ownerSprite=this.owner,this.ryw__autoZone=this.ryw__ownerSprite.getChildByName("AutoZone"),this.ryw__loopADZone=this.ryw__ownerSprite.getChildByName("LoopAD"),this.ryw__bannerADZone=this.ryw__ownerSprite.getChildByName("BannerAD"),this.ryw__bannerAd=this.ryw__bannerADZone.getComponent(Ne)}onEnable(){Laya.stage.width/Laya.stage.height<.5?(this.ryw__autoZone.bottom=this.ryw__loopADZone.height+this.ryw__bannerADZone.height,this.ryw__loopADZone.bottom=this.ryw__bannerADZone.height,this.ryw__bannerADZone.visible=!0):(this.ryw__autoZone.bottom=this.ryw__loopADZone.height,this.ryw__loopADZone.bottom=0,this.ryw__bannerADZone.visible=!1)}onDisable(){}onUpdate(){this.ryw__bannerADZone.visible||this.ryw__bannerAd.ryw_clearWXBaner()}}class Me extends se{constructor(){super(...arguments),this.ryw__nativeAd=null,this.ryw__curAdItem=null}onAwake(){this.ryw__centerZone=this.owner.getChildByName("CenterZone"),this.ryw__display=this.ryw__centerZone.getChildByName("Display"),this.ryw__okBtn=this.ryw__centerZone.getChildByName("OkBtn"),this.ryw__closeBtn=this.ryw__centerZone.getChildByName("CloseBtn"),this.ryw__bg=this.owner.getChildByName("BG")}onEnable(){super.onEnable(),this.ryw_loadAd(),this.ryw__bg.height=Laya.stage.height,this.ryw__closeBtn.visible=!1,Laya.timer.once(C.ryw_getInstance().ryw_getAppSwitchData().ryw_oppocfg.ryw_btnShowTimer,this,()=>{this.ryw__closeBtn.visible=!0})}ryw_addEvent(){super.ryw_addEvent(),this.ryw__okBtn.on(Laya.Event.CLICK,this,this.ryw_onOkBtn),this.ryw__closeBtn.on(Laya.Event.CLICK,this,this.ryw_onCloseBtn),this.ryw__display.on(Laya.Event.CLICK,this,this.ryw_onDisplayClick)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__okBtn.off(Laya.Event.CLICK,this,this.ryw_onOkBtn),this.ryw__closeBtn.off(Laya.Event.CLICK,this,this.ryw_onCloseBtn),this.ryw__display.off(Laya.Event.CLICK,this,this.ryw_onDisplayClick)}ryw_loadAd(){var e=this;A.ryw_GetIpBlocked()?Laya.Browser.onQGMiniGame&&(this.ryw__nativeAd&&(this.ryw__nativeAd.destroy(),this.ryw__nativeAd=null),this.ryw__curAdItem=null,this.ryw__nativeAd=qg.createNativeAd({posId:T.ryw_NativeAdId}),this.ryw__nativeAd.load(),this.ryw__nativeAd.onLoad(t=>{console.log("原生广告加载成功：",t);for(var r=t.adList,i=0;i<r.length;++i){var n=r[i];for(var a in console.log("原生广告数据：",i),n)console.log(a,n[a])}if(e.ryw__curAdItem=r[Math.floor(Math.random()*r.length)],null!=e.ryw__curAdItem){for(i=0;i<e.ryw__curAdItem.imgUrlList.length;++i)console.log("imgUrlList : ",i+" ",e.ryw__curAdItem.imgUrlList[i]);var s=e.ryw__curAdItem.imgUrlList[Math.floor(Math.random()*e.ryw__curAdItem.imgUrlList.length)];e.ryw__display.loadImage(s),e.ryw__nativeAd.reportAdShow({adId:e.ryw__curAdItem.adId}),console.log("加载图片",s),console.log("点击上报！！！")}e.ryw__centerZone.visible=!0}),this.ryw__nativeAd.onError(t=>{for(var r in console.log("原生广告加载失败：",t),t)console.log(r,t[r]);e.ryw_closeView()}),this.ryw__centerZone.visible=!1):e.ryw_closeView()}ryw_onCloseBtn(){this.ryw_closeView()}ryw_onOkBtn(){100*Math.random()<=C.ryw_getInstance().ryw_getAppSwitchData().ryw_oppocfg.ryw_yuansheng&&(console.log("进入变态广告"),this.ryw_onDisplayClick()),this.ryw_closeView()}ryw_onDisplayClick(){null!=this.ryw__nativeAd&&null!=this.ryw__curAdItem&&(console.log("点击上报！！！"),this.ryw__nativeAd.reportAdClick({adId:this.ryw__curAdItem.adId}))}onDestroy(){super.onDestroy(),Laya.Browser.onQGMiniGame&&(this.ryw__nativeAd&&this.ryw__nativeAd.destroy(),this.ryw__nativeAd=null,this.ryw__curAdItem=null)}}class Re extends se{constructor(){super(...arguments),this.ryw__clickBar=null,this.ryw__totalClickTimer=15,this.ryw__needClickTime=10,this.ryw__bannerClickTime=Math.floor(5*Math.random())+2,this.ryw__banner=null}onAwake(){this.ryw__click_Btn=this.owner.getChildByName("Click_Btn"),this.ryw__click_Btn.on(Laya.Event.CLICK,this,this.ButtonClicked),this.ryw__arrow_Img=this.ryw__click_Btn.getChildByName("Arrow_Img"),this.ryw__getPrize_View=this.owner.getChildByName("GetPrize_View"),this.ryw__prizeCount_Text=this.ryw__getPrize_View.getChildByName("PrizeCount_Text"),this.ryw__confirm_Btn=this.ryw__getPrize_View.getChildByName("Confirm_Btn"),this.ryw__getPrize_View.visible=!1,this.ryw__clickBar=this.owner.getChildByName("ClickBar").getChildByName("ClickBar"),this.ryw__clickBarOriginalWidth=this.ryw__clickBar.width,this.ryw__clickBar.width=0,this.ryw__clickTime=0,this.ryw__totalClickTime=0;let e=this;Laya.loader.load("ClickGetPrize/quanji.png",Laya.Handler.create(this,t=>{Laya.loader.load("ClickGetPrize/quanji.sk",Laya.Handler.create(this,r=>{console.log("texture",t),console.log("bytes",r);let i=new Laya.Templet;i.parseData(t,r),e.ryw_drgon=i.buildArmature(),e.owner.addChild(e.ryw_drgon),e.ryw_drgon.x=375,e.ryw_drgon.y=610,e.ryw_drgon.scaleX=2,e.ryw_drgon.scaleY=2,e.ryw_drgon.parent.setChildIndex(e.ryw_drgon,1),e.ryw_drgon.play(0,!0),console.log("quanji 加载完成!!!!",i)}),Laya.Handler.create(this,()=>{}),"",0,!1,"",!0)}),Laya.Handler.create(this,()=>{}),"",0,!1,"",!0)}ryw_addEvent(){super.ryw_addEvent(),Laya.stage.on(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)}ryw_removeEvent(){super.ryw_removeEvent(),Laya.stage.off(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)}onUpdate(){if(this.ryw__arrowUp?(this.ryw__arrow_Img.top+=Laya.timer.delta/5,this.ryw__arrow_Img.top>-140&&(this.ryw__arrowUp=!1)):(this.ryw__arrow_Img.top-=Laya.timer.delta/5,this.ryw__arrow_Img.top<-180&&(this.ryw__arrowUp=!0)),!this.ryw__bannerClicked){let e=2+this.ryw__clickBar.width/this.ryw__clickBarOriginalWidth*4;this.ryw__clickBar.width>=e&&(this.ryw__clickBar.width-=e),this.ryw__clickBar.width/this.ryw__clickBarOriginalWidth+.1<this.ryw__clickTime/this.ryw__needClickTime&&this.ryw__clickTime--}}ryw_openView(e){this.ryw__compeletFunction=e.Complete,this.ryw__titel=e.titel,super.ryw_openView(e)}ryw_OpenPrizeWindow(){let e=this;this.ryw__prizeCount_Text.text=this.ryw__titel,this.ryw__getPrize_View.visible=!0,this.ryw__confirm_Btn.once(Laya.Event.CLICK,this,function(){null!=e.ryw__banner&&e.ryw__banner.ryw_hide(),e.ryw__compeletFunction&&e.ryw__compeletFunction(),e.ryw_closeView()})}ryw_ShowBanner(){let e=this;E.ryw_getBanner(t=>{null!=e.ryw__banner&&e.ryw__banner.ryw_hide(),e.ryw__banner=t,null!=e.ryw__banner&&e.ryw__banner.ryw_show()})}ButtonClicked(){if(this.ryw__clickTime++,this.ryw__totalClickTime++,null!=this.ryw_drgon&&(this.ryw_drgon.play(1,!1),this.ryw_drgon.once(Laya.Event.STOPPED,this,()=>{this.ryw_drgon.play(0,!0)})),this.ryw__clickTime>this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime),this.ryw__clickTime>=this.ryw__bannerClickTime){if(this.ryw__clickTime>=this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime-1),this.ryw__bannerClicked)return;this.ryw__bannerClicked=!0,A.ryw_WudianFlag&&1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_wxcfg.ryw_kuangdianBanner&&this.ryw_ShowBanner(),Laya.timer.once(2e3,this,function(){this.ryw_BannerClicked()})}else this.ryw__totalClickTime>this.ryw__totalClickTimer&&(A.ryw_WudianFlag&&1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_wxcfg.ryw_kuangdianBanner&&this.ryw_ShowBanner(),this.ryw_BannerClicked());let e=this.ryw__clickTime/this.ryw__needClickTime*this.ryw__clickBarOriginalWidth;this.ryw__clickBar.width=e}ryw_BannerClicked(){w.ryw_instance.ryw_dispatch(t.ryw_AD_WudianBanner_Hide),this.ryw__bannerClicked=!0,this.ryw__clickTime=this.ryw__needClickTime,this.ryw__clickBar.width=this.ryw__clickBarOriginalWidth,this.ryw__click_Btn.visible=!1,this.ryw_OpenPrizeWindow()}onDestroy(){null!=this.ryw__banner&&this.ryw__banner.ryw_hide()}onFocusChange(){null!=this.ryw_drgon&&this.ryw_drgon.play(0,!0)}}class Pe extends se{constructor(){super(...arguments),this.ryw__historyBtn=null,this.ryw__topZone=null}get ryw_HistoryBtn(){return this.ryw__historyBtn}get ryw_TopZone(){return this.ryw__topZone}onAwake(){}ryw_addEvent(){super.ryw_addEvent()}ryw_removeEvent(){super.ryw_removeEvent()}ryw_onHistoryBtn(){}get isShowHistoryBtn(){return!1}onUpdateIpBlockState(e){}}class Oe extends Pe{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__rewardBtn=null,this.ryw__skipBtn=null}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),this.ryw__rewardBtn=this.ryw__centerZone.getChildByName("RewradBtn"),this.ryw__skipBtn=this.ryw__centerZone.getChildByName("SkipBtn")}onStart(){super.onStart()}ryw_addEvent(){super.ryw_addEvent(),this.ryw__rewardBtn.on(Laya.Event.CLICK,this,this.ryw_onRewardBtn),this.ryw__skipBtn.on(Laya.Event.CLICK,this,this.ryw_onSkipBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__rewardBtn.off(Laya.Event.CLICK,this,this.ryw_onRewardBtn),this.ryw__skipBtn.off(Laya.Event.CLICK,this,this.ryw_onSkipBtn)}ryw_onRewardBtn(){}ryw_onSkipBtn(){}}class Ue extends se{constructor(){super(...arguments),this.ryw__krqhistory=null}onAwake(){super.onAwake(),this.ryw__krqhistory=this.ryw_View.getChildByName("KRQ_History").getComponent(j);let e=this;this.ryw__krqhistory.ryw_OnBackBtnClick=(()=>{e.ryw_closeView()})}onStart(){super.onStart()}ryw_addEvent(){super.ryw_addEvent()}ryw_removeEvent(){super.ryw_removeEvent()}}class Ze extends Pe{constructor(){super(...arguments),this.ryw__krqMain=null,this.ryw__centerZone=null,this.ryw__startBtn=null,this.ryw__levelNum=null,this.ryw__moneyNum=null}onAwake(){super.onAwake(),this.ryw__krqMain=this.ryw_View.getChildByName("KRQ_Main").getComponent(ne),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5?W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75):(this.ryw__centerZone.top=this.ryw__centerZone.top-200,W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75)),this.ryw__startBtn=this.ryw__centerZone.getChildByName("StartBtn"),this.ryw__levelNum=this.ryw__centerZone.getChildByName("LevelInfo").getChildByName("LevelNum"),this.ryw__moneyNum=this.ryw__centerZone.getChildByName("MoneyInfo").getChildByName("MoneyNum")}onStart(){super.onStart(),this.ryw__moneyNum.value=String(l.ryw_getMoney()),this.ryw__levelNum.value=String(l.ryw_getLeveNum())}ryw_addEvent(){super.ryw_addEvent(),this.ryw__startBtn.on(Laya.Event.CLICK,this,this.ryw_onStartBtn),w.ryw_instance.ryw_regEvemt(t.ryw_Game_OnUserMoneyChange,this,this.ryw_onUserMoneyChange)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__startBtn.off(Laya.Event.CLICK,this,this.ryw_onStartBtn),w.ryw_instance.ryw_removeEvent(t.ryw_Game_OnUserMoneyChange,this,this.ryw_onUserMoneyChange)}ryw_onStartBtn(){}ryw_onUserMoneyChange(e){let t=e.curr;e.last;this.ryw__moneyNum.value=String(t)}}!function(e){e[e.Normal=0]="Normal",e[e.NoLoopAd=1]="NoLoopAd",e[e.NoBannerAd=2]="NoBannerAd"}(_||(_={}));class qe extends Pe{constructor(){super(...arguments),this.ryw__centerZone=null}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5?W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75):(this.ryw__centerZone.top=this.ryw__centerZone.top-200,W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75))}ryw_openView(e){super.ryw_openView(e)}onStart(){super.onStart()}ryw_addEvent(){super.ryw_addEvent()}ryw_removeEvent(){super.ryw_removeEvent()}}class He extends Pe{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__backBtn=null,this.ryw__nextBtn=null,this.ryw__clickTag=!1,this.ryw__clickTimingTag=!1,this.ryw__banner=null}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__backBtn=this.ryw__centerZone.getChildByName("BackBtn"),this.ryw__nextBtn=this.ryw__centerZone.getChildByName("NextBtn")}onStart(){super.onStart()}onEnable(){super.onEnable(),w.ryw_instance.ryw_regEvemt(t.InsertVideoEnd,this,this.onInsertVideoEnd)}onInsertVideoEnd(){var e=this;k.ryw_instance.ryw_openView(r.GameView,null,t=>{t.owner.zOrder=1,e.ryw_closeView()}),G.ryw_instance.ryw_playBGM("bg"),M.CallNativeFunc("loadNextAd")}ryw_addEvent(){super.ryw_addEvent(),this.ryw__backBtn.on(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__nextBtn.on(Laya.Event.CLICK,this,this.ryw_onNextBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__backBtn.off(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__nextBtn.off(Laya.Event.CLICK,this,this.ryw_onNextBtn)}ryw_onBackBtn(){}ryw_onNextBtn(){var e=Math.random();if(console.log("随机数值 ==========="+e),(Laya.Browser.onAndroid||Laya.Browser.onIOS)&&e>.6)M.CallNativeFunc("showInsertVideo"),M.NowVideoType="insertAd",G.ryw_instance.ryw_stopBGM();else{var t=this;k.ryw_instance.ryw_openView(r.GameView,null,e=>{e.owner.zOrder=1,t.ryw_closeView()})}}ryw_BannerUp(){}ryw_BtnUp(){this.ryw__clickTag=!0,this.ryw__backBtn.y=720,this.ryw__nextBtn.y=720}onDestroy(){}ryw_onHistoryBtn(){}}class Qe extends Pe{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__backBtn=null,this.ryw__continueBtn=null,this.ryw__clickTag=!1,this.ryw__clickTimingTag=!1}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),this.ryw__backBtn=this.ryw__centerZone.getChildByName("BackBtn"),this.ryw__continueBtn=this.ryw__centerZone.getChildByName("ContinueBtn")}onStart(){super.onStart()}onEnable(){super.onEnable(),w.ryw_instance.ryw_regEvemt(t.InsertVideoEnd,this,this.onInsertVideoEnd)}onInsertVideoEnd(){var e=this;k.ryw_instance.ryw_openView(r.GameView,null,t=>{t.owner.zOrder=1,e.ryw_closeView()}),G.ryw_instance.ryw_playBGM("bg"),M.CallNativeFunc("loadNextAd")}ryw_addEvent(){super.ryw_addEvent(),this.ryw__backBtn.on(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__continueBtn.on(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__backBtn.off(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__continueBtn.off(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ryw_onBackBtn(){}ryw_onContinueBtn(){var e=Math.random();if(console.log("随机数值 ==========="+e),(Laya.Browser.onAndroid||Laya.Browser.onIOS)&&e>.6)M.CallNativeFunc("showInsertVideo"),M.NowVideoType="insertAd",G.ryw_instance.ryw_stopBGM();else{var t=this;k.ryw_instance.ryw_openView(r.GameView,null,e=>{e.owner.zOrder=1,t.ryw_closeView()})}}ryw_BannerUp(){}ryw_BtnUp(){this.ryw__clickTag=!0,this.ryw__backBtn.y=720,this.ryw__continueBtn.y=720}onDestroy(){}ryw_onHistoryBtn(){}}class Fe extends Pe{constructor(){super(...arguments),this.ryw__continueBtn=null,this.ryw__krqVLoopAd=null}onAwake(){super.onAwake(),this.ryw__krqVLoopAd=this.ryw_View.getChildByName("KRQ_VLoopAd").getComponent(F),this.ryw__krqVLoopAd.ryw_useMovePause=!1,this.ryw__continueBtn=this.ryw__krqVLoopAd.ryw_Sprite.getChildByName("ContinueBtn"),this.ryw__continueBtn.visible=!1;let e=this;Laya.timer.once(1e3*C.ryw_getInstance().ryw_getAppSwitchData().ryw_continueBtnDelayTime,this,()=>{e.ryw__continueBtn.visible=!0})}onStart(){super.onStart()}ryw_addEvent(){super.ryw_addEvent(),this.ryw__continueBtn.on(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__continueBtn.off(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ryw_onContinueBtn(){}}class ze extends Laya.Script{onAwake(){var e=Laya.stage.width/ze.baseWidth;this.owner.scale(e,e)}}ze.baseWidth=750,ze.baseHeight=1334;class Ke extends Pe{constructor(){super(...arguments),this._closeBtn=null,this._krqVLoopAd=null,this._KRQ_VLoopAd=null,this._clickTag=!1,this._clickTimingTag=!1,this._banner=null}onAwake(){super.onAwake(),this._krqVLoopAd=this.ryw_View.getChildByName("KRQ_VLoopAd").getComponent(F),this._closeBtn=this.ryw_View.getChildByName("CloseBtn"),this._KRQ_VLoopAd=this.ryw_View.getChildByName("KRQ_VLoopAd"),W.ryw_isIphoneX()&&(this._KRQ_VLoopAd.top=this._KRQ_VLoopAd.top+75)}onStart(){if(this._krqVLoopAd.ryw_AdPosID=O.ryw_MoreGameLocationID,super.onStart(),A.ryw_WudianFlag){var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.BannerUp),Laya.timer.once(1e3*e,this,this.BtnUp)}}ryw_addEvent(){super.ryw_addEvent(),this._closeBtn.on(Laya.Event.CLICK,this,this.onCloseBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this._closeBtn.off(Laya.Event.CLICK,this,this.onCloseBtn)}BannerUp(){let e=this;E.ryw_getBanner(t=>{null!=e._banner&&e._banner.ryw_hide(),e._banner=t,null!=e._banner&&e._banner.ryw_show(),this.isShowHistoryBtn&&(e.ryw_HistoryBtn.visible=!0)})}BtnUp(){this._clickTag=!0,this._closeBtn.bottom=270}onCloseBtn(){if(this._clickTag||!A.ryw_WudianFlag)this.ryw_closeView();else{if(!this._clickTimingTag){this._clickTimingTag=!0;var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.BannerUp),Laya.timer.once(1e3*e,this,this.BtnUp)}}}onDestroy(){null!=this._banner&&this._banner.ryw_hide(),this._banner=null}onHistoryBtn(){let e=this;k.ryw_instance.ryw_openView(r.ryw_MiniGameView,null,t=>{e.ryw_hide(),null!=e._banner&&e._banner.ryw_hide(),t.ryw_onCloseEvent=(()=>{null==e.ryw_View||e.ryw_View.destroyed||(e.ryw_show(),null!=e._banner&&e._banner.ryw_show())})})}}class We extends Pe{constructor(){super(...arguments),this.ryw__continueBtn=null,this.ryw__krqVLoopAd=null,this.ryw__KRQ_VLoopAd=null,this._isCanClose=!1,this._banner=null,this._waitBanner=!1}onAwake(){super.onAwake(),this.ryw__krqVLoopAd=this.ryw_View.getChildByName("KRQ_VLoopAd").getComponent(F),this.ryw__krqVLoopAd.ryw_useLocalRandom=!0,this.ryw__krqVLoopAd.ryw_useRandom=!1,this.ryw__krqVLoopAd.ryw_useMovePause=!1,this.ryw__krqVLoopAd.ryw_sortDatas=this.ryw_sortDatas,this.ryw__continueBtn=this.ryw_View.getChildByName("ContinueBtn"),this.ryw__continueBtn.visible=!1;let e=this;A.ryw_WudianFlag&&1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_continueBanner?Laya.timer.once(1e3*C.ryw_getInstance().ryw_getAppSwitchData().ryw_continueBtnDelayTime,e,()=>{e.ryw__continueBtn.visible=!0,e._waitBanner=!0}):Laya.timer.once(1e3*C.ryw_getInstance().ryw_getAppSwitchData().ryw_continueBtnDelayTime,e,()=>{e.ryw__continueBtn.visible=!0,e._isCanClose=!0,e._waitBanner=!1}),this.ryw__KRQ_VLoopAd=this.ryw_View.getChildByName("KRQ_VLoopAd"),W.ryw_isIphoneX()&&(this.ryw__KRQ_VLoopAd.top=this.ryw__KRQ_VLoopAd.top+75)}onStart(){this.ryw__krqVLoopAd.ryw_AdPosID=O.ryw_MoreGameLocationID,super.onStart()}ryw_addEvent(){super.ryw_addEvent(),this.ryw__continueBtn.on(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__continueBtn.off(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ShowBanner(){let e=this;E.ryw_getBanner(t=>{null!=e._banner&&e._banner.ryw_hide(),e._banner=t,null!=e._banner?e._banner.ryw_show():this._isCanClose=!0,this.isShowHistoryBtn&&(e.ryw_HistoryBtn.visible=!0)})}onDestroy(){null!=this._banner&&this._banner.ryw_hide(),this._banner=null}ryw_onContinueBtn(){let e=this;if(this._waitBanner)return Laya.timer.once(1e3*C.ryw_getInstance().ryw_getAppSwitchData().ryw_continueBannerShowTime,e,()=>{e.ShowBanner(),Laya.timer.once(1e3*C.ryw_getInstance().ryw_getAppSwitchData().ryw_continueBannerHideTime,e,()=>{e._isCanClose=!0,null!=e._banner&&e._banner.ryw_hide(),e._banner=null})}),void(this._waitBanner=!1);if(!this._isCanClose)return;let t=()=>{let t=()=>{k.ryw_instance.ryw_openView(r.GameView,null,t=>{t.owner.zOrder=1,e.ryw_closeView()})};S.tryShowWXCrazyClick("下次努力",t,()=>{e.ryw_closeView()},()=>{t()})};k.ryw_instance.tryShowPopAd(e=>{null!=e?e.ryw_onCloseEvent=(()=>{t()}):t()})}ryw_sortDatas(e){if(null==e||0==e.length)return[];let t={},r=new Array;for(let i=0;i<e.length;++i){let n=e[i];null==t[n.appid]?(t[n.appid]=new Array,t[n.appid].push(n),r.push(n.appid)):t[n.appid].push(n)}for(let e=0;e<r.length;++e){let t=r[e],i=Math.floor(Math.random()*r.length),n=r[i];r[i]=t,r[e]=n}for(let e=0;e<r.length;++e){let i=t[r[e]];for(let e=0;e<i.length;++e){let t=i[e],r=Math.floor(Math.random()*i.length),n=i[r];i[r]=t,i[e]=n}}let i=new Array,n=[];for(;r.length>0;){let e=!0;for(let a=0;a<r.length;++a){let s=r[a],o=!0;for(let e=0;e<n.length;++e){if(n[e]==s){o=!1;break}}if(o){e=!1;let o=t[s].shift();if(i.push(o),n.push(s),n.length>3&&n.shift(),t[s].length<=0){r.splice(a,1),--a;continue}}}if(e){for(let e=0;e<r.length;++e){let a=r[e],s=!0,o=t[a];n.splice(0);for(let e=0;e<o.length;++e){let t=o[e];for(let e=0;e<i.length;++e){n.push(null==i[e-2]?null:i[e-2].appid),n.push(null==i[e-1]?null:i[e-1].appid),n.push(null==i[e]?null:i[e].appid),n.push(null==i[e+1]?null:i[e+1].appid),n.push(null==i[e+2]?null:i[e+2].appid);for(let e=0;e<n.length;++e){let t=n[e];if(null!=t&&t==a){s=!1;break}}if(s&&null!=t){let r=i.slice(0,e+1),n=i.slice(e+1,i.length);(i=r).push(t);for(let e=0;e<n.length;++e)i.push(n[e])}}}}break}for(let e=0;e<r.length;++e){let t=r[e],i=Math.floor(Math.random()*r.length),n=r[i];r[i]=t,r[e]=n}}return i}}class Xe extends se{constructor(){super(...arguments),this.ryw__clickBar=null,this.ryw__totalClickTimer=15,this.ryw__needClickTime=10,this.ryw__bannerClickTime=Math.floor(5*Math.random())+2}onAwake(){this.ryw__click_Btn=this.owner.getChildByName("Click_Btn"),this.ryw__click_Btn.on(Laya.Event.CLICK,this,this.ryw_ButtonClicked),this.ryw__arrow_Img=this.ryw__click_Btn.getChildByName("Arrow_Img"),this.ryw__getPrize_View=this.owner.getChildByName("GetPrize_View"),this.ryw__prizeCount_Text=this.ryw__getPrize_View.getChildByName("PrizeCount_Text"),this.ryw__confirm_Btn=this.ryw__getPrize_View.getChildByName("Confirm_Btn"),this.ryw__getPrize_View.visible=!1,this.ryw__clickBar=this.owner.getChildByName("ClickBar").getChildByName("ClickBar"),this.ryw__clickBarOriginalWidth=this.ryw__clickBar.width,this.ryw__clickBar.width=0,this.ryw__clickTime=0,this.ryw__totalClickTime=0;let e=this;Laya.loader.load("ClickGetPrize/quanji.png",Laya.Handler.create(this,t=>{Laya.loader.load("ClickGetPrize/quanji.sk",Laya.Handler.create(this,r=>{console.log("texture",t),console.log("bytes",r);let i=new Laya.Templet;i.parseData(t,r),e.ryw_drgon=i.buildArmature(),e.owner.addChild(e.ryw_drgon),e.ryw_drgon.x=375,e.ryw_drgon.y=610,e.ryw_drgon.scaleX=2,e.ryw_drgon.scaleY=2,e.ryw_drgon.parent.setChildIndex(e.ryw_drgon,1),e.ryw_drgon.play(0,!0),console.log("quanji 加载完成!!!!",i)}),Laya.Handler.create(this,()=>{}),"",0,!1,"",!0)}),Laya.Handler.create(this,()=>{}),"",0,!1,"",!0)}ryw_addEvent(){super.ryw_addEvent(),Laya.stage.on(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)}ryw_removeEvent(){super.ryw_removeEvent(),Laya.stage.off(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)}onUpdate(){if(this.ryw__arrowUp?(this.ryw__arrow_Img.top+=Laya.timer.delta/5,this.ryw__arrow_Img.top>-140&&(this.ryw__arrowUp=!1)):(this.ryw__arrow_Img.top-=Laya.timer.delta/5,this.ryw__arrow_Img.top<-180&&(this.ryw__arrowUp=!0)),!this.ryw__bannerClicked){let e=2+this.ryw__clickBar.width/this.ryw__clickBarOriginalWidth*4;this.ryw__clickBar.width>=e&&(this.ryw__clickBar.width-=e),this.ryw__clickBar.width/this.ryw__clickBarOriginalWidth+.1<this.ryw__clickTime/this.ryw__needClickTime&&this.ryw__clickTime--}}ryw_openView(e){this.ryw__compeletFunction=e.Complete,this.ryw__prizeCount=e.PrizeCount,super.ryw_openView(e)}ryw_OpenPrizeWindow(){let e=this;this.ryw__prizeCount_Text.text=this.ryw__prizeCount.toString(),this.ryw__getPrize_View.visible=!0,this.ryw__confirm_Btn.once(Laya.Event.CLICK,this,function(){N.hide(),e.ryw__compeletFunction&&e.ryw__compeletFunction(),e.ryw_closeView()})}ryw_ShowBanner(){1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_kuangdianBanner&&c.ryw_Versions==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_qqversions&&N.show()}ryw_ButtonClicked(){if(this.ryw__clickTime++,this.ryw__totalClickTime++,null!=this.ryw_drgon&&(this.ryw_drgon.play(1,!1),this.ryw_drgon.once(Laya.Event.STOPPED,this,()=>{this.ryw_drgon.play(0,!0)})),this.ryw__clickTime>this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime),this.ryw__clickTime>=this.ryw__bannerClickTime){if(this.ryw__clickTime>=this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime-1),this.ryw__bannerClicked)return;this.ryw__bannerClicked=!0,this.ryw_ShowBanner(),Laya.timer.once(2e3,this,function(){this.ryw_BannerClicked()})}else this.ryw__totalClickTime>this.ryw__totalClickTimer&&(this.ryw_ShowBanner(),this.ryw_BannerClicked());let e=this.ryw__clickTime/this.ryw__needClickTime*this.ryw__clickBarOriginalWidth;this.ryw__clickBar.width=e}ryw_BannerClicked(){w.ryw_instance.ryw_dispatch(t.ryw_AD_WudianBanner_Hide),this.ryw__bannerClicked=!0,this.ryw__clickTime=this.ryw__needClickTime,this.ryw__clickBar.width=this.ryw__clickBarOriginalWidth,this.ryw__click_Btn.visible=!1,this.ryw_OpenPrizeWindow()}onDestroy(){1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_kuangdianBanner&&c.ryw_Versions==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_qqversions&&N.hide()}onFocusChange(){null!=this.ryw_drgon&&this.ryw_drgon.play(0,!0)}}class je extends se{constructor(){super(...arguments),this.ryw__clickBar=null,this.ryw__totalClickTimer=15,this.ryw__needClickTime=10,this.ryw__bannerClickTime=Math.floor(5*Math.random())+2,this.ryw__clickBtn=null}onAwake(){this.ryw__getPrize_View=this.owner.getChildByName("GetPrize_View"),this.ryw__prizeCount_Text=this.ryw__getPrize_View.getChildByName("PrizeCount_Text"),this.ryw__confirm_Btn=this.ryw__getPrize_View.getChildByName("Confirm_Btn"),this.ryw__getPrize_View.visible=!1,this.ryw__clickBar=this.owner.getChildByName("ClickBar").getChildByName("ClickBar"),this.ryw__clickBarOriginalWidth=this.ryw__clickBar.width,this.ryw__clickBar.width=0,this.ryw__clickTime=0,this.ryw__totalClickTime=0;let e=this;Laya.loader.load("ClickGetPrize/quanji.png",Laya.Handler.create(e,t=>{Laya.loader.load("ClickGetPrize/quanji.sk",Laya.Handler.create(e,r=>{let i=new Laya.Templet;i.parseData(t,r),e.ryw_drgon=i.buildArmature(),e.owner.addChild(e.ryw_drgon),e.ryw_drgon.x=375,e.ryw_drgon.y=610,e.ryw_drgon.scaleX=2,e.ryw_drgon.scaleY=2,e.ryw_drgon.parent.setChildIndex(e.ryw_drgon,1),e.ryw_drgon.play(0,!0),console.log("quanji 加载完成!!!!",i)}),Laya.Handler.create(e,()=>{}),"",0,!1,"",!0)}),Laya.Handler.create(e,()=>{}),"",0,!1,"",!0),Laya.loader.load("ClickGetPrize/NewProject.png",Laya.Handler.create(e,t=>{Laya.loader.load("ClickGetPrize/NewProject.sk",Laya.Handler.create(e,r=>{let i=new Laya.Templet;i.parseData(t,r);let n=i.buildArmature();e.owner.addChild(n),n.x=360,n.y=617,n.parent.setChildIndex(n,2),n.play(0,!0),e.ryw__clickBtn=new Laya.Clip,e.owner.addChild(e.ryw__clickBtn),e.ryw__clickBtn.x=260,e.ryw__clickBtn.y=517,e.ryw__clickBtn.width=200,e.ryw__clickBtn.height=200,e.ryw__clickBtn.parent.setChildIndex(e.ryw__clickBtn,3),e.ryw__clickBtn.on(Laya.Event.CLICK,e,e.ButtonClicked),console.log("手指动画 加载完成!!!!",i)}),Laya.Handler.create(e,()=>{}),"",0,!1,"",!0)}),Laya.Handler.create(e,()=>{}),"",0,!1,"",!0)}ryw_addEvent(){super.ryw_addEvent(),Laya.stage.on(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)}ryw_removeEvent(){super.ryw_removeEvent(),Laya.stage.off(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)}onUpdate(){if(!this.ryw__bannerClicked){let e=2+this.ryw__clickBar.width/this.ryw__clickBarOriginalWidth*4;this.ryw__clickBar.width>=e&&(this.ryw__clickBar.width-=e),this.ryw__clickBar.width/this.ryw__clickBarOriginalWidth+.1<this.ryw__clickTime/this.ryw__needClickTime&&this.ryw__clickTime--}}ryw_openView(e){this.ryw__compeletFunction=e.Complete,this.ryw__prizeCount=e.PrizeCount,super.ryw_openView(e)}ryw_OpenPrizeWindow(){let e=this;this.ryw__prizeCount_Text.text=this.ryw__prizeCount.toString(),this.ryw__getPrize_View.visible=!0,this.ryw__confirm_Btn.once(Laya.Event.CLICK,this,function(){e.ryw__compeletFunction&&e.ryw__compeletFunction(),e.ryw_closeView()})}ryw_ShowBanner(){1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_kuangdianBox&&c.ryw_Versions==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_qqversions&&f.ryw_showAppBoxAd(()=>{})}ButtonClicked(){if(this.ryw__clickTime++,this.ryw__totalClickTime++,null!=this.ryw_drgon&&(this.ryw_drgon.play(1,!1),this.ryw_drgon.once(Laya.Event.STOPPED,this,()=>{this.ryw_drgon.play(0,!0)})),this.ryw__clickTime>this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime),this.ryw__clickTime>=this.ryw__bannerClickTime){if(this.ryw__clickTime>=this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime-1),this.ryw__bannerClicked)return;this.ryw__bannerClicked=!0,this.ryw_ShowBanner(),Laya.timer.once(2e3,this,function(){this.ryw_BannerClicked()})}else this.ryw__totalClickTime>this.ryw__totalClickTimer&&(this.ryw_ShowBanner(),this.ryw_BannerClicked());let e=this.ryw__clickTime/this.ryw__needClickTime*this.ryw__clickBarOriginalWidth;this.ryw__clickBar.width=e}ryw_BannerClicked(){w.ryw_instance.ryw_dispatch(t.ryw_AD_WudianBanner_Hide),this.ryw__bannerClicked=!0,this.ryw__clickTime=this.ryw__needClickTime,this.ryw__clickBar.width=this.ryw__clickBarOriginalWidth,this.ryw__clickBtn.visible=!1,this.ryw_OpenPrizeWindow()}onDestroy(){}onFocusChange(){null!=this.ryw_drgon&&this.ryw_drgon.play(0,!0)}}class Ye extends se{onAwake(){}ryw_addEvent(){super.ryw_addEvent()}ryw_removeEvent(){super.ryw_removeEvent()}}class Je extends Ye{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__backBtn=null,this.ryw__continueBtn=null,this.ryw__clickTag=!1,this.ryw__clickTimingTag=!1}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__backBtn=this.ryw__centerZone.getChildByName("BackBtn"),this.ryw__continueBtn=this.ryw__centerZone.getChildByName("ContinueBtn")}onStart(){super.onStart();let e=this;if(A.ryw_WudianFlag&&c.ryw_Versions==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_qqversions){if(1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_weiyi){let e=this.ryw__centerZone.height-150;this.ryw__backBtn.y=e,this.ryw__continueBtn.y=e}let t=function(){e.ryw__clickTimingTag=!0;var t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,r=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*r,e,e.ryw_BannerUp),Laya.timer.once(1e3*t,e,e.ryw_BtnUp)};1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_box?f.ryw_showAppBoxAd(()=>{t()},()=>{t()}):t()}}ryw_addEvent(){super.ryw_addEvent(),this.ryw__backBtn.on(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__continueBtn.on(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__backBtn.off(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__continueBtn.off(Laya.Event.CLICK,this,this.ryw_onContinueBtn)}ryw_onBackBtn(){if(this.ryw__clickTag||!A.ryw_WudianFlag);else{if(!this.ryw__clickTimingTag){this.ryw__clickTimingTag=!0;var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.ryw_BannerUp),Laya.timer.once(1e3*e,this,this.ryw_BtnUp)}}}ryw_onContinueBtn(){if(this.ryw__clickTag||!A.ryw_WudianFlag);else{if(!this.ryw__clickTimingTag){this.ryw__clickTimingTag=!0;var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.ryw_BannerUp),Laya.timer.once(1e3*e,this,this.ryw_BtnUp)}}}ryw_BannerUp(){}ryw_BtnUp(){this.ryw__clickTag=!0,this.ryw__backBtn.y=720,this.ryw__continueBtn.y=720}onDestroy(){}}class $e extends Ye{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__backBtn=null,this.ryw__nextBtn=null,this.ryw__clickTag=!1,this.ryw__clickTimingTag=!1}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__backBtn=this.ryw__centerZone.getChildByName("BackBtn"),this.ryw__nextBtn=this.ryw__centerZone.getChildByName("NextBtn")}onStart(){super.onStart();let e=this;if(A.ryw_WudianFlag&&c.ryw_Versions==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_qqversions){if(1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_weiyi){let e=this.ryw__centerZone.height-150;this.ryw__backBtn.y=e,this.ryw__nextBtn.y=e}let t=function(){e.ryw__clickTimingTag=!0;var t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,r=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*r,e,e.ryw_BannerUp),Laya.timer.once(1e3*t,e,e.ryw_BtnUp)};1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_qqcfg.ryw_box?f.ryw_showAppBoxAd(()=>{t()},()=>{t()}):t()}}ryw_addEvent(){super.ryw_addEvent(),this.ryw__backBtn.on(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__nextBtn.on(Laya.Event.CLICK,this,this.ryw_onNextBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__backBtn.off(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__nextBtn.off(Laya.Event.CLICK,this,this.ryw_onNextBtn)}ryw_onBackBtn(){if(this.ryw__clickTag||!A.ryw_WudianFlag);else{if(!this.ryw__clickTimingTag){this.ryw__clickTimingTag=!0;var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.ryw_BannerUp),Laya.timer.once(1e3*e,this,this.ryw_BtnUp)}}}ryw_onNextBtn(){if(this.ryw__clickTag||!A.ryw_WudianFlag);else{if(!this.ryw__clickTimingTag){this.ryw__clickTimingTag=!0;var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.ryw_BannerUp),Laya.timer.once(1e3*e,this,this.ryw_BtnUp)}}}ryw_BannerUp(){}ryw_BtnUp(){this.ryw__clickTag=!0,this.ryw__backBtn.y=720,this.ryw__nextBtn.y=720}onDestroy(){}}class et extends Ye{constructor(){super(...arguments),this.ryw__centerZone=null}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5?W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75):(this.ryw__centerZone.top=this.ryw__centerZone.top-200,W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75))}onStart(){super.onStart()}ryw_addEvent(){super.ryw_addEvent()}ryw_removeEvent(){super.ryw_removeEvent()}}class tt extends Ye{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__startBtn=null,this.ryw__levelNum=null,this.ryw__moneyNum=null,this.ryw__moreGameBtn=null}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),this.ryw__moreGameBtn=this.ryw__centerZone.getChildByName("MoreGameBtn");Laya.stage.width,Laya.stage.height;W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__startBtn=this.ryw__centerZone.getChildByName("StartBtn"),this.ryw__levelNum=this.ryw__centerZone.getChildByName("LevelInfo").getChildByName("LevelNum"),this.ryw__moneyNum=this.ryw__centerZone.getChildByName("MoneyInfo").getChildByName("MoneyNum")}onStart(){super.onStart(),this.ryw__moneyNum.value=String(l.ryw_getMoney()),this.ryw__levelNum.value=String(l.ryw_getLeveNum())}ryw_addEvent(){super.ryw_addEvent(),this.ryw__startBtn.on(Laya.Event.CLICK,this,this.ryw_onStartBtn),this.ryw__moreGameBtn.on(Laya.Event.CLICK,this,this.ryw_onMoreGameBtn),w.ryw_instance.ryw_regEvemt(t.ryw_Game_OnUserMoneyChange,this,this.ryw_onUserMoneyChange)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__startBtn.off(Laya.Event.CLICK,this,this.ryw_onStartBtn),this.ryw__moreGameBtn.off(Laya.Event.CLICK,this,this.ryw_onMoreGameBtn),w.ryw_instance.ryw_removeEvent(t.ryw_Game_OnUserMoneyChange,this,this.ryw_onUserMoneyChange)}ryw_onStartBtn(){}ryw_onMoreGameBtn(){f.ryw_showAppBoxAd(()=>{})}ryw_onUserMoneyChange(e){let t=e.curr;e.last;this.ryw__moneyNum.value=String(t)}}class rt extends se{constructor(){super(...arguments),this.ryw__clickBar=null,this.ryw__totalClickTimer=15,this.ryw__needClickTime=10,this.ryw__bannerClickTime=Math.floor(5*Math.random())+2}onAwake(){this.ryw__click_Btn=this.owner.getChildByName("Click_Btn"),this.ryw__click_Btn.on(Laya.Event.CLICK,this,this.ryw_ButtonClicked),this.ryw__arrow_Img=this.ryw__click_Btn.getChildByName("Arrow_Img"),this.ryw__getPrize_View=this.owner.getChildByName("GetPrize_View"),this.ryw__prizeCount_Text=this.ryw__getPrize_View.getChildByName("PrizeCount_Text"),this.ryw__confirm_Btn=this.ryw__getPrize_View.getChildByName("Confirm_Btn"),this.ryw__getPrize_View.visible=!1,this.ryw__clickBar=this.owner.getChildByName("ClickBar").getChildByName("ClickBar"),this.ryw__clickBarOriginalWidth=this.ryw__clickBar.width,this.ryw__clickBar.width=0,this.ryw__clickTime=0,this.ryw__totalClickTime=0;let e=this;Laya.loader.load("ClickGetPrize/quanji.png",Laya.Handler.create(this,t=>{Laya.loader.load("ClickGetPrize/quanji.sk",Laya.Handler.create(this,r=>{console.log("texture",t),console.log("bytes",r);let i=new Laya.Templet;i.parseData(t,r),e.ryw_drgon=i.buildArmature(),e.owner.addChild(e.ryw_drgon),e.ryw_drgon.x=375,e.ryw_drgon.y=610,e.ryw_drgon.scaleX=2,e.ryw_drgon.scaleY=2,e.ryw_drgon.parent.setChildIndex(e.ryw_drgon,1),e.ryw_drgon.play(0,!0),console.log("quanji 加载完成!!!!",i)}),Laya.Handler.create(this,()=>{}),"",0,!1,"",!0)}),Laya.Handler.create(this,()=>{}),"",0,!1,"",!0)}ryw_addEvent(){super.ryw_addEvent(),Laya.stage.on(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)}ryw_removeEvent(){super.ryw_removeEvent(),Laya.stage.off(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)}onUpdate(){if(this.ryw__arrowUp?(this.ryw__arrow_Img.top+=Laya.timer.delta/5,this.ryw__arrow_Img.top>-140&&(this.ryw__arrowUp=!1)):(this.ryw__arrow_Img.top-=Laya.timer.delta/5,this.ryw__arrow_Img.top<-180&&(this.ryw__arrowUp=!0)),!this.ryw__bannerClicked){let e=2+this.ryw__clickBar.width/this.ryw__clickBarOriginalWidth*4;this.ryw__clickBar.width>=e&&(this.ryw__clickBar.width-=e),this.ryw__clickBar.width/this.ryw__clickBarOriginalWidth+.1<this.ryw__clickTime/this.ryw__needClickTime&&this.ryw__clickTime--}}ryw_openView(e){this.ryw__compeletFunction=e.Complete,this.ryw__prizeCount=e.PrizeCount,super.ryw_openView(e)}ryw_OpenPrizeWindow(){let e=this;this.ryw__prizeCount_Text.text=this.ryw__prizeCount.toString(),this.ryw__getPrize_View.visible=!0,this.ryw__confirm_Btn.once(Laya.Event.CLICK,this,function(){U.ryw_hideBanner(),e.ryw__compeletFunction&&e.ryw__compeletFunction(),e.ryw_closeView()})}ryw_ShowBanner(){1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_ttcfg.ryw_kuangdianBanner&&U.ryw_showBanner()}ryw_ButtonClicked(){if(this.ryw__clickTime++,this.ryw__totalClickTime++,null!=this.ryw_drgon&&(this.ryw_drgon.play(1,!1),this.ryw_drgon.once(Laya.Event.STOPPED,this,()=>{this.ryw_drgon.play(0,!0)})),this.ryw__clickTime>this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime),this.ryw__clickTime>=this.ryw__bannerClickTime){if(this.ryw__clickTime>=this.ryw__needClickTime&&(this.ryw__clickTime=this.ryw__needClickTime-1),this.ryw__bannerClicked)return;this.ryw__bannerClicked=!0,this.ryw_ShowBanner(),Laya.timer.once(2e3,this,function(){this.ryw_BannerClicked()})}else this.ryw__totalClickTime>this.ryw__totalClickTimer&&(this.ryw_ShowBanner(),this.ryw_BannerClicked());let e=this.ryw__clickTime/this.ryw__needClickTime*this.ryw__clickBarOriginalWidth;this.ryw__clickBar.width=e}ryw_BannerClicked(){w.ryw_instance.ryw_dispatch(t.ryw_AD_WudianBanner_Hide),this.ryw__bannerClicked=!0,this.ryw__clickTime=this.ryw__needClickTime,this.ryw__clickBar.width=this.ryw__clickBarOriginalWidth,this.ryw__click_Btn.visible=!1,this.ryw_OpenPrizeWindow()}onDestroy(){U.ryw_hideBanner()}onFocusChange(){null!=this.ryw_drgon&&this.ryw_drgon.play(0,!0)}}class it extends se{constructor(){super(...arguments),this._topZone=null}get TopZone(){return null==this._topZone&&(this._topZone=this.ryw_View.getChildByName("TopZone")),this._topZone}onAwake(){this._topZone=this.ryw_View.getChildByName("TopZone"),null!=this._topZone&&W.ryw_isIphoneX()&&(this._topZone.top=this._topZone.top+75)}ryw_addEvent(){super.ryw_addEvent()}ryw_removeEvent(){super.ryw_removeEvent()}}class nt extends it{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__clickTag=!1,this.ryw__clickTimingTag=!1,this.ryw__moreGameBtn=null,this.ryw__shareBtn=null,this.ryw__backBtn=null,this.ryw__okBtn=null,this.ryw__videoBtn=null}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__moreGameBtn=this.ryw__centerZone.getChildByName("MoreGameBtn"),this.ryw__shareBtn=this.ryw__centerZone.getChildByName("ShareBtn"),this.ryw__backBtn=this.ryw__centerZone.getChildByName("BackBtn"),this.ryw__okBtn=this.ryw__centerZone.getChildByName("OkBtn"),this.ryw__videoBtn=this.ryw__centerZone.getChildByName("VideoBtn"),this.ryw__moreGameBtn.visible=1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_ttcfg.ryw_moreGameSwitch}onStart(){if(super.onStart(),A.ryw_WudianFlag){let e=this.ryw__centerZone.height-150;this.ryw__backBtn.y=e,this.ryw__okBtn.y=e,this.ryw__videoBtn.y=e}var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.ryw_BannerUp),Laya.timer.once(1e3*e,this,this.ryw_BtnUp),1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_ttcfg.ryw_luping&&U.ryw_shareRecord(()=>{},()=>{})}ryw_addEvent(){super.ryw_addEvent(),this.ryw__backBtn.on(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__okBtn.on(Laya.Event.CLICK,this,this.ryw_onOkBtn),this.ryw__videoBtn.on(Laya.Event.CLICK,this,this.ryw_onOkBtn),this.ryw__moreGameBtn.on(Laya.Event.CLICK,this,this.ryw_onMoreGameBtn),this.ryw__shareBtn.on(Laya.Event.CLICK,this,this.ryw_onShareBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__backBtn.off(Laya.Event.CLICK,this,this.ryw_onBackBtn),this.ryw__okBtn.off(Laya.Event.CLICK,this,this.ryw_onOkBtn),this.ryw__videoBtn.off(Laya.Event.CLICK,this,this.ryw_onOkBtn),this.ryw__moreGameBtn.off(Laya.Event.CLICK,this,this.ryw_onMoreGameBtn),this.ryw__shareBtn.off(Laya.Event.CLICK,this,this.ryw_onShareBtn)}ryw_onBackBtn(){if(this.ryw__clickTag||!A.ryw_WudianFlag);else{if(!this.ryw__clickTimingTag){this.ryw__clickTimingTag=!0;var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.ryw_BannerUp),Laya.timer.once(1e3*e,this,this.ryw_BtnUp)}}}ryw_onOkBtn(){if(this.ryw__clickTag||!A.ryw_WudianFlag);else{if(!this.ryw__clickTimingTag){this.ryw__clickTimingTag=!0;var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.ryw_BannerUp),Laya.timer.once(1e3*e,this,this.ryw_BtnUp)}}}ryw_onVideoBtn(){if(this.ryw__clickTag||!A.ryw_WudianFlag)U.ryw_shareRecord(()=>{},()=>{});else{if(!this.ryw__clickTimingTag){this.ryw__clickTimingTag=!0;var e=C.ryw_getInstance().ryw_getAppSwitchData().ryw_btnMoveTimer,t=C.ryw_getInstance().ryw_getAppSwitchData().ryw_bannerMoveTimer;Laya.timer.once(1e3*t,this,this.ryw_BannerUp),Laya.timer.once(1e3*e,this,this.ryw_BtnUp)}}}ryw_BannerUp(){U.ryw_showBanner()}ryw_BtnUp(){this.ryw__clickTag=!0,this.ryw__backBtn.y=720,this.ryw__okBtn.y=720,this.ryw__videoBtn.y=720}ryw_onMoreGameBtn(){U.ryw_showMoreGamesModal(()=>{},()=>{})}ryw_onShareBtn(){U.ryw_share(()=>{})}onDestroy(){U.ryw_hideBanner()}}class at extends nt{}class st extends it{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__startBtn=null,this.ryw__levelNum=null,this.ryw__moneyNum=null,this.ryw__moreGameBtn=null,this.ryw__shareBtn=null}onAwake(){super.onAwake(),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),this.ryw__moreGameBtn=this.ryw__centerZone.getChildByName("MoreGameBtn"),this.ryw__shareBtn=this.ryw__centerZone.getChildByName("ShareBtn"),Laya.stage.width/Laya.stage.height<.5?W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75):(this.ryw__centerZone.top=this.ryw__centerZone.top-200,W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75)),this.ryw__startBtn=this.ryw__centerZone.getChildByName("StartBtn"),this.ryw__levelNum=this.ryw__centerZone.getChildByName("LevelInfo").getChildByName("LevelNum"),this.ryw__moneyNum=this.ryw__centerZone.getChildByName("MoneyInfo").getChildByName("MoneyNum"),this.ryw__moreGameBtn.visible=1==C.ryw_getInstance().ryw_getAppSwitchData().ryw_ttcfg.ryw_moreGameSwitch}onStart(){super.onStart(),this.ryw__moneyNum.value=String(l.ryw_getMoney()),this.ryw__levelNum.value=String(l.ryw_getLeveNum())}ryw_addEvent(){super.ryw_addEvent(),this.ryw__startBtn.on(Laya.Event.CLICK,this,this.ryw_onStartBtn),w.ryw_instance.ryw_regEvemt(t.ryw_Game_OnUserMoneyChange,this,this.ryw_onUserMoneyChange),this.ryw__moreGameBtn.on(Laya.Event.CLICK,this,this.ryw_onMoreGameBtn),this.ryw__shareBtn.on(Laya.Event.CLICK,this,this.ryw_onShareBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__startBtn.off(Laya.Event.CLICK,this,this.ryw_onStartBtn),w.ryw_instance.ryw_removeEvent(t.ryw_Game_OnUserMoneyChange,this,this.ryw_onUserMoneyChange),this.ryw__moreGameBtn.off(Laya.Event.CLICK,this,this.ryw_onMoreGameBtn),this.ryw__shareBtn.off(Laya.Event.CLICK,this,this.ryw_onShareBtn)}ryw_onStartBtn(){}ryw_onMoreGameBtn(){U.ryw_showMoreGamesModal(()=>{},()=>{})}ryw_onShareBtn(){U.ryw_share(()=>{})}ryw_onUserMoneyChange(e){let t=e.curr;e.last;this.ryw__moneyNum.value=String(t)}}class ot extends Laya.Script{constructor(){super(...arguments),this.ryw__list=null,this.ryw__pageIcon=new Array,this.ryw__pageInfo=null,this.ryw__lastScrollValue=0,this.ryw__tweening=!1,this.ryw__curPage=0}get ryw_List(){return null==this.ryw__list&&(this.ryw__list=this.owner.getChildByName("List")),this.ryw__list}onAwake(){this.ryw__list=this.owner.getChildByName("List"),this.ryw__pageInfo=this.owner.getChildByName("PageInfo");for(let e=0;e<this.ryw__pageInfo.numChildren;++e){let t=this.ryw__pageInfo.getChildAt(e).getChildByName("icon");this.ryw__pageIcon.push(t)}}onUpdate(){if(!this.ryw__tweening&&this.ryw__lastScrollValue!=this.ryw__list.scrollBar.value){let e=this.ryw__list.array.length/6-1;this.ryw__lastScrollValue<this.ryw__list.scrollBar.value?(++this.ryw__curPage,this.ryw__curPage>=e&&(this.ryw__curPage=e)):(--this.ryw__curPage,this.ryw__curPage<=0&&(this.ryw__curPage=0)),this.ryw__tweening=!0;let t=this;this.ryw__list.tweenTo(6*this.ryw__curPage,500,Laya.Handler.create(this,()=>{})),Laya.timer.once(500,this,()=>{t.ryw__tweening=!1,t.ryw__lastScrollValue=t.ryw__list.scrollBar.value})}}}class _t extends Laya.Script{constructor(){super(...arguments),this.ryw__root=null,this.ryw__unlockedTag=null,this.ryw__usedTag=null,this.ryw__index=-1,this.ryw__view=null}onAwake(){this.ryw__root=this.owner.getChildByName("Root"),this.ryw__unlockedTag=this.ryw__root.getChildByName("Unlock"),this.ryw__usedTag=this.ryw__root.getChildByName("Used")}onEnable(){this.owner.on(Laya.Event.CLICK,this,this.ryw_onBoxClick)}onDisable(){this.owner.on(Laya.Event.CLICK,this,this.ryw_onBoxClick)}ryw_setData(e,t,r,i){this.ryw__index=e,this.ryw__view=t,this.ryw__unlockedTag.visible=l.itemIsUnlocked(r.id),this.ryw__usedTag.visible=l.curUsedItem==r.id,this.ryw__root.visible=-10086!=r.id}ryw_onBoxClick(){null!=this.ryw__view&&-1!=this.ryw__index&&this.ryw__view.ryw_onBoxClick(this.ryw__index)}}class yt{constructor(){this.id=0,this.icon="",this.priceType=0,this.price=0}clone(){let e=new yt;return e.id=this.id,e.icon=this.icon,e.priceType=this.priceType,e.price=this.price,e}}class wt{constructor(){this._data=new Array}static getInstance(){return null==wt._instance&&(wt._instance=wt.load()),wt._instance}static load(){var e=new wt,t=Laya.loader.getRes(c.ryw_ResServer+"/json/storeconfig.json");if(t){for(var r=0;r<t.length;++r){var i=t[r],n=new yt;n.id=Number(i.id),n.icon=String(i.icon),n.priceType=Number(i.priceType),n.price=Number(i.price),e._data.push(n)}return e}}getStoreDatas(){let e=new Array;for(let t=0;t<this._data.length;++t)e.push(this._data[t].clone());return e}}class lt extends it{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__is3d=!1,this.ryw__closeBtn=null,this.ryw__displayZone=null,this.ryw__displayIcon=null,this.ryw__storeListZone=null,this.ryw__storeList=null,this.ryw__priceUnlockBtn=null,this.ryw__videoUnlockBtn=null,this.ryw__useBtn=null,this.ryw__usedTag=null,this.ryw__curSelected=0}onAwake(){super.onAwake(),this._topZone=this.ryw_View.getChildByName("TopZone"),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5&&W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__closeBtn=this.ryw__centerZone.getChildByName("CloseBtn"),this.ryw__displayZone=this.ryw__centerZone.getChildByName("DisplayZone"),this.ryw__displayIcon=this.ryw__displayZone.getChildByName("DisplayIcon"),this.ryw__storeListZone=this.ryw__centerZone.getChildByName("StoreListZone"),this.ryw__storeList=this.ryw__storeListZone.getComponent(ot),this.ryw__storeList.ryw_List.renderHandler=Laya.Handler.create(this,this.ryw_onListRender,null,!1),this.ryw__storeList.ryw_List.hScrollBarSkin="",this.ryw__videoUnlockBtn=this.ryw__storeListZone.getChildByName("VideoUnlockBtn"),this.ryw__priceUnlockBtn=this.ryw__storeListZone.getChildByName("PriceUnlockBtn"),this.ryw__useBtn=this.ryw__storeListZone.getChildByName("UseBtn"),this.ryw__usedTag=this.ryw__useBtn.getChildByName("Used")}onStart(){super.onStart(),this.ryw__is3d&&(this.ryw__displayZone.visible=!1),this.ryw_refreshStoreList(),this.ryw__storeList.ryw_List.selectedIndex=0,this.ryw_onBoxClick(0)}ryw_addEvent(){super.ryw_addEvent(),this.ryw__closeBtn.on(Laya.Event.CLICK,this,this.ryw_onCloseBtn),this.ryw__priceUnlockBtn.on(Laya.Event.CLICK,this,this.ryw_onPriceUnlockBtn),this.ryw__videoUnlockBtn.on(Laya.Event.CLICK,this,this.ryw_onVideoUnlockBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__closeBtn.off(Laya.Event.CLICK,this,this.ryw_onCloseBtn),this.ryw__priceUnlockBtn.off(Laya.Event.CLICK,this,this.ryw_onPriceUnlockBtn),this.ryw__videoUnlockBtn.off(Laya.Event.CLICK,this,this.ryw_onVideoUnlockBtn)}ryw_onCloseBtn(){this.ryw_closeView()}ryw_onPriceUnlockBtn(){this.ryw__storeList.ryw_List.array[this.ryw__curSelected]}ryw_onVideoUnlockBtn(){this.ryw__storeList.ryw_List.array[this.ryw__curSelected]}ryw_refreshStoreList(){let e=wt.getInstance().getStoreDatas(),t=6-e.length%6;for(let r=0;r<t;++r){let t=new yt;t.id=-10086,e.push(t)}this.ryw__storeList.ryw_List.array=e}ryw_onListRender(e,t){let r=this.ryw__storeList.ryw_List.array[t];e.getComponent(_t).ryw_setData(t,this,r,this.ryw__curSelected==t)}ryw_onBoxClick(e){this.ryw__curSelected=e;let t=this.ryw__storeList.ryw_List.array[this.ryw__curSelected];l.curUsedItem=t.id;let r=l.itemIsUnlocked(t.id);this.ryw__priceUnlockBtn.visible=0==t.priceType&&!r,this.ryw__videoUnlockBtn.visible=1==t.priceType&&!r,this.ryw__useBtn.visible=r,this.ryw__usedTag.visible=t.id==l.curUsedItem,this.ryw__storeList.ryw_List.refresh()}}class ht extends it{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__adToggle=null,this.ryw__adToggleTag=null,this.ryw__okBtn=null,this.ryw__skipBtn=null,this.ryw__skipOkTag=null,this.ryw__skipNoTag=null,this.ryw__skinAnchor=null,this.ryw__ading=!1}onAwake(){this._topZone=this.ryw_View.getChildByName("TopZone"),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5&&W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__adToggle=this.ryw__centerZone.getChildByName("AdToggle"),this.ryw__adToggleTag=this.ryw__adToggle.getChildByName("Tag"),this.ryw__okBtn=this.ryw__centerZone.getChildByName("OkBtn"),this.ryw__skipBtn=this.ryw__centerZone.getChildByName("SkipBtn"),this.ryw__skipOkTag=this.ryw__skipBtn.getChildByName("Ok"),this.ryw__skipNoTag=this.ryw__skipBtn.getChildByName("No"),this.ryw__adToggleTag.visible=0==Math.floor(2*Math.random()),this.ryw_onAdToggleStateChange(this.ryw__adToggleTag.visible),this.ryw__skinAnchor=this.ryw__centerZone.getChildByName("SkinAnchor")}ryw_addEvent(){super.ryw_addEvent(),this.ryw__okBtn.on(Laya.Event.CLICK,this,this.ryw_onOkBtn),this.ryw__adToggle.on(Laya.Event.CLICK,this,this.ryw_onAdToggle),this.ryw__skipBtn.on(Laya.Event.CLICK,this,this.ryw_onSkipText)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__okBtn.off(Laya.Event.CLICK,this,this.ryw_onOkBtn),this.ryw__adToggle.off(Laya.Event.CLICK,this,this.ryw_onAdToggle),this.ryw__skipBtn.off(Laya.Event.CLICK,this,this.ryw_onSkipText)}ryw_onOkBtn(){if(this.ryw__ading)return;this.ryw__ading=!0;let e=this;U.ryw_showRewardedVideoAd(t=>{t||(e.ryw__ading=!1)},()=>{e.ryw__ading=!1})}ryw_onAdToggle(){this.ryw__ading||(this.ryw__adToggleTag.visible=!this.ryw__adToggleTag.visible,this.ryw_onAdToggleStateChange(this.ryw__adToggleTag.visible))}ryw_onSkipText(){if(this.ryw__ading)return;this.ryw__ading=!0;let e=this;this.ryw__adToggleTag.visible&&U.ryw_showRewardedVideoAd(t=>{t||(e.ryw__ading=!1)},()=>{e.ryw__ading=!1})}ryw_onAdToggleStateChange(e){e?(this.ryw__skipOkTag.visible=!0,this.ryw__skipNoTag.visible=!1):(this.ryw__skipOkTag.visible=!1,this.ryw__skipNoTag.visible=!0)}}class ct extends it{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__signIconRoot=null,this.ryw__signIcons=[],this.ryw__signMasks=[],this.ryw__adToggle=null,this.ryw__adToggleTag=null,this.ryw__signInBtn=null,this.ryw__skipBtn=null,this.ryw__skipOkTag=null,this.ryw__skipNoTag=null,this.ryw__signedTag=null,this.ryw__signIning=!1}onAwake(){this._topZone=this.ryw_View.getChildByName("TopZone"),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5&&W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__signIconRoot=this.ryw__centerZone.getChildByName("SignIconRoot");for(let e=0;e<this.ryw__signIconRoot.numChildren;++e){let t=this.ryw__signIconRoot.getChildByName(String(e+1)),r=t.getChildByName("Ok");r.visible=!1;let i=t.getChildByName("Mask");i.visible=!0,this.ryw__signIcons.push(r),this.ryw__signMasks.push(i)}this.ryw__adToggle=this.ryw__centerZone.getChildByName("AdToggle"),this.ryw__adToggleTag=this.ryw__adToggle.getChildByName("Tag"),this.ryw__signInBtn=this.ryw__centerZone.getChildByName("SignInBtn"),this.ryw__skipBtn=this.ryw__centerZone.getChildByName("SkipBtn"),this.ryw__skipOkTag=this.ryw__skipBtn.getChildByName("Ok"),this.ryw__skipNoTag=this.ryw__skipBtn.getChildByName("No"),this.ryw__adToggleTag.visible=0==Math.floor(2*Math.random()),this.ryw_onAdToggleStateChange(this.ryw__adToggleTag.visible),this.ryw__signedTag=this.ryw__centerZone.getChildByName("SignedTag"),this.ryw__signedTag.visible=!1}onStart(){super.onStart();let e=this;g.GetSignIn(t=>{t.data.is_sign;let r=t.data.sign_day_num;e.ryw_refreshSignInState(r)},e=>{})}ryw_addEvent(){super.ryw_addEvent(),this.ryw__signInBtn.on(Laya.Event.CLICK,this,this.ryw_onSignInBtn),this.ryw__adToggle.on(Laya.Event.CLICK,this,this.ryw_onAdToggle),this.ryw__skipBtn.on(Laya.Event.CLICK,this,this.ryw_onSkipBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__signInBtn.off(Laya.Event.CLICK,this,this.ryw_onSignInBtn),this.ryw__adToggle.off(Laya.Event.CLICK,this,this.ryw_onAdToggle),this.ryw__skipBtn.off(Laya.Event.CLICK,this,this.ryw_onSkipBtn)}ryw_refreshSignInState(e){let t=e%7;if(0==e)for(let e=0;e<this.ryw__signIcons.length;++e)this.ryw__signIcons[e].visible=!1,this.ryw__signMasks[e].visible=!1;else if(0==t)for(let e=0;e<this.ryw__signIcons.length;++e)this.ryw__signIcons[e].visible=!0,this.ryw__signMasks[e].visible=!1;else for(let e=0;e<this.ryw__signIcons.length;++e)this.ryw__signIcons[e].visible=e<t,this.ryw__signMasks[e].visible=e>t}ryw_onSignInBtn(){if(this.ryw__signIning)return;this.ryw__signIning=!0;let e=this;U.ryw_showRewardedVideoAd(t=>{t?g.SignIn(t=>{let r=t.code;1==r?g.GetSignIn(t=>{t.data.is_sign;let r=t.data.sign_day_num;e.ryw_refreshSignInState(r),e.ryw__signIning=!1},t=>{e.ryw__signIning=!1}):(console.log("签到失败 ： code",r),e.ryw__signIning=!1)},()=>{e.ryw__signIning=!1}):e.ryw__signIning=!1},()=>{e.ryw__signIning=!1})}ryw_onAdToggle(){this.ryw__signIning||(this.ryw__adToggleTag.visible=!this.ryw__adToggleTag.visible,this.ryw_onAdToggleStateChange(this.ryw__adToggleTag.visible))}ryw_onSkipBtn(){if(this.ryw__signIning)return;this.ryw__signIning=!0;let e=this;this.ryw__adToggleTag.visible?U.ryw_showRewardedVideoAd(t=>{t?g.SignIn(t=>{let r=t.code;1==r?g.GetSignIn(t=>{t.data.is_sign;let r=t.data.sign_day_num;e.ryw_refreshSignInState(r),e.ryw__signIning=!1},t=>{e.ryw__signIning=!1}):(console.log("签到失败 ： code",r),e.ryw__signIning=!1)},()=>{e.ryw__signIning=!1}):e.ryw__signIning=!1},()=>{e.ryw__signIning=!1}):g.SignIn(t=>{let r=t.code;1==r?(e.ryw__signIning=!1,g.GetSignIn(t=>{t.data.is_sign;let r=t.data.sign_day_num;e.ryw_refreshSignInState(r)},e=>{})):(console.log("签到失败 ： code",r),e.ryw__signIning=!1)},()=>{e.ryw__signIning=!1})}ryw_onAdToggleStateChange(e){e?(this.ryw__skipOkTag.visible=!0,this.ryw__skipNoTag.visible=!1):(this.ryw__skipOkTag.visible=!1,this.ryw__skipNoTag.visible=!0)}}class dt extends Laya.Script{constructor(){super(...arguments),this.ryw__view=null,this.ryw__adTag=null}get ryw_AdTag(){return this.ryw__adTag}ryw_init(e){this.ryw__view=e,this.ryw__adTag=this.owner.getChildByName("AdTag")}onEnable(){this.owner.on(Laya.Event.CLICK,this,this.ryw_onSelfClick)}onDisable(){this.owner.off(Laya.Event.CLICK,this,this.ryw_onSelfClick)}ryw_onSelfClick(){null!=this.ryw__view&&this.ryw__view.onRewardBoxClick(this)}}class gt extends it{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__rewardBoxs=[],this.ryw__keysRoot=null,this.ryw__keys=[],this.ryw__keyCount=3,this.ryw__getKeyZone=null,this.ryw__adToggle=null,this.ryw__adToggleTag=null,this.ryw__getKeyBtn=null,this.ryw__skipBtn=null,this.ryw__skipOkTag=null,this.ryw__skipNoTag=null,this.ryw__getKeyTimes=1,this.ryw__ading=!1}onAwake(){super.onAwake(),this._topZone=this.ryw_View.getChildByName("TopZone"),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5&&W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__getKeyZone=this.ryw__centerZone.getChildByName("GetKeyZone"),this.ryw__adToggle=this.ryw__getKeyZone.getChildByName("AdToggle"),this.ryw__adToggleTag=this.ryw__adToggle.getChildByName("Tag"),this.ryw__getKeyBtn=this.ryw__getKeyZone.getChildByName("GetKeyBtn"),this.ryw__skipBtn=this.ryw__getKeyZone.getChildByName("SkipBtn"),this.ryw__skipOkTag=this.ryw__skipBtn.getChildByName("Ok"),this.ryw__skipNoTag=this.ryw__skipBtn.getChildByName("No"),this.ryw__adToggleTag.visible=0==Math.floor(2*Math.random()),this.onAdToggleStateChange(this.ryw__adToggleTag.visible);let e=this.ryw__centerZone.getChildByName("BoxsRoot"),t=[];for(let r=0;r<e.numChildren;++r){let i=e.getChildAt(r).getComponent(dt);i.ryw_init(this),i.ryw_AdTag.visible=!1,this.ryw__rewardBoxs.push(i),t.push(r)}for(let e=0;e<t.length;++e){let r=t[e],i=Math.floor(Math.random()*t.length),n=t[i];t[i]=r,t[e]=n}for(let e=0;e<3;++e)this.ryw__rewardBoxs[t.shift()].ryw_AdTag.visible=!0;this.ryw__keysRoot=this.ryw__centerZone.getChildByName("KeysRoot");for(let e=0;e<this.ryw__keysRoot.numChildren;++e){let t=this.ryw__keysRoot.getChildAt(e);this.ryw__keys.push(t)}this.refreshKeyState()}ryw_addEvent(){super.ryw_addEvent(),this.ryw__getKeyBtn.on(Laya.Event.CLICK,this,this.onGetKeyBtn),this.ryw__adToggle.on(Laya.Event.CLICK,this,this.onAdToggle),this.ryw__skipBtn.on(Laya.Event.CLICK,this,this.onSkipText)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__getKeyBtn.off(Laya.Event.CLICK,this,this.onGetKeyBtn),this.ryw__adToggle.off(Laya.Event.CLICK,this,this.onAdToggle),this.ryw__skipBtn.off(Laya.Event.CLICK,this,this.onSkipText)}onRewardBoxClick(e){if(!this.ryw__ading)if(e.ryw_AdTag.visible){this.ryw__ading=!0;let t=this;U.ryw_showRewardedVideoAd(r=>{r||(t.ryw__ading=!1,e.ryw_AdTag.visible=!1)},()=>{t.ryw__ading=!1})}else this.ryw__keyCount<=0||(--this.ryw__keyCount,this.refreshKeyState())}refreshKeyState(){for(let e=0;e<this.ryw__keys.length;++e){this.ryw__keys[e].visible=e+1<=this.ryw__keyCount}this.ryw__getKeyZone.visible=this.ryw__keyCount<=0&&this.ryw__getKeyTimes>0,this.ryw__keysRoot.visible=this.ryw__keyCount>0||this.ryw__getKeyTimes<=0}onGetKeyBtn(){if(this.ryw__ading)return;if(this.ryw__getKeyTimes<=0)return;this.ryw__ading=!0;let e=this;U.ryw_showRewardedVideoAd(t=>{t?(--e.ryw__getKeyTimes,e.ryw__keyCount=3,e.refreshKeyState(),e.ryw__ading=!1):e.ryw__ading=!1},()=>{e.ryw__ading=!1})}onAdToggle(){this.ryw__ading||(this.ryw__adToggleTag.visible=!this.ryw__adToggleTag.visible,this.onAdToggleStateChange(this.ryw__adToggleTag.visible))}onSkipText(){if(this.ryw__ading)return;this.ryw__ading=!0;let e=this;this.ryw__adToggleTag.visible&&this.ryw__getKeyTimes>0&&U.ryw_showRewardedVideoAd(t=>{t?(--e.ryw__getKeyTimes,e.ryw__keyCount=3,e.refreshKeyState(),e.ryw__ading=!1):e.ryw__ading=!1},()=>{e.ryw__ading=!1})}onAdToggleStateChange(e){e?(this.ryw__skipOkTag.visible=!0,this.ryw__skipNoTag.visible=!1):(this.ryw__skipOkTag.visible=!1,this.ryw__skipNoTag.visible=!0)}}class pt extends it{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__adToggle=null,this.ryw__adToggleTag=null,this.ryw__resurrectionBtn=null,this.ryw__skipBtn=null,this.ryw__skipOkTag=null,this.ryw__skipNoTag=null,this.ryw__ading=!1}onAwake(){this._topZone=this.ryw_View.getChildByName("TopZone"),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5&&W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__adToggle=this.ryw__centerZone.getChildByName("AdToggle"),this.ryw__adToggleTag=this.ryw__adToggle.getChildByName("Tag"),this.ryw__resurrectionBtn=this.ryw__centerZone.getChildByName("ResurrectionBtn"),this.ryw__skipBtn=this.ryw__centerZone.getChildByName("SkipBtn"),this.ryw__skipOkTag=this.ryw__skipBtn.getChildByName("Ok"),this.ryw__skipNoTag=this.ryw__skipBtn.getChildByName("No"),this.ryw__adToggleTag.visible=0==Math.floor(2*Math.random()),this.ryw_onAdToggleStateChange(this.ryw__adToggleTag.visible)}ryw_addEvent(){super.ryw_addEvent(),this.ryw__resurrectionBtn.on(Laya.Event.CLICK,this,this.ryw_onResurrectionBtn),this.ryw__adToggle.on(Laya.Event.CLICK,this,this.ryw_onAdToggle),this.ryw__skipBtn.on(Laya.Event.CLICK,this,this.ryw_onSkipBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__resurrectionBtn.off(Laya.Event.CLICK,this,this.ryw_onResurrectionBtn),this.ryw__adToggle.off(Laya.Event.CLICK,this,this.ryw_onAdToggle),this.ryw__skipBtn.off(Laya.Event.CLICK,this,this.ryw_onSkipBtn)}ryw_onResurrectionBtn(){if(this.ryw__ading)return;this.ryw__ading=!0;let e=this;U.ryw_showRewardedVideoAd(t=>{t||(e.ryw__ading=!1)},()=>{e.ryw__ading=!1})}ryw_onAdToggle(){this.ryw__ading||(this.ryw__adToggleTag.visible=!this.ryw__adToggleTag.visible,this.ryw_onAdToggleStateChange(this.ryw__adToggleTag.visible))}ryw_onSkipBtn(){if(this.ryw__ading)return;this.ryw__ading=!0;let e=this;this.ryw__adToggleTag.visible&&U.ryw_showRewardedVideoAd(t=>{t||(e.ryw__ading=!1)},()=>{e.ryw__ading=!1})}ryw_onAdToggleStateChange(e){e?(this.ryw__skipOkTag.visible=!0,this.ryw__skipNoTag.visible=!1):(this.ryw__skipOkTag.visible=!1,this.ryw__skipNoTag.visible=!0)}}class ut extends it{constructor(){super(...arguments),this.ryw__centerZone=null,this.ryw__adToggle=null,this.ryw__adToggleTag=null,this.ryw__rewardBtn=null,this.ryw__shareBtn=null,this.ryw__ading=!1}onAwake(){this._topZone=this.ryw_View.getChildByName("TopZone"),this.ryw__centerZone=this.ryw_View.getChildByName("CenterZone"),Laya.stage.width/Laya.stage.height<.5&&W.ryw_isIphoneX()&&(this.ryw__centerZone.top=this.ryw__centerZone.top+75),this.ryw__adToggle=this.ryw__centerZone.getChildByName("AdToggle"),this.ryw__adToggleTag=this.ryw__adToggle.getChildByName("Tag"),this.ryw__adToggleTag.visible=0==Math.floor(2*Math.random()),this.ryw__rewardBtn=this.ryw__centerZone.getChildByName("RewardBtn"),this.ryw__shareBtn=this.ryw__centerZone.getChildByName("ShareBtn")}ryw_addEvent(){super.ryw_addEvent(),this.ryw__rewardBtn.on(Laya.Event.CLICK,this,this.ryw_onResurrectionBtn),this.ryw__adToggle.on(Laya.Event.CLICK,this,this.ryw_onAdToggle),this.ryw__shareBtn.on(Laya.Event.CLICK,this,this.ryw_onShareBtn)}ryw_removeEvent(){super.ryw_removeEvent(),this.ryw__rewardBtn.off(Laya.Event.CLICK,this,this.ryw_onResurrectionBtn),this.ryw__adToggle.off(Laya.Event.CLICK,this,this.ryw_onAdToggle),this.ryw__shareBtn.off(Laya.Event.CLICK,this,this.ryw_onShareBtn)}ryw_onResurrectionBtn(){if(this.ryw__ading)return;this.ryw__ading=!0;let e=this;this.ryw__adToggleTag.visible&&U.ryw_showRewardedVideoAd(t=>{t||(e.ryw__ading=!1)},()=>{e.ryw__ading=!1})}ryw_onAdToggle(){this.ryw__ading||(this.ryw__adToggleTag.visible=!this.ryw__adToggleTag.visible)}ryw_onShareBtn(){U.ryw_shareRecord(()=>{},()=>{})}}class mt extends se{onAwake(){}ryw_addEvent(){super.ryw_addEvent()}ryw_removeEvent(){super.ryw_removeEvent()}}class Bt extends mt{constructor(){super(...arguments),this._nativeAd=null,this._curAdItem=null}onAwake(){this._centerZone=this.owner.getChildByName("CenterZone"),this._display=this._centerZone.getChildByName("Display"),this._okBtn=this._centerZone.getChildByName("OkBtn"),this._closeBtn=this._centerZone.getChildByName("CloseBtn"),this._bg=this.owner.getChildByName("BG")}onEnable(){super.onEnable(),this.loadAd(),this._bg.height=Laya.stage.height,this._closeBtn.visible=!1,Laya.timer.once(C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.btnShowTimer,this,()=>{this._closeBtn.visible=!0})}ryw_addEvent(){super.ryw_addEvent(),this._okBtn.on(Laya.Event.CLICK,this,this.onOkBtn),this._closeBtn.on(Laya.Event.CLICK,this,this.onCloseBtn),this._display.on(Laya.Event.CLICK,this,this.onDisplayClick)}ryw_removeEvent(){super.ryw_removeEvent(),this._okBtn.off(Laya.Event.CLICK,this,this.onOkBtn),this._closeBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),this._display.off(Laya.Event.CLICK,this,this.onDisplayClick)}loadAd(){var e=this;A.ryw_GetIpBlocked()?Laya.Browser.onVVMiniGame&&(this._nativeAd&&(this._nativeAd.destroy(),this._nativeAd=null),this._curAdItem=null,this._nativeAd=qg.createNativeAd({posId:Z.nativeAdId}),this._nativeAd.load(),this._nativeAd.onLoad(t=>{console.log("原生广告加载成功：",t);for(var r=t.adList,i=0;i<r.length;++i){var n=r[i];for(var a in console.log("原生广告数据：",i),n)console.log(a,n[a])}if(e._curAdItem=r[Math.floor(Math.random()*r.length)],null!=e._curAdItem){for(i=0;i<e._curAdItem.imgUrlList.length;++i)console.log("imgUrlList : ",i+" ",e._curAdItem.imgUrlList[i]);var s=e._curAdItem.imgUrlList[Math.floor(Math.random()*e._curAdItem.imgUrlList.length)];e._display.loadImage(s),e._nativeAd.reportAdShow({adId:e._curAdItem.adId}),console.log("加载图片",s),console.log("点击上报！！！")}e._centerZone.visible=!0}),this._nativeAd.onError(t=>{for(var r in console.log("原生广告加载失败：",t),t)console.log(r,t[r]);e.ryw_closeView()}),this._centerZone.visible=!1):e.ryw_closeView()}onCloseBtn(){this.ryw_closeView()}onOkBtn(){100*Math.random()<=C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_yuansheng&&(console.log("进入变态广告"),this.onDisplayClick()),this.ryw_closeView()}onDisplayClick(){null!=this._nativeAd&&null!=this._curAdItem&&(console.log("点击上报！！！"),this._nativeAd.reportAdClick({adId:this._curAdItem.adId}))}onDestroy(){super.onDestroy(),Laya.Browser.onVVMiniGame&&(this._nativeAd&&this._nativeAd.destroy(),this._nativeAd=null,this._curAdItem=null)}}class Lt extends Bt{onOkBtn(){100*Math.random()<=C.ryw_getInstance().ryw_getAppSwitchData().ryw_vivocfg.ryw_yuansheng2&&(console.log("进入变态广告"),this.onDisplayClick()),this.ryw_closeView()}}class vt{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("Mgr/GameMgr.ts",P),e("KRQ/Com/KRQ_LoopAd/KRQ_LoopAdBox.ts",H),e("KRQ/Com/KRQ_LoopAd/KRQ_VLoopAd.ts",F),e("KRQ/Com/KRQ_Banner.ts",z),e("KRQ/ViewCom/KRQ_Export.ts",Y),e("KRQ/Com/KRQ_History/KRQ_HistoryBox.ts",X),e("KRQ/Com/KRQ_History/KRQ_History.ts",j),e("KRQ/Com/KRQ_RockSingleAd.ts",$),e("KRQ/ViewCom/KRQ_Floating.ts",ee),e("KRQ/Com/KRQ_RollSingleAd.ts",te),e("KRQ/ViewCom/KRQ_GameOver.ts",re),e("KRQ/ViewCom/KRQ_SidePull.ts",ie),e("KRQ/Com/KRQ_LoopAd/KRQ_HLoopAd.ts",Q),e("KRQ/ViewCom/KRQ_Main.ts",ne),e("KRQ/Com/KRQ_SingleAd.ts",J),e("KRQ/Com/KRQ_GamingBanner.ts",ae),e("View/MainView/MoreGameView.ts",oe),e("View/ButtonAnim.ts",_e),e("View/MainView/LevelTitle.ts",ye),e("View/MainView/GameView.ts",ke),e("View/MainView/GameOverView.ts",Te),e("View/TwinkleSprite.ts",Ie),e("View/ClickGetPrize/ClickGetPrize.ts",be),e("View/LoadingView/LoadingView.ts",De),e("View/TipsView/TipsView.ts",Ve),e("ShareAd/View/LoopAdBox.ts",xe),e("ShareAd/View/HorizontalLoopAdView.ts",Ee),e("ShareAd/View/BannerAdView.ts",Ne),e("View/Common/UniversalBottomZone.ts",Ge),e("View/TemplateViews/OPPONativeAd/OPPONativeAdViewTemplate.ts",Me),e("View/TemplateViews/WXCrazyClick/WXCrazyClick.ts",Re),e("View/TemplateViews/Reward/RewardViewTemplate.ts",Oe),e("View/TemplateViews/MiniGame/MiniGameViewTemplate.ts",Ue),e("View/TemplateViews/Main/MainViewTemplate.ts",Ze),e("View/TemplateViews/InGame/InGameViewTemplate.ts",qe),e("View/TemplateViews/GameWin/GameWinViewTemplate.ts",He),e("View/TemplateViews/GameFail/GameFailViewTemplate.ts",Qe),e("View/TemplateViews/Export/ExportViewTemplate.ts",Fe),e("View/Common/ViewAutoScaleByW.ts",ze),e("View/TemplateViews/Export3/Exprot3ViewTemplate.ts",Ke),e("View/TemplateViews/Export2/Exprot2ViewTemplate.ts",We),e("View/QQTemplate/QQCrazyClick/QQCrazyClick.ts",Xe),e("View/QQTemplate/QQCrazyClick/QQCrazyClick2.ts",je),e("View/QQTemplate/GameFail/QQGameFailViewTemplate.ts",Je),e("View/QQTemplate/GameWin/QQGameWinViewTemplate.ts",$e),e("View/QQTemplate/InGame/QQInGameViewTemplate.ts",et),e("View/QQTemplate/Main/QQMainViewTemplate.ts",tt),e("View/TTTemplate/TTCrazyClick/TTCrazyClick.ts",rt),e("View/TTTemplate/GameFail/TTGameFailViewTemplate.ts",nt),e("View/TTTemplate/GameWin/TTGameWinViewTemplate.ts",at),e("View/TTTemplate/Main/TTMainViewTemplate.ts",st),e("View/TTTemplate/Store/TTStore.ts",lt),e("View/TTTemplate/Store/StoreBox.ts",_t),e("View/TTTemplate/Store/PageList.ts",ot),e("View/TTTemplate/SkinTips/TTSkinTips.ts",ht),e("View/TTTemplate/SignIn/TTSignIn.ts",ct),e("View/TTTemplate/Reward/TTReward.ts",gt),e("View/TTTemplate/Reward/RewardBox.ts",dt),e("View/TTTemplate/Resurrection/TTResurrection.ts",pt),e("View/TTTemplate/MoreReward/TTMoreReward.ts",ut),e("View/VVTemplate/NativeAd/VVNativeAd1View.ts",Bt),e("View/VVTemplate/NativeAd/VVNativeAd2View.ts",Lt)}}vt.width=750,vt.height=1334,vt.scaleMode="fixedwidth",vt.screenMode="vertical",vt.alignV="middle",vt.alignH="center",vt.startScene="GameMain.scene",vt.sceneRoot="",vt.debug=!1,vt.stat=!1,vt.physicsDebug=!1,vt.exportSceneToJson=!0,vt.init();var Ct,St=Laya.Scene,ft=Laya.ClassUtils.regClass;!function(e){!function(e){class t extends St{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"Scene",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"res/loading_bg_1.png",sizeGrid:"3,3,3,3",right:0,left:0,bottom:0},compId:25},{type:"Image",props:{y:249,x:123,skin:"res/logo.png"},compId:26},{type:"Clip",props:{y:0,x:1,width:750,name:"Bg",height:1334},compId:6,child:[{type:"Clip",props:{right:0,name:"BottomZone",left:0,height:570,bottom:100},compId:23,child:[{type:"Clip",props:{y:326,x:376,width:615,skin:"res/loadingxiatiao.png",pivotY:22,pivotX:308,name:"processBarBg",height:44,sizeGrid:"0,25,0,25"},compId:8,child:[{type:"Clip",props:{y:22,x:10,width:594,skin:"res/loadingshangtiao.png",pivotY:13,name:"processBar",left:11,height:26,bottom:9,sizeGrid:"0,12,0,12"},compId:5},{type:"Sprite",props:{y:-24,x:292,width:143,texture:"res/ziyuanjiazaizhong.png",pivotY:12,pivotX:72,height:23},compId:10,child:[{type:"Sprite",props:{y:15,x:149,width:6,texture:"res/jiazaidunhao.png",height:5},compId:11},{type:"Sprite",props:{y:15,x:159,width:6,texture:"res/jiazaidunhao.png",height:5},compId:12},{type:"Sprite",props:{y:15,x:168,width:6,texture:"res/jiazaidunhao.png",height:5},compId:13}]}]}]}]},{type:"Script",props:{y:0,x:0,runtime:"View/LoadingView/LoadingView.ts"},compId:7}],loadList:["res/loading_bg_1.png","res/logo.png","res/loadingxiatiao.png","res/loadingshangtiao.png","res/ziyuanjiazaizhong.png","res/jiazaidunhao.png"],loadList3D:[]},e.LoadingUI=t,ft("ui.View.LoadingUI",t)}(e.View||(e.View={}))}(Ct||(Ct={}));new class{constructor(){this._loadingUI=null,this._loadingView=null,this._preLoadRes=new Array,window.Laya3D?Laya3D.init(vt.width,vt.height):Laya.init(vt.width,vt.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=vt.scaleMode,Laya.stage.screenMode=vt.screenMode,Laya.stage.alignV=vt.alignV,Laya.stage.alignH=vt.alignH,Laya.URL.exportSceneToJson=vt.exportSceneToJson,(vt.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),vt.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),vt.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),1==c.onTTMiniGame&&(Laya.Browser.onMiniGame=!1),Laya.Browser.onMiniGame||Laya.Browser.onQGMiniGame||Laya.Browser.onQQMiniGame||c.onTTMiniGame||(c.ryw_ResServer=c.ryw_LocalTestReServer),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){Laya.loader.maxLoader=50,this.initLoadingView();var e=[{url:c.ryw_ResServer+"/json/appswitch.json",type:Laya.Loader.JSON}],r=this;Laya.loader.load(e,Laya.Handler.create(this,()=>{r.loadRes()})),w.ryw_instance.ryw_regOnceEvent(t.ryw_App_CloseFirstLoadingView,this,this.closeloadingUI)}initLoadingView(){this._loadingUI=new Ct.View.LoadingUI,Laya.stage.addChild(this._loadingUI),this._loadingUI.width=Laya.stage.width,this._loadingUI.height=Laya.stage.height,this._loadingUI.zOrder=2,this._loadingView=this._loadingUI.getComponent(De),this._loadingView.ryw_setProcess(0)}postResToOpenDataContext(e){Laya.Browser.onMiniGame?(console.log("开始透传资源数据到开放域"),Laya.loader.load(["openRes/Rank.atlas"],Laya.Handler.create(null,function(){Laya.MiniAdpter.sendAtlasToOpenDataContext("openRes/Rank.atlas"),console.log("透传资源数据到开放域  完毕！！！"),e&&e()}))):e&&e()}preLoad(){this._preLoadRes.push({url:c.ryw_ResServer+"/json/storeconfig.json",type:Laya.Loader.JSON})}loadRes(){this.preLoad();var e=this._preLoadRes,t=this;Laya.Browser.onMiniGame?Laya.Browser.window.wx.loadSubpackage({name:"subRes",success:r=>{e.length>0?Laya.loader.load(e,Laya.Handler.create(this,()=>{t.onLoadResComplate()}),Laya.Handler.create(this,e=>{t._loadingView.ryw_setProcess(e/2+.5)})):t.onLoadResComplate()},fail:e=>{this.loadRes()}}).onProgressUpdate(e=>{t._loadingView.ryw_setProcess(e/2)}):Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.loadSubpackage({name:"subRes",success:r=>{e.length>0?Laya.loader.load(e,Laya.Handler.create(this,()=>{t.onLoadResComplate()}),Laya.Handler.create(this,e=>{t._loadingView.ryw_setProcess(e/2+.5)})):t.onLoadResComplate()},fail:e=>{this.loadRes()}}).onProgressUpdate(e=>{var r=e.progress;e.totalBytesWritten,e.totalBytesExpectedToWrite,t._loadingView.ryw_setProcess(r/2)}):Laya.Browser.onQQMiniGame?Laya.Browser.window.qq.loadSubpackage({name:"subRes",success:r=>{e.length>0?Laya.loader.load(e,Laya.Handler.create(this,()=>{t.onLoadResComplate()}),Laya.Handler.create(this,e=>{t._loadingView.ryw_setProcess(e/2+.5)})):t.onLoadResComplate()},fail:e=>{this.loadRes()}}).onProgressUpdate(e=>{t._loadingView.ryw_setProcess(e/2)}):e.length>0?Laya.loader.load(e,Laya.Handler.create(this,()=>{t.onLoadResComplate()}),Laya.Handler.create(this,e=>{t._loadingView.ryw_setProcess(e)})):t.onLoadResComplate()}onLoadResComplate(){if(this._loadingView.ryw_setProcess(1),Laya.Browser.onMiniGame)S.ryw_wxLogin(function(e){l.ryw_code=e,g.ryw_login(e=>{1==e.code?(console.log("登陆成功！！！"),l.ryw_token=e.data.token,l.ryw_openId=e.data.openid,D.ryw_aldSendOpenId(l.ryw_openId),g.ryw_getGameData(e=>{console.log("获取用户数据成功！！！"),1==e.code?l.ryw_initiUser(e.data):l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),l.ryw_token="",l.ryw_openId="",l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！"+e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！"+e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})},null);else if(Laya.Browser.onQGMiniGame)T.ryw_initAdService(()=>{},()=>{},()=>{}),T.ryw_Login(function(e){l.ryw_code=e,g.ryw_login(e=>{1==e.code?(console.log("登陆成功！！！"),l.ryw_token=e.data.token,l.ryw_openId=e.data.openid,g.ryw_getGameData(e=>{if(console.log("获取用户数据成功！！！"),1==e.code){for(var t in l.ryw_initiUser(e.data),console.log("获取用户数据--------------------Start"),e.data)console.log(t,e.data[t]);console.log("获取用户数据--------------------End")}else l.ryw_initiUser(null);vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),l.ryw_token="",l.ryw_openId="",l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！",e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！",e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})},null);else if(Laya.Browser.onQQMiniGame)f.ryw_Login(function(e){l.ryw_code=e,g.ryw_login(e=>{1==e.code?(console.log("登陆成功！！！"),l.ryw_token=e.data.token,l.ryw_openId=e.data.openid,D.ryw_aldSendOpenId(l.ryw_openId),g.ryw_getGameData(e=>{console.log("获取用户数据成功！！！"),1==e.code?l.ryw_initiUser(e.data):l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),l.ryw_token="",l.ryw_openId="",l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！"+e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！"+e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})},null);else if(c.onTTMiniGame)U.ryw_ttLogin(function(e){l.ryw_code=e,g.ryw_login(e=>{1==e.code?(console.log("登陆成功！！！"),l.ryw_token=e.data.token,l.ryw_openId=e.data.openid,g.ryw_getGameData(e=>{console.log("获取用户数据成功！！！"),1==e.code?l.ryw_initiUser(e.data):l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),l.ryw_token="",l.ryw_openId="",l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！"+e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！"+e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})},()=>{l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))});else if(Laya.Browser.onVVMiniGame){let e=()=>{Z.Login(function(e,r){t(e)},function(){i()})},t=e=>{l.ryw_code=e,g.ryw_login(e=>{1==e.code?(console.log("登陆成功！！！"),l.ryw_token=e.data.token,l.ryw_openId=e.data.openid,g.ryw_getGameData(e=>{if(console.log("获取用户数据成功！！！"),1==e.code){for(var t in l.ryw_initiUser(e.data),console.log("获取用户数据--------------------Start"),e.data)console.log(t,e.data[t]);console.log("获取用户数据--------------------End")}else l.ryw_initiUser(null);vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),l.ryw_token="",l.ryw_openId="",l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！",e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！",e),l.ryw_initiUser(null),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))})},r=0,i=()=>{if(r>=1)return console.log("vivo 登陆失败！！！重试次数已达上限"),l.ryw_initiUser(null),void(vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){})));Z.showDialog("提示","登录失败，点击确定按钮重试",[{text:"确定",color:"#33dd44"}],()=>{e(),++r},()=>{},()=>{})};e()}else l.ryw_testInitUser(),vt.startScene&&Laya.Scene.open(vt.startScene,!1,Laya.Handler.create(this,function(){}))}closeloadingUI(){this._loadingUI&&!this._loadingUI.destroyed&&this._loadingUI.destroy()}},Laya.Browser.window&&(Laya.Browser.window.NativeCallback=M)}();