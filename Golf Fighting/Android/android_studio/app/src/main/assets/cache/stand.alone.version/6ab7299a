!function(){"use strict";var e,t,a,i,s,n,o,r,l,h,c=Laya.EventDispatcher;class d extends c{constructor(){super()}dispatch(e,t){d.eventDispatcher.event(e,t)}regEvemt(e,t,a,i){d.eventDispatcher.on(e,t,a,null==i?null:[i])}regOnceEvent(e,t,a,i){d.eventDispatcher.once(e,t,a,null==i?null:[i])}removeEvent(e,t,a,i){d.eventDispatcher.off(e,t,a)}}d.eventDispatcher=new c,d.instance=new d,function(e){e[e.None=0]="None",e[e.App_CloseFirstLoadingView=500]="App_CloseFirstLoadingView",e[e.AD_OnShareAdFail=501]="AD_OnShareAdFail",e[e.Game_OnViewOpen=600]="Game_OnViewOpen",e[e.Game_OnViewClose=601]="Game_OnViewClose",e[e.Game_OnUserMoneyChange=701]="Game_OnUserMoneyChange",e[e.Game_OnUserCrystalChange=702]="Game_OnUserCrystalChange",e[e.Game_OnLevelStart=1e3]="Game_OnLevelStart",e[e.Game_OnLevelComplate=1001]="Game_OnLevelComplate",e[e.AD_WudianBanner_LoadComplete=2217]="AD_WudianBanner_LoadComplete",e[e.AD_WudianBanner_Show=2218]="AD_WudianBanner_Show",e[e.AD_WudianBanner_Hide=2219]="AD_WudianBanner_Hide",e[e.AD_WudianBanner_PreLoad=2220]="AD_WudianBanner_PreLoad",e[e.GameStart=10001]="GameStart",e[e.GameOver=10002]="GameOver",e[e.ChooseProp=10003]="ChooseProp",e[e.ChangeBall=10004]="ChangeBall",e[e.GetNewSkin=10005]="GetNewSkin",e[e.LastBall=10006]="LastBall",e[e.ChangePage=10007]="ChangePage",e[e.ResetIcon=10008]="ResetIcon",e[e.SubBall=10009]="SubBall",e[e.PlayerUpdatePos=10010]="PlayerUpdatePos",e[e.HideGuide=10011]="HideGuide",e[e.ChangeGamingPic=10012]="ChangeGamingPic",e[e.HideGamingPic=10013]="HideGamingPic",e[e.ShowrRewardIcon=10014]="ShowrRewardIcon",e[e.ShowWudianBanner=10015]="ShowWudianBanner",e[e.MoreGameView=20001]="MoreGameView",e[e.OutMoreGameView=20002]="OutMoreGameView",e[e.OutSideADView=20003]="OutSideADView",e[e.RewardVideoSuccess=20004]="RewardVideoSuccess",e[e.RewardVideoFail=20005]="RewardVideoFail"}(e||(e={}));class m extends Laya.Script{static get isLogin(){return""!=m.code||""!=m.token}static getSaveData(){return JSON.stringify(m._gameData)}static testInitUser(){m._gameData.levelNum=Number(Laya.LocalStorage.getItem("levelNum")),m._gameData.moneyNum=Number(Laya.LocalStorage.getItem("moneyNum")),m._gameData.crystalNum=Number(Laya.LocalStorage.getItem("crystalNum"));var e=Laya.LocalStorage.getItem("club");""==e||null==e?m._gameData.club="normal":m._gameData.people=e;var t=Laya.LocalStorage.getItem("people");m._gameData.people=""==t||null==t?"people2":t;var a=Laya.LocalStorage.getItem("ball");m._gameData.ball=""==a||null==a?"normal":a;var i=Laya.LocalStorage.getItem("bag");m._gameData.bag=""==i||null==i?["people2"]:JSON.parse(i),m._gameData.needCoin=100,m._gameData.rank_level=Number(Laya.LocalStorage.getItem("rank_level"))}static initiUser(e){e&&0!=e?(m._gameData.levelNum=e.levelNum,m._gameData.moneyNum=e.moneyNum,m._gameData.crystalNum=e.crystalNum,m._gameData.bag=e.bag,m._gameData.club=e.club,m._gameData.people=e.people,m._gameData.ball=e.ball,e.needCoin||(e.needCoin=100),m._gameData.needCoin=e.needCoin,e.rank_level||(e.rank_level=0),m._gameData.rank_level=e.rank_level,console.log(e)):m.testInitUser()}static addLevelNum(){m._gameData.levelNum++,Laya.LocalStorage.setItem("levelNum",m._gameData.levelNum.toString())}static getLeveNum(){return m._gameData.levelNum}static addMoney(t){t=Math.ceil(t);var a=m._gameData.moneyNum;m._gameData.moneyNum+=t,Laya.LocalStorage.setItem("moneyNum",m._gameData.moneyNum.toString()),d.instance.dispatch(e.Game_OnUserMoneyChange,{curr:m._gameData.moneyNum,last:a})}static subMoney(t){t=Math.ceil(t);var a=m._gameData.moneyNum;m._gameData.moneyNum-=t,m._gameData.moneyNum<0&&(m._gameData.moneyNum=0),Laya.LocalStorage.setItem("moneyNum",m._gameData.moneyNum.toString()),d.instance.dispatch(e.Game_OnUserMoneyChange,{curr:m._gameData.moneyNum,last:a})}static getMoney(){return m._gameData.moneyNum}static addCrystal(t){t=Math.ceil(t);var a=m._gameData.crystalNum;m._gameData.crystalNum+=t,Laya.LocalStorage.setItem("crystalNum",m._gameData.crystalNum.toString()),d.instance.dispatch(e.Game_OnUserCrystalChange,{curr:m._gameData.crystalNum,last:a})}static subCrystal(t){t=Math.ceil(t);var a=m._gameData.crystalNum;m._gameData.crystalNum-=t,m._gameData.crystalNum<0&&(m._gameData.crystalNum=0),Laya.LocalStorage.setItem("crystalNum",m._gameData.crystalNum.toString()),d.instance.dispatch(e.Game_OnUserCrystalChange,{curr:m._gameData.crystalNum,last:a})}static getCrystal(){return m._gameData.crystalNum}static unlockProp(e){m._gameData.bag.push(e);var t=JSON.stringify(m._gameData.bag);Laya.LocalStorage.setItem("bag",t)}static ownerProp(e){let t=!1;for(let a=0;a<m._gameData.bag.length;a++)if(m._gameData.bag[a]==e){t=!0;break}return t}static setSkin(e,t,a){m._gameData.people=e,m._gameData.club=t,m._gameData.ball=a,Laya.LocalStorage.setItem("people",m._gameData.people),Laya.LocalStorage.setItem("club",m._gameData.club),Laya.LocalStorage.setItem("ball",m._gameData.ball)}static getSkinConfig(){return{people:m._gameData.people,club:m._gameData.club,ball:m._gameData.ball}}static setNeedCoin(){m._gameData.needCoin=Math.floor(1.5*m._gameData.needCoin),Laya.LocalStorage.setItem("rank_level",m._gameData.rank_level.toString())}static getNeedCoin(){return m._gameData.needCoin}static ownerPropAll(){return m._gameData.bag.length>=37}static getRankLevel(){return m._gameData.rank_level}static addRankLevel(){m._gameData.rank_level++,Laya.LocalStorage.setItem("rank_level",m._gameData.rank_level.toString())}static subRankLevel(){m._gameData.rank_level--,m._gameData.rank_level=Math.max(0,m._gameData.rank_level)}}m.code="",m.openId="",m.token=null,m.nickName="",m.gender=0,m._gameData=new class{constructor(){this.levelNum=0,this.moneyNum=0,this.crystalNum=0,this.bag=new Array,this.club="normal",this.people="people2",this.ball="normal",this.needCoin=100,this.rank_level=0}};class _{}_.state=0,_.gameid=44,_.serverUrl="",_.Login="",_.SaveGameData="",_.GetUser="",_.IpBlock="",_.reportExport="",_.reportImport="";class w{static encrypt(e){return e}static decrypt(e){return e}}w.KEY="b#63fFJ6AvkK3YT*",w.IV="J$f4DU%sNL73M&Go";class g{}g.AppID="",g.ResServer="subRes",g.LocalTestReServer="subRes",g.Versions="0.0.0",g.onTTMiniGame=!1;class p{constructor(){this.meth="post",this.url="",this.onSuccess=null,this.onFail=null,this.data={}}}class u{static request(e){e.url.indexOf("https://")>-1||e.url.indexOf("http://")>-1?e.url=e.url:e.url=_.serverUrl+e.url;var t=new Laya.HttpRequest;t.once(Laya.Event.COMPLETE,this,t=>{console.log(t,"http Success"),e.onSuccess&&e.onSuccess(t),e.onSuccess=null,e=null}),t.once(Laya.Event.ERROR,this,t=>{console.log(t,"http fail"),e.onFail&&e.onFail(t),e.onFail=null,e=null});JSON.stringify(e.data);Laya.Browser.onMiniGame||g.onTTMiniGame?e.data.code=m.code:Laya.Browser.onQGMiniGame?e.data.oppotoken=m.code:(Laya.Browser.onQQMiniGame,e.data.code=m.code);var a="time="+String(Date.now()),i=["Content-Type","application/json","state",_.state,"gameid",_.gameid,"sign",w.encrypt(a)];m.token&&(i.push("token"),i.push(m.token)),t.send(e.url,JSON.stringify(e.data),e.meth,"json",i)}static login(e,t){var a=new p;a.url=_.Login,a.onSuccess=e,a.onFail=t,u.request(a)}static saveGameData(e,t,a){var i=new p;i.url=_.SaveGameData,i.data.gameData=e,i.onSuccess=t,i.onFail=a,u.request(i)}static getGameData(e,t){var a=new p;a.url=_.GetUser,a.onSuccess=e,a.onFail=t,u.request(a)}static GetIpBlock(e,t){if(-1!=_.gameid){var a=new p;a.url=_.IpBlock,a.onSuccess=e,a.onFail=t,u.request(a)}}static reportExport(e,t,a,i){var s=new p;s.url=_.reportExport,s.data.wbappid=e,s.data.game_name=t,s.onSuccess=a,s.onFail=i,u.request(s)}static reportImport(e,t,a,i){var s=new p;s.url=_.reportImport,s.data.wbappid=e,s.data.channel=t,s.onSuccess=a,s.onFail=i,u.request(s)}}class y{static wxLogin(e,t){Laya.Browser.onMiniGame&&Laya.Browser.window.wx.login({success:t=>{if(t.code){let a=t.code;e(a),console.log("登陆成功,获取到code : "+a)}}})}static onRewardedVideoAdLoad(){console.log("激励视频 广告加载完成")}static onRewardedVideoAdError(e){console.log("激励视频 广告加载失败"+e),y._onRewardedVideoAdFailed&&y._onRewardedVideoAdFailed()}static onRewardedVideoAdClose(e){e&&e.isEnded||null==e?(console.log("激励视频 已完整观看"),y._onRewardedVideoAdClose&&y._onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),y._onRewardedVideoAdClose&&y._onRewardedVideoAdClose(!1))}static regRewardedVideoAdEvent(e){e.onLoad(y.onRewardedVideoAdLoad),e.onError(y.onRewardedVideoAdError),e.onClose(y.onRewardedVideoAdClose),y._isRegRewardedVideoAdEvent=!0}static showRewardedVideoAd(e,t){if(Laya.Browser.onMiniGame){y._onRewardedVideoAdClose=e,y._onRewardedVideoAdFailed=t;var a=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:y.adUnitId});y._isRegRewardedVideoAdEvent||y.regRewardedVideoAdEvent(a),a.load().then(()=>{var e=a.show();e.then(()=>console.log("激励视频 广告显示成功")),e.catch(e=>{a.load().then(()=>a.show()).catch(e=>{console.log("激励视频 广告显示失败"),t&&t()})})}).catch(e=>{console.log("激励视频 广告加载失败"),t&&t()})}else e(!0)}static navigateToMiniProgram(e,t,a,i,s){Laya.Browser.onMiniGame&&(console.log("跳转游戏： "+e),Laya.Browser.window.wx.navigateToMiniProgram({appId:e,path:t,extraData:{foo:"bar"},envVersion:"release",success(e){a&&a(e)},fail(e){i&&i(e)},complete(e){s&&s(e)}}))}static share(e,t,a){Laya.Browser.onMiniGame&&(y._onShow=(()=>{Laya.Browser.window.wx.offShow(y._onShow),y._onShow=null;Date.now(),this._lastShareTime;e&&(Date.now()-this._lastShareTime>2e3?e(!0):e(!1))}),Laya.Browser.window.wx.onShow(y._onShow),this._lastShareTime=Date.now(),Laya.Browser.window.wx.shareAppMessage({title:t,imageUrl:a}))}static showInterstitialAd(e,t){if(Laya.Browser.onMiniGame){var a=Laya.Browser.window.wx.createInterstitialAd({adUnitId:y.InsAdUnitId});a.onLoad(()=>{console.log("插屏广告 加载完成"),a.show().catch(e=>{console.log("插屏广告 显示失败 ："+e),t&&t()})}),a.onError(e=>{console.log("插屏广告 加载失败"+e),t&&t()}),a.onClose(()=>{console.log("插屏广告 关闭"),e&&e()})}else e()}static getLaunchOptionsSync(){if(Laya.Browser.onMiniGame){let e=Laya.Browser.window.wx.getLaunchOptionsSync();console.log("场景值 "+e.scene);let t=JSON.stringify(e.query);console.log("Query参数 "+t);let a=e.query.key;return console.log("Query参数：key "+a),console.log("ShareTicket "+e.shareTicket),console.log("ReferrerInfo.appId "+e.referrerInfo.appId),console.log("ReferrerInfo.extraData "+e.referrerInfo.extraData),e}return{scene:1001,query:"",shareTicket:"",appId:"",extraData:""}}static SetShareMenu(e,t,a,i,s){Laya.Browser.onMiniGame&&(console.log("小游戏设置转发按钮"),Laya.Browser.window.wx.showShareMenu({withShareTicket:!1,success:a,fail:i,complete:s}),Laya.Browser.window.wx.onShareAppMessage(function(){return{title:e,imageUrl:t}}))}static checkUpdate(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getUpdateManager();e.onCheckForUpdate(function(e){console.log("是否需要更新 : ",e.hasUpdate)}),e.onUpdateReady(function(){Laya.Browser.window.wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启小游戏？",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){console.log("新版本下载失败!!!")})}}}y.adUnitId="adunit-c9c6d8eeb968cb73",y.bannerAdUnitId="adunit-db0d1a563434b3f8",y.InsAdUnitId="adunit-5113cac800b3c1dd",y._isRegRewardedVideoAdEvent=!1,y._onRewardedVideoAdFailed=null,y._onRewardedVideoAdClose=null,y._onShow=null,y._lastShareTime=0;class v{static get BannerInstance(){return this._banner}static Login(e,t){Laya.Browser.onQGMiniGame&&Laya.Browser.window.qg.login({success:t=>{let a=t.data.token;for(var i in e(a),console.log("OPPO 登陆成功,获取到 token : "+a),t)console.log(i,t[i])},fail:e=>{for(var t in console.log("OPPO 登陆失败",e),e)console.log(t,e[t])}})}static initAdService(e,t,a){Laya.Browser.window.qg.initAdService({appId:g.AppID,isDebug:!1,success:function(t){console.log("oppo initAdService success"),e&&e(t)},fail:function(e){console.log("oppo initAdService fail: ",e.code,e.msg),t&&t(e)},complete:function(e){console.log("oppo initAdService complete"),a&&a(e)}})}static showRewardedVideoAd(e,t){if(Laya.Browser.onQGMiniGame){var a=Laya.Browser.window.qg.createRewardedVideoAd({posId:v.adUnitId});a.onLoad(()=>{console.log("oppo 视频广告加载完成"),a.show()}),a.onVideoStart(()=>{console.log("oppo 视频广告开始播放")}),a.onClose(t=>{t.isEnded?(console.log("oppo 视频广告观看 完成"),e(!0)):(console.log("oppo 视频广告观看 未完成"),e(!1)),a.destroy()}),a.onError(e=>{console.log("oppo 视频广告获取失败",e),a.destroy(),t()}),a.load()}else e(!0)}static navigateToMiniProgram(e,t,a,i,s,n){if(Laya.Browser.onQGMiniGame){console.log("OPPO 跳转游戏： "+e),u.reportExport(e,t,e=>{1==e.code?console.log("OPPO 导出上报成功"):console.log("OPPO 导出上报失败",e.msg)},e=>{for(var t in console.log("OPPO 导出上报失败"),e)console.log(t,e[t])});let n=Date.now();for(;Date.now()-n<=500;);Laya.Browser.window.qg.navigateToMiniGame({pkgName:e,path:a,extraData:{from:g.AppID},envVersion:"release",success(e){i&&i(e)},fail(e){s&&s(e)}})}}static showInterstitialAd(e,t){if(Laya.Browser.onQGMiniGame){var a=qg.createInsertAd({posId:v.InsAdUnitId});a.load(),a.onLoad(()=>{console.log("插屏广告加载完成"),a.show()}),a.onShow(()=>{console.log("插屏广告显示成功")}),a.onError(e=>{console.log("插屏广告拉取失败",e),a.destroy(),t&&t()})}else e()}static showBannaer(){if(v._banner)v._banner.show();else{var e=qg.createBannerAd({posId:v.bannerAdUnitId});e.show(),v._banner=e}}static hideBanner(){v._banner&&v._banner.hide()}static getLaunchOptionsSync(){let e={query:"",referrerInfo:{package:"",extraData:{appid:""}}};if(Laya.Browser.onQGMiniGame){var t=Laya.Browser.window.qg.getLaunchOptionsSync();return null!=t&&""!=t?e=t:console.log("没有启动设置！！！"),e}return e}static share(e,t,a){e(!1)}static createDesktopIcon(e,t){Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(a){0==a?Laya.Browser.window.qg.installShortcut({success:function(){e&&e()},fail:function(e){for(var a in t&&t(),console.log("创建桌面图标失败！！！！",e),e)console.log(a,e)},complete:function(){}}):(console.log("桌面图标已存在！！！！"),t&&t())},fail:function(e){for(var a in t&&t(),console.log("判断桌面图标是否存在失败！！！",e),e)console.log(a,e)},complete:function(){}}):t&&t()}}v.adUnitId="150711",v.bannerAdUnitId="150708",v.InsAdUnitId="",v.OpenScreenAdUnitId="150709",v.NativeAdId="150710",v._banner=null;class L{static request(e){e.url.indexOf("https://")>-1||e.url.indexOf("http://")>-1?e.url=e.url:e.url=L.mainUrl+e.url;var t=new Laya.HttpRequest;if(t.once(Laya.Event.COMPLETE,this,t=>{console.log(t,"MaiLiang http Success"),"200"==(t=JSON.parse(t)).Status?(null!=t.Result.OpenId&&""!=t.Result.OpenId?(L.MaiLiangOpenId=t.Result.OpenId,L.time=e.data.posttime,console.log("获得买量系统OpenId "+L.MaiLiangOpenId)):console.log("上报买量系统停留时间成功"),e.onSuccess&&e.onSuccess(t)):e.onFail&&e.onFail(t),e.onSuccess=null,e=null}),t.once(Laya.Event.ERROR,this,t=>{console.log(t,"MaiLiang http fail"),e.onFail&&e.onFail(t),e.onFail=null,e=null}),"get"==e.meth){var a="";for(const t of Object.keys(e.data)){a+=t+"="+e.data[t]+"&"}e.url=e.url+"?"+a,t.send(e.url,null,e.meth)}else{a="";for(const t of Object.keys(e.data)){a+=t+"="+e.data[t]+"&"}t.send(e.url,a,e.meth,null,["Content-Type","application/x-www-form-urlencoded"])}}static GetMaiLiangOpenId(e,t){if(Laya.Browser.onMiniGame){let a=y.getLaunchOptionsSync();if(null!=a){let i=a.query.key;if(null!=i&&""!=i&&""!=m.openId){L.key=i;let a=new p;a.url=L.uclick,a.onSuccess=e,a.onFail=t,a.data.appid=g.AppID,a.data.openid="";let s=(new Date).getTime()/1e3;a.data.posttime=s,a.data.auth=0,a.data.key=i,a.data.wxopenid=m.openId,a.meth="POST",console.log("发送买量数据接口"),L.request(a)}}else console.log("上报买量数据失败"),t(null)}else if(Laya.Browser.onQGMiniGame){let e=v.getLaunchOptionsSync();u.reportImport(e.referrerInfo.package,e.referrerInfo.extraData.appid,e=>{1==e.code?console.log("OPPO 上报买量数据成功"):console.log("OPPO 上报买量数据失败",e.msg)},e=>{for(var t in console.log("OPPO 上报买量数据失败"),e)console.log(t,e[t])})}else console.log("不在微信模式下调用，默认上报买量数据失败"),t(null)}static ReportStayTime(e,t){if(Laya.Browser.onMiniGame){if(""!=L.MaiLiangOpenId){let a=new p;a.url=L.stay,a.onSuccess=e,a.onFail=t,a.data.appid=g.AppID,a.data.openid=L.MaiLiangOpenId;let i=(new Date).getTime()/1e3;a.data.posttime=i;let s=0!=L.time?i-L.time:0;a.data.time=s,a.meth="POST",console.log("发送停留时间至买量接口"),L.request(a)}}else console.log("不在微信模式下调用，默认发送停留时间至买量接口失败"),t(null)}}L.mainUrl="https://swtj.mrkzx.cn",L.uclick="/v1.1/api/Activity/uclick.html",L.stay="/v1.1/api/Activity/stay.html",L.key="",L.MaiLiangOpenId="",L.time=0;class b{constructor(){this.version="",this.banner=0,this.wudian=0,this.wudianAvailableTime={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},this.mailiang=1,this.mailianglist=new Array,this.mailiangSceneList=new Array,this.wxWuDianBanners=new Array,this.btnMoveTimer=1,this.bannerMoveTimer=.5,this.bannerFreshTimer=200,this.bannerCreateFailNum=3,this.bannerTodayBannerMax=10,this.enterGamePop=1,this.adSwitch=1,this.wudianSceneList=new Array,this.yuansheng=0,this.morefunpop=0}get wudianTimeAvaliable(){return 1==this.wudianAvailableTime[(new Date).getHours()]}}class S{constructor(){this._data=new Array}static getInstance(){return null==S._instance&&(S._instance=S.load()),S._instance}static load(){var e=new S,t=Laya.loader.getRes(g.ResServer+"/json/appswitch.json");if(t){for(var a=0;a<t.length;++a){var i=t[a],s=new b;s.version=String(i.version),s.banner=Number(i.banner),s.wudian=Number(i.wudian),s.wudianAvailableTime=Object(i.wudianTime),s.mailiang=Number(i.mailiang);var n=i.mailianglist;if(null!=n)for(var o=0;o<n.length;++o){var r=Number(n[o]);s.mailianglist.push(r)}var l=i.mailiangScenelist;if(null!=l)for(o=0;o<l.length;++o){var h=Number(l[o]);s.mailiangSceneList.push(h)}var c=i.wxwudianbanners;if(null!=c)for(o=0;o<c.length;++o){var d=String(c[o]);s.wxWuDianBanners.push(d)}s.btnMoveTimer=Number(i.btnMoveTimer),s.bannerMoveTimer=Number(i.bannerMoveTimer),s.bannerCreateFailNum=Number(i.createFailNum),s.bannerFreshTimer=Number(i.bannerFreshTimer),s.bannerTodayBannerMax=Number(i.todayBannerMax);var m=i.wudianSceneList;if(null!=m)for(o=0;o<m.length;++o){var _=Number(m[o]);s.wudianSceneList.push(_)}s.adSwitch=Number(i.adSwitch),s.enterGamePop=Number(i.enterGamePop),s.yuansheng=Number(i.yuansheng),s.morefunpop=Number(i.morefunpop),e._data.push(s)}return e}return e._data.push(new b),e}getAppSwitchData(){return this._data[0]}}class B{static IpBlockFlag(){return this._ipBlockFlag}static UpdateIpBlockState(){u.GetIpBlock(function(e){console.log("调用IpBlock接口成功,结果为:",e),B._ipBlockFlag=e.code},null)}static GetIpBlocked(){return 0==this._ipBlockFlag}static GetEntryScene(){return 1006==y.getLaunchOptionsSync().scene}static IsSwitchOpen(){let e=1==S.getInstance().getAppSwitchData().wudian,t=S.getInstance().getAppSwitchData().wudianTimeAvaliable;return console.log("误点Flag状态: ","总开关:",e,"打开时间",t),e&&t}static get WudianFlag(){let e=1==S.getInstance().getAppSwitchData().wudian,t=y.getLaunchOptionsSync().scene,a=!0;for(var i=S.getInstance().getAppSwitchData().wudianSceneList,s=0;s<i.length;++s){t==i[s]&&(a=!1)}let n=S.getInstance().getAppSwitchData().wudianTimeAvaliable,o=0==this._ipBlockFlag;return console.log("误点Flag状态: ","总开关:",e,"场景进入",a,"IP未被屏蔽",o,"打开时间",n),e&&a&&o&&n}static get NoTimeWudianFlag(){let e=1==S.getInstance().getAppSwitchData().wudian,t=1006!=y.getLaunchOptionsSync().scene,a=0==this._ipBlockFlag;return console.log("误点Flag状态: ","总开关:",e,"场景进入",t,"IP未被屏蔽"),e&&t&&a}}B._ipBlockFlag=-1;class C{}C.restitution=.6,C.rollingFriction=.8,C.friction=.8,C.ball_Amount=3,C.stagePre_Amount=6,C.cameraMoveTime=800,C.envAmount=2,C.max_power_timer=800,C.max_power_dis=6.68;class k extends Laya.Script3D{constructor(){super()}onAwake(){this.Init()}Init(){this.m_ground=this.owner,this.m_rig=this.m_ground.getComponent(Laya.Rigidbody3D),this.m_rig.isKinematic=!0,this.m_rig.restitution=C.restitution,this.m_rig.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER1}showShadow(){console.log("执行了一次地面接收影子"),this.m_ground.meshRenderer.receiveShadow=!0}}class f extends Laya.Script3D{constructor(){super()}onAwake(){f.m_owner=this.owner;this.owner.getChildByName("Ball");Laya.Sprite3D.load(g.ResServer+"/ball/Conventional/ball.lh",Laya.Handler.create(this,function(e){let t=e.getChildByName("aBall");f.m_owner.addChild(t),f.could_set_skin=!0,console.log("球资源加载完成")})),f.m_owner.active=!1}static get CouldSetSkin(){return f.could_set_skin}static getPre(e){return f.m_owner.getChildByName(e)}static createPre(e,t){return Laya.Sprite3D.instantiate(f.getPre(e),t)}}f.could_set_skin=!1,function(e){e.Ball="Ball",e.aBall="aBall",e.Flag="Flag",e.OverFlag="OverFlag",e.Stage1="Stage1",e.Stage2="Stage2",e.Stage3="Stage3",e.Stage4="Stage4",e.Stage5="Stage5",e.Stage6="Stage6",e.StrikeGroundEffect="StrikeGroundEffect",e.ObstacleBarre="ObstacleBarre",e.ObstacleCut="ObstacleCut",e.ObstacleStairs="ObstacleStairs",e.ObstacleTurnAround="ObstacleTurnAround",e.ObstacleTurnAround1="ObstacleTurnAround1",e.Tuowei="Tuowei"}(t||(t={}));class I{static onVideoFail(){d.instance.dispatch(e.RewardVideoFail)}static onVideoSuccess(t){d.instance.dispatch(e.RewardVideoSuccess,t)}static CallNativeFunc(e){Laya.Browser.onAndroid?window.PlatformClass.createClass("demo.JSBridge").call(e):Laya.Browser.onIOS}}I.conchIOS="Conch-ios",I.conchAndroid="Conch-android",I.os="";class A{static vibrateShort(){A.isEnable&&(Laya.Browser.onMiniGame?Laya.Browser.window.wx.vibrateShort():Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.vibrateShort():Laya.Browser.onQQMiniGame?Laya.Browser.window.qq.vibrateShort():I.CallNativeFunc("vibrateShort"))}static ibrateLong(){A.isEnable&&(Laya.Browser.onMiniGame?Laya.Browser.window.wx.vibrateLong():Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.vibrateLong():Laya.Browser.onQQMiniGame?Laya.Browser.window.qq.vibrateLong():I.CallNativeFunc("vibrateLong"))}static vibrate(e){if(A.isEnable)if(Laya.Browser.onMiniGame){let t=e/15,a=0,i={count:t,index:a};Laya.timer.loop(16,i,function(){A.vibrateShort(),++a>t&&Laya.timer.clearAll(i)})}else if(Laya.Browser.onQGMiniGame){let t=e/20,a=0,i={count:t,index:a};Laya.timer.loop(21,i,function(){A.vibrateShort(),++a>t&&Laya.timer.clearAll(i)})}else if(Laya.Browser.onQQMiniGame){let t=e/20,a=0,i={count:t,index:a};Laya.timer.loop(21,i,function(){A.vibrateShort(),++a>t&&Laya.timer.clearAll(i)})}}}A.isEnable=!0;class V extends Laya.Script{constructor(){super(),this.max_power=new Laya.Vector3(0,5.8,5.8),this.current_skin="normal",this.could_set_skin=!1,this.m_id=0}onAwake(){this.m_ball=this.owner,this.start_pos=this.m_ball.transform.position,this.Init()}onStart(){}onDestroy(){}Init(){this.m_rig=this.m_ball.getComponent(Laya.Rigidbody3D),this.m_rig.restitution=C.restitution,this.m_rig.rollingFriction=C.rollingFriction,this.m_rig.friction=C.friction,this.m_rig.collisionGroup=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER1,this.m_rig.overrideGravity=!0,this.m_rig.gravity=new Laya.Vector3(0,-10,0),this.m_rig.ccdMotionThreshold=.001;for(let e=0;e<this.m_ball.numChildren;e++)this.m_ball.getChildAt(e).active=!1;this.hide()}show(e){this.m_rig.clearForces(),this.m_current_tuowei&&this.m_current_tuowei.destroy(),e&&(this.m_ball.transform.position=new Laya.Vector3(e.x,e.y+.04,e.z)),this.m_current_tuowei=f.createPre(t.Tuowei,this.m_ball),this.m_current_tuowei.transform.position=this.m_ball.transform.position,this.m_ball.active=!0}hide(){this.m_ball.active=!1}beatBall(e,t=0){let a=new Laya.Vector3(t,this.max_power.y*e,this.max_power.z*e);this.m_rig.applyImpulse(a),A.vibrateShort()}setSkin(e){f.CouldSetSkin?f.CouldSetSkin&&"aBall"==this.owner.name&&(e!=this.current_skin&&(this.m_ball.getChildByName(this.current_skin).active=!1,this.current_skin=e),this.m_ball.getChildByName(e).active=!0):this.m_ball.getChildByName("normal").active=!0}lookAt(e){this.m_ball.transform.lookAt(e,new Laya.Vector3(0,0,0))}getActive(){return this.m_ball.active}ballDestroy(){this.owner.destroy()}getBall(){return this.m_ball}setID(e){this.m_id=e}setManager(e){this.m_manager=e}getManager(){return this.m_manager}}class M{constructor(){this._enabled=!0}get Enabled(){return this._enabled}set Enabled(e){e||this.stopBGM(),this._enabled=e}getSoundUrl(e){return M.soundResPath+e+".wav"}playSound(e){if(this._enabled){var t=this.getSoundUrl(e);if(Laya.Browser.onMiniGame){var a=Laya.Pool.getItem(e);null==a&&((a=wx.createInnerAudioContext()).src=M.soundResPath+e+".wav",a.onEnded(()=>{Laya.Pool.recover(e,a),a.offEnded()})),a.play()}else Laya.SoundManager.playSound(t,1)}}playBGM(e){if(!this._enabled)return;let t=this.getSoundUrl(e);Laya.Browser.onMiniGame?(this.bgm||(this.bgm=wx.createInnerAudioContext()),this.bgm.stop(),this.bgm.src=t,this.bgm.loop=!0,this.bgm.play()):Laya.SoundManager.playMusic(t,0)}stopBGM(){Laya.Browser.onMiniGame?this.bgm&&this.bgm.stop():Laya.SoundManager.stopMusic()}}M.soundResPath="subRes/sound/",M.instance=new M,function(e){e.Button="按钮",e.DesorbPower="高尔夫挥杆",e.Unlock="解锁新皮肤",e.GetScore="球掉进洞里",e.StrikeGround="球撞到墙上",e.Win="游戏胜利",e.Lose="游戏失败",e.GetCoin="得到金币",e.SkinBtn="皮肤界面按钮",e.AddStar="加星"}(a||(a={}));class R extends Laya.Script{constructor(){super()}onAwake(){this.m_player=this.owner,this.m_ani=this.m_player.getComponent(Laya.Animator),this.hide()}show(){this.m_player.active=!0}hide(){this.m_player.active=!1}showPlayerByPos(e){this.m_player.active||this.show(),this.m_player.transform.position=new Laya.Vector3(e.x+.3,e.y+.02,e.z),this.m_ani.play(i.Idle)}storgePower(){this.m_ani.speed=1,this.m_ani.crossFade(i.StoragePower,.05),this.m_ani.play(i.StoragePower)}playAni(e){this.m_ani.speed=1,this.m_ani.crossFade(e,.05)}desorbPower(e){this.m_ani.speed=1,e<=.5?this.m_ani.play(i.LowDesorbPowerUp):e<.8?this.m_ani.play(i.MiddleDesorbPowerUp):this.m_ani.play(i.MaxDesorbPowerUp),M.instance.playSound(a.DesorbPower)}getTrans(){return this.m_player.transform.position}lookAt(e){this.m_player.transform.lookAt(e,new Laya.Vector3(0,0,0))}}!function(e){e.Idle="Idle",e.StoragePower="StoragePower",e.MaxDesorbPowerUp="MaxDesorbPowerUp",e.MiddleDesorbPowerUp="MiddleDesorbPowerUp",e.LowDesorbPowerUp="LowDesorbPowerUp",e.Celebrate="Celebrate",e.Dismay="Dismay",e.wudao="wudao"}(i||(i={}));class D extends Laya.Script{constructor(){super(),this._amount=C.ball_Amount,this._ballList=new Array,this._aBallList=new Array,this._current_ball_id=0,this.game_ball_amount=0,this.could_create=!0,this.m_current_stage_id=0,this.could_beat=!0}onAwake(){this._amount=C.ball_Amount,this.m_owner=this.owner,this.m_player=this.m_owner.parent.getComponent(N),this.beat_effect=this.m_owner.getChildByName("daji"),this.beat_effect.active=!1}onStart(){this.createBall()}updatePos(){this.m_current_stage_id++,this.m_current_showPos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos()}BeatBall(t){this.beat_effect.active&&(this.beat_effect.active=!1),this.game_ball_amount<=0||this.could_beat&&(this.could_beat=!1,this.game_ball_amount--,d.instance.dispatch(e.SubBall),0==this.game_ball_amount&&(Z.Instance().getIsAwardGame()?Laya.timer.once(2e3,this,()=>{Z.Instance().getInGame()&&Z.Instance().gameOver(Z.Instance().getOnerKeyNum()>0)}):Laya.timer.once(2e3,this,()=>{Z.Instance().getInGame()&&Z.Instance().couldRelive()})),this.beat_effect.transform.position=this.m_current_showPos,this.beat_effect.active=!0,this._ballList[this._current_ball_id].beatBall(t),this._current_ball_id++,Laya.timer.once(250,this,()=>{this.ShowBall()}))}ShowBall(){this.could_beat=!0,this._current_ball_id>=this._amount&&(this._current_ball_id=0),this._ballList[this._current_ball_id].show(this.m_current_showPos)}createBall(e=!1){if(e&&this.could_create){this.m_current_showPos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos(),this._ballList.forEach(e=>{e.ballDestroy()}),this._ballList=[];for(let e=0;e<this._amount;e++){let a;a=f.createPre(t.aBall,this.m_owner).addComponent(V),this._ballList.push(a),a.setID(e),a.setManager(this.owner.parent)}this.could_create=!1,this.changeSkin(m.getSkinConfig().ball)}else if(this._ballList.length<=0){this.m_current_showPos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos();for(let e=0;e<this._amount;e++){let a;console.log("创建了球"),a=f.createPre(t.Ball,this.m_owner).addComponent(V),this._ballList.push(a),a.setID(e),a.setManager(this.owner.parent)}this.changeSkin(m.getSkinConfig().ball)}this.ShowBall()}changeSkin(e){this._ballList.forEach(t=>{t.setSkin(e)})}setBallAmount(e){Laya.timer.clearAll(this),this.game_ball_amount=e}RecoverAllBall(){this._ballList.length>0&&this._ballList.forEach(e=>{e.hide()}),this.m_current_stage_id=0,this.m_current_showPos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos()}}class G extends Laya.Script3D{constructor(){super(),this._tempVector3=new Laya.Vector3,this.yawPitchRoll=new Laya.Vector3,this.resultRotation=new Laya.Quaternion,this.tempRotationZ=new Laya.Quaternion,this.tempRotationX=new Laya.Quaternion,this.tempRotationY=new Laya.Quaternion,this.rotaionSpeed=6e-5}onAwake(){Laya.stage.on(Laya.Event.RIGHT_MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(Laya.Event.RIGHT_MOUSE_UP,this,this.mouseUp),this.camera=this.owner}_onDestroy(){Laya.stage.off(Laya.Event.RIGHT_MOUSE_DOWN,this,this.mouseDown),Laya.stage.off(Laya.Event.RIGHT_MOUSE_UP,this,this.mouseUp)}onUpdate(){var e=Laya.timer.delta;if(!isNaN(this.lastMouseX)&&!isNaN(this.lastMouseY)&&this.isMouseDown){this.owner.scene;Laya.KeyBoardManager.hasKeyDown(87)&&this.moveForward(-.01*e),Laya.KeyBoardManager.hasKeyDown(83)&&this.moveForward(.01*e),Laya.KeyBoardManager.hasKeyDown(65)&&this.moveRight(-.01*e),Laya.KeyBoardManager.hasKeyDown(68)&&this.moveRight(.01*e),Laya.KeyBoardManager.hasKeyDown(81)&&this.moveVertical(.01*e),Laya.KeyBoardManager.hasKeyDown(69)&&this.moveVertical(-.01*e);var t=Laya.stage.mouseX-this.lastMouseX,a=Laya.stage.mouseY-this.lastMouseY,i=this.yawPitchRoll;i.x-=t*this.rotaionSpeed*e,i.y-=a*this.rotaionSpeed*e,this.updateRotation()}this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY}mouseDown(e){this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll),this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.isMouseDown=!0}mouseUp(e){this.isMouseDown=!1}moveForward(e){this._tempVector3.x=0,this._tempVector3.y=0,this._tempVector3.z=e,this.camera.transform.translate(this._tempVector3)}moveRight(e){this._tempVector3.y=0,this._tempVector3.z=0,this._tempVector3.x=e,this.camera.transform.translate(this._tempVector3)}moveVertical(e){this._tempVector3.x=this._tempVector3.z=0,this._tempVector3.y=e,this.camera.transform.translate(this._tempVector3,!1)}updateRotation(){Math.abs(this.yawPitchRoll.y)<1.5&&(Laya.Quaternion.createFromYawPitchRoll(this.yawPitchRoll.x,this.yawPitchRoll.y,this.yawPitchRoll.z,this.tempRotationZ),this.tempRotationZ.cloneTo(this.camera.transform.localRotation),this.camera.transform.localRotation=this.camera.transform.localRotation)}}class P{static get defalutVec3(){var e=this.mDefalutVec3||(this.mDefalutVec3=new Laya.Vector3);return e.toDefault(),e}static setToVec3(e,t,a,i){return e.x=t,e.y=a,e.z=i,e}static position(e,t,a,i){var s=e.transform.position;s.x=t,s.y=a,s.z=i,e.transform.position=e.transform.position}static rotationEuler(e,t,a,i){var s=e.transform.rotationEuler;s.x=t,s.y=a,s.z=i,e.transform.rotationEuler=e.transform.rotationEuler}static localPosition(e,t,a,i){var s=e.transform.localPosition;s.x=t,s.y=a,s.z=i,e.transform.localPosition=e.transform.localPosition}static localPositionByVec3(e,t){var a=e.transform.localPosition;a.x=t.x,a.y=t.y,a.z=t.z,e.transform.localPosition=e.transform.localPosition}static rotation(e,t,a,i){var s=this.setToVec3(this.defalutVec3,t,a,i),n=180/Math.PI;Laya.Quaternion.createFromYawPitchRoll(s.y/n,s.x/n,s.z/n,e.transform.localRotation),e.transform.localRotation=e.transform.localRotation}static rotationByVec3(e,t){var a=180/Math.PI;Laya.Quaternion.createFromYawPitchRoll(t.y/a,t.x/a,t.z/a,e.transform.localRotation),e.transform.localRotation=e.transform.localRotation}static positionX(e,t){e.transform.position.x=t,e.transform.position=e.transform.position}static positionY(e,t){e.transform.position.y=t,e.transform.position=e.transform.position}static positionZ(e,t){var a=e.transform.position;return a.z=t,e.transform.position=e.transform.position,a.z}static localPositionX(e,t){e.transform.localPosition.x=t,e.transform.localPosition=e.transform.localPosition}static localPositionY(e,t){e.transform.localPosition.y=t,e.transform.localPosition=e.transform.localPosition}static localPositionZ(e,t){var a=e.transform.localPosition;return a.z=t,e.transform.localPosition=e.transform.localPosition,a.z}static rotationX(e,t){var a=this.setToVec3(this.defalutVec3,t,0,0),i=180/Math.PI;Laya.Quaternion.createFromYawPitchRoll(a.y/i,a.x/i,a.z/i,e.transform.localRotation),e.transform.localRotation=e.transform.localRotation}static rotationY(e,t){var a=e.transform||e._transform,i=this.setToVec3(this.defalutVec3,0,t,0),s=180/Math.PI;Laya.Quaternion.createFromYawPitchRoll(i.y/s,i.x/s,i.z/s,a.localRotation),a.localRotation=a.localRotation}static rotationZ(e,t){var a=this.setToVec3(this.defalutVec3,0,0,t),i=180/Math.PI;Laya.Quaternion.createFromYawPitchRoll(a.y/i,a.x/i,a.z/i,e.transform.localRotation),e.transform.localRotation=e.transform.localRotation}static tweenScale(e,t,a,i,s,n,o,r,l,h=null){var c=Laya.Pool.getItemByClass("Vector3",Laya.Vector3);this.setToVec3(c,i,s,n),Laya.Tween.to(c,{x:o,y:r,z:l},a,Laya.Ease.bounceOut,Laya.Handler.create(this,()=>{e()}),0,!1,!0).update=Laya.Handler.create(this,()=>{t.transform?this.scale(t,c.x,c.y,c.z):e()},null,!1)}static scale(e,t,a,i){var s=e.transform.scale;s.x=t,s.y=a,s.z=i,e.transform.scale=e.transform.scale}static scaleByVec3(e,t){e.transform.scale=t}static scaleX(e,t){e.transform.scale.x=t,e.transform.scale=e.transform.scale}static scaleY(e,t){e.transform.scale.y=t,e.transform.scale=e.transform.scale}static scaleZ(e,t){e.transform.scale.z=t,e.transform.scale=e.transform.scale}static tweenRotate(e,t,a,i,s,n,o,r,l=null,h=null,c=null){}static tweenRotationEuler(e,t,a,i,s,n,o,r,l=null,h=null,c=null){var d=Laya.Pool.getItemByClass("Vector3",Laya.Vector3);this.setToVec3(d,a,i,s);let m=Laya.Tween.to(d,{x:n,y:o,z:r},t,l,Laya.Handler.create(this,()=>{null!=c&&c()}),0,!1,!0);return m.update=Laya.Handler.create(this,()=>{e.transform?(this.rotationEuler(e,d.x,d.y,d.z),h&&h.runWith(d)):null!=c&&c()},null,!1),m}static tweenRotateByLayTween(e,t,a,i,s,n,o,r){var l=Laya.Pool.getItemByClass("Vector3",Laya.Vector3);this.setToVec3(l,a,i,s),Laya.Tween.to(l,{x:n,y:o,z:r},t).update=new Laya.Handler(this,()=>{e.transform&&this.rotationByVec3(e,l)},null,!1)}static tweenLocalRotate(e,t,a,i,s,n,o,r){}static tweenLocalPosition(e,t,a,i,s,n,o,r,l=null){var h=Laya.Pool.getItemByClass("Vector3",Laya.Vector3);this.setToVec3(h,a,i,s),Laya.Tween.to(h,{x:n,y:o,z:r},t,l).update=Laya.Handler.create(this,()=>{e.transform&&this.localPosition(e,h.x,h.y,h.z)},null,!1)}static tweenLocalPositionPromise(e,t,a,i,s,n,o,r,l,h=null){var c=Laya.Pool.getItemByClass("Vector3",Laya.Vector3);this.setToVec3(c,i,s,n),Laya.Tween.to(c,{x:o,y:r,z:l},a,h,Laya.Handler.create(this,()=>{e()}),0,!1,!0).update=Laya.Handler.create(this,()=>{t.transform?this.localPosition(t,c.x,c.y,c.z):e()},null,!1)}static tweenPosition(e,t,a,i,s,n,o,r,l=null,h=null,c=null){var d=Laya.Pool.getItemByClass("Vector3",Laya.Vector3);this.setToVec3(d,a,i,s);let m=Laya.Tween.to(d,{x:n,y:o,z:r},t,l,Laya.Handler.create(this,()=>{null!=c&&c()}),0,!1,!0);return m.update=Laya.Handler.create(this,()=>{e.transform?(this.position(e,d.x,d.y,d.z),h&&h.runWith(d)):null!=c&&c()},null,!1),m}}class x extends Laya.Script3D{constructor(){super(),this.stage_dis_z=9,this.start_pos=new Laya.Vector3(-.1905804677307608,1.3980510931855037,-5.151574879005554),this.start_rot=new Laya.Vector3(-18.242095295912744,-175.63244273138994,-2.662174102247288e-7),this.menu_pos=new Laya.Vector3(-1.3203681024909018,.38740019451555485,-1.6522341995909826),this.menu_rot=new Laya.Vector3(1.7896551374511018,-51.74980009938377,3.0064510732025026e-7),this.over_rot=new Laya.Vector3(-14.292124256280848,-52.523293122810394,-1.1418999226818036e-7),this.look_trans_pos=new Laya.Vector3(this.menu_pos.x-this.start_pos.x,this.menu_pos.y-this.start_pos.y,this.menu_pos.z-this.start_pos.z),this.look_trans_rot=new Laya.Vector3(this.menu_rot.x-this.start_rot.x,this.menu_rot.y-this.start_rot.y,this.menu_rot.z-this.start_rot.z),this.bag_rot=new Laya.Vector3(-17.657678344879304,-51.60885248178163,-14195851006527938e-22),this.moveTime=0}static Instance(){return this._instance}onAwake(){x._instance=this,this.m_camera=this.owner,this.m_camera.addComponent(G),this.moveTime=C.cameraMoveTime,this.SetInStart()}SetInStart(){this.m_pos_tween&&this.m_pos_tween.clear(),this.SetTrans(this.start_pos,this.start_rot)}SetState(e){let t=this.m_camera.transform.position,a=this.m_camera.transform.rotationEuler,i=1e3;switch(e){case s.Menu:t=this.menu_pos,a=this.menu_rot;break;case s.GameStart:t=this.start_pos,a=this.start_rot,i=800;break;case s.GameOver:t=new Laya.Vector3(t.x+this.look_trans_pos.x,t.y+this.look_trans_pos.y,t.z+this.look_trans_pos.z),a=this.over_rot,i=800;break;case s.Bag:a=this.bag_rot,i=300;break;case s.GetScore:t=new Laya.Vector3(t.x,t.y,t.z+this.stage_dis_z),i=800;break;case s.GameRelive:t=new Laya.Vector3(t.x-this.look_trans_pos.x,t.y-this.look_trans_pos.y,t.z-this.look_trans_pos.z),a=new Laya.Vector3(a.x-this.look_trans_rot.x,a.y-this.look_trans_rot.y,a.z-this.look_trans_rot.z),i=800;break;case s.OverDerive:m.getLeveNum()>3&&(t=new Laya.Vector3(this.menu_pos.x,this.menu_pos.y,this.menu_pos.z+27)),i=10}this.CameraTween(i,t,a)}SetTrans(e,t){this.m_camera.transform.position=e,this.m_camera.transform.rotationEuler=t}CameraTween(e,t,a){this.m_pos_tween&&this.m_pos_tween.clear(),this.m_rot_tween&&this.m_rot_tween.clear();let i=this.m_camera.transform.rotationEuler,s=this.m_camera.transform.position;this.m_pos_tween=P.tweenPosition(this.m_camera,e,s.x,s.y,s.z,t.x,t.y,t.z,Laya.Ease.quintInOut),this.m_rot_tween=P.tweenRotationEuler(this.m_camera,e,i.x,i.y,i.z,a.x,a.y,a.z,Laya.Ease.quintInOut)}GetCamera(){return this.m_camera}onKeyDown(e){97==e.keyCode&&(console.log("this.m_camera.transform.position",this.m_camera.transform.position),console.log("this.m_camera.transform.rotationEuler",this.m_camera.transform.rotationEuler))}}!function(e){e[e.Menu=0]="Menu",e[e.GameStart=1]="GameStart",e[e.GameOver=2]="GameOver",e[e.Bag=3]="Bag",e[e.GetScore=4]="GetScore",e[e.GameRelive=5]="GameRelive",e[e.OverDerive=6]="OverDerive"}(s||(s={}));class E{constructor(){this.typeList=[{type:"ball",amount:8},{type:"club",amount:20},{type:"people",amount:9}]}static getInstance(){return null==E._instance&&(E._instance=new E),E._instance}getPropBase(e){return this.typeList[e]}getPropTypeNum(){return this.typeList.length}}!function(e){e[e.ball=0]="ball",e[e.club=1]="club",e[e.peopel=2]="peopel"}(n||(n={}));class N extends Laya.Script{constructor(){super(),this.inGame=!1,this.m_current_stage_id=0,this.showWatiTime=0,this.menu_pos=new Laya.Vector3(0,.133,-2.88),this.current_club_name="normal",this.current_people_name="people2",this.current_ball_name="normal",this.isFirst=!1,this.could_beat=!0,this.record=!1,this.record_timer=0,this.max_timer=400}static Instance(){return this._isntance}onAwake(){N._isntance=this;let e=this.owner.getChildByName("Player");this.m_player=e.addComponent(R),this.m_club=e.getChildByName("club"),this.m_ballManager=this.owner.getChildByName("BallManager").addComponent(D),this.m_win_effect=this.owner.getChildByName("WinEffect"),this.showWatiTime=C.cameraMoveTime,this.max_timer=C.max_power_timer,this.addEvent(),this.showInMenu();for(let e=0;e<this.m_club.numChildren;e++)this.m_club.getChildAt(e).active=!1;let t=E.getInstance().getPropBase(n.peopel).amount;for(let a=0;a<t;a++)e.getChildByName("people"+a).active=!1;e.getChildByName("guangquan").active=!0}onStart(){this.hideWinEffect(),this.getPlayerSet(),this.choosePeople(this.current_people_name),this.chooseClub(this.current_club_name)}onDestroy(){this.removeEvent()}onUpdate(){this.record&&(this.record_timer+=Laya.timer.delta)}addEvent(){d.instance.regEvemt(e.GameStart,this,this.onGameStart),d.instance.regEvemt(e.ChooseProp,this,this.onChooseProp)}removeEvent(){d.instance.removeEvent(e.GameStart,this,this.onGameStart),d.instance.removeEvent(e.ChooseProp,this,this.onChooseProp)}onGameStart(){this.inGame=!0,this.m_ballManager.setBallAmount(Z.Instance().getGameBall()),this.current_pos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos(),this.showPlayer()}onGameOver(e){this.inGame=!1,e?(this.m_player.playAni(i.wudao),this.showWinEffect()):this.m_player.playAni(i.Dismay)}onChooseProp(e){-1!=e.search("people")?this.choosePeople(e):-1!=e.search("club")?this.chooseClub(e):-1!=e.search("ball")&&(this.current_ball_name=e,this.m_ballManager.changeSkin(e))}resetPlayer(){let e=m.getSkinConfig();this.choosePeople(e.people),this.chooseClub(e.club),this.m_ballManager.changeSkin(e.ball),this.m_ballManager.createBall(f.CouldSetSkin),this.hideWinEffect(),this.m_current_stage_id=0,this.m_ballManager.RecoverAllBall(),this.inGame=!1,this.isFirst=Z.Instance().getFirst()}showPlayer(){this.current_pos||(this.current_pos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos()),this.m_player.showPlayerByPos(this.current_pos),this.m_player.playAni(i.Idle),this.m_ballManager.ShowBall()}showInMenu(){this.m_player.showPlayerByPos(this.menu_pos),this.m_player.playAni(i.Idle)}showWinEffect(){let e=this.m_player.getTrans();this.m_win_effect.transform.position=new Laya.Vector3(e.x,e.y+2,e.z),this.m_win_effect.active=!0}hideWinEffect(){this.m_win_effect&&(this.m_win_effect.active=!1)}storgePower(){this.inGame&&this.could_beat&&(this.m_player.playAni(i.Idle),this.m_player.storgePower(),this.record=!0,this.record_timer=0,this.could_beat=!1)}desorbPower(){if(this.isFirst&&d.instance.dispatch(e.HideGuide),this.inGame&&this.record){this.record=!1;let e=Math.min(this.record_timer/this.max_timer,1);this.m_player.desorbPower(e),Laya.timer.once(60*e,this,()=>{this.m_ballManager.BeatBall(e),this.could_beat=!0})}}updatePos(t){if(t>=this.m_current_stage_id&&this.inGame){if(this.m_ballManager.updatePos(),this.m_current_stage_id++,this.current_pos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos(),x.Instance().SetState(s.GetScore),Laya.timer.once(this.showWatiTime,this,this.showPlayer),M.instance.playSound(a.GetScore),Z.Instance().getIsAwardGame()){let e=Z.Instance().getGameBall();this.m_ballManager.setBallAmount(e)}d.instance.dispatch(e.PlayerUpdatePos)}}getCurrentStageID(){return this.m_current_stage_id}chooseClub(e="normal"){this.m_club.getChildByName(this.current_club_name).active=!1,this.current_club_name=e,this.m_club.getChildByName(this.current_club_name).active=!0;this.m_club.getChildByName(this.current_club_name)}choosePeople(e="people2"){this.current_people_render=this.m_player.owner.getChildByName(this.current_people_name),this.current_people_name!=e&&(this.current_people_render.active=!1,this.current_people_name=e,this.current_people_render=this.m_player.owner.getChildByName(this.current_people_name)),this.current_people_render.active=!0}savePlayerSet(){m.setSkin(this.current_people_name,this.current_club_name,this.current_ball_name),ee.getInstance().saveGameData()}getPlayerSet(){let e=m.getSkinConfig();this.current_people_name=e.people,this.current_club_name=e.club,this.current_ball_name=e.ball}getPlayerPos(){return this.m_player.getTrans()}}class T extends Laya.Script{constructor(){super(),this.inGame=!1,this.m_current_stage_id=0,this.showWatiTime=0,this.current_club_name="normal",this.current_people_name="people2",this.max_timer=C.max_power_timer,this.m_ball_list=new Array,this.current_ball_id=0,this.beat_wait_timer=2e3,this.m_level=0,this.beat_right_rat=0}static Instance(){return this._instance}onAwake(){T._instance=this,this.m_owner=this.owner;let e=this.owner.getChildByName("Player");this.ai_player=e.addComponent(R),this.m_club=e.getChildByName("club"),this.showWatiTime=C.cameraMoveTime,this.max_timer=C.max_power_timer;for(let e=0;e<this.m_club.numChildren;e++)this.m_club.getChildAt(e).active=!1;let t=E.getInstance().getPropBase(n.peopel).amount;for(let a=0;a<t;a++)e.getChildByName("people"+a).active=!1;e.getChildByName("guangquan").active=!0;for(let e=0;e<2;e++){let t=this.m_owner.getChildByName("ball"+e).addComponent(V);t.hide(),t.setManager(this.m_owner),this.m_ball_list.push(t)}this.m_owner.active=!1}onGameStart(){this.setAILevel(),this.m_owner.active=!1,this.inGame=!0,this.m_current_stage_id=0,this.current_pos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos(),this.current_hole_pos=z.Instance().GetStageById(this.m_current_stage_id).getHolePos(),this.current_ball_pos=new Laya.Vector3(this.current_pos.x-.6,this.current_pos.y,this.current_pos.z),this.randomSkin(),this.showPlayer()}onGameOver(e=!1){this.inGame&&(Laya.timer.clearAll(this),this.inGame=!1,e?this.ai_player.playAni(i.wudao):this.ai_player.playAni(i.Dismay))}hide(){this.m_owner.active=!1}resetAIPlayer(){this.m_current_stage_id=0,this.inGame=!1,this.m_owner.active=!1}setAILevel(){let e=Math.max(m.getRankLevel()+Math.floor(6*Math.random()-3),0),t=Math.min(Math.floor(e/5),5);this.beat_right_rat=o["level"+t],console.log("ai进球命中率",this.beat_right_rat)}showPlayer(){Laya.timer.clearAll(this),this.m_owner.active=!0,this.current_pos||(this.current_pos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos());let e=new Laya.Vector3(this.current_pos.x-.6,this.current_pos.y,this.current_pos.z);this.ai_player.showPlayerByPos(e),this.ai_player.playAni(i.Idle),Laya.timer.once(500,this,this.autoStart)}autoStart(){this.beatBall()}beatBall(){z.Instance().getRightDis(this.m_current_stage_id);this.m_ball_list[this.current_ball_id].show(this.current_ball_pos);let e=Math.sqrt(6.8*z.Instance().getRightDis(this.m_current_stage_id))/C.max_power_dis;if(this.beat_right_rat<=Math.random()){let t=Math.random()>.5?.1+.2*Math.random():-(.1+.2*Math.random());e+=t,e=Math.max(.3,Math.min(1,e))}this.ai_player.storgePower(),Laya.timer.once(e*this.max_timer,this,()=>{this.ai_player.desorbPower(e);let t=2.5/(5.8*e);this.m_ball_list[this.current_ball_id].beatBall(e,t),this.current_ball_id++,this.current_ball_id>=this.m_ball_list.length&&(this.current_ball_id=0),Laya.timer.once(this.beat_wait_timer,this,this.beatBall)})}randomSkin(){let e="people"+Math.floor(9*Math.random()),t="club"+Math.floor(20*Math.random());this.choosePeople(e),this.chooseClub(t)}updatePos(t){let a=this;t>=this.m_current_stage_id&&this.inGame&&(this.m_current_stage_id++,this.current_pos=z.Instance().GetStageById(this.m_current_stage_id).GetBeatPos(),this.current_ball_pos=new Laya.Vector3(this.current_pos.x-.6,this.current_pos.y,this.current_pos.z),Laya.timer.once(800,a,()=>{a.showPlayer(),d.instance.dispatch(e.ChangeGamingPic)}))}getCurrentStageID(){return this.m_current_stage_id}chooseClub(e="normal"){this.m_club.getChildByName(this.current_club_name).active=!1,this.current_club_name=e,this.m_club.getChildByName(this.current_club_name).active=!0;this.m_club.getChildByName(this.current_club_name)}choosePeople(e="people2"){this.current_people_render=this.ai_player.owner.getChildByName(this.current_people_name),this.current_people_name!=e&&(this.current_people_render.active=!1,this.current_people_name=e,this.current_people_render=this.ai_player.owner.getChildByName(this.current_people_name)),this.current_people_render.active=!0}onKeyDown(e){98==e.keyCode&&(console.log("展示了AI"),this.onGameStart())}getAIPos(){return this.ai_player.getTrans()}}!function(e){e[e.level0=.3]="level0",e[e.level1=.4]="level1",e[e.level2=.5]="level2",e[e.level3=.6]="level3",e[e.level4=.7]="level4",e[e.level5=.8]="level5"}(o||(o={}));class O extends Laya.Script3D{constructor(){super(),this.isAwardGame=!1}onAwake(){this.m_flag=this.owner,this.getScore_effect=this.m_flag.getChildByName("jinqiu"),this.m_key=this.owner.parent.getChildByName("Key"),this.m_key.active=!1,this.getScore_effect.active=!1,this.isAwardGame=Z.Instance().getIsAwardGame()}onStart(){this.m_key.active=this.isAwardGame}setId(e){this.m_id=e}onCollisionEnter(e){if("Ball"==e.other.owner.name||"aBall"==e.other.owner.name){let t=e.other.owner.getComponent(V);t.hide(),"PlayerManager"==t.getManager().name&&(this.getScore_effect.active=!0,N.Instance().updatePos(this.m_id),this.m_key.active=!1,A.vibrateShort())}else if("ball0"==e.other.owner.name||"ball1"==e.other.owner.name){let t=e.other.owner.getComponent(V);t.hide(),t.getManager().getComponent(T).updatePos(this.m_id)}}getPos(){return this.m_flag.transform.position}}class U extends Laya.Script3D{constructor(){super(),this.m_flagPos_list=new Array,this.barrier_type_list=[t.ObstacleBarre,t.ObstacleTurnAround,t.ObstacleCut,t.ObstacleTurnAround1,t.ObstacleStairs],this.right_dis=0}onAwake(){this.m_stage=this.owner,this.Init()}Init(){this.m_ground=this.m_stage.getChildByName("Ground"),this.m_ground.addComponent(k);let e=this.m_stage.getChildByName("flagPos");this.m_flag_amount=e.numChildren;for(let t=0;t<this.m_flag_amount;t++){let a=e.getChildByName("qizhi"+t);this.m_flagPos_list.push(a.transform.position)}let t=this.m_stage.getChildByName("beatPos");if(this.m_beatPos=t.transform.position,Z.Instance().getIsAwardGame()){this.m_ground.meshRenderer.material=this.m_ground.meshRenderer.materials[1];let e=this.m_stage.getChildByName("Static");e.meshRenderer.material=e.meshRenderer.materials[1]}if(Z.Instance().getIsRank()){let e=0;Math.floor(m.getRankLevel()/5)<=1&&(e=2),3==Math.floor(m.getRankLevel()/5)&&(e=4),Math.floor(m.getRankLevel()/5)>=4&&(e=1),this.m_ground.meshRenderer.material=this.m_ground.meshRenderer.materials[e];let t=this.m_stage.getChildByName("Static");t.meshRenderer.material=t.meshRenderer.materials[e]}}Show(e){this.m_stage.transform.position=e,this.m_stage.active=!0}Hide(){this.m_stage.active=!1}RandomFlagPos(){let e=Math.floor(Math.random()*this.m_flag_amount);return this.m_flagPos_list[e]}GetBeatPos(){return this.m_beatPos}CreateFlag(e){let a=f.createPre(t.Flag,this.m_stage);a.transform.position=this.RandomFlagPos(),this.m_hole=a.getChildByName("Hole").addComponent(O),m.getLeveNum()>10?Math.random()<.25&&this.CreateBarrier(a):null!=e&&this.CreateBarrier(a,e),this.right_dis=a.transform.position.z-this.m_beatPos.z}CreateBarrier(e,t){null==t&&(t=Math.floor(Math.random()*this.barrier_type_list.length)),f.createPre(this.barrier_type_list[t],this.m_stage).transform.position=e.transform.position}SetHoleId(e){this.m_hole.setId(e)}getRightDis(){return this.right_dis}getHolePos(){return this.m_hole.getPos()}}class F extends Laya.Script3D{constructor(){super(),this.effect_list=new Array}static Instance(){return this._instance}onAwake(){F._instance=this,this.m_owner=this.owner,this.m_effect_pre=f.getPre(t.StrikeGroundEffect),this.effect_list.push(this.m_effect_pre),this.m_effect_pre.active=!1}ShowEffect(e){let a=null;for(let e=0;e<this.effect_list.length;e++)if(!this.effect_list[e].active){a=this.effect_list[e];break}null==a&&(a=f.createPre(t.StrikeGroundEffect,this.m_owner),this.effect_list.push(a)),a.transform.position=e,a.active=!0,Laya.timer.once(1e3,this,()=>{a.active=!1})}}class H extends O{constructor(){super(),this.couldOver=!0}onAwake(){super.onAwake(),this.m_box=this.owner.parent.getChildByName("Box")}onStart(){super.onStart(),this.m_box.active=!this.isAwardGame&&!Z.Instance().getIsRank()}onCollisionEnter(e){if(this.couldOver)if("Ball"==e.other.owner.name||"aBall"==e.other.owner.name){this.couldOver=!1;let t=e.other.owner.getComponent(V);t.hide(),"PlayerManager"==t.getManager().name&&(this.getScore_effect.active=!0,A.vibrateShort(),this.m_key.active=!1,console.log("游戏结束"),Z.Instance().gameOver(),T.Instance().onGameOver(!1))}else if("ball0"==e.other.owner.name||"ball1"==e.other.owner.name){this.couldOver=!1,console.log("对手进球了"),e.other.owner.getComponent(V).hide(),Z.Instance().gameOver(!1),T.Instance().onGameOver(!0)}}}class W extends U{constructor(){super()}CreateFlag(){let e=f.createPre(t.OverFlag,this.m_stage);e.transform.position=this.RandomFlagPos(),this.m_hole=e.getChildByName("Hole").addComponent(H),this.right_dis=e.transform.position.z-this.m_beatPos.z}}class z extends Laya.Script3D{constructor(){super(),this._levelConfig=new Array,this.stage_dis=9,this._level_right_dis=new Array}static Instance(){return this._instance}onAwake(){z._instance=this,this.m_owner=this.owner,this.m_owner.addComponent(F)}SetStage(e,a,i,s){this._levelConfig=[],this._level_right_dis=[];let n=0,o=0;for(let a=0;a<e.length;a++)if(a<e.length-1){let r=f.createPre(t[e[a]],this.m_owner).addComponent(U);i&&i[o]==a?(r.CreateFlag(s[o]),o++):r.CreateFlag(),r.SetHoleId(a),r.Show(new Laya.Vector3(0,0,n)),this._levelConfig.push(r),this._level_right_dis.push(r.getRightDis()),n+=this.stage_dis}else{let i=f.createPre(t[e[a]],this.m_owner).addComponent(W);i.CreateFlag(),i.SetHoleId(a),i.Show(new Laya.Vector3(0,0,n)),this._levelConfig.push(i),this._level_right_dis.push(i.getRightDis())}a&&a()}GetStageById(e){return this._levelConfig[e]}DestroyStage(){this._levelConfig&&this._levelConfig.forEach(e=>{e.owner.destroy()})}getRightDis(e){return this._level_right_dis[e]}}!function(e){e.None="",e.TipsView="View/TipsView.json",e.ClickGetPrize="View/ClickGetPrize.json",e.MenuView="subRes/View/MenuView.json",e.LotteryView="subRes/View/LotteryView.json",e.BagView="subRes/View/BagView.json",e.OverView="subRes/View/OverView.json",e.OverDeriveView="subRes/View/OverDeriveView.json",e.MoreGameView="subRes/View/MoreGameView.json",e.GameView="subRes/View/GameView.json",e.ReliveView="subRes/View/ReliveView.json",e.SideAdView="subRes/View/SideAdView.json",e.RankView="subRes/View/RankView.json",e.MoreGame="subRes/View/MoreGame.json",e.TrySkinView="subRes/View/TrySkinView.json",e.EnterGamePop="subRes/View/EnterGamePop.json",e.NativeView="subRes/View/NativeView.json"}(r||(r={}));class K{constructor(){this._views={}}openView(e,t,a){if(this._views[e]){let i=this._views[e]._components,s=null;if(i)for(let e=0;e<i.length;e++){const a=i[e];if(a._viewBase){(s=a).openView(t);break}}a&&a(s)}else{var i=String(e),s=this;Laya.Scene.load(i,Laya.Handler.create(this,function(i){Laya.stage.addChild(i);var n=i;s._views[e]=n;let o=i._components,r=null;if(o)for(let a=0;a<o.length;a++){const i=o[a];if(i._viewBase){r=i,i._viewDef=e,r.openView(t);break}}a&&a(r)}))}}closeView(e){var t=this._views[e];if(t){let a=t._components;if(a)for(let e=0;e<a.length;e++){const t=a[e];if(t._viewBase){t.onClose();break}}t.removeSelf(),t.destroy(),this._views[e]=null}}ShowView(e){var t=this._views[e];if(t){let e=t._components;if(e)for(let t=0;t<e.length;t++){const a=e[t];if(a._viewBase){a.show();break}}}}hideView(e){var t=this._views[e];if(t){let e=t._components;if(e)for(let t=0;t<e.length;t++){const a=e[t];if(a._viewBase){a.hide();break}}}}getView(e){return this._views[e]}showTips(e){this.openView(r.TipsView,e)}}K.instance=new K;class Q extends Laya.Script{constructor(){super(...arguments),this.onCloseEvent=null,this.onOpenEvent=null,this._viewBase=!0,this._viewDef=r.None,this._data={}}onAwake(){this.owner.autoDestroyAtClosed=!0,this.owner.height=Laya.stage.height}onEnable(){console.log("onEnable"),this.addEvent()}onDisable(){this.removeEvent()}onDestroy(){this.removeEvent()}openView(t){this._data=t,this.show(),d.instance.dispatch(e.Game_OnViewOpen,{view:this._viewDef}),this.onOpenEvent&&this.onOpenEvent()}addEvent(){}removeEvent(){Laya.timer.clearAll(this)}closeView(){K.instance.closeView(this._viewDef)}hide(){this.owner.visible=!1,this.onHide()}show(){this.owner.visible=!0,this.onShow()}viewIsHide(){return 0==this.owner.alpha}onHide(){}onShow(){}onClose(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),d.instance.dispatch(e.Game_OnViewClose,{view:this._viewDef}),this.onCloseEvent&&this.onCloseEvent()}}class q extends Laya.Script{constructor(){super(),this.starList=new Array,this.current_star_num=0}onAwake(){this.m_owner=this.owner,this.condition=this.m_owner.getChildByName("condition");let e=this.m_owner.getChildByName("stars");for(let t=0;t<5;t++){let a=e.getChildByName("star"+t);a.alpha=0,this.starList.push(a)}this.showStar()}showStar(){let e=Math.min(Math.floor(m.getRankLevel()/5),5);this.condition.skin="Rank/condition"+e+".png",this.m_owner.skin="Rank/level"+e+".png",this.current_star_num=m.getRankLevel()%5;for(let e=0;e<=this.current_star_num;e++)this.starList[e].alpha=1}hideStar(){for(let e=0;e<5;e++)this.starList[e].alpha=0}}class X extends q{constructor(){super()}onStart(){super.onStart(),this.condition.visible=!1}addStar(){m.getRankLevel()>=30||(m.addRankLevel(),this.current_star_num++,this.current_star_num>=5?this.changeLevel():(this.starList[this.current_star_num].scale(0,0),Laya.timer.once(500,this,()=>{M.instance.playSound(a.AddStar),Laya.Tween.to(this.starList[this.current_star_num],{alpha:1,scaleX:1.2,scaleY:1.2},500,Laya.Ease.quadInOut,Laya.Handler.create(this,()=>{Laya.Tween.to(this.starList[this.current_star_num],{scaleX:1,scaleY:1},200,Laya.Ease.circInOut)}))})))}subStar(){m.subRankLevel(),this.current_star_num<=0?this.changeLevel():Laya.timer.once(500,this,()=>{Laya.Tween.to(this.starList[this.current_star_num],{alpha:0},500)})}changeLevel(){Laya.Tween.to(this.m_owner,{scaleX:0,scaleY:0},500,Laya.Ease.circInOut,Laya.Handler.create(this,()=>{this.hideStar(),this.current_star_num=0,this.showStar(),Laya.Tween.to(this.m_owner,{scaleX:1,scaleY:1},800,Laya.Ease.circInOut)}))}hide(){this.m_owner.visible=!1}}class j{static preloadBanner(){for(var e=S.getInstance().getAppSwitchData().wxWuDianBanners,t=S.getInstance().getAppSwitchData().bannerTodayBannerMax,a=new Array,i=0;i<e.length;++i)a.push(e[i]);if(a.length>t){var s=a.length-t;for(i=0;i<s;++i)a.splice(Math.floor(Math.random()*a.length),1)}console.log("开始预创建微信Bannaer",a),console.log("Bannaer 最大数限制 ：",t);var n=0;Laya.timer.loop(2e3,j._preLoopObj,()=>{if(n>=a.length)Laya.timer.clearAll(j._preLoopObj);else{var e=a[n],t=j._bannerCache[e];null==t&&null!=(t=j.create(e))&&(j._bannerCache[e]=t,console.log("预创建微信Bannaer",e,"完成")),++n}})}static getBanner(e){if(null==e||""==e)return null;var t=j._bannerCache[e];return null==t&&null!=(t=j.create(e))&&(j._bannerCache[e]=t),t}static create(e){if(Laya.Browser.onMiniGame){var t=Laya.Browser.window.wx.getSystemInfoSync(),a=t.screenWidth,i=t.screenHeight,s=Laya.Browser.window.wx.createBannerAd({adUnitId:e,adIntervals:30,style:{left:0,top:(Laya.stage.height-270)/Laya.stage.height*i,width:a}});return s&&(s.onLoad(t=>{console.log("CachedWXBanner 广告 加载完成",e),console.log(t)}),s.onError(t=>{console.log("CachedWXBanner 广告 加载失败",e),console.log(t)}),s.onResize(e=>{console.log(s.style.realWidth,s.style.realHeight)})),s}return null}static show(){null!=j._curBanner&&(j._curBanner.hide(),j._curBanner=null);var e=S.getInstance().getAppSwitchData().wxWuDianBanners,t=e[Math.floor(Math.random()*e.length)],a=j.getBanner(t);if(a){j._curBanner=a;var i=Laya.Browser.window.wx.getSystemInfoSync(),s=(i.screenWidth,i.screenHeight);j._curBanner.style.top=(Laya.stage.height-270)/Laya.stage.height*s,j._curBanner.show(),console.log("CachedWXBanner 广告显示 bannerid ： ",t)}S.getInstance().getAppSwitchData().bannerFreshTimer}static hide(){Laya.timer.clearAll(j),null!=j._curBanner&&(j._curBanner.hide(),j._curBanner=null),console.log("CachedWXBanner 广告隐藏")}static changeShow(){null!=j._curBanner&&(j._curBanner.hide(),j._curBanner=null),j.show()}static clear(){for(var e in Laya.timer.clearAll(j),j._bannerCache){var t=j._bannerCache[e];null!=t&&t.destroy(),j._bannerCache[e]=null}}}j._bannerCache={},j._curBanner=null,j._preLoopObj={};class Y extends Q{constructor(){super(),this.is_rank=!1,this.moveDis=250,this.wudianBannerShow=!1}onAwake(){this.btn_openTreasure=this.owner.getChildByName("btn_openTreasure"),this.btn_continue=this.owner.getChildByName("btn_continue"),this.title=this.owner.getChildByName("title"),this.btn_sideAD=this.owner.getChildByName("btn_sideAD"),this.btn_sideAD.visible=!1,this.bg=this.owner.getChildByName("bg"),this.m_cup=this.owner.getChildByName("cup").getComponent(X),this.is_rank=Z.Instance().getIsRank()}onStart(){this.setTitle(this._data),this.is_rank?this.inRank():this.inNormal(),B.WudianFlag?(this.hideBanner(),this.addWuDianEvent(),this.btnMoveStart()):(this.showBanner(),this.addBtnEvent())}onDestroy(){super.onDestroy(),this.hideBanner(),ee.getInstance().saveGameData()}addEvent(){d.instance.regEvemt(e.MoreGameView,this,this.hideBanner),d.instance.regEvemt(e.OutMoreGameView,this,this.backMoreGame),this.btn_sideAD.on(Laya.Event.CLICK,this,this.clickSideAD)}removeEvent(){d.instance.removeEvent(e.MoreGameView,this,this.hideBanner),d.instance.removeEvent(e.OutMoreGameView,this,this.backMoreGame),this.btn_sideAD.off(Laya.Event.CLICK,this,this.clickSideAD),this.removeBtnEvent()}addBtnEvent(){this.btn_openTreasure.on(Laya.Event.CLICK,this,this.clickOpenTreasure),this.btn_continue.on(Laya.Event.CLICK,this,this.clickContinue)}removeBtnEvent(){this.btn_openTreasure.off(Laya.Event.CLICK,this,this.clickOpenTreasure),this.btn_continue.off(Laya.Event.CLICK,this,this.clickContinue)}addWuDianEvent(){this.btn_openTreasure.on(Laya.Event.CLICK,this,this.clickShowWudianBanner),this.btn_continue.on(Laya.Event.CLICK,this,this.clickShowWudianBanner)}removeWuDianEvent(){this.btn_openTreasure.off(Laya.Event.CLICK,this,this.clickShowWudianBanner),this.btn_continue.off(Laya.Event.CLICK,this,this.clickShowWudianBanner)}btnMoveStart(){this.btn_openTreasure.bottom=this.btn_openTreasure.bottom-this.moveDis,this.btn_continue.bottom=this.btn_continue.bottom-this.moveDis}btnMoveEnd(){this.btn_openTreasure.bottom=this.btn_openTreasure.bottom+this.moveDis,this.btn_continue.bottom=this.btn_continue.bottom+this.moveDis}setTitle(e){switch(this.title.alpha=0,e){case l.WinGame:this.title.skin="Over/win_title.min.png",this.is_rank?(this.btn_openTreasure.visible=!1,this.m_cup.addStar()):this.btn_continue.visible=!1;break;case l.LoseGame:this.title.skin="Over/lose_title.min.png",this.btn_openTreasure.visible=!1,this.is_rank&&this.m_cup.subStar();break;case l.ClickGetPrize:this.title.skin="Over/win_title.min.png",this.is_rank?(this.btn_openTreasure.visible=!1,this.m_cup.addStar()):this.btn_continue.visible=!1}Laya.Tween.to(this.title,{alpha:1},500,Laya.Ease.quintOut)}inRank(){this.bg.visible=!0,this.title.visible=!1,Laya.timer.once(2e3,this,()=>{y.showInterstitialAd(()=>{},()=>{})})}inNormal(){this.bg.visible=!1,this.m_cup.hide(),y.showInterstitialAd(()=>{},()=>{})}clickOpenTreasure(){Laya.Tween.clearAll(this.title),K.instance.openView(r.LotteryView,this._data),K.instance.closeView(r.OverView)}clickContinue(){Laya.Tween.clearAll(this.title),K.instance.closeView(r.OverView),Z.Instance().getIsRank()?(T.Instance().hide(),x.Instance().SetState(s.Menu),K.instance.openView(r.RankView)):Z.Instance().normalStart()}clickSideAD(){K.instance.openView(r.SideAdView)}backMoreGame(){this.wudianBannerShow&&this.showBanner()}showBanner(){j.show()}hideBanner(){j.hide()}clickShowWudianBanner(){this.removeWuDianEvent(),Laya.timer.once(1e3*S.getInstance().getAppSwitchData().bannerMoveTimer,this,()=>{this.showBanner(),this.wudianBannerShow=!0}),Laya.timer.once(1e3*S.getInstance().getAppSwitchData().btnMoveTimer,this,()=>{this.addBtnEvent(),this.btnMoveEnd()})}}!function(e){e[e.WinGame=0]="WinGame",e[e.LoseGame=1]="LoseGame",e[e.ClickGetPrize=2]="ClickGetPrize"}(l||(l={}));class Z extends Laya.Script{constructor(){super(),this._stage_Max=8,this._stage_Min=4,this._stage_current_amount=0,this.inGame=!1,this.current_game_ball_amount=0,this.isFirst=!0,this.gameTimer=0,this.owner_key=1,this.user_avatarUrl=null,this.is_rank_game=!1}static Instance(){return this._instance}onAwake(){Z._instance=this,this.m_owner=this.owner,K.instance.openView(r.MenuView),this.level_config_json=ee.getInstance().getLevelJson()}onStart(){z.Instance().SetStage(this.RandomLevel()),J.Instance().setAwardScene()}SetLevelByJson(){let e=this.level_config_json[m.getLeveNum()],t=this.RandomLevel(e.amount);z.Instance().SetStage(t,()=>{N.Instance().resetPlayer()},e.barrier_id_list,e.barrier_type_list)}RandomLevel(e){let t=new Array;e||(e=this._stage_Min+Math.floor(Math.random()*(this._stage_Max-this._stage_Min))),this._stage_current_amount=e,this.current_game_ball_amount=3*e,0==m.getLeveNum()&&(this.current_game_ball_amount=100);for(let a=0;a<e;a++){let e="Stage"+(Math.floor(C.stagePre_Amount*Math.random())+1);t.push(e)}return 3==this.gameTimer&&(this.current_game_ball_amount=3),this.is_rank_game&&(this.current_game_ball_amount=1e3),t}normalStart(){B.WudianFlag?this.openClickGetPrize(Laya.Handler.create(this,()=>{this.refreshStage()})):this.refreshStage()}rankStart(e){B.WudianFlag?this.openClickGetPrize(Laya.Handler.create(this,()=>{this.rankGameStart(e)})):this.rankGameStart(e)}refreshStage(){this.is_rank_game=!1,ee.getInstance().saveGameData(),z.Instance().DestroyStage(),m.getLeveNum()<10&&3!=this.gameTimer?this.SetLevelByJson():3!=this.gameTimer||this.is_rank_game?z.Instance().SetStage(this.RandomLevel(),()=>{N.Instance().resetPlayer()}):z.Instance().SetStage(this.RandomLevel(9),()=>{N.Instance().resetPlayer()}),J.Instance().randomEnv(),Laya.timer.once(850,this,this.gameStart)}gameStart(){let t=Laya.Handler.create(this,()=>{this.inGame=!0,this.getIsAwardGame()?this.owner_key=0:this.owner_key=1,K.instance.openView(r.GameView),d.instance.dispatch(e.GameStart),x.Instance().SetState(s.GameStart)});m.ownerPropAll()?t.method():K.instance.openView(r.TrySkinView,t)}rankGameStart(t){let a=Laya.Handler.create(this,()=>{this.is_rank_game=!0;let a={aiPic:t,playPic:this.user_avatarUrl};z.Instance().DestroyStage(),z.Instance().SetStage(this.RandomLevel(),()=>{N.Instance().resetPlayer()}),J.Instance().randomEnv(),Laya.timer.once(850,this,()=>{this.inGame=!0,K.instance.openView(r.GameView,a),d.instance.dispatch(e.GameStart),x.Instance().SetState(s.GameStart),T.Instance().onGameStart()})});m.ownerPropAll()?a.method():K.instance.openView(r.TrySkinView,a)}openClickGetPrize(e){let t={Complete:function(){console.log("狂点按钮结束"),e.method(),m.addMoney(50),M.instance.playSound(a.GetCoin)},PrizeCount:50};K.instance.openView(r.ClickGetPrize,t)}couldRelive(){this.inGame=!1,K.instance.closeView(r.GameView),N.Instance().onGameOver(!1),K.instance.openView(r.ReliveView)}gameOver(e=!0){this.isFirst&&(this.isFirst=!1),!this.inGame&&e||(this.inGame=!1,K.instance.closeView(r.GameView),N.Instance().onGameOver(e),x.Instance().SetState(s.GameOver),Laya.timer.once(2e3,this,()=>{e?K.instance.openView(r.OverView,l.WinGame):K.instance.openView(r.OverView,l.LoseGame)}),e?(3==this.gameTimer||this.is_rank_game||m.addLevelNum(),M.instance.playSound(a.Win)):M.instance.playSound(a.Lose),this.is_rank_game||this.gameTimer++,this.gameTimer>3&&(this.gameTimer=0))}gameRelive(){this.current_game_ball_amount=3,this.inGame=!0,d.instance.dispatch(e.GameStart),K.instance.openView(r.GameView)}getInGame(){return this.inGame}getGameBall(){return this.current_game_ball_amount}getHighView(){return Laya.stage.width/Laya.stage.height<.5}onKeyDown(e){console.log(e.keyCode),80==e.keyCode?this.refreshStage():101==e.keyCode?this.gameStart():104==e.keyCode&&x.Instance().SetState(s.GameStart)}getFirst(){return this.isFirst}getIsAwardGame(){return 3==this.gameTimer&&!this.is_rank_game}getOnerKeyNum(){return this.owner_key}setOnerKeyNum(e){this.owner_key=e}getCurrentStageAmount(){return this._stage_current_amount}getUserAvatarUrl(){return this.user_avatarUrl}saveUserAvatarUrl(e){this.user_avatarUrl=e}getIsRank(){return this.is_rank_game}}Z.is_first_add_ball=!0;class J extends Laya.Script3D{constructor(){super(),this.env_plane_list=new Array,this.last_specila_trans=0,this.env_sprite3D_list=new Array,this.skyPath=["subRes/LayaScene_1/Conventional/Assets/Mat/sky04.lmat","subRes/LayaScene_1/Conventional/Assets/Mat/sky02.lmat"],this.awardSkyPath="subRes/LayaScene_1/Conventional/Assets/Mat/sky07.lmat"}static Instance(){return this._instance}onAwake(){J._instance=this,this.m_scene=this.owner,this.Init()}Init(){this.m_scene.getChildByName("PreManager").addComponent(f),this.m_scene.getChildByName("GameManager").addComponent(Z),this.m_scene.getChildByName("StageManager").addComponent(z),this.m_scene.getChildByName("Main Camera").addComponent(x),this.m_scene.getChildByName("PlayerManager").addComponent(N),this.m_scene.getChildByName("AIManager").addComponent(T),this.m_directionLight=this.m_scene.getChildByName("Directional Light"),this.sky=this.m_scene.skyRenderer,this.m_plane=this.m_scene.getChildByName("Plane");for(let e=0;e<4;e++){let t=this.m_plane.getChildByName("Plane"+e);this.env_plane_list.push(t)}this.m_water=this.m_plane.getChildByName("water"),Laya.Sprite3D.load(g.ResServer+"/stage/Conventional/stage.lh",Laya.Handler.create(this,function(e){for(let t=0;t<4;t++){let a=e.getChildByName("cj"+t);this.m_scene.addChild(a),this.env_sprite3D_list.push(a),a.transform.translate(new Laya.Vector3(0,.25,0)),a.active=!1}console.log(this.env_sprite3D_list.length)})),this.randomEnv()}setLight(){this.m_directionLight.shadowMode=Laya.ShadowMode.SoftLow,this.m_directionLight.shadowDistance=5,this.m_directionLight.shadowResolution=2048}randomEnv(){this.m_plane.active=!0,this.m_water.active=!0,this.current_special_cj&&(this.current_special_cj.active=!1);let e=Math.floor(2*Math.random());Z.Instance().getIsAwardGame()?this.setAwardScene():this.SetSkyMat(this.skyPath[e]),this.env_plane_list.forEach(t=>{0==e&&(e=2),t.meshRenderer.material=t.meshRenderer.materials[e]}),Z.Instance().getIsRank()&&this.addEnv()}setRankEnv(e){e.transform.translate(new Laya.Vector3(0,0,-this.last_specila_trans));let t=9-Z.Instance().getCurrentStageAmount();this.last_specila_trans=-9*t+2;let a=new Laya.Vector3(0,0,this.last_specila_trans);e.transform.translate(a),e.active=!0,this.m_water.active=!1}addEnv(){if(this.env_sprite3D_list.length>0){let e=0;2==Math.floor(m.getRankLevel()/5)&&(e=1),3==Math.floor(m.getRankLevel()/5)&&(e=2),4==Math.floor(m.getRankLevel()/5)&&(e=3),5==Math.floor(m.getRankLevel()/5)&&(e=3),this.current_special_cj=this.env_sprite3D_list[e],this.setRankEnv(this.current_special_cj),this.m_plane.active=0==e}}setAwardScene(){this.SetSkyMat(this.awardSkyPath)}SetSkyMat(e){Laya.BaseMaterial.load(e,Laya.Handler.create(this,function(e){this.sky.material=e}))}}class ${constructor(){this.openBanner=1,this.openVideo=1,this.openInsert=1}static getInstance(){return null==$._instance&&($._instance=new $),$._instance}static load(){""!=$.resUrl?Laya.loader.load($.resUrl,Laya.Handler.create(this,e=>{if(e){for(const t of Object.keys(e))$._instance[t]=e[t];$._instance.SetBannerActive()}})):$._instance.SetBannerActive()}hideBanner(){I.CallNativeFunc("hideBanner")}SetBannerActive(){1==this.openBanner?I.CallNativeFunc("showBanner"):I.CallNativeFunc("hideBanner")}}$.resUrl="";class ee extends Laya.Script{constructor(){super(),ee._instance=this}static getInstance(){return ee._instance}onAwake(){L.GetMaiLiangOpenId(function(e){console.log("GameUI 买量数据上报成功"),Laya.Browser.window.wx.onShow(function(){L.GetMaiLiangOpenId(null,null)}),Laya.Browser.window.wx.onHide(function(){L.ReportStayTime(null,null)})},function(e){console.log("GameUI 买量数据上报失败")}),y.SetShareMenu("","",()=>{},()=>{},()=>{}),B.UpdateIpBlockState()}onStart(){this.preCreateGame()}preCreateGame(){let t=this;$.getInstance().hideBanner(),Laya.loader.load("subRes/json/levelConfig.json",Laya.Handler.create(t,()=>{t.level_json=Laya.loader.getRes("subRes/json/levelConfig.json"),Laya.Scene3D.load("subRes/LayaScene_1/Conventional/1.ls",Laya.Handler.create(t,function(t){Laya.stage.addChild(t),t.addComponent(J),d.instance.dispatch(e.App_CloseFirstLoadingView),$.getInstance().SetBannerActive()}))}))}saveGameData(){u.saveGameData(m.getSaveData(),e=>{1==e.code?console.log("存档成功"):console.log("存档失败")},e=>{console.log("存档失败")})}getLevelJson(){return this.level_json}}ee._instance=null;class te extends Laya.Script{constructor(){super(),this.icon_skin_path="subRes/propsLogo/",this.new_rot=1}onAwake(){this.m_icon=this.owner.getChildByName("m_icon"),this.m_lock=this.owner.getChildByName("m_lock"),this.choose=this.owner.getChildByName("choose"),this.m_new=this.owner.getChildByName("new"),this.m_new.visible=!1,this.choose.visible=!1,this.m_name=this.owner.name,this.setLock(),this.setIcon()}onStart(){d.instance.regEvemt(e.ChooseProp,this,this.onChoose),d.instance.regEvemt(e.GetNewSkin,this,this.GetNew)}onDestroy(){d.instance.removeEvent(e.ChooseProp,this,this.onChoose),d.instance.removeEvent(e.GetNewSkin,this,this.GetNew)}onUpdate(){this.m_new.visible&&(this.m_new.rotation+=this.new_rot,Math.abs(this.m_new.rotation)>=15&&(this.new_rot=-this.new_rot))}setLock(){this.m_lock&&(this.m_lock.visible=!m.ownerProp(this.m_name))}GetNew(e){e==this.m_name&&(this.m_new.visible=!0),this.setLock()}setIcon(){this.m_name&&(this.m_icon.skin=this.icon_skin_path+this.m_name+".png")}onClick(){M.instance.playSound(a.Button),m.ownerProp(this.m_name)&&(this.m_new.visible&&(this.m_new.visible=!1),M.instance.playSound(a.SkinBtn),d.instance.dispatch(e.ChooseProp,this.m_name))}onChoose(e){e==this.m_name?this.choose.visible=!0:this.choose.visible=!1}}class ae extends Laya.Script{constructor(){super(),this.x_page_space=0,this.x_repeat=0,this.y_repeat=0,this.x_item_space=0,this.y_item_space=0,this.repeat_amount=0,this.type_name="所属类型名称",this.start_x=0,this.page_List=new Array,this.in_move=!1,this.current_index=0,this.last_mouse_x=0,this.pageNum=0,this.start_click_x=0,this.prop_id=0}onAwake(){this.m_owner=this.owner,this.page_item.visible=!1,this.start_x=this.m_owner.x,this.pageNum=Math.ceil(this.repeat_amount/(this.x_repeat*this.y_repeat))}onStart(){for(let e=0;e<this.pageNum;e++)this.createPage(e);this.m_owner.width=this.page_item.width*this.pageNum+this.x_page_space*(this.pageNum-1)}createPage(e){let t=new Laya.Sprite;t.height=this.page_item.height,t.width=this.page_item.width,t.texture=this.page_item.texture,t.pos(this.page_item.x+e*(this.page_item.width+this.x_page_space),this.page_item.y);for(let e=0;e<this.y_repeat;e++)for(let a=0;a<this.x_repeat;a++)if(this.prop_id<this.repeat_amount){this.createItem(this.prop_id,a,e,t);this.prop_id++}this.m_owner.addChild(t),this.page_List.push(t)}createItem(e,t,a,i){let s=Laya.Pool.getItemByCreateFun("render_item",this.render_item.create,this.render_item),n=t*s.width+this.x_item_space*(t+1),o=a*s.width+this.y_item_space*(a+1);s.pos(n,o),s.name=this.type_name+e,this.addItemComponent(s),i.addChild(s)}toPageByIndex(e){this.current_index=e;let t=this.start_x-e*(this.page_item.width+this.x_page_space);Laya.Tween.to(this.m_owner,{x:t},50)}toPageByID(e){let t=Math.floor(e/(this.x_repeat*this.y_repeat));this.toPageByIndex(t)}getCurrentIndex(){return this.current_index}addItemComponent(e){e.addComponent(te)}onMouseDown(e){this.in_move=!0,this.last_mouse_x=e.stageX,this.start_click_x=e.stageX}onMouseMove(e){if(this.in_move){let t=e.stageX-this.last_mouse_x;this.m_owner.x+=t,this.last_mouse_x=e.stageX}}onMouseUp(t){this.in_move=!1,this.start_click_x-t.stageX>this.page_item.width/3?this.current_index++:this.start_click_x-t.stageX<-this.page_item.width/3&&this.current_index--,this.current_index<=0&&(this.current_index=0),this.current_index>=this.pageNum-1&&(this.current_index=this.pageNum-1),this.toPageByIndex(this.current_index),d.instance.dispatch(e.ChangePage,this.current_index)}}class ie extends Laya.Script{constructor(){super()}onAwake(){this.m_BagView=this.owner.parent.getComponent(se),this.m_name=this.owner.name.slice(6),this.btn_choose=this.owner.getChildByName("btn_choose"),this.click_bg=this.btn_choose.getChildByName("click_bg"),this.m_display=this.owner.getChildByName("display"),this.m_icon=this.owner.getChildByName("icon"),this.m_display_list=this.m_display.getComponent(ae),this.btn_choose.on(Laya.Event.CLICK,this,this.clickChoose),this.onNotChoose()}onChoose(e){this.click_bg.visible=!0,this.m_display.visible=!0,this.m_icon.visible=!0,this.m_display_list.toPageByID(e)}onNotChoose(){this.click_bg.visible=!1,this.m_display.visible=!1,this.m_icon.visible=!1}clickChoose(){this.m_BagView.chooseTitle(this.m_name),d.instance.dispatch(e.ResetIcon)}getName(){return this.m_name}}class se extends Q{constructor(){super(),this.title_list=new Array,this.titie_name_list=["people","club","ball"]}onAwake(){this.btn_home=this.owner.getChildByName("btn_home"),this.btn_getSkin=this.owner.getChildByName("btn_getSkin"),this.txt_getSkinNum=this.btn_getSkin.getChildByName("num");for(let e=0;e<this.titie_name_list.length;e++){let t=this.owner.getChildByName("title_"+this.titie_name_list[e]).getComponent(ie);this.title_list.push(t)}}onStart(){let t=this;this._data?(this.chooseTitle(this._data.type,this._data.id),Laya.timer.once(100,t,()=>{d.instance.dispatch(e.GetNewSkin,t._data.type+t._data.id)})):this.chooseTitle(),this.setGetSkinBtn()}addEvent(){this.btn_home.on(Laya.Event.CLICK,this,this.clickBack),this.btn_getSkin.on(Laya.Event.CLICK,this,this.clickGetSkin)}clickBack(){N.Instance().savePlayerSet(),K.instance.openView(r.MenuView),K.instance.closeView(r.BagView)}clickGetSkin(){m.subMoney(m.getNeedCoin()),m.setNeedCoin();let t="",a=0;do{let e=Math.floor(Math.random()*E.getInstance().getPropTypeNum()),i=E.getInstance().getPropBase(e).amount;t=E.getInstance().getPropBase(e).type,a=Math.floor(Math.random()*i)}while(m.ownerProp(t+a));m.unlockProp(t+a),this.chooseTitle(t,a),Laya.timer.once(100,this,()=>{d.instance.dispatch(e.GetNewSkin,t+a)}),this.setGetSkinBtn()}setGetSkinBtn(){this.btn_getSkin.disabled=!(m.getNeedCoin()<=m.getMoney())||m.ownerPropAll(),this.txt_getSkinNum.text=m.getNeedCoin().toString()}chooseTitle(e="people",t=0){console.log(e),this.title_list.forEach(a=>{a.getName()==e?a.onChoose(t):a.onNotChoose()})}}class ne extends Laya.Script{constructor(){super(),this.amount=0,this.page_list=new Array}onAwake(){this.m_owner=this.owner;for(let e=0;e<this.amount;e++){let t=this.m_owner.getChildByName("icon"+e).getChildByName("page");t.visible=!1,this.page_list.push(t)}this.page_list[0].visible=!0}onStart(){d.instance.regEvemt(e.ChangePage,this,this.setPage),d.instance.regEvemt(e.ResetIcon,this,this.setPage)}onDestroy(){d.instance.removeEvent(e.ChangePage,this,this.setPage),d.instance.removeEvent(e.ResetIcon,this,this.setPage)}setPage(e=0){this.m_owner.visible&&(this.page_list.forEach(e=>{e.visible=!1}),this.page_list[e].visible=!0)}}class oe extends Laya.Script{constructor(){super()}onAwake(){this.amount=m.getMoney(),this.coin_text=this.owner.getChildByName("amount"),this.coin_text.text=this.amount.toString(),d.instance.regEvemt(e.Game_OnUserMoneyChange,this,this.updateCoin)}onDestroy(){d.instance.removeEvent(e.Game_OnUserMoneyChange,this,this.updateCoin)}updateCoin(){let e=(m.getMoney()-this.amount)/10;for(let t=0;t<10;t++)Laya.timer.once(20*t,this,()=>{this.amount+=e,this.coin_text.text=Math.floor(this.amount).toString()})}}class re{static Lerp(e,t,a){return e==t?t:e>t?(i=e-a)<=t?t:i:e<t?(i=e+a)>=t?t:i:void 0;var i}static lerpEulerAngle(e,t,a){return e=(e=e%360)>=0?e:360+e,t=(t=t%360)>=0?t:360+t,Math.abs(t-e)>180&&(e<t?t-=360:e>t&&(t+=360)),re.Lerp(e,t,a)}static getRotationByDir(e){var t=(e.x*re.poinDown.x+e.y*re.poinDown.y)/(e.distance(0,0)*re.poinDown.distance(0,0)),a=Math.acos(t)/(2*Math.PI)*360;return e.x<0&&(a=-a),a}static getRotationByDirOn3DSpace(e){var t=(e.x*re.poinUp.x+e.y*re.poinUp.y)/(e.distance(0,0)*re.poinUp.distance(0,0)),a=Math.acos(t)/(2*Math.PI)*360;return e.x<0&&(a+=2*(180-a)),a}static getDirByRotation(e){var t=(e-90)*Math.PI/180,a=Math.cos(t),i=Math.sin(t),s=new Laya.Point(a,i);return s.normalize(),s}static getDirDirAngle(e,t){var a=(e.x*t.x+e.y*t.y)/(e.distance(0,0)*t.distance(0,0));return Math.acos(a)/(2*Math.PI)*360}static getDirScalarLength(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static setSpOnParentCenter(e){if(null!=e.parent){var t=e.parent,a=0,i=(i=0)-e.width/2*e.scaleX+t.width/2;a=a-e.height/2*e.scaleY+t.height/2;e.x=i,e.y=a}}static getPointToLineDistance(e,t,a,i){var s=new Laya.Point(e-a.x,t-a.y),n=new Laya.Point(e-i.x,t-i.y),o=new Laya.Point(i.x-a.y,i.y-a.y),r=o.x*s.x+o.y*s.y;if(r<=0)return s.distance(0,0);if(o.x*n.x+o.y*n.y<=0)return n.distance(0,0);var l=s.distance(0,0),h=r/(l*o.distance(0,0)),c=Math.acos(h);return Math.sin(c)*l}static isIphoneX(){return!!Laya.Browser.onIPhone&&(2436==Laya.Browser.width&&1125==Laya.Browser.height||2436==Laya.Browser.height&&1125==Laya.Browser.width)}static isIphone(){return Laya.Browser.onIPhone}static getChild(e,t){for(var a=0;a<e.numChildren;++a){var i=e.getChildAt(a);if(i.name==t)return i;var s=re.getChild(i,t);if(s)return s}return null}}re.OriginStageWidth=1334,re.OriginStageHeight=750,re.grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],re.grayscaleFilter=new Laya.ColorFilter(re.grayscaleMat),re.poinDown=new Laya.Point(0,-1),re.poinUp=new Laya.Point(0,1),function(e){e.None="",e.ReportAdClickSuccess="广告导出成功",e.ReportAdClickFail="广告导出失败"}(h||(h={}));class le{static aldSendOpenId(e){Laya.Browser.onMiniGame?(Laya.Browser.window.wx.aldSendOpenid(e),console.log("ALD 上报 openid : ",e)):Laya.Browser.onQQMiniGame&&(Laya.Browser.window.qq.aldSendOpenid(e),console.log("ALD 上报 openid : ",e))}static aldSendEvent(e,t){var a=e;Laya.Browser.onMiniGame?Laya.Browser.window.wx.aldSendEvent(a,t):Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.aldSendEvent(a,t)}static aldSendReportAdClickSuccess(e){var t=h.ReportAdClickSuccess+" "+e.title+":"+String(e.appid);le.aldSendEvent(t,{"导出成功":e.title+":"+String(e.appid)})}static aldSendReportAdClickFail(e){var t=h.ReportAdClickFail+" "+e.title+":"+String(e.appid);le.aldSendEvent(t,{"导出失败":e.title+":"+String(e.appid)})}}class he{static refreshAd(e){he.getAdPosData(t=>{1==t.code?(console.log("获取分享广告数据成功"),he._adPosition=t.result,e&&e(!0)):(console.log("获取分享广告数据失败 ： "+t.msg),e&&e(!1))},t=>{console.log("获取分享广告数据失败"),e&&e(!1)})}static getADVs(e,t,a,i){if(he.isNeedShowAd()){a=null==a?he.UseRandomAdPos:a,i=null==i||a,a&&(e=he.getRandomADPosID());var s=he._adv[e];if(s){for(var n=s.length-1;n>=0;--n){var o=Math.floor(Math.random()*s.length),r=s[n],l=s[o];s[o]=r,s[n]=l}t(s)}else{var h=this;he.getADVData(e,a=>{if(1==a.code){if(he._adv[e]=a.result,(s=he._adv[e])&&re.isIphone())for(var n=0;n<s.length;++n)for(var o=s[n],r=0;r<he._iphoneIgnoreAppIds.length;++r)if(o.appid==he._iphoneIgnoreAppIds[r]){s.splice(n,1),--n;break}s&&i&&(s=h.sortDatas(s)),t&&t(s)}else t&&t(null)},e=>{t&&t(null)})}}else t(null)}static reportUserClick(e){he.reqUserClick(e,e=>{1==e.code?console.log("点击广告上报成功"):console.log("点击广告上报失败")},e=>{console.log("点击广告上报失败")})}static getRandomADPosID(){return he.AdLocationids[Math.floor(Math.random()*he.AdLocationids.length)]}static request(e){e.url.indexOf("https://")>-1||e.url.indexOf("http://")>-1?e.url=e.url:e.url=he.mainUrl+e.url;var t=new Laya.HttpRequest;if(t.once(Laya.Event.COMPLETE,he,t=>{console.log(t,"http Success"),t=JSON.parse(t),e.onSuccess&&e.onSuccess(t),e.onSuccess=null,e=null}),t.once(Laya.Event.ERROR,he,t=>{console.log(t,"http fail"),e.onFail&&e.onFail(t),e.onFail=null,e=null}),"get"==e.meth){var a="";for(const t of Object.keys(e.data)){a+=t+"="+e.data[t]+"&"}e.url=e.url+"?"+a;var i=["versions",g.Versions];t.send(e.url,null,e.meth,null,i)}else{a="";for(const t of Object.keys(e.data)){a+=t+"="+e.data[t]+"&"}i=["Content-Type","application/x-www-form-urlencoded","versions",g.Versions];t.send(e.url,a,e.meth,null,i)}}static getAdPosData(e,t){var a=new p;a.url=he.getAdPostion,a.onSuccess=e,a.onFail=t,a.data.softid=g.AppID,a.meth="get",he.request(a)}static reqUserClick(e,t,a){var i=new p;i.url=he.userClick,i.onSuccess=t,i.onFail=a,i.data.softid=g.AppID,i.data.uid=m.openId,i.data.advid=e,he.request(i)}static getADVData(e,t,a){var i=new p;i.url=he.getAdv,i.onSuccess=t,i.onFail=a,i.data.softid=g.AppID,i.data.locationid=e,i.data.preview=0,he.request(i)}static RandomJump(t=1){if(console.log("随机跳转,rate："+t),t>1&&(t/=100),Math.random()<=t){var a=he.LoopAdLocationID,i=[he.LoopAdLocationID,he.InsertAdLocationID,he.BannerAdLocationID,he.AniAdLocationID];if(he.UseRandomAdPos)for(var s=0;s<he.AdLocationids.length;++s)i.push(he.AdLocationids[s]);a=i[Math.floor(Math.random()*i.length)];he.getADVs(a,function(t){if(t){let a=t[Math.floor(t.length*Math.random())];console.log("跳转游戏： "+a.title),y.navigateToMiniProgram(a.appid,a.url,e=>{console.log("跳转成功"),he.reportUserClick(a.appid),le.aldSendReportAdClickSuccess(a)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==t.errMsg&&(console.log("用户取消跳转"),le.aldSendReportAdClickFail(a))},e=>{console.log("跳转完成")})}},!0)}}static isNeedShowAd(){if(0==S.getInstance().getAppSwitchData().adSwitch)return!1;var e=S.getInstance().getAppSwitchData().mailiang,t=S.getInstance().getAppSwitchData().mailianglist,a=S.getInstance().getAppSwitchData().mailiangSceneList;if(1==e)if(Laya.Browser.onMiniGame){var i=y.getLaunchOptionsSync().query.chid;if(null!=i&&null!=t&&t.length>0)for(var s=0;s<t.length;++s)if(i==t[s])return!1;var n=y.getLaunchOptionsSync().scene;if(null!=n&&null!=a&&a.length>0)for(s=0;s<a.length;++s)if(n==a[s])return!1}else{if(Laya.Browser.onQGMiniGame)return!1;if(Laya.Browser.onQQBrowser)return!1}return!0}static sortDatas(e){if(null==e||0==e.length)return[];for(var t={},a=new Array,i=0;i<e.length;++i){var s=e[i];null==t[s.appid]?(t[s.appid]=new Array,t[s.appid].push(s),a.push(t[s.appid])):t[s.appid].push(s)}for(let e=0;e<a.length;e++)for(let t=e+1;t<a.length;t++)if(a[e].length<a[t].length){let i=a[t];a[t]=a[e],a[e]=i}var n=new Array;for(let e=0;e<a[0].length;e++){n[e]=new Array;for(let t=0;t<a.length;t++)a[t].length>e&&n[e].push(a[t][e])}var o=new Array;for(let e=0;e<n.length;e++)for(let t=0;t<n[e].length;t++)o.push(n[e][t]);return o}}he.mainUrl="https://swwww.mrkzx.cn",he.getAdPostion="/v1.1/api/getAdPosition.html",he.getAdv="/v1.1/api/getAdv.html",he.userClick="/v1.1/api/userclick.html",he.LoopAdLocationID=204,he.BannerAdLocationID=206,he.InsertAdLocationID=205,he.AniAdLocationID=207,he.UseRandomAdPos=!0,he.AdLocationids=[204,205],he._adPosition={},he._adv={},he._iphoneIgnoreAppIds=["wx2d2acce3c45f4ddf","wxeb93c1298ec7c62b","wx9540f9021d5f809d","wxe372a630ec9ebe44","wx887a573910b69793","wxd21a086ce755a4b7","wx8e142a9ae9318118"];class ce{static Login(e,t){Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.login({success:t=>{if(t.code){let a=t.code;e(a),console.log("登陆成功,获取到code : "+a)}}})}static onRewardedVideoAdLoad(){console.log("激励视频 广告加载完成")}static onRewardedVideoAdError(e){console.log("激励视频 广告加载失败"+e),ce._onRewardedVideoAdFailed&&ce._onRewardedVideoAdFailed()}static onRewardedVideoAdClose(e){e&&e.isEnded||null==e?(console.log("激励视频 已完整观看"),ce._onRewardedVideoAdClose&&ce._onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),ce._onRewardedVideoAdClose&&ce._onRewardedVideoAdClose(!1))}static regRewardedVideoAdEvent(e){e.onLoad(ce.onRewardedVideoAdLoad),e.onError(ce.onRewardedVideoAdError),e.onClose(ce.onRewardedVideoAdClose),ce._isRegRewardedVideoAdEvent=!0}static showRewardedVideoAd(e,t){if(Laya.Browser.onQQMiniGame){ce._onRewardedVideoAdClose=e,ce._onRewardedVideoAdFailed=t;var a=Laya.Browser.window.qq.createRewardedVideoAd({adUnitId:ce.adUnitId});ce._isRegRewardedVideoAdEvent||ce.regRewardedVideoAdEvent(a),a.load().then(()=>{var e=a.show();e.then(()=>console.log("激励视频 广告显示成功")),e.catch(e=>{a.load().then(()=>a.show()).catch(e=>{console.log("激励视频 广告显示失败"),t&&t()})})}).catch(e=>{console.log("激励视频 广告加载失败"),t&&t()})}else e(!0)}static navigateToMiniProgram(e,t,a,i,s){Laya.Browser.onQQMiniGame&&(console.log("跳转游戏： "+e),Laya.Browser.window.qq.navigateToMiniProgram({appId:e,path:t,extraData:{foo:"bar"},envVersion:"release",success(e){a&&a(e)},fail(e){i&&i(e)},complete(e){s&&s(e)}}))}static share(e,t,a){Laya.Browser.onQQMiniGame&&(ce._onShow=(()=>{Laya.Browser.window.qq.offShow(ce._onShow),ce._onShow=null;Date.now(),this._lastShareTime;e&&(Date.now()-this._lastShareTime>2e3?e(!0):e(!1))}),Laya.Browser.window.qq.onShow(ce._onShow),this._lastShareTime=Date.now(),Laya.Browser.window.qq.shareAppMessage({title:t,imageUrl:a}))}static showInterstitialAd(e,t){if(Laya.Browser.onQQMiniGame){var a=Laya.Browser.window.qq.createInterstitialAd({adUnitId:ce.InsAdUnitId});a.onLoad(()=>{console.log("插屏广告 加载完成"),a.show().catch(e=>{console.log("插屏广告 显示失败 ："+e),t&&t()})}),a.onError(e=>{console.log("插屏广告 加载失败"+e),t&&t()}),a.onClose(()=>{console.log("插屏广告 关闭"),e&&e()})}else e()}static LoadAppBoxAd(e,t){Laya.Browser.onQQMiniGame?(this.mAppboxAd=Laya.Browser.window.qq.createAppBox({adUnitId:ce.AppBoxId}),this.mAppboxAd.load().then(()=>{console.log("盒子广告 加载完成")}),this.mAppboxAd.onError(e=>{console.log("盒子广告 加载失败"+e),t&&t()}),this.mAppboxAd.onClose(()=>{console.log("盒子广告 关闭"),e&&e()})):e()}static showAppBoxAd(e){this.mAppboxAd?(console.log("显示盒子广告"),this.mAppboxAd.show().catch(t=>{console.log("盒子广告 显示失败 ："+t),e&&e()})):ce.LoadAppBoxAd(e=>{},e=>{})}static getLaunchOptionsSync(){if(Laya.Browser.onQQMiniGame){let e=Laya.Browser.window.qq.getLaunchOptionsSync();console.log("场景值 "+e.scene);let t=JSON.stringify(e.query);console.log("Query参数 "+t);let a=e.query.key;return console.log("Query参数：key "+a),console.log("ShareTicket "+e.shareTicket),console.log("ReferrerInfo.appId "+e.referrerInfo.appId),console.log("ReferrerInfo.extraData "+e.referrerInfo.extraData),e}return{scene:1001,query:"",shareTicket:"",appId:"",extraData:""}}static SetShareMenu(e,t,a,i,s){Laya.Browser.onQQMiniGame&&(console.log("小游戏设置转发按钮"),Laya.Browser.window.qq.showShareMenu({withShareTicket:!1,success:a,fail:i,complete:s}),Laya.Browser.window.qq.onShareAppMessage(function(){return{title:e,imageUrl:t}}))}}ce.adUnitId="",ce.bannerAdUnitId="",ce.InsAdUnitId="",ce.AppBoxId="",ce._isRegRewardedVideoAdEvent=!1,ce._onRewardedVideoAdFailed=null,ce._onRewardedVideoAdClose=null,ce._onShow=null,ce._lastShareTime=0,ce.mAppboxAd=null;class de extends Laya.Script{constructor(){super(...arguments),this._data=null,this._originW=150,this._originH=150,this._fontSize=25}onAwake(){this._displaySp=this.owner.getChildByName("Display"),this._originW=this._displaySp.width,this._originH=this._displaySp.height,this._disText=this.owner.getChildByName("TitelText"),this._disText.text="",this._fontSize=this._disText.fontSize}onEnable(){this._displaySp.on(Laya.Event.CLICK,this,this.onSpClick)}onDisable(){this._displaySp.off(Laya.Event.CLICK,this,this.onSpClick)}setData(e){if(e){var t=this;this._displaySp.loadImage(e.logo,Laya.Handler.create(this,function(){t._displaySp.destroyed||(t._displaySp.width=t._originW,t._displaySp.height=t._originH)}));var a=String(e.title),i=a.length;i=Math.max(5,i);var s=Math.floor(5/i*this._fontSize);this._disText.fontSize=s,this._disText.text=a,this._data=e}}onSpClick(){var t=this._data;t&&(console.log("跳转游戏： "+t.title),Laya.Browser.onMiniGame?y.navigateToMiniProgram(t.appid,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid),le.aldSendReportAdClickSuccess(t)},a=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==a.errMsg&&(console.log("用户取消跳转"),le.aldSendReportAdClickFail(t))},e=>{console.log("跳转完成")}):Laya.Browser.onQGMiniGame?v.navigateToMiniProgram(t.appid,t.title,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail)},e=>{console.log("跳转完成")}):Laya.Browser.onQQMiniGame&&ce.navigateToMiniProgram(t.appid,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail)},e=>{console.log("跳转完成")}))}}class me extends Laya.Script{constructor(){super(...arguments),this.AdPosID=he.InsertAdLocationID,this._scrollForward=!0}onAwake(){this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._list.vScrollBarSkin=""}onEnable(){var e=this;he.getADVs(this.AdPosID,t=>{if(null!=t&&t.sort(function(){return Math.random()-.5}),e.owner&&!e.owner.destroyed)if(t&&t.length>0&&t.length<50){for(var a=[],i=0,s=0;s<50;++s)i>=t.length&&(i=0),a.push(t[i]),++i;this._list.array=a}else this._list.array=t})}onDisable(){}onUpdate(){this._scrollForward?(this._list.scrollBar.value+=100*Laya.timer.delta/1e3,this._list.scrollBar.value>=this._list.scrollBar.max&&(this._scrollForward=!1)):(this._list.scrollBar.value-=100*Laya.timer.delta/1e3,this._list.scrollBar.value<=0&&(this._scrollForward=!0))}onListRender(e,t){var a=this._list.array[t];e.getComponent(de).setData(a)}RefreshAD(){this._list.scrollBar.value+=100*Math.random()}}class _e extends Q{constructor(){super()}onAwake(){this.btn_close=this.owner.getChildByName("btn_close")}addEvent(){this.btn_close.on(Laya.Event.CLICK,this,this.clickClose)}clickClose(){K.instance.closeView(r.EnterGamePop)}}class we extends Laya.Script{constructor(){super()}onAwake(){this.m_owner=this.owner,this.m_camera=x.Instance().GetCamera(),this.m_pic=this.m_owner.getChildByName("pic")}onStart(){let e=new Laya.Sprite;e.graphics.drawCircle(this.m_pic.width/2,this.m_pic.height/2,30,"#ff0000"),e.pos(0,0),this.m_pic.mask=e}setPic(e){this.m_pic.skin=e}show(e){let t=new Laya.Vector4(0,0,0);this.m_camera.viewport.project(e,this.m_camera.projectionViewMatrix,t);let a=t.x/Laya.stage.clientScaleX-Laya.stage.width/750*15,i=t.y/Laya.stage.clientScaleY-Laya.stage.height/1334*350;this.m_owner.pos(a,i),this.m_owner.visible=!0}hide(){this.m_owner.visible=!1}}class ge extends Q{constructor(){super(),this.ball_amount=0,this.owner_key=0,this.show_key_dis=150,this.key_list=new Array,this.power_timer=0,this.max_power_timer=400,this.m_current_stage_id=0,this.is_award=!1,this.bar_change=.02,this.is_beat=!1,this.is_rank=!1,this.head_pic_show_timer=1e3,this.could_show_right_bar=!1}onAwake(){this.ball_num=this.owner.getChildByName("ballNum"),this.txt_ball_num=this.ball_num.getChildByName("num"),this.guide=this.owner.getChildByName("guide"),this.award_Level_Ball=this.owner.getChildByName("award_Level_Ball"),this.show_key=this.owner.getChildByName("addkey"),this.power=this.owner.getChildByName("power"),this.power_bar=this.power.getChildByName("bar"),this.power_right_bar=this.power.getChildByName("right_bar"),this.btn_close=this.owner.getChildByName("btn_close"),this.btn_getRightBar=this.owner.getChildByName("btn_getRightBar"),this.clickArea=this.owner.getChildByName("clickArea"),this.bottomLoopAD=this.owner.getChildByName("LoopAD"),this.key=this.owner.getChildByName("key");for(let e=0;e<9;e++){let t=this.key.getChildByName("key"+e).getChildByName("key");this.key_list.push(t),t.alpha=0}this.rank=this.owner.getChildByName("rank"),this.play_head_pic=this.owner.getChildByName("play_head_pic").getComponent(we),this.ai_head_pic=this.owner.getChildByName("ai_head_pic").getComponent(we),this.max_power_timer=C.max_power_timer,this.rank.visible=!1,this.award_Level_Ball.visible=!1,this.guide.visible=!1,this.key.visible=!1,this.show_key.alpha=0,this.m_camera=x.Instance().GetCamera(),Z.Instance().getFirst()&&(this.guide.visible=!0),this.is_award=Z.Instance().getIsAwardGame(),this.m_current_stage_id=N.Instance().getCurrentStageID(),this.m_level=this.owner.getChildByName("level"),this.m_level.value=(m.getLeveNum()+1).toString(),this.m_level.visible=!Z.Instance().getIsAwardGame(),this.is_rank=Z.Instance().getIsRank()}onDestroy(){super.onDestroy(),this.is_award&&(8==this.owner_key&&(this.owner_key=9),Z.Instance().setOnerKeyNum(this.owner_key))}addEvent(){d.instance.regEvemt(e.SubBall,this,this.subBall),d.instance.regEvemt(e.HideGuide,this,this.hideGuide),d.instance.regEvemt(e.PlayerUpdatePos,this,this.playerUpdatePos),d.instance.regEvemt(e.ChangeGamingPic,this,this.changeHeadPic),this.btn_close.on(Laya.Event.CLICK,this,this.clickClose),this.btn_getRightBar.on(Laya.Event.CLICK,this,this.clickGetRightBar),this.clickArea.on(Laya.Event.MOUSE_DOWN,this,this.downClickArea),this.clickArea.on(Laya.Event.MOUSE_UP,this,this.upClickArea)}removeEvent(){d.instance.removeEvent(e.ChangeGamingPic,this,this.changeHeadPic),d.instance.removeEvent(e.SubBall,this,this.subBall),d.instance.removeEvent(e.HideGuide,this,this.hideGuide),d.instance.removeEvent(e.PlayerUpdatePos,this,this.playerUpdatePos),this.clickArea.off(Laya.Event.MOUSE_DOWN,this,this.downClickArea),this.clickArea.off(Laya.Event.MOUSE_UP,this,this.upClickArea)}onStart(){Z.Instance().getHighView()&&(this.btn_close.top=147),this.ball_amount=Z.Instance().getGameBall(),this.ball_amount>=100&&(this.txt_ball_num.visible=!1),this.txt_ball_num.text=this.ball_amount.toString(),this.show_key_startY=this.show_key.y,this.hideHeadPic(),this.is_award&&(this.ball_num.visible=!1,this.key.visible=!0,this.showAwardBall()),this.is_rank&&(this.ai_head_pic.setPic(this._data.aiPic),this.play_head_pic.setPic(this._data.playPic),this.ball_num.visible=!1,this.m_level.visible=!1,this.rank.visible=!0,Laya.timer.once(this.head_pic_show_timer,this,()=>{this.changeHeadPic()})),this.btn_getRightBar.visible=!1,this.setRightBar(),this.upPowerBarPos(),this.refreshPowerBar(),Laya.Browser.onMiniGame||Laya.Browser.onQGMiniGame&&this.onQGGame()}onUpdate(){if(this.power.visible&&this.is_beat){this.power_timer+=Laya.timer.delta;let e=Math.min(this.power_timer/this.max_power_timer,1);this.power_bar.scaleX=e}this.power_right_bar.visible&&(this.power_right_bar.alpha<=0?this.bar_change=.1:this.power_right_bar.alpha>=.9&&(this.bar_change-=.1),this.power_right_bar.alpha+=this.bar_change)}downClickArea(){N.Instance().storgePower()}upClickArea(){N.Instance().desorbPower()}onEnable(){super.onEnable(),d.instance.regEvemt(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.regEvemt(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onDisable(){super.onDisable(),d.instance.removeEvent(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.removeEvent(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onRewardVidewoFail(){}onRewardVidewoSuccess(e){this.btn_getRightBar.visible=!1,this.could_show_right_bar=!0,this.setRightBar()}clickGetRightBar(){let e=Laya.Handler.create(this,()=>{this.btn_getRightBar.visible=!1,this.could_show_right_bar=!0,this.setRightBar()});1==$.getInstance().openVideo&&(Laya.Browser.onAndroid||Laya.Browser.onIOS?I.CallNativeFunc("showRewardVideo"):Laya.Browser.onMiniGame?y.showRewardedVideoAd(t=>{t?e.method():console.log("获得精准击打视频未完整观看")},()=>{console.log("获得精准击打视频加载观看")}):Laya.Browser.onQGMiniGame&&v.showRewardedVideoAd(t=>{t?e.method():console.log("获得精准击打视频未完整观看")},()=>{console.log("获得精准击打视频加载观看")}))}clickClose(){K.instance.openView(r.MoreGameView,!0)}subBall(){if(this.ball_amount--,this.txt_ball_num.text=this.ball_amount.toString(),this.award_Level_Ball.visible){let e=this.award_Level_Ball.getChildByName("ball"+this.ball_amount);Laya.Tween.to(e,{alpha:0},300)}}showAwardBall(){for(let e=0;e<3;e++){this.award_Level_Ball.getChildByName("ball"+e).alpha=1}this.award_Level_Ball.visible=!0}playerUpdatePos(){this.m_current_stage_id++,this.is_award&&(Laya.Tween.to(this.key_list[this.owner_key],{alpha:1},600),this.owner_key++,Z.Instance().setOnerKeyNum(this.owner_key),this.ball_amount=Z.Instance().getGameBall(),this.showAwardBall()),this.is_rank&&(this.hideHeadPic(),Laya.timer.once(this.head_pic_show_timer,this,()=>{this.changeHeadPic()})),this.upPowerBarPos(),this.setRightBar()}hideGuide(){this.guide.visible&&(this.guide.visible=!1)}setRightBar(){if((m.getLeveNum()>=11&&this.m_current_stage_id>=1||this.is_rank)&&!this.could_show_right_bar)this.power_right_bar.visible=!1,this.is_rank||(this.btn_getRightBar.visible=!0);else{this.power_right_bar.visible=!0;let e=Math.sqrt(6.3*z.Instance().getRightDis(this.m_current_stage_id))/C.max_power_dis;this.power_right_bar.width=this.power_bar.width*e}}keyShow(){this.show_key.pos(this.show_key.x,this.show_key_startY),this.show_key.alpha=1,Laya.Tween.to(this.show_key,{y:this.show_key_startY-this.show_key_dis,alpha:0},800)}changeHeadPic(){this.play_head_pic.show(N.Instance().getPlayerPos()),N.Instance().getCurrentStageID()==T.Instance().getCurrentStageID()?this.ai_head_pic.show(T.Instance().getAIPos()):this.ai_head_pic.hide()}hideHeadPic(){this.play_head_pic.hide(),this.ai_head_pic.hide()}refreshPowerBar(){this.is_beat=!1,this.power_timer=0,this.power_bar.scaleX=0}upPowerBarPos(){}onKeyDown(e){97==e.keyCode?this.changeHeadPic():(e.keyCode=99)&&this.hideHeadPic()}onStageMouseDown(){this.is_beat=!0}onStageMouseUp(){this.refreshPowerBar()}onMiniGame(){}onQGGame(){this.bottomLoopAD.visible=!1,v.showBannaer()}}class pe extends Laya.Script{constructor(){super()}onAwake(){this.mIcon=this.owner}onStart(){B.WudianFlag&&(this.mIcon.alpha=0)}}class ue extends Laya.Script{constructor(){super()}onAwake(){this.m_owner=this.owner}onUpdate(){this.m_owner.visible&&(this.m_owner.rotation+=.5)}}class ye extends Laya.Script{constructor(){super(),this.could_click=!0}onAwake(){this.m_owner=this.owner,this.m_treasure=this.m_owner.getChildByName("treasure"),this.m_award=this.m_owner.getChildByName("award"),this.m_coin=this.m_award.getChildByName("coin"),this.m_num=this.m_coin.getChildByName("num"),this.m_prop=this.m_award.getChildByName("prop"),this.m_rewardIcon=this.m_owner.getChildByName("m_rewardIcon"),this.m_award.visible=!1,this.m_coin.visible=!1,this.m_num.visible=!1,this.m_prop.visible=!1,this.m_rewardIcon.visible=!1,d.instance.regEvemt(e.ShowrRewardIcon,this,this.showrRewardIcon)}onDestroy(){d.instance.removeEvent(e.ShowrRewardIcon,this,this.showrRewardIcon)}onUpdate(){this.m_treasure.visible&&!this.treasure_tween&&Math.random()<.0025&&this.treasureShow()}Init(e,t,a){t?this.m_prop.loadImage(t,Laya.Handler.create(this,()=>{a.method(),this.m_prop.visible=!0})):(this.m_coin.visible=!0,this.m_num.text=e.toString(),this.m_num.visible=!0)}treasureShow(){let e=this;this.treasure_tween=Laya.Tween.to(e.m_treasure,{rotation:15},150,Laya.Ease.quadOut,Laya.Handler.create(e,()=>{Laya.Tween.to(e.m_treasure,{rotation:-15},300,Laya.Ease.quadOut,Laya.Handler.create(e,()=>{Laya.Tween.to(e.m_treasure,{rotation:0},150,Laya.Ease.quadOut,Laya.Handler.create(e,()=>{this.treasure_tween=null}))}))}))}ClickBox(){this.m_view.clickAward(this)}setView(e){this.m_view=e}showBox(){this.treasure_tween&&this.treasure_tween.clear(),this.m_treasure.visible=!1,this.m_award.visible=!0,this.could_click&&(this.could_click=!1),this.m_rewardIcon.visible=!1}onMouseDown(){this.could_click&&this.ClickBox(),this.m_owner.scale(.92,.92)}onMouseUp(){this.m_owner.scale(1,1)}showrRewardIcon(){this.m_award.visible||(this.m_rewardIcon.visible=!0)}}class ve extends Q{constructor(){super(),this._array=[5,5,10,10,10,50,50,100,5,10],this.treasure_time=1,this.click_time=0,this.owner_key_num=0,this.openRewardType=0,this.current_award_coin=0}onAwake(){this.openRewardType=0,this.list_award=this.owner.getChildByName("list_award"),this.btn_back=this.owner.getChildByName("btn_back"),this.btn_getkey=this.owner.getChildByName("btn_getkey"),this.btn_rank=this.owner.getChildByName("btn_rank"),this.btn_start=this.owner.getChildByName("btn_start"),this.btn_lookSkin=this.owner.getChildByName("btn_lookSkin"),this.key=this.owner.getChildByName("key"),this.key_num=this.key.getChildByName("key_num"),this.best_award=this.owner.getChildByName("best_award").getChildByName("best_prop"),this.best_coin=this.owner.getChildByName("best_award").getChildByName("coin"),this.best_coin.visible=!1,this.m_bg=this.owner.getChildByName("bg"),this.m_bg.height=Laya.stage.height,this.m_bg.width=Laya.stage.height,this.list_award.array=this._array,this.list_award.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._array.sort(()=>.5-Math.random()),m.getLeveNum()>1&&(this.treasure_time+=2+Math.floor(7*Math.random())),m.ownerPropAll()?(this.treasure_time=10,this.best_coin.visible=!0):this.setBest(),console.log(Z.Instance().getOnerKeyNum()),this.updateKeyNum(Z.Instance().getOnerKeyNum())}onDestroy(){super.onDestroy(),this.btn_autho&&this.btn_autho.destroy()}onStart(){if(this.btn_lookSkin.visible=!1,this.key.pos(this.btn_getkey.x,this.btn_getkey.y-60),this.btn_getkey.visible=!1,m.getMoney()>=m.getNeedCoin()&&this.lookSkinBtnShow(),this.btn_rank.visible=m.getMoney()>=100,Laya.Browser.onMiniGame){let e=this;Laya.Browser.window.wx.getUserInfo({success:function(e){var t=e.userInfo,a=(t.nickName,t.avatarUrl);console.log("用户授权了",t),Z.Instance().saveUserAvatarUrl(a)},fail:function(t){console.log("用户没有授权"),e.noAuthor()}})}this.btn_start.visible=this._data==l.ClickGetPrize}addEvent(){this.btn_back.on(Laya.Event.CLICK,this,this.clickBack),this.btn_getkey.on(Laya.Event.CLICK,this,this.clickGetCoin),this.btn_lookSkin.on(Laya.Event.CLICK,this,this.clickLookSkin),this.btn_rank.on(Laya.Event.CLICK,this,this.clickRank),this.btn_start.on(Laya.Event.CLICK,this,this.clickStart)}updateKeyNum(t=0){this.owner_key_num+=t,this.key_num.text=this.owner_key_num.toString(),this.owner_key_num<=0&&(this.key.visible=!1,d.instance.dispatch(e.ShowrRewardIcon))}setBest(){do{let e=Math.floor(Math.random()*E.getInstance().getPropTypeNum()),t=E.getInstance().getPropBase(e).amount;this.best_award_type=E.getInstance().getPropBase(e).type,this.best_award_id=Math.floor(Math.random()*t),this.best_award_url="subRes/propsLogo/"+this.best_award_type+this.best_award_id+".png"}while(m.ownerProp(this.best_award_type+this.best_award_id));this.best_award.skin=this.best_award_url}lookSkinBtnShow(){this.btn_lookSkin.pos(Laya.stage.width,this.btn_lookSkin.y),this.btn_lookSkin.visible=!0,Laya.Tween.to(this.btn_lookSkin,{x:Laya.stage.width-this.btn_lookSkin.width},300)}onEnable(){super.onEnable(),d.instance.regEvemt(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.regEvemt(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onDisable(){super.onDisable(),d.instance.removeEvent(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.removeEvent(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess),this.openRewardType=0}onRewardVidewoFail(){1==this.openRewardType||2==this.openRewardType||this.openRewardType,this.openRewardType=0}onRewardVidewoSuccess(e){if(1==this.openRewardType){this.click_time++;var t=this.param;let e=this._array[this.click_time];this.click_time==this.treasure_time?(console.log("中奖了"),t.Init(e,this.best_award_url,Laya.Handler.create(this,()=>{this.lookSkinBtnShow(),m.unlockProp(this.best_award_type+this.best_award_id),M.instance.playSound(a.Unlock)}))):(console.log("没有中奖"),this._data!=l.ClickGetPrize&&(this.btn_getkey.visible=!0),t.Init(e),m.addMoney(e),M.instance.playSound(a.GetCoin),this.current_award_coin+=e),t.showBox()}else 2==this.openRewardType?this.updateKeyNum(3):3==this.openRewardType&&(m.addMoney(3*this.current_award_coin),M.instance.playSound(a.GetCoin),this.btn_getkey.visible=!1);this.openRewardType=0}clickBack(){K.instance.openView(r.OverDeriveView),K.instance.closeView(r.LotteryView)}clickAward(e){let t=Laya.Handler.create(this,()=>{let t=this._array[this.click_time];this.click_time==this.treasure_time?(console.log("中奖了"),e.Init(t,this.best_award_url,Laya.Handler.create(this,()=>{this.lookSkinBtnShow(),m.unlockProp(this.best_award_type+this.best_award_id),M.instance.playSound(a.Unlock)}))):(console.log("没有中奖"),this._data!=l.ClickGetPrize&&(this.btn_getkey.visible=!0),e.Init(t),m.addMoney(t),M.instance.playSound(a.GetCoin),this.current_award_coin+=t),e.showBox()});if(this.owner_key_num<=0){if(console.log("钥匙不够,看视频"),1!=$.getInstance().openVideo)return;this.openRewardType=1,this.param=e,Laya.Browser.onAndroid||Laya.Browser.onIOS?I.CallNativeFunc("showRewardVideo"):y.showRewardedVideoAd(e=>{e?(this.click_time++,t.method()):console.log("点开宝箱视频未完整看完")},()=>{console.log("点开宝箱视频加载失败")})}else this.updateKeyNum(-1),this.click_time++,this.click_time>=9&&(this.key.visible=!1),t.method()}clickRank(){Laya.Tween.clearAll(this.btn_lookSkin),K.instance.openView(r.RankView),K.instance.closeView(r.LotteryView)}clickStart(){Z.Instance().refreshStage(),K.instance.closeView(r.LotteryView),M.instance.playSound(a.Button)}clickGetKey(){if(1!=$.getInstance().openVideo)return;let e=this;this.openRewardType=2,Laya.Browser.onAndroid||Laya.Browser.onIOS?I.CallNativeFunc("showRewardVideo"):y.showRewardedVideoAd(t=>{t?e.updateKeyNum(3):console.log("获取钥匙视频未完整观看")},()=>{console.log("获取钥匙视频加载失败")})}clickGetCoin(){if(1!=$.getInstance().openVideo)return;let e=this;this.openRewardType=3,Laya.Browser.onAndroid||Laya.Browser.onIOS?I.CallNativeFunc("showRewardVideo"):y.showRewardedVideoAd(t=>{t?(m.addMoney(3*e.current_award_coin),M.instance.playSound(a.GetCoin),this.btn_getkey.visible=!1):console.log("金币翻倍视频未完整观看")},()=>{console.log("金币翻倍视频加载失败")})}clickLookSkin(){Laya.Tween.clearAll(this.btn_lookSkin);let e={type:this.best_award_type,id:this.best_award_id};this.click_time>=this.treasure_time?K.instance.openView(r.BagView,e):K.instance.openView(r.BagView),x.Instance().SetState(s.Bag),K.instance.closeView(r.LotteryView)}onListRender(e,t){e.getComponent(ye).setView(this)}noAuthor(){var e=Laya.Browser.window.wx.getSystemInfoSync(),t=e.screenWidth,a=e.screenHeight,i=this.btn_rank.y/Laya.stage.height*a,s=this.btn_rank.width/Laya.stage.width*t,n=this.btn_rank.height/Laya.stage.width*t;this.btn_autho=Laya.Browser.window.wx.createUserInfoButton({type:"image",image:"",style:{left:0,top:i,width:s,height:n}}),this.btn_autho.onTap(e=>{var t=e.userInfo,a=(t.nickName,t.avatarUrl);console.log("用户授权了",t),Z.Instance().saveUserAvatarUrl(a),this.clickRank()})}}class Le extends Laya.Script{constructor(){super()}onAwake(){this.m_owner=this.owner,this.m_shan=this.owner.getChildByName("shan"),this.m_shan.pos(this.right_x,this.m_shan.y);let e=new Laya.Sprite;e.graphics.drawRect(this.m_owner.x,this.m_owner.y,this.m_owner.width,this.m_owner.height,"#ff0000"),e.pos(-this.m_owner.x,-this.m_owner.y),this.m_owner.mask=e,this.shanShow()}shanShow(){Laya.Tween.to(this.m_shan,{x:this.left_x},400,null,Laya.Handler.create(this,()=>{this.m_shan.pos(this.right_x,this.m_shan.y),Laya.timer.once(1e3,this,()=>{this.shanShow()})}))}}class be extends Laya.Script{constructor(){super(),this.press=!1,this.minScale=.85,this.breath=!1,this.breathOff=.1,this.breathTime=1,this.startScale=new Laya.Vector2(0,0)}onAwake(){this.mButton=this.owner,this.mButton.pivot(this.mButton.width/2,this.mButton.height/2),this.startScale.x=this.mButton.scaleX,this.startScale.y=this.mButton.scaleY,this.breathTime=1e3*this.breathTime}onStart(){this.mButton.visible&&this.breath&&this.Breath()}onDestroy(){Laya.Tween.clearAll(this.mButton)}Breath(){let e=new Laya.Vector2(this.startScale.x-this.breathOff,this.startScale.y-this.breathOff),t=new Laya.Vector2(this.startScale.x+this.breathOff,this.startScale.y+this.breathOff);Laya.Tween.to(this.mButton,{scaleX:e.x,scaleY:e.y},this.breathTime,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.mButton,{scaleX:t.x,scaleY:t.y},this.breathTime,null,Laya.Handler.create(this,()=>{this.Breath()}))}))}onMouseDown(){this.press&&this.mButton.scale(this.minScale,this.minScale)}onMouseUp(){this.press&&this.mButton.scale(1,1)}onMouseOut(){this.press&&this.mButton.scale(1,1)}}class Se extends Laya.Script{constructor(){super(...arguments),this.AdPosID=he.LoopAdLocationID,this._scrollForward=!0}onAwake(){this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._list.hScrollBarSkin=""}onEnable(){var e=this;he.getADVs(this.AdPosID,t=>{e.owner&&!e.owner.destroyed&&(t&&t.length>0&&t.length<50?this._list.array=he.sortDatas(t):this._list.array=t)})}onDisable(){}onUpdate(){this._scrollForward?(this._list.scrollBar.value+=100*Laya.timer.delta/800,this._list.scrollBar.value>=this._list.scrollBar.max&&(this._scrollForward=!1)):(this._list.scrollBar.value-=100*Laya.timer.delta/800,this._list.scrollBar.value<=0&&(this._scrollForward=!0))}onListRender(e,t){var a=this._list.array[t];e.getComponent(de).setData(a)}}class Be extends Se{constructor(){super()}onAwake(){this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._list.vScrollBarSkin=""}}class Ce extends Q{constructor(){super()}onAwake(){this.btn_close=this.owner.getChildByName("btn_close"),this.btn_continue=this.owner.getChildByName("btn_continue"),this.btn_continue.visible=!1,Laya.timer.once(2e3,this,()=>{this.btn_continue.visible=!0}),Laya.Browser.onQGMiniGame&&this.clickContinue(),d.instance.dispatch(e.MoreGameView)}onDestroy(){d.instance.dispatch(e.OutMoreGameView)}onStart(){super.onStart(),Z.Instance().getHighView()&&(this.btn_close.top=147),he.RandomJump(S.getInstance().getAppSwitchData().morefunpop)}addEvent(){this.btn_continue.on(Laya.Event.CLICK,this,this.clickContinue),this.btn_close.on(Laya.Event.CLICK,this,this.clickClose)}clickContinue(){this._data?this._data.onlyShow?K.instance.closeView(r.MoreGame):(this._data.win?K.instance.openView(r.OverView,l.WinGame):K.instance.openView(r.OverView,l.LoseGame),K.instance.closeView(r.MoreGame)):(K.instance.openView(r.MenuView),K.instance.closeView(r.MoreGame))}clickClose(){K.instance.closeView(r.MoreGame),K.instance.openView(r.MoreGameView)}}class ke extends de{constructor(){super()}onAwake(){super.onAwake(),this.star=this.owner.getChildByName("star"),this.star.visible=Math.random()>.8;let e=new Laya.Sprite;e.graphics.drawCircle(8,8,60,"#ff0000"),e.pos(this._displaySp.width/2,this._displaySp.height/2),this._displaySp.mask=e}onEnable(){this.owner.on(Laya.Event.CLICK,this,this.onSpClick)}setData(e){if(e){var t=this;this._displaySp.loadImage(e.logo,Laya.Handler.create(this,function(){t._displaySp.destroyed||(t._displaySp.width=t._originW,t._displaySp.height=t._originH)}));var a=String(e.title);a.length;this._disText.fontSize=this._fontSize,this._disText.text=a,this._data=e}}onDisable(){this.owner.off(Laya.Event.CLICK,this,this.onSpClick)}}class fe extends Se{constructor(){super()}onAwake(){this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._list.vScrollBarSkin=""}onUpdate(){}onListRender(e,t){var a=this._list.array[t];e.getComponent(ke).setData(a)}}class Ie extends Q{constructor(){super()}onAwake(){this.btn_back=this.owner.getChildByName("btn_back")}addEvent(){this.btn_back.on(Laya.Event.CLICK,this,this.clickBack)}clickBack(){this._data?K.instance.closeView(r.MoreGameView):(K.instance.openView(r.MenuView),K.instance.closeView(r.MoreGameView))}}class Ae extends Q{constructor(){super(...arguments),this._nativeAd=null,this._curAdItem=null}onAwake(){this._centerZone=this.owner.getChildByName("CenterZone"),this._display=this._centerZone.getChildByName("Display"),this._okBtn=this._centerZone.getChildByName("OkBtn"),this._closeBtn=this._centerZone.getChildByName("CloseBtn")}onEnable(){super.onEnable(),this.loadAd()}addEvent(){super.addEvent(),this._okBtn.on(Laya.Event.CLICK,this,this.onOkBtn),this._closeBtn.on(Laya.Event.CLICK,this,this.onCloseBtn),this._display.on(Laya.Event.CLICK,this,this.onDisplayClick)}removeEvent(){super.removeEvent(),this._okBtn.off(Laya.Event.CLICK,this,this.onOkBtn),this._closeBtn.off(Laya.Event.CLICK,this,this.onCloseBtn),this._display.off(Laya.Event.CLICK,this,this.onDisplayClick)}loadAd(){var e=this;Laya.Browser.onQGMiniGame&&(this._nativeAd&&(this._nativeAd.destroy(),this._nativeAd=null),this._curAdItem=null,this._nativeAd=qg.createNativeAd({posId:v.NativeAdId}),this._nativeAd.load(),this._nativeAd.onLoad(t=>{console.log("原生广告加载成功：",t);for(var a=t.adList,i=0;i<a.length;++i){var s=a[i];for(var n in console.log("原生广告数据：",i),s)console.log(n,s[n])}if(e._curAdItem=a[Math.floor(Math.random()*a.length)],null!=e._curAdItem){for(i=0;i<e._curAdItem.imgUrlList.length;++i)console.log("imgUrlList : ",i+" ",e._curAdItem.imgUrlList[i]);var o=e._curAdItem.imgUrlList[Math.floor(Math.random()*e._curAdItem.imgUrlList.length)];e._display.loadImage(o),e._nativeAd.reportAdShow({adId:e._curAdItem.adId}),console.log("加载图片",o),console.log("点击上报！！！")}e._centerZone.visible=!0}),this._nativeAd.onError(t=>{for(var a in console.log("原生广告加载失败：",t),t)console.log(a,t[a]);e.closeView()}),this._centerZone.visible=!1)}onCloseBtn(){this.closeView()}onOkBtn(){100*Math.random()<=S.getInstance().getAppSwitchData().yuansheng&&(console.log("进入变态广告"),this.onDisplayClick()),this.closeView()}onDisplayClick(){null!=this._nativeAd&&null!=this._curAdItem&&(console.log("点击上报！！！"),this._nativeAd.reportAdClick({adId:this._curAdItem.adId}))}onDestroy(){super.onDestroy(),Laya.Browser.onQGMiniGame&&(this._nativeAd&&this._nativeAd.destroy(),this._nativeAd=null,this._curAdItem=null)}}class Ve extends Q{constructor(){super(),this.share_url="subRes/sdlyg_share.png",this.share_title="来一杆！",this.moveDis=250,this.wudianBannerShow=!1}onAwake(){this.btn_next=this.owner.getChildByName("btn_next"),this.btn_home=this.owner.getChildByName("btn_home"),this.btn_share=this.owner.getChildByName("btn_share"),this.btn_share.visible=!1,x.Instance().SetState(s.OverDerive)}onStart(){B.WudianFlag?(this.hideBanner(),this.addWuDianEvent(),this.btnMoveStart()):(this.showBanner(),this.addBtnEvent())}addEvent(){d.instance.regEvemt(e.MoreGameView,this,this.hideBanner),d.instance.regEvemt(e.OutMoreGameView,this,this.backMoreGame)}removeEvent(){d.instance.removeEvent(e.MoreGameView,this,this.hideBanner),d.instance.removeEvent(e.OutMoreGameView,this,this.backMoreGame),this.removeBtnEvent()}addBtnEvent(){this.btn_next.on(Laya.Event.CLICK,this,this.clickNext),this.btn_home.on(Laya.Event.CLICK,this,this.clickHome),this.btn_share.on(Laya.Event.CLICK,this,this.clickShare)}removeBtnEvent(){this.btn_next.off(Laya.Event.CLICK,this,this.clickNext),this.btn_home.off(Laya.Event.CLICK,this,this.clickHome),this.btn_share.off(Laya.Event.CLICK,this,this.clickShare)}addWuDianEvent(){this.btn_next.on(Laya.Event.CLICK,this,this.clickShowWudianBanner),this.btn_home.on(Laya.Event.CLICK,this,this.clickShowWudianBanner),this.btn_share.on(Laya.Event.CLICK,this,this.clickShowWudianBanner)}removeWuDianEvent(){this.btn_next.off(Laya.Event.CLICK,this,this.clickShowWudianBanner),this.btn_home.off(Laya.Event.CLICK,this,this.clickShowWudianBanner),this.btn_share.off(Laya.Event.CLICK,this,this.clickShowWudianBanner)}btnMoveStart(){this.btn_home.bottom=this.btn_home.bottom-this.moveDis,this.btn_next.bottom=this.btn_next.bottom-this.moveDis,this.btn_share.bottom=this.btn_share.bottom-this.moveDis}btnMoveEnd(){this.btn_home.bottom=this.btn_home.bottom+this.moveDis,this.btn_next.bottom=this.btn_next.bottom+this.moveDis,this.btn_share.bottom=this.btn_share.bottom+this.moveDis}onClose(){super.onClose(),this.removeBtnEvent(),this.hideBanner()}clickNext(){Z.Instance().getIsRank()?(T.Instance().hide(),x.Instance().SetState(s.Menu),K.instance.openView(r.RankView),K.instance.closeView(r.OverDeriveView)):(Z.Instance().normalStart(),K.instance.closeView(r.OverDeriveView))}clickHome(){K.instance.openView(r.MenuView),K.instance.closeView(r.OverDeriveView)}clickShare(){y.share(()=>{console.log("分享了游戏")},this.share_title,this.share_url)}clickShowWudianBanner(){this.removeWuDianEvent(),Laya.timer.once(1e3*S.getInstance().getAppSwitchData().bannerMoveTimer,this,()=>{this.showBanner(),this.wudianBannerShow=!0}),Laya.timer.once(1e3*S.getInstance().getAppSwitchData().btnMoveTimer,this,()=>{this.addBtnEvent(),this.btnMoveEnd()})}backMoreGame(){this.wudianBannerShow&&this.showBanner()}showBanner(){j.show()}hideBanner(){j.hide()}}class Me extends Laya.Script{constructor(){super()}onAwake(){this.m_pic=this.owner.getChildByName("pic"),this.m_level=this.owner.getChildByName("board").getChildByName("level")}set(e,t){switch(Math.floor(e/5)){case 0:this.m_level.text="Bronze";break;case 1:this.m_level.text="Silver";break;case 2:this.m_level.text="Gold";break;case 3:this.m_level.text="Platinum";break;case 4:this.m_level.text="Diamond";break;case 5:this.m_level.text="King"}t&&(this.m_pic.skin=t)}}class Re extends Q{constructor(){super(),this.periodList=new Array,this.periodAmount=6,this.current_period=0}onAwake(){this.bg=this.owner.getChildByName("BG"),this.bg.height=Laya.stage.height,this.match=this.owner.getChildByName("match"),this.btn_match=this.owner.getChildByName("btn_match"),this.btn_home=this.owner.getChildByName("btn_home"),this.vs=this.owner.getChildByName("vs"),this.my_head_pic=this.owner.getChildByName("my_head_pic").getComponent(Me),this.ai_head_pic=this.owner.getChildByName("ai_head_pic").getComponent(Me)}onStart(){this.match.visible=!1;let e=this.match.getChildByName("periods");for(let t=0;t<this.periodAmount;t++){let a=e.getChildByName("period"+t);a.visible=!1,this.periodList.push(a)}let t=this.btn_match.getChildByName("coin"),a=this.btn_match.getChildByName("record");m.getMoney()>=100?(t.visible=!0,a.visible=!1):(t.visible=!1,a.visible=!0),this.my_head_pic.set(m.getRankLevel(),Z.Instance().getUserAvatarUrl()),x.Instance().SetState(s.Menu)}addEvent(){this.btn_match.on(Laya.Event.CLICK,this,this.clickMatch),this.btn_home.on(Laya.Event.CLICK,this,this.clickHome)}clickHome(){Laya.timer.clearAll(this),K.instance.openView(r.MenuView),K.instance.closeView(r.RankView)}onEnable(){super.onEnable(),d.instance.regEvemt(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.regEvemt(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onDisable(){super.onDisable(),d.instance.removeEvent(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.removeEvent(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onRewardVidewoFail(){}onRewardVidewoSuccess(){this.vs.visible=!1,this.btn_match.visible=!1,this.showMatch(),Laya.timer.once(1e3*Math.random()+1500,this,this.hideMatch)}clickMatch(){let e=Laya.Handler.create(this,()=>{this.vs.visible=!1,this.btn_match.visible=!1,this.showMatch(),Laya.timer.once(1e3*Math.random()+1500,this,this.hideMatch)});m.getMoney()>=100?(m.addMoney(-100),e.method()):Laya.Browser.onAndroid||Laya.Browser.onIOS?I.CallNativeFunc("showRewardVideo"):y.showRewardedVideoAd(t=>{t?e.method():console.log("排位按钮视频未完整观看")},()=>{console.log("排位按钮视频加载失败")})}showMatch(){this.match.visible=!0,Laya.timer.loop(200,this,this.showPeriod)}hideMatch(){Laya.timer.clearAll(this),this.match.visible=!1,this.vs.visible=!0;let e=Math.max(0,m.getRankLevel()+-3+Math.floor(6*Math.random())),t="https://oss.renyouwangluo.cn/sdlyg/wxpic/"+Math.floor(100*Math.random())+".jpg";this.ai_head_pic.set(e,t),Laya.timer.once(1500,this,()=>{Z.Instance().rankStart(t),K.instance.closeView(r.RankView)})}showPeriod(){if(this.current_period>=this.periodAmount){for(let e=0;e<this.periodAmount;e++)this.periodList[e].visible=!1;this.current_period=0}this.periodList[this.current_period].visible=!0,this.current_period++}}class De extends Q{constructor(){super(),this.moveDis=250,this.wudianBannerShow=!1}onAwake(){this.btn_getBall=this.owner.getChildByName("btn_getBall"),this.btn_giveUp=this.owner.getChildByName("btn_giveUp")}onStart(){this.btn_giveUp.visible=!1,this.btn_giveUp.visible=!0,B.WudianFlag?(this.hideBanner(),this.addWuDianEvent(),this.btnMoveStart()):(this.showBanner(),this.addBtnEvent())}onClose(){super.onClose(),this.hideBanner()}addEvent(){d.instance.regEvemt(e.MoreGameView,this,this.hideBanner),d.instance.regEvemt(e.OutMoreGameView,this,this.backMoreGame)}removeEvent(){d.instance.removeEvent(e.MoreGameView,this,this.hideBanner),d.instance.removeEvent(e.OutMoreGameView,this,this.backMoreGame),this.removeBtnEvent}onEnable(){super.onEnable(),d.instance.regEvemt(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.regEvemt(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onDisable(){super.onDisable(),d.instance.removeEvent(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.removeEvent(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onRewardVidewoFail(){}onRewardVidewoSuccess(){Z.Instance().gameRelive(),K.instance.closeView(r.ReliveView)}clickGetBall(){if(Z.is_first_add_ball)Z.is_first_add_ball=!1,Z.Instance().gameRelive(),K.instance.closeView(r.ReliveView);else{if(1!=$.getInstance().openVideo)return;Laya.Browser.onAndroid||Laya.Browser.onIOS?I.CallNativeFunc("showRewardVideo"):y.showRewardedVideoAd(e=>{e?(Z.Instance().gameRelive(),K.instance.closeView(r.ReliveView)):console.log("加球视频未完整观看")},()=>{console.log("加球视频加载失败")})}}clickGiveUp(){Z.Instance().gameOver(!1),K.instance.closeView(r.ReliveView)}addBtnEvent(){this.btn_getBall.on(Laya.Event.CLICK,this,this.clickGetBall),this.btn_giveUp.on(Laya.Event.CLICK,this,this.clickGiveUp)}removeBtnEvent(){this.btn_getBall.off(Laya.Event.CLICK,this,this.clickGetBall),this.btn_giveUp.off(Laya.Event.CLICK,this,this.clickGiveUp)}addWuDianEvent(){this.btn_getBall.on(Laya.Event.CLICK,this,this.clickGetBall),this.btn_giveUp.on(Laya.Event.CLICK,this,this.clickGiveUp)}removeWuDianEvent(){this.btn_getBall.off(Laya.Event.CLICK,this,this.clickGetBall),this.btn_giveUp.off(Laya.Event.CLICK,this,this.clickGiveUp)}btnMoveStart(){this.btn_getBall.bottom=this.btn_getBall.bottom-this.moveDis,this.btn_giveUp.bottom=this.btn_giveUp.bottom-this.moveDis}btnMoveEnd(){this.btn_getBall.bottom=this.btn_getBall.bottom+this.moveDis,this.btn_giveUp.bottom=this.btn_giveUp.bottom+this.moveDis}clickShowWudianBanner(){this.removeWuDianEvent(),Laya.timer.once(1e3*S.getInstance().getAppSwitchData().bannerMoveTimer,this,()=>{this.showBanner(),this.wudianBannerShow=!0}),Laya.timer.once(1e3*S.getInstance().getAppSwitchData().btnMoveTimer,this,()=>{this.addBtnEvent(),this.btnMoveEnd()})}backMoreGame(){this.wudianBannerShow&&this.showBanner()}showBanner(){j.show()}hideBanner(){j.hide()}}class Ge extends Laya.Script{constructor(){super(),this.move_dis=0}onAwake(){this.m_owner=this.owner,this.m_owner.width=this.tar_button.width,this.m_owner.height=this.tar_button.height,this.m_owner.pos(this.tar_button.x,this.tar_button.y),d.instance.regEvemt(e.ShowWudianBanner,this,this.wudianShow)}onDestroy(){d.instance.removeEvent(e.ShowWudianBanner,this,this.wudianShow)}onStart(){this.m_owner.visible=this.tar_button.visible,B.WudianFlag&&this.m_owner.visible&&(this.inWudianStart(),this.m_owner.on(Laya.Event.CLICK,this,()=>{d.instance.dispatch(e.ShowWudianBanner)}),this.m_owner.mouseThrough=!1)}inWudianStart(){let e=this.m_owner.x,t=this.m_owner.y+this.move_dis;this.m_owner.pos(e,t),this.tar_button.pos(e,t)}wudianShow(){Laya.timer.once(1e3*S.getInstance().getAppSwitchData().bannerMoveTimer,this,()=>{j.show()}),Laya.timer.once(1e3*S.getInstance().getAppSwitchData().btnMoveTimer,this,()=>{let e=this.tar_button.x,t=this.tar_button.y-this.move_dis;this.tar_button.pos(e,t),this.m_owner.destroy()})}}class Pe extends Se{constructor(){super()}onAwake(){this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._list.vScrollBarSkin=""}onUpdate(){this._scrollForward?(this._list.scrollBar.value+=100*Laya.timer.delta/1500,this._list.scrollBar.value>=this._list.scrollBar.max&&(this._scrollForward=!1)):(this._list.scrollBar.value-=100*Laya.timer.delta/1500,this._list.scrollBar.value<=0&&(this._scrollForward=!0))}}class xe extends Q{constructor(){super(),this.start_x=0}onAwake(){this.sideAD=this.owner.getChildByName("sideAD"),this.btn_close=this.sideAD.getChildByName("btn_close"),this.start_x=-this.sideAD.width}onStart(){}addEvent(){this.btn_close.on(Laya.Event.CLICK,this,this.clickClose)}clickClose(){this.sideADHide()}sideADShow(){Laya.Tween.to(this.sideAD,{x:0},300,Laya.Ease.expoOut,Laya.Handler.create(this,()=>{this.btn_close.visible=!0}))}sideADHide(){Laya.Tween.clearAll(this),this.btn_close.visible=!1,Laya.Tween.to(this.sideAD,{x:this.start_x},300,Laya.Ease.expoOut,Laya.Handler.create(this,()=>{K.instance.closeView(r.SideAdView)}))}}class Ee extends Q{constructor(){super(),this.m_rewardType=0}onAwake(){this.btn_giveUp=this.owner.getChildByName("btn_giveUp");let e=this.owner.getChildByName("try_window");this.try0=e.getChildByName("try0"),this.try1=e.getChildByName("try1"),this.try0_icon=this.try0.getChildByName("display").getChildByName("icon"),this.try1_icon=this.try1.getChildByName("display").getChildByName("icon"),Z.Instance().getHighView()}onStart(){super.onStart(),this.m_rewardType=0;do{let e=Math.floor(Math.random()*E.getInstance().getPropTypeNum()),t=E.getInstance().getPropBase(e).amount;this.try0_name=E.getInstance().getPropBase(e).type+Math.floor(Math.random()*t)}while(m.ownerProp(this.try0_name));this.try0_icon.skin="subRes/propsLogo/"+this.try0_name+".png";do{let e=Math.floor(Math.random()*E.getInstance().getPropTypeNum()),t=E.getInstance().getPropBase(e).amount;this.try1_name=E.getInstance().getPropBase(e).type+Math.floor(Math.random()*t)}while(m.ownerProp(this.try1_name));this.try1_icon.skin="subRes/propsLogo/"+this.try1_name+".png"}addEvent(){this.btn_giveUp.on(Laya.Event.CLICK,this,this.clickGiveUp),this.try0.on(Laya.Event.CLICK,this,this.clickTry0),this.try1.on(Laya.Event.CLICK,this,this.clickTry1)}clickGiveUp(){this._data&&this._data.method(),K.instance.closeView(r.TrySkinView)}onEnable(){super.onEnable(),d.instance.regEvemt(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.regEvemt(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess)}onDisable(){super.onDisable(),d.instance.removeEvent(e.RewardVideoFail,this,this.onRewardVidewoFail),d.instance.removeEvent(e.RewardVideoSuccess,this,this.onRewardVidewoSuccess),this.m_rewardType=0}onRewardVidewoFail(){(this.m_rewardType=1)?this.clickGiveUp():(this.m_rewardType=2)&&this.clickGiveUp(),this.m_rewardType=0}onRewardVidewoSuccess(){(this.m_rewardType=1)?(this.clickGiveUp(),N.Instance().onChooseProp(this.try0_name)):(this.m_rewardType=2)&&(this.clickGiveUp(),N.Instance().onChooseProp(this.try1_name)),this.m_rewardType=0}clickTry0(){let e=this;this.m_rewardType=1,1==$.getInstance().openVideo?Laya.Browser.onAndroid?I.CallNativeFunc("showRewardVideo"):y.showRewardedVideoAd(t=>{t?(e.clickGiveUp(),N.Instance().onChooseProp(e.try0_name)):(e.clickGiveUp(),console.log("试用皮肤视频未完整观看"))},()=>{e.clickGiveUp(),console.log("试用皮肤视频加载失败")}):e.clickGiveUp()}clickTry1(){let e=this;1==$.getInstance().openVideo?(this.m_rewardType=2,Laya.Browser.onAndroid||Laya.Browser.onIOS?I.CallNativeFunc("showRewardVideo"):y.showRewardedVideoAd(t=>{t?(e.clickGiveUp(),N.Instance().onChooseProp(e.try1_name)):(e.clickGiveUp(),console.log("试用皮肤视频未完整观看"))},()=>{e.clickGiveUp(),console.log("试用皮肤视频加载失败")})):e.clickGiveUp()}}class Ne extends Laya.Script{constructor(){super()}onAwake(){this.m_owner=this.owner,this.fix_x=this.m_owner.scaleX,this.rat=this.rat/1e3}onUpdate(){if(this.m_owner.visible){Math.abs(this.m_owner.scaleX-this.fix_x)>=this.changeRange&&(this.rat=-this.rat);let e=this.m_owner.scaleX+this.rat,t=this.m_owner.scaleY+this.rat;this.m_owner.scale(e,t)}}}class Te extends Q{constructor(){super(),this.couldRank=!0}onAwake(){this.btn_start=this.owner.getChildByName("btn_start"),this.btn_skin=this.owner.getChildByName("btn_skin"),this.btn_moreGame=this.owner.getChildByName("btn_moreGame"),this.btn_moreGame.visible=!1,this.btn_sideAD=this.owner.getChildByName("btn_sideAD"),this.btn_sideAD.visible=!1,this.btn_close=this.owner.getChildByName("btn_close"),this.btn_rank=this.owner.getChildByName("btn_rank"),this.logo=this.owner.getChildByName("logo"),this.m_level=this.owner.getChildByName("level"),this.m_level.value=(m.getLeveNum()+1).toString(),Z.Instance().getHighView()&&(this.btn_start.bottom+=200,this.btn_skin.bottom+=200,this.btn_moreGame.bottom+=200,this.btn_close.top=147)}onDestroy(){super.onDestroy(),this.btn_autho&&this.btn_autho.destroy()}onStart(){T.Instance().hide(),x.Instance().SetState(s.Menu),N.Instance().showInMenu(),this.logo.scale(0,0),this.m_level.alpha=0,Laya.Tween.to(this.logo,{scaleX:1,scaleY:1},600,Laya.Ease.quadInOut),Laya.Tween.to(this.m_level,{alpha:1},600),Laya.Browser.onMiniGame?this.onMiniGame():Laya.Browser.onQGMiniGame&&this.onQGGame()}addEvent(){this.btn_start.on(Laya.Event.CLICK,this,this.clickStart),this.btn_skin.on(Laya.Event.CLICK,this,this.clickSkin),this.btn_moreGame.on(Laya.Event.CLICK,this,this.clickMoreGame),this.btn_sideAD.on(Laya.Event.CLICK,this,this.clickSideAD),this.btn_rank.on(Laya.Event.CLICK,this,this.clickRank),this.btn_close.on(Laya.Event.CLICK,this,this.clickClose)}removeEvent(){this.btn_start.off(Laya.Event.CLICK,this,this.clickStart),this.btn_skin.off(Laya.Event.CLICK,this,this.clickSkin),this.btn_moreGame.off(Laya.Event.CLICK,this,this.clickMoreGame),this.btn_sideAD.off(Laya.Event.CLICK,this,this.clickSideAD),this.btn_rank.off(Laya.Event.CLICK,this,this.clickRank),this.btn_close.off(Laya.Event.CLICK,this,this.clickClose)}clickClose(){K.instance.closeView(r.MenuView),K.instance.openView(r.MoreGameView)}clickStart(){Z.Instance().normalStart(),K.instance.closeView(r.MenuView),M.instance.playSound(a.Button)}clickRank(){this.couldRank&&(K.instance.openView(r.RankView),K.instance.closeView(r.MenuView),M.instance.playSound(a.Button))}noAuthor(){var e=this,t=Laya.Browser.window.wx.getSystemInfoSync(),a=t.screenWidth,i=t.screenHeight,s=this.btn_rank.y/Laya.stage.height*i,n=this.btn_rank.width/Laya.stage.width*a,o=this.btn_rank.height/Laya.stage.width*a;this.btn_autho=Laya.Browser.window.wx.createUserInfoButton({type:"image",image:"",style:{left:0,top:s,width:n,height:o}}),this.btn_autho.onTap(t=>{var a=t.userInfo,i=(a.nickName,a.avatarUrl);console.log("用户授权了",a),Z.Instance().saveUserAvatarUrl(i),e.couldRank=!0})}clickSideAD(){K.instance.openView(r.SideAdView)}clickSkin(){K.instance.openView(r.BagView),K.instance.closeView(r.MenuView),x.Instance().SetState(s.Bag),M.instance.playSound(a.Button)}clickMoreGame(){K.instance.openView(r.MoreGame),K.instance.closeView(r.MenuView)}onMiniGame(){this.getUserInfo(),y.showInterstitialAd(()=>{},()=>{}),S.getInstance().getAppSwitchData().enterGamePop&&K.instance.openView(r.EnterGamePop),K.instance.openView(r.SideAdView)}onQGGame(){v.showBannaer()}getUserInfo(){let e=this;Laya.Browser.window.wx.getUserInfo({success:function(t){var a=t.userInfo,i=(a.nickName,a.avatarUrl);console.log("用户授权了",a),Z.Instance().saveUserAvatarUrl(i),e.couldRank=!0},fail:function(t){console.log("用户没有授权"),e.noAuthor()}})}}class Oe extends Laya.Script{constructor(){super(...arguments),this.AdPosID=he.AniAdLocationID,this._data=null}onAwake(){this._ownerSprite=this.owner,this._animation=this.owner.getChildByName("Animation")}onEnable(){this.refreshADVDis(),this._ownerSprite.on(Laya.Event.CLICK,this,this.onSpClick)}onDisable(){Laya.timer.clearAll(this),this._ownerSprite.off(Laya.Event.CLICK,this,this.onSpClick)}refreshADVDis(){var e=this;he.getADVs(this.AdPosID,t=>{if(t&&t.length>0){e._ownerSprite.visible=!0;var a=t[Math.floor(Math.random()*t.length)];e._animation.loadAtlas(a.atlas,Laya.Handler.create(e,function(){e._animation.play(0,!0)})),e._data=a}else e._ownerSprite.visible=!1},!1)}onSpClick(){var t=this._data;t&&(console.log("跳转游戏： "+t.title),Laya.Browser.onMiniGame?y.navigateToMiniProgram(t.appid,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid),le.aldSendReportAdClickSuccess(t)},a=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==a.errMsg&&(console.log("用户取消跳转"),le.aldSendReportAdClickFail(t))},e=>{console.log("跳转完成")}):Laya.Browser.onQGMiniGame?v.navigateToMiniProgram(t.appid,t.title,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail)},e=>{console.log("跳转完成")}):Laya.Browser.onQQMiniGame&&ce.navigateToMiniProgram(t.appid,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail)},e=>{console.log("跳转完成")}))}}class Ue extends Oe{constructor(){super()}onSpClick(){var t=this._data;t&&(console.log("跳转游戏： "+t.title),Laya.Browser.onMiniGame?y.navigateToMiniProgram(t.appid,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid),le.aldSendReportAdClickSuccess(t)},a=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==a.errMsg&&(console.log("用户取消跳转"),le.aldSendReportAdClickFail(t),K.instance.openView(r.SideAdView))},e=>{console.log("跳转完成")}):Laya.Browser.onQGMiniGame?v.navigateToMiniProgram(t.appid,t.title,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail)},e=>{console.log("跳转完成")}):Laya.Browser.onQQMiniGame&&ce.navigateToMiniProgram(t.appid,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail)},e=>{console.log("跳转完成")}))}}class Fe extends Laya.Script{constructor(){super(),this.TwinkleSpeed=1e3,this.TwinkleMinSize=.95,this.TwinkleMaxSize=1.05,this._aniForward=!1,this._fontSize=25,this._originSize=1}onAwake(){this._displaySp=this.owner,this._disText=this.owner.getChildByName("TitelText"),this._originSize=this._displaySp.scaleX,null!=this._disText&&(this._disText.text="",this._fontSize=this._disText.fontSize)}onEnable(){this._displaySp.scale(this._originSize,this._originSize)}onDisable(){}onUpdate(){this.displayAni()}displayAni(){if(this._aniForward){e=this._displaySp.scaleX+Laya.timer.delta/this.TwinkleSpeed;e=Math.min(e,this.TwinkleMaxSize*this._originSize),this._displaySp.scale(e,e),this._displaySp.scaleX>=this.TwinkleMaxSize*this._originSize&&(this._aniForward=!1)}else{var e=this._displaySp.scaleX-Laya.timer.delta/this.TwinkleSpeed;e=Math.max(e,this.TwinkleMinSize*this._originSize),this._displaySp.scale(e,e),this._displaySp.scaleX<=this.TwinkleMinSize*this._originSize&&(this._aniForward=!0)}}}class He extends Q{constructor(){super(),this._totalClickTimer=22,this._needClickTime=10,this._bannerClickTime=7}onAwake(){this._click_Btn=this.owner.getChildByName("Click_Btn"),this._click_Btn.on(Laya.Event.CLICK,this,this.ButtonClicked),this._arrow_Img=this._click_Btn.getChildByName("Arrow_Img"),this._bg=this.owner.getChildByName("BG"),this._open_Btn=this._bg.getChildByName("Open_Btn"),this._getPrize_View=this.owner.getChildByName("GetPrize_View"),this._prizeCount_Text=this._getPrize_View.getChildByName("PrizeCount_Text"),this._confirm_Btn=this._getPrize_View.getChildByName("Confirm_Btn"),this._getPrize_View.visible=!1,this._clickTime_PBar=this._bg.getChildByName("ClickTime_PBar"),this._clickTime_PBar$Bar=this._clickTime_PBar.getChildByName("ClickTime_PBar$Bar"),this._clickBarOriginalWidth=this._clickTime_PBar$Bar.width,this._bannerAd_View=this.owner.getChildByName("BannerAd_View"),this._clickTime_PBar$Bar.width=0,this._clickTime=0,this._totalClickTime=0}onStart(){super.onStart(),this.play1.visible=!1,this.getPrizeBg.visible=!1}onUpdate(){if(!this._bannerClicked){let e=2+this._clickTime_PBar$Bar.width/this._clickBarOriginalWidth*6;this._clickTime_PBar$Bar.width>=e&&(this._clickTime_PBar$Bar.width-=e),this._clickTime_PBar$Bar.width/this._clickBarOriginalWidth+.1<this._clickTime/this._needClickTime&&this._clickTime--}}openView(e){this._compeletFunction=e.Complete,this._prizeCount=e.PrizeCount,super.openView(e)}OpenPrizeWindow(){this.getPrizeBg.visible=!0,this._bg.visible=!1;let e=this;this._prizeCount_Text.text=this._prizeCount.toString(),this._getPrize_View.visible=!0,this._confirm_Btn.once(Laya.Event.CLICK,this,function(){e._compeletFunction&&e._compeletFunction(),e.closeView()})}ShowBanner(){console.log("AD_WudianBanner_Show"),j.show()}ButtonClicked(){this.ShowBit(),this._clickTime++,this._totalClickTime++,this._clickTime>this._needClickTime&&(this._clickTime=this._needClickTime),this._clickTime>=this._bannerClickTime?(this._clickTime>=this._needClickTime&&(this._clickTime=this._needClickTime-1),this._bannerClicked=!0,console.log("误点Banner套路启动"),this.ShowBanner(),Laya.timer.once(150,this,function(){this.BannerClicked()})):this._totalClickTime>this._totalClickTimer&&(console.log("用户一直没点到，放他一马",this._totalClickTime),this.BannerClicked());let e=this._clickTime/this._needClickTime*this._clickBarOriginalWidth;this._clickTime_PBar$Bar.width=e}BannerClicked(){d.instance.dispatch(e.AD_WudianBanner_Hide),this._bannerClicked=!0,this._clickTime=this._needClickTime,this._clickTime_PBar$Bar.width=this._clickBarOriginalWidth,this._click_Btn.visible=!1,this._open_Btn.visible=!0,this.OpenPrizeWindow()}onDestroy(){super.onDestroy(),j.hide()}ShowBit(){Laya.timer.clearAll(this),this.BeforeBit(),Laya.timer.once(30,this,()=>{this.AfterBit(),Laya.timer.once(350,this,()=>{this.BeforeBit()})})}BeforeBit(){this.play1.visible=!1,this.play0.visible=!0}AfterBit(){this.play1.visible=!0,this.play0.visible=!1}}class We extends Q{constructor(){super(...arguments),this._processWidth=0}onAwake(){this._bg=this.owner.getChildByName("Bg"),this._processBarBg=this._bg.getChildByName("processBarBg"),this._loading=this.owner.getChildByName("loading"),this.m_bg=this.owner.getChildByName("m_bg"),this._loading.skin="res/loading.png",this.m_bg.skin="res/沙雕来一杆loading.png",this._bg.skin="res/进度条1.png",this._processBarBg?(this._processBar=this._processBarBg.getChildByName("processBar"),this._processWidth=this._processBar.width):(this._processBar=this._bg.getChildByName("processBar"),this._processBar.skin="res/进度条2.png",this._processWidth=this._processBar.width),this._processBar.width=0,console.log(this._processBar.width)}onEnable(){super.onEnable()}addEvent(){super.addEvent()}removeEvent(){super.removeEvent()}onUpdate(){this._processBar.width<=this._processWidth&&(this._processBar.width+=6,Math.min(this._processBar.width,this._processWidth))}setProcess(e){}}class ze extends Q{constructor(){super()}onAwake(){this._bg=this.owner.getChildByName("Bg"),this._bg.x=Laya.stage.width/2-this._bg.width/2,this._tipsText=this._bg.getChildByName("Text")}openView(e){super.openView(e),this.setTipsMsg(e),Laya.timer.clearAll(this);var t=this;Laya.timer.once(3e3,this,function(){t.closeView()})}setTipsMsg(e){this._tipsText.text=e}}class Ke extends Laya.Script{constructor(){super(...arguments),this.AdPosID=he.BannerAdLocationID,this._data=null,this._wxBanner=null}onAwake(){this._displaySp=this.owner.getChildByName("Display"),null==this._displaySp&&(this._displaySp=this.owner)}onEnable(){this._displaySp.on(Laya.Event.CLICK,this,this.onSpClick);var e=S.getInstance().getAppSwitchData().banner;0==e?this.refreshBannerDis():1==e&&this.refreshWXBanner()}onDisable(){this._displaySp.off(Laya.Event.CLICK,this,this.onSpClick),this.clearWXBaner()}refreshBannerDis(){var e=this;he.getADVs(this.AdPosID,t=>{if(t&&t.length>0){var a=t[Math.floor(Math.random()*t.length)];e._displaySp.loadImage(a.logo,Laya.Handler.create(e,function(){e._displaySp.destroyed||(e._displaySp.width=750,e._displaySp.height=256)})),e._data=a}},!1)}onSpClick(){var t=this._data;t&&(console.log("跳转游戏： "+t.title),Laya.Browser.onMiniGame?y.navigateToMiniProgram(t.appid,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid),le.aldSendReportAdClickSuccess(t)},a=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==a.errMsg&&(console.log("用户取消跳转"),le.aldSendReportAdClickFail(t))},e=>{console.log("跳转完成")}):Laya.Browser.onQGMiniGame?v.navigateToMiniProgram(t.appid,t.title,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail)},e=>{console.log("跳转完成")}):Laya.Browser.onQQMiniGame&&ce.navigateToMiniProgram(t.appid,t.url,e=>{console.log("跳转成功"),he.reportUserClick(t.appid)},t=>{console.log("跳转失败"),d.instance.dispatch(e.AD_OnShareAdFail)},e=>{console.log("跳转完成")}))}refreshWXBanner(){if(Laya.Browser.onMiniGame&&this.owner.visible){this.clearWXBaner();var e=this,t=Laya.Browser.window.wx.getSystemInfoSync(),a=t.screenWidth,i=t.screenHeight,s=this._displaySp.localToGlobal(new Laya.Point(0,0)),n=s.x/Laya.stage.width*a,o=s.y/Laya.stage.height*i,r=this.WXBannerWidth?this.WXBannerWidth/Laya.stage.width*a:a;this._wxBanner=Laya.Browser.window.wx.createBannerAd({adUnitId:y.bannerAdUnitId,adIntervals:30,style:{left:n,top:o,width:r}}),e._wxBanner.onLoad(e=>{console.log("WXBanner广告 加载完成"),console.log(e)}),this._wxBanner.onError(t=>{console.log("WXBanner广告 加载失败"),console.log(t),e.refreshBannerDis(),e.clearWXBaner()}),this._wxBanner.onResize(t=>{console.log(e._wxBanner.style.realWidth,e._wxBanner.style.realHeight)}),e._wxBanner.show()}}clearWXBaner(){this._wxBanner&&this._wxBanner.destroy(),this._wxBanner=null}}class Qe extends Laya.Script{onAwake(){this._ownerSprite=this.owner,this._autoZone=this._ownerSprite.getChildByName("AutoZone"),this._loopADZone=this._ownerSprite.getChildByName("LoopAD"),this._bannerADZone=this._ownerSprite.getChildByName("BannerAD"),this._bannerAd=this._bannerADZone.getComponent(Ke)}onEnable(){Laya.stage.width/Laya.stage.height<.5?(this._autoZone.bottom=this._loopADZone.height+this._bannerADZone.height,this._loopADZone.bottom=this._bannerADZone.height,this._bannerADZone.visible=!0):(this._autoZone.bottom=this._loopADZone.height,this._loopADZone.bottom=0,this._bannerADZone.visible=!1)}onDisable(){}onUpdate(){this._bannerADZone.visible||this._bannerAd.clearWXBaner()}}class qe{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("Mgr/GameMgr.ts",ee),e("MyScripts/View/BagView.ts",se),e("MyScripts/Ctrl/SkinTitle.ts",ie),e("Common/MyList.ts",ae),e("MyScripts/Ctrl/PageIcon.ts",ne),e("MyScripts/Ctrl/Coin.ts",oe),e("ShareAd/View/LoopAdBox.ts",de),e("ShareAd/MyView/EnterPopVerticalLoopAdView.ts",me),e("MyScripts/View/EnterGamePop.ts",_e),e("MyScripts/View/GameView.ts",ge),e("MyScripts/Ctrl/GameHeadPic.ts",we),e("MyScripts/Ctrl/RecordVedioIcon.ts",pe),e("MyScripts/Ctrl/GuangQuan.ts",ue),e("MyScripts/Ctrl/TreasureBox.ts",ye),e("MyScripts/View/LotteryView.ts",ve),e("MyScripts/Ctrl/ButtonShan.ts",Le),e("Common/MyButton.ts",be),e("ShareAd/View/HorizontalLoopAdView.ts",Se),e("ShareAd/MyView/VerticalLoopAdView.ts",Be),e("MyScripts/View/MoreGameView2.ts",Ce),e("ShareAd/MyView/MoreGameLoopAdBox.ts",ke),e("ShareAd/MyView/MoreGameLoopAdView.ts",fe),e("MyScripts/View/MoreGameView.ts",Ie),e("MyScripts/View/NativeAdView.ts",Ae),e("MyScripts/View/OverDeriveView.ts",Ve),e("MyScripts/View/OverView.ts",Y),e("MyScripts/Ctrl/OverCup.ts",X),e("MyScripts/Ctrl/Cup.ts",q),e("MyScripts/Ctrl/HeadPic.ts",Me),e("MyScripts/View/RankView.ts",Re),e("MyScripts/View/ReliveView.ts",De),e("Common/WudianSprite.ts",Ge),e("ShareAd/MyView/VerticalSideADLoopView.ts",Pe),e("MyScripts/View/SideADView.ts",xe),e("MyScripts/View/TrySkinView.ts",Ee),e("Common/SpriteBreath.ts",Ne),e("MyScripts/View/MenuView.ts",Te),e("ShareAd/MyView/MenuSingleAniADView.ts",Ue),e("View/TwinkleSprite.ts",Fe),e("View/ClickGetPrize/ClickGetPrize.ts",He),e("View/LoadingView/LoadingView.ts",We),e("View/TipsView/TipsView.ts",ze),e("ShareAd/View/BannerAdView.ts",Ke),e("View/Common/UniversalBottomZone.ts",Qe)}}qe.width=750,qe.height=1334,qe.scaleMode="fixedwidth",qe.screenMode="vertical",qe.alignV="middle",qe.alignH="center",qe.startScene="GameMain.scene",qe.sceneRoot="",qe.debug=!1,qe.stat=!1,qe.physicsDebug=!1,qe.exportSceneToJson=!0,qe.init();var Xe,je=Laya.Scene,Ye=Laya.ClassUtils.regClass;!function(e){!function(e){class t extends je{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"Scene",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,right:0,name:"m_bg",left:0},compId:9},{type:"Clip",props:{width:650,name:"Bg",height:35,centerX:0,bottom:200},compId:6,child:[{type:"Clip",props:{y:26,x:13,width:619,pivotY:22,name:"processBar",height:23},compId:5}]},{type:"Script",props:{y:0,x:0,runtime:"View/LoadingView/LoadingView.ts"},compId:7},{type:"Image",props:{width:200,name:"loading",height:50,centerX:0,bottom:300},compId:8}],loadList:[],loadList3D:[]},e.LoadingUI=t,Ye("ui.View.LoadingUI",t)}(e.View||(e.View={}))}(Xe||(Xe={}));class Ze{static ttLogin(e,t){g.onTTMiniGame&&Laya.Browser.window.tt.login({success:t=>{if(t.code){let a=t.code;e(a),console.log("登陆成功,获取到code : "+a)}}}),Ze.initRecord()}static onRewardedVideoAdLoad(){console.log("激励视频 广告加载完成")}static onRewardedVideoAdError(e){console.log("激励视频 广告加载失败"+e),Ze._onRewardedVideoAdFailed&&Ze._onRewardedVideoAdFailed()}static onRewardedVideoAdClose(e){e&&e.isEnded||null==e?(console.log("激励视频 已完整观看"),Ze._onRewardedVideoAdClose&&Ze._onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),Ze._onRewardedVideoAdClose&&Ze._onRewardedVideoAdClose(!1))}static regRewardedVideoAdEvent(e){e.onLoad(Ze.onRewardedVideoAdLoad),e.onError(Ze.onRewardedVideoAdError),e.onClose(Ze.onRewardedVideoAdClose),Ze._isRegRewardedVideoAdEvent=!0}static showRewardedVideoAd(e,t){if(g.onTTMiniGame){Ze._onRewardedVideoAdClose=e,Ze._onRewardedVideoAdFailed=t;var a=Laya.Browser.window.tt.createRewardedVideoAd({adUnitId:Ze.adUnitId});Ze._isRegRewardedVideoAdEvent||Ze.regRewardedVideoAdEvent(a),a.load().then(()=>{var e=a.show();e.then(()=>console.log("激励视频 广告显示成功")),e.catch(e=>{a.load().then(()=>a.show()).catch(e=>{console.log("激励视频 广告显示失败"),t&&t()})})}).catch(e=>{console.log("激励视频 广告加载失败"),t&&t()})}else e(!0)}static initRecord(){Ze.record=Laya.Browser.window.tt.getGameRecorderManager(),null!=Ze.record&&(Ze.record.onStart(e=>{console.log("录屏开始"),Ze.recordRes=""}),Ze.record.onStop(e=>{console.log("录屏结束"),Ze.recordRes=e.videoPath}))}static startRecord(e=300){g.onTTMiniGame&&Ze.record.start({duration:e})}static stopRecord(){g.onTTMiniGame&&Ze.record.stop()}static shareRecord(e=null){g.onTTMiniGame&&(""!=Ze.recordRes?window.tt.shareAppMessage({channel:"video",extra:{videoPath:Ze.recordRes,videoTopics:["快来和我一起玩吧！"]},success(){null!=e&&e(),console.log("分享视频成功")},fail(e){console.log("分享视频失败")}}):console.log("分享视频为空"))}static share(e=null){g.onTTMiniGame&&window.tt.shareAppMessage({templateId:this._templateId,success(){null!=e&&e()},fail(){console.log("分享失败")}})}static showBanner(){if(g.onTTMiniGame&&!Ze._banner){const{windowWidth:e,windowHeight:t}=Laya.Browser.window.tt.getSystemInfoSync();Ze._banner=Laya.Browser.window.tt.createBannerAd({adUnitId:Ze.bannerAdUnitId,adIntervals:30,style:{width:150,top:t-84.375}}),Ze._banner.onResize(a=>{console.log(a.width,a.height),Ze._banner.style.top=t-a.height,Ze._banner.style.left=(e-a.width)/2}),Ze._banner.show()}}}Ze.adUnitId="",Ze.bannerAdUnitId="",Ze.InsAdUnitId="",Ze._templateId="",Ze.recordRes="",Ze._banner=null,Ze._isRegRewardedVideoAdEvent=!1,Ze._onRewardedVideoAdFailed=null,Ze._onRewardedVideoAdClose=null;new class{constructor(){this._loadingUI=null,this._loadingView=null,this._preLoadRes=new Array,window.Laya3D?Laya3D.init(qe.width,qe.height,null,Laya.Handler.create(this,this.initMain)):(Laya.init(qe.width,qe.height,Laya.WebGL),this.initMain())}initMain(){Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=qe.scaleMode,Laya.stage.screenMode=qe.screenMode,Laya.stage.alignV=qe.alignV,Laya.stage.alignH=qe.alignH,Laya.URL.exportSceneToJson=qe.exportSceneToJson,(qe.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),qe.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),qe.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION),1==g.onTTMiniGame&&(Laya.Browser.onMiniGame=!1),Laya.Browser.onMiniGame||Laya.Browser.onQGMiniGame||Laya.Browser.onQQMiniGame||g.onTTMiniGame||(g.ResServer=g.LocalTestReServer)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){Laya.loader.maxLoader=50,this.initLoadingView();var t=[{url:g.ResServer+"/json/appswitch.json",type:Laya.Loader.JSON}],a=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{a.loadRes()})),d.instance.regOnceEvent(e.App_CloseFirstLoadingView,this,this.closeloadingUI)}initLoadingView(){this._loadingUI=new Xe.View.LoadingUI,Laya.stage.addChild(this._loadingUI),this._loadingUI.width=Laya.stage.width,this._loadingUI.height=Laya.stage.height,this._loadingView=this._loadingUI.getComponent(We),this._loadingView.setProcess(0)}postResToOpenDataContext(e){Laya.Browser.onMiniGame?(console.log("开始透传资源数据到开放域"),Laya.loader.load(["openRes/Rank.atlas"],Laya.Handler.create(null,function(){Laya.MiniAdpter.sendAtlasToOpenDataContext("openRes/Rank.atlas"),console.log("透传资源数据到开放域  完毕！！！"),e&&e()}))):e&&e()}preLoad(){Laya.Browser.onMiniGame&&(y.checkUpdate(),j.preloadBanner())}loadRes(){this.preLoad();var e=this._preLoadRes,t=this;Laya.Browser.onMiniGame?Laya.Browser.window.wx.loadSubpackage({name:"subRes",success:a=>{e.length>0?Laya.loader.load(e,Laya.Handler.create(this,()=>{t.onLoadResComplate()}),Laya.Handler.create(this,e=>{t._loadingView.setProcess(e/2+.5)})):t.onLoadResComplate()},fail:e=>{this.loadRes()}}).onProgressUpdate(e=>{t._loadingView.setProcess(e/2)}):Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.loadSubpackage({name:"subRes",success:a=>{e.length>0?Laya.loader.load(e,Laya.Handler.create(this,()=>{t.onLoadResComplate()}),Laya.Handler.create(this,e=>{t._loadingView.setProcess(e/2+.5)})):t.onLoadResComplate()},fail:e=>{this.loadRes()}}).onProgressUpdate(e=>{var a=e.progress;e.totalBytesWritten,e.totalBytesExpectedToWrite,t._loadingView.setProcess(a/2)}):Laya.Browser.onQQMiniGame?Laya.Browser.window.qq.loadSubpackage({name:"subRes",success:a=>{e.length>0?Laya.loader.load(e,Laya.Handler.create(this,()=>{t.onLoadResComplate()}),Laya.Handler.create(this,e=>{t._loadingView.setProcess(e/2+.5)})):t.onLoadResComplate()},fail:e=>{this.loadRes()}}).onProgressUpdate(e=>{t._loadingView.setProcess(e/2)}):e.length>0?Laya.loader.load(e,Laya.Handler.create(this,()=>{t.onLoadResComplate()}),Laya.Handler.create(this,e=>{t._loadingView.setProcess(e)})):t.onLoadResComplate()}onLoadResComplate(){this._loadingView.setProcess(1),Laya.Browser.onMiniGame?y.wxLogin(function(e){m.code=e,u.login(e=>{1==e.code?(console.log("登陆成功！！！"),m.token=e.data.token,m.openId=e.data.openid,le.aldSendOpenId(m.openId),u.getGameData(e=>{console.log("获取用户数据成功！！！"),1==e.code?m.initiUser(e.data):m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),m.token="",m.openId="",m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！"+e),m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！"+e),m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))})},null):Laya.Browser.onQGMiniGame?(v.initAdService(()=>{},()=>{},()=>{}),v.Login(function(e){m.code=e,u.login(e=>{1==e.code?(console.log("登陆成功！！！"),m.token=e.data.token,m.openId=e.data.openid,u.getGameData(e=>{if(console.log("获取用户数据成功！！！"),1==e.code){for(var t in m.initiUser(e.data),console.log("获取用户数据--------------------Start"),e.data)console.log(t,e.data[t]);console.log("获取用户数据--------------------End")}else m.initiUser(null);qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),m.token="",m.openId="",m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！",e),m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！",e),m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))})},null)):Laya.Browser.onQQMiniGame?ce.Login(function(e){m.code=e,u.login(e=>{1==e.code?(console.log("登陆成功！！！"),m.token=e.data.token,m.openId=e.data.openid,le.aldSendOpenId(m.openId),u.getGameData(e=>{console.log("获取用户数据成功！！！"),1==e.code?m.initiUser(e.data):m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),m.token="",m.openId="",m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！"+e),m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！"+e),m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))})},null):g.onTTMiniGame?Ze.ttLogin(function(e){m.code=e,u.login(e=>{1==e.code?(console.log("登陆成功！！！"),m.token=e.data.token,m.openId=e.data.openid,u.getGameData(e=>{console.log("获取用户数据成功！！！"),1==e.code?m.initiUser(e.data):m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))},e=>{console.log("获取用户数据失败！！！"),m.token="",m.openId="",m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))})):(console.log("登陆失败！！！"+e),m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){})))},e=>{console.log("登陆失败！！！"+e),m.initiUser(null),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){}))})},null):(m.testInitUser(),qe.startScene&&Laya.Scene.open(qe.startScene,!1,Laya.Handler.create(this,function(){})))}closeloadingUI(){this._loadingUI&&!this._loadingUI.destroyed&&this._loadingUI.destroy()}},Laya.Browser.window&&(Laya.Browser.window.NativeCallback=I)}();