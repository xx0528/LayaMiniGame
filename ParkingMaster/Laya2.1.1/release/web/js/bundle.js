var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(){function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return a(n||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}return e}()({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o;!function(e){e.None="",e.ReportAdClickSuccess="广告导出成功",e.ReportAdClickFail="广告导出失败",e.ReportLaunchOptions="用户启动参数"}(o=n.ALDEventDef||(n.ALDEventDef={}));var a=function(){function e(){}return e.aldSendOpenId=function(e){Laya.Browser.onMiniGame?(Laya.Browser.window.wx.aldSendOpenid(e),console.log("ALD 上报 openid : ",e)):Laya.Browser.onQQMiniGame&&(Laya.Browser.window.qq.aldSendOpenid(e),console.log("ALD 上报 openid : ",e))},e.aldSendEvent=function(e,t){var n=e;Laya.Browser.onMiniGame?Laya.Browser.window.wx.aldSendEvent(n,t):Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.aldSendEvent(n,t)},e.aldSendReportAdClickSuccess=function(t){var n=o.ReportAdClickSuccess+" "+t.title+":"+String(t.appid);e.aldSendEvent(n,{"导出成功":t.title+":"+String(t.appid)})},e.aldSendReportAdClickFail=function(t){var n=o.ReportAdClickFail+" "+t.title+":"+String(t.appid);e.aldSendEvent(n,{"导出失败":t.title+":"+String(t.appid)})},e.aldSendReportLaunchOptions=function(t,n,a){var i=o.ReportLaunchOptions;e.aldSendEvent(i,{"场景值：":String(t),"Ip：":String(n),"地区：":JSON.stringify(a)})},e}();n["default"]=a},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.AppID="",e.ResServer="",e.LocalTestReServer="subRes",e.Versions="0.0.0",e.onTTMiniGame=!1,e.GameName="",e.showLoadingLogo=!1,e}();n["default"]=o},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Config/AppSwitchConfig"),a=function(){function e(){}return e.preloadBanner=function(){},e.show=function(t){var n=o["default"].getInstance().getAppSwitchData().wxWuDianBanners;o["default"].getInstance().getAppSwitchData().bannerTodayBannerMax;if(t=n[Math.floor(Math.random()*n.length)],Laya.Browser.onQQMiniGame&&null!=t){var a=Laya.Browser.window.qq.getSystemInfoSync(),i=a.screenWidth,r=a.screenHeight,s=Laya.Browser.window.qq.createBannerAd({adUnitId:t,adIntervals:30,style:{left:0,top:(Laya.stage.height-240)/Laya.stage.height*r,width:i}});if(s){var l=this;e._onLoad=function(n){console.log("CachedQQBanner 广告 加载完成",t),console.log(n),l._isHide?(s.offLoad(e._onLoad),s.offError(e._onError),s.destroy()):s.show()},s.onLoad(e._onLoad),e._onError=function(n){console.log("CachedQQBanner 广告 加载失败",t),console.log(n),s.offLoad(e._onLoad),s.offError(e._onError),s.destroy()},s.onError(e._onError),e._curBanner=s}}e._isHide=!1},e.hide=function(){e._isHide=!0,Laya.timer.clearAll(e),null!=e._curBanner&&(e._curBanner.hide(),e._curBanner.offLoad(e._onLoad),e._curBanner.offError(e._onError),e._curBanner.destroy(),e._curBanner=null,console.log("CachedQQBanner 广告隐藏"))},e.changeShow=function(){null!=e._curBanner&&(e._curBanner.hide(),e._curBanner=null),e.show()},e.clear=function(){},e._curBanner=null,e._onLoad=null,e._onError=null,e._isHide=!0,e}();n["default"]=a},{"./Config/AppSwitchConfig":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../AppConfig"),a=function(){function e(){this.version="",this.banner=0,this.wudian=0,this.wudianAvailableTime={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},this.mailiang=1,this.mailianglist=new Array,this.mailiangSceneList=new Array,this.wxWuDianBanners=new Array,this.recreateBannerIDList=new Array,this.bannerRecreateTime=5,this.kuangdianjiange=0,this.btnMoveTimer=1,this.bannerMoveTimer=.5,this.bannerFreshTimer=200,this.bannerCreateFailNum=3,this.bannerTodayBannerMax=10,this.adSwitch=1,this.wudianSceneList=new Array,this.continueBtnDelayTime=2,this.bannerShowTime=30,this.fakeBtn=0,this.popAd=0,this.continueBanner=0,this.continueBannerShowTime=2,this.continueBannerHideTime=2,this.oppocfg=new r,this.qqcfg=new s,this.ttcfg=new l,this.vivocfg=new c,this.wxcfg=new i}return Object.defineProperty(e.prototype,"wudianTimeAvaliable",{get:function(){return 1==this.wudianAvailableTime[(new Date).getHours()]},enumerable:!0,configurable:!0}),e}();n.AppSwitchData=a;var i=function(){function e(){this.kuangdianBanner=0,this.kuangdianLevelSpcacing=0}return e}();n.WXCfg=i;var r=function(){function e(){this.yuansheng=100,this.yuanshengSwitch=1,this.addToDesktop=0,this.oppoversions="",this.btnShowTimer=0,this.indexAdSwitch=0,this.endAdSwitch=0,this.yuansheng2=100,this.yuanshengSwitch2=1}return e}();n.OPPOCfg=r;var s=function(){function e(){this.kuangdianBanner=0,this.kuangdianBox=0,this.box=0,this.weiyi=0,this.qqversions=""}return e}();n.QQCfg=s;var l=function(){function e(){this.moreGameSwitch=0,this.kuangdianBanner=0,this.luping=0,this.ttversions=""}return e}();n.TTCfg=l;var c=function(){function e(){this.yuanshengSwitch=1,this.yuansheng=100,this.yuanshengSwitch2=1,this.yuansheng2=100,this.chapingSwitch=1,this.chaping=100,this.addToDesktop=1,this.vivoversions="",this.btnShowTimer=1}return e}();n.VVcfg=c;var u=function(){function e(){this._data=new Array}return e.getInstance=function(){return null==e._instance&&(e._instance=e.load()),e._instance},e.load=function(){var t=new e,n=Laya.loader.getRes(o["default"].ResServer+"/json/appswitch.json");if(n){for(var i=0;i<n.length;++i){var r=n[i],s=new a;s.version=String(r.version),s.banner=Number(r.banner),s.wudian=Number(r.wudian),s.wudianAvailableTime=Object(r.wudianTime),s.mailiang=Number(r.mailiang);var l=r.mailianglist;if(null!=l)for(var c=0;c<l.length;++c){var u=Number(l[c]);s.mailianglist.push(u)}var d=r.mailiangScenelist;if(null!=d)for(var c=0;c<d.length;++c){var h=Number(d[c]);s.mailiangSceneList.push(h)}var f=r.wxwudianbanners;if(null!=f)for(var c=0;c<f.length;++c){var p=String(f[c]);s.wxWuDianBanners.push(p)}var g=r.recreateBannerIDList;if(null!=g)for(var c=0;c<g.length;++c){var p=String(g[c]);s.recreateBannerIDList.push(p)}s.bannerRecreateTime=null!=r.bannerRecreateTime?Number(r.bannerRecreateTime):s.bannerRecreateTime,s.kuangdianjiange=null!=r.kuangdianjiange?Number(r.kuangdianjiange):s.kuangdianjiange,s.btnMoveTimer=Number(r.btnMoveTimer),s.bannerMoveTimer=Number(r.bannerMoveTimer),s.bannerCreateFailNum=Number(r.createFailNum),s.bannerFreshTimer=Number(r.bannerFreshTimer),s.bannerTodayBannerMax=Number(r.todayBannerMax),s.adSwitch=Number(r.adSwitch);var y=r.wudianSceneList;if(null!=y)for(var c=0;c<y.length;++c){var m=Number(y[c]);s.wudianSceneList.push(m)}if(s.continueBtnDelayTime=Number(r.continueBtnDelayTime),s.bannerShowTime=Number(r.bannerShowTime),s.fakeBtn=null!=r.fakeBtn?Number(r.fakeBtn):s.fakeBtn,s.popAd=null!=r.popAd?Number(r.popAd):s.popAd,s.continueBanner=null!=r.continueBanner?Number(r.continueBanner):s.continueBanner,s.continueBannerShowTime=null!=r.continueBannerShowTime?Number(r.continueBannerShowTime):s.continueBannerShowTime,s.continueBannerHideTime=null!=r.continueBannerHideTime?Number(r.continueBannerHideTime):s.continueBannerHideTime,null!=r.oppocfg){var v=r.oppocfg;s.oppocfg.yuansheng=Number(v.yuansheng),s.oppocfg.yuanshengSwitch=Number(v.yuanshengSwitch),s.oppocfg.addToDesktop=Number(v.addToDesktop),s.oppocfg.oppoversions=String(v.oppoversions),s.oppocfg.btnShowTimer=Number(v.btnShowTimer),s.oppocfg.indexAdSwitch=Number(v.indexAdSwitch),s.oppocfg.endAdSwitch=Number(v.endAdSwitch),s.oppocfg.yuansheng2=null!=v.yuansheng2?Number(v.yuansheng2):s.oppocfg.yuansheng2,s.oppocfg.yuanshengSwitch2=null!=v.yuanshengSwitch2?Number(v.yuanshengSwitch2):s.oppocfg.yuanshengSwitch2}if(null!=r.qqcfg){var v=r.qqcfg;s.qqcfg.kuangdianBanner=Number(v.kuangdianBanner),s.qqcfg.kuangdianBox=Number(v.kuangdianBox),s.qqcfg.box=Number(v.box),s.qqcfg.weiyi=Number(v.weiyi),s.qqcfg.qqversions=String(v.qqversions)}if(null!=r.ttcfg){var v=r.ttcfg;s.ttcfg.moreGameSwitch=Number(v.moreGameSwitch),s.ttcfg.kuangdianBanner=Number(v.kuangdianBanner),s.ttcfg.luping=Number(v.luping),s.ttcfg.ttversions=String(v.ttversions)}if(null!=r.vivocfg){var v=r.vivocfg;s.vivocfg.yuanshengSwitch=Number(v.yuanshengSwitch),s.vivocfg.yuansheng=Number(v.yuansheng),s.vivocfg.yuanshengSwitch2=Number(v.yuanshengSwitch2),s.vivocfg.yuansheng2=Number(v.yuansheng2),s.vivocfg.chapingSwitch=Number(v.chapingSwitch),s.vivocfg.chaping=Number(v.chaping),s.vivocfg.addToDesktop=Number(v.addToDesktop),s.vivocfg.vivoversions=String(v.vivoversions),s.vivocfg.btnShowTimer=Number(v.btnShowTimer)}if(null!=r.wxcfg){var v=r.wxcfg;s.wxcfg.kuangdianBanner=Number(v.kuangdianBanner),s.wxcfg.kuangdianLevelSpcacing=Number(v.kuangdianLevelSpcacing)}t._data.push(s)}return t}return t._data.push(new a),t},e.prototype.getAppSwitchData=function(){return this._data[0]},e}();n["default"]=u},{"../AppConfig":2}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../AppConfig"),a=function(){function e(){this.map={w:0,h:0},this.layout=[]}return e}();n.LevelConfigData=a;var i=function(){function e(){this._data=new Array}return e.getInstance=function(){return null==e._instance&&(e._instance=e.load()),e._instance},e.load=function(){var t=new e,n=Laya.loader.getRes(o["default"].ResServer+"/json/level.json");if(n)for(var i=0;i<n.length;i++)t._data.push(n[i]);else{var n=Laya.loader.getRes(o["default"].LocalTestReServer+"/json/level.json");if(n)for(var i=0;i<n.length;i++)t._data.push(n[i]);else t._data.push(new a)}return t},e.prototype.getData=function(e){return this._data[e]},e.prototype.getDataLength=function(){return this._data.length},e}();n.LevelConfig=i},{"../AppConfig":2}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../AppConfig"),a=function(){function e(){}return e}();n.RogueLevelData=a;var i=function(){function e(){this._data=new Array}return e.getInstance=function(){return null==e._instance&&(e._instance=e.load()),e._instance},e.load=function(){var t=new e,n=Laya.loader.getRes(o["default"].ResServer+"/json/roguelevel.json");if(n)for(var i=0;i<n.length;i++)t._data.push(n[i]);else t._data.push(new a);return t},e.prototype.getData=function(e){return this._data[e]},e.prototype.getDataLength=function(){return this._data.length},e}();n.RogueLevelConfig=i},{"../AppConfig":2}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o;!function(e){e[e.None=0]="None",e[e.App_CloseFirstLoadingView=500]="App_CloseFirstLoadingView",e[e.AD_OnShareAdFail=501]="AD_OnShareAdFail",e[e.Game_OnViewOpen=600]="Game_OnViewOpen",e[e.Game_OnViewClose=601]="Game_OnViewClose",e[e.Game_OnUserMoneyChange=701]="Game_OnUserMoneyChange",e[e.Game_OnUserCrystalChange=702]="Game_OnUserCrystalChange",e[e.Game_OnUserUnlockedStore=703]="Game_OnUserUnlockedStore",e[e.Game_OnLevelStart=1e3]="Game_OnLevelStart",e[e.Game_OnLevelComplate=1001]="Game_OnLevelComplate",e[e.AD_WudianBanner_LoadComplete=2217]="AD_WudianBanner_LoadComplete",e[e.AD_WudianBanner_Show=2218]="AD_WudianBanner_Show",e[e.AD_WudianBanner_Hide=2219]="AD_WudianBanner_Hide",e[e.AD_WudianBanner_PreLoad=2220]="AD_WudianBanner_PreLoad",e[e.App_OnUpdateIpBlockState=2221]="App_OnUpdateIpBlockState",e[e.Game_Refresh=1e4]="Game_Refresh",e[e.Game_Guide=10001]="Game_Guide",e[e.Game_Tip=10002]="Game_Tip",e[e.Game_TouchStart=10003]="Game_TouchStart",e[e.Game_EnableCarTouch=10004]="Game_EnableCarTouch",e[e.AD_HoriBanner_Enable=20001]="AD_HoriBanner_Enable",e[e.RewardVideoSuccess=20010]="RewardVideoSuccess",e[e.RewardVideoFail=20011]="RewardVideoFail",e[e.InsertVideoEnd=20012]="InsertVideoEnd"}(o=n.EventDef||(n.EventDef={}))},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Laya.EventDispatcher,a=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dispatch=function(e,n){t.eventDispatcher.event(e,n)},t.prototype.regEvemt=function(e,n,o,a){t.eventDispatcher.on(e,n,o,null==a?null:[a])},t.prototype.regOnceEvent=function(e,n,o,a){t.eventDispatcher.once(e,n,o,null==a?null:[a])},t.prototype.removeEvent=function(e,n,o,a){t.eventDispatcher.off(e,n,o)},t.eventDispatcher=new o,t.instance=new t,t}(o);n["default"]=a},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Mgr/GameMgr"),a=e("./View/GameView/GameView"),i=e("./View/ButtonAnim"),r=e("./ParkingJam/Components/HorizontalLayout"),s=e("./ParkingJam/Components/ButtonActionTip"),l=e("./View/LoadingView/LoadingView"),c=e("./KRQ/Com/KRQ_LoopAd/KRQ_LoopAdBox"),u=e("./KRQ/Com/KRQ_LoopAd/KRQ_VLoopAd"),d=e("./View/TemplateViews/Export2/Exprot2ViewTemplate"),h=e("./View/Common/ViewAutoScaleByW"),f=e("./View/TemplateViews/Export3/Exprot3ViewTemplate"),p=e("./View/TemplateViews/GameWin/GameWinViewTemplate"),g=e("./View/TemplateViews/MiniGame/MiniGameViewTemplate"),y=e("./KRQ/Com/KRQ_History/KRQ_HistoryBox"),m=e("./KRQ/Com/KRQ_History/KRQ_History"),v=e("./View/TemplateViews/WXCrazyClick/WXCrazyClick"),w=function(){function e(){}return e.init=function(){var e=Laya.ClassUtils.regClass;e("Mgr/GameMgr.ts",o["default"]),e("View/GameView/GameView.ts",a["default"]),e("View/ButtonAnim.ts",i["default"]),e("ParkingJam/Components/HorizontalLayout.ts",r["default"]),e("ParkingJam/Components/ButtonActionTip.ts",s["default"]),e("View/LoadingView/LoadingView.ts",l["default"]),e("KRQ/Com/KRQ_LoopAd/KRQ_LoopAdBox.ts",c["default"]),e("KRQ/Com/KRQ_LoopAd/KRQ_VLoopAd.ts",u["default"]),e("View/TemplateViews/Export2/Exprot2ViewTemplate.ts",d["default"]),e("View/Common/ViewAutoScaleByW.ts",h["default"]),e("View/TemplateViews/Export3/Exprot3ViewTemplate.ts",f["default"]),e("View/TemplateViews/GameWin/GameWinViewTemplate.ts",p["default"]),e("View/TemplateViews/MiniGame/MiniGameViewTemplate.ts",g["default"]),e("KRQ/Com/KRQ_History/KRQ_HistoryBox.ts",y["default"]),e("KRQ/Com/KRQ_History/KRQ_History.ts",m["default"]),e("View/TemplateViews/WXCrazyClick/WXCrazyClick.ts",v["default"])},e.width=750,e.height=1334,e.scaleMode="fixedwidth",e.screenMode="vertical",e.alignV="middle",e.alignH="center",e.startScene="GameMain.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e}();n["default"]=w,w.init()},{"./KRQ/Com/KRQ_History/KRQ_History":11,"./KRQ/Com/KRQ_History/KRQ_HistoryBox":12,"./KRQ/Com/KRQ_LoopAd/KRQ_LoopAdBox":14,"./KRQ/Com/KRQ_LoopAd/KRQ_VLoopAd":15,"./Mgr/GameMgr":18,"./ParkingJam/Components/ButtonActionTip":30,"./ParkingJam/Components/HorizontalLayout":31,"./View/ButtonAnim":52,"./View/Common/ViewAutoScaleByW":53,"./View/GameView/GameView":54,"./View/LoadingView/LoadingView":56,"./View/TemplateViews/Export2/Exprot2ViewTemplate":57,"./View/TemplateViews/Export3/Exprot3ViewTemplate":58,"./View/TemplateViews/GameWin/GameWinViewTemplate":59,"./View/TemplateViews/MiniGame/MiniGameViewTemplate":60,"./View/TemplateViews/WXCrazyClick/WXCrazyClick":62}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../WXAPI"),a=e("../../ShareAd/ShareAd"),i=e("../../ALD"),r=e("../../Event/EventMgr"),s=e("../../Event/EventDef"),l=e("../../OPPOAPI"),c=e("../../QQMiniGameAPI"),u=e("../../AppConfig"),d=e("../../TTAPI"),h=e("../../VIVOAPI"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdPosID=-10086,t._datas=[],t._data=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.refresh=function(e){var t=this;a["default"].getADVs(this.AdPosID,function(n){null!=n&&(t._datas=n,t._data=t._datas[Math.floor(Math.random()*n.length)],null!=e&&e())},!1)},t.prototype.navigateToMiniProgram=function(e){var t=null==e?this._data:e;t&&(console.log("跳转游戏： "+t.title),Laya.Browser.onMiniGame?o["default"].navigateToMiniProgram(t.appid,t.url,function(e){console.log("跳转成功"),a["default"].reportUserClick(t.appid),i["default"].aldSendReportAdClickSuccess(t)},function(e){console.log("跳转失败"),r["default"].instance.dispatch(s.EventDef.AD_OnShareAdFail),"navigateToMiniProgram:fail cancel"==e.errMsg&&(console.log("用户取消跳转"),i["default"].aldSendReportAdClickFail(t))},function(e){console.log("跳转完成")}):Laya.Browser.onQGMiniGame?l["default"].navigateToMiniProgram(t.appid,t.title,t.url,function(e){console.log("跳转成功"),a["default"].reportUserClick(t.appid)},function(e){console.log("跳转失败"),r["default"].instance.dispatch(s.EventDef.AD_OnShareAdFail)},function(e){console.log("跳转完成")}):Laya.Browser.onQQMiniGame?c["default"].navigateToMiniProgram(t.appid,t.url,function(e){console.log("跳转成功"),a["default"].reportUserClick(t.appid)},function(e){console.log("跳转失败"),r["default"].instance.dispatch(s.EventDef.AD_OnShareAdFail)},function(e){console.log("跳转完成")}):Laya.Browser.onVVMiniGame?h["default"].navigateToMiniProgram(t.appid,t.url,function(e){console.log("跳转成功"),a["default"].reportUserClick(t.appid)},function(e){console.log("跳转失败"),r["default"].instance.dispatch(s.EventDef.AD_OnShareAdFail)},function(e){console.log("跳转完成")}):u["default"].onTTMiniGame&&d["default"].showMoreGamesModal(function(){console.log("跳转成功"),a["default"].reportUserClick(t.appid)},function(){console.log("跳转失败"),r["default"].instance.dispatch(s.EventDef.AD_OnShareAdFail)}))},t.prototype.show=function(){this.Sprite.visible=!0},t.prototype.hide=function(){this.Sprite.visible=!1},t.prototype.autoScrollText=function(e){if(e.overflow==Laya.Text.SCROLL){var t=!0,n=0;Laya.timer.frameLoop(1,e,function(){var o=Laya.timer.delta/1e3*10;n+=o,n>=e.textWidth/2&&(t=!t,n=0),t?e.scrollX+=o:e.scrollX-=o})}},t}(Laya.Script);n["default"]=f},{"../../ALD":1,"../../AppConfig":2,"../../Event/EventDef":7,"../../Event/EventMgr":8,"../../OPPOAPI":29,"../../QQMiniGameAPI":46,"../../ShareAd/ShareAd":47,"../../TTAPI":48,"../../VIVOAPI":51,"../../WXAPI":64}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./KRQ_HistoryBox"),a=e("../KRQ_ComBase"),i=e("../../../ShareAd/ShareAd"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.OnBackBtnClick=null,t._topZone=null,t._backBtn=null,t._startList=new Array,t}return __extends(t,e),t.prototype.onAwake=function(){this.AdPosID=i["default"].HistoryLocationID,this._topZone=this.Sprite.getChildByName("TopZone"),this._backBtn=this._topZone.getChildByName("BackBtn"),this._list=this.Sprite.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._list.vScrollBarSkin=""},t.prototype.onStart=function(){this.refresh()},t.prototype.onEnable=function(){this._backBtn.on(Laya.Event.CLICK,this,this.onBackBtn)},t.prototype.onDisable=function(){this._backBtn.off(Laya.Event.CLICK,this,this.onBackBtn)},t.prototype.refresh=function(e){var t=this;i["default"].getADVs(this.AdPosID,function(e){if(null!=e){t._datas=e,t._startList.splice(0);for(var n=0;n<t._datas.length;++n)t._startList.push(!1);for(var o=Math.floor(.33*t._startList.length);o>0;){var a=Math.floor(Math.random()*t._startList.length);0==t._startList[a]&&(t._startList[a]=!0,--o)}t._list.array=t._datas}},!1)},t.prototype.onListRender=function(e,t){var n=this._list.array[t],a=this._startList[t],i=e.getComponent(o["default"]);i.setData(n,a)},t.prototype.onBackBtn=function(){this.hide(),null!=this.OnBackBtnClick&&this.OnBackBtnClick()},t.prototype.show=function(){e.prototype.show.call(this),this.refresh()},t}(a["default"]);n["default"]=r},{"../../../ShareAd/ShareAd":47,"../KRQ_ComBase":10,"./KRQ_HistoryBox":12}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Com/KRQ_ComBase"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._icon=null,t._text=null,t._mark=null,t}return __extends(t,e),t.prototype.onAwake=function(){this._icon=this.Sprite.getChildByName("Icon"),this._text=this.Sprite.getChildByName("Text"),this._text.overflow=Laya.Text.SCROLL,this._text.text="",this._mark=this.Sprite.getChildByName("Mark"),this._mark.visible=!1},t.prototype.onStart=function(){this.autoScrollText(this._text)},t.prototype.onEnable=function(){this.Sprite.on(Laya.Event.CLICK,this,this.onClickAd)},t.prototype.onDisable=function(){this.Sprite.off(Laya.Event.CLICK,this,this.onClickAd)},t.prototype.onClickAd=function(){this.navigateToMiniProgram()},t.prototype.setData=function(e,t){if(this._data=e,null!=this._data){var n=this;this._icon.loadImage(this._data.logo,Laya.Handler.create(this,function(){n._icon.destroyed||(n._icon.width=100,n._icon.height=100)}));var o=String(this._data.title);this._text.text=o,this._mark.visible=t}},t}(o["default"]);n["default"]=a},{"../../Com/KRQ_ComBase":10}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../KRQ_ComBase"),a=e("./KRQ_LoopAdBox"),i=e("../../../ShareAd/ShareAd"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isEnable=!0,t.useMovePause=!0,t.useLocalRandom=!1,t.useRandom=!1,t.sortDatas=null,t._scrollForward=!0,t._cellSize=new Laya.Point,t}return __extends(t,e),Object.defineProperty(t.prototype,"Clip",{get:function(){return this.owner},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){this.AdPosID=i["default"].LoopAdLocationID,this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._list.hScrollBarSkin=""},t.prototype.onStart=function(){var e=this;this._list.width=e.Clip.width,this._list.height=e.Clip.height,e.refresh(function(){if(null!=e._list.cells&&e._list.cells.length>0){var t=e._list.cells[0];e._cellSize.x=t.width,e._cellSize.y=t.height,e.useMovePause&&setTimeout(function(){e._list.scrollBar&&(e._list.scrollBar.value=0,e.move())},2e3)}})},t.prototype.refresh=function(e){if(!this.isEnable)return void(null!=e&&e());var t=this;i["default"].getADVs(this.AdPosID,function(n){null!=n&&n.length>0?(t._datas=n,t._list.array=t._datas,null==t.Sprite||t.Sprite.destroyed||(t.Sprite.visible=!0),null!=e&&e()):null==t.Sprite||t.Sprite.destroyed||(t.Sprite.visible=!1)},this.useRandom,this.useLocalRandom,this.sortDatas)},t.prototype.onListRender=function(e,t){var n=this._list.array[t],o=e.getComponent(a["default"]);o.setData(n)},t.prototype.move=function(){var e=this._cellSize.x+this._list.spaceX,t=0;if(this._scrollForward?t=this._list.scrollBar.value%e:(e*=-1,t=(this._list.scrollBar.max-this._list.scrollBar.value)%e*-1),this._list.scrollBar){this._list.scrollBar.stopScroll();var n=e;0!=t&&(n=2*e-t);var o=this;Laya.Tween.to(o._list.scrollBar,{value:o._list.scrollBar.value+n},1e3,null,Laya.Handler.create(o,function(){})),Laya.timer.once(1010,o,function(){o._list.scrollBar.value>=o._list.scrollBar.max?o._scrollForward=!1:o._list.scrollBar.value<=0&&(o._scrollForward=!0),Laya.timer.once(3e3,o,function(){o._list.scrollBar&&o.move()})})}},t.prototype.onUpdate=function(){this.useMovePause||(this._scrollForward?(this._list.scrollBar.value+=100*Laya.timer.delta/1e3,this._list.scrollBar.value>=this._list.scrollBar.max&&(this._scrollForward=!1)):(this._list.scrollBar.value-=100*Laya.timer.delta/1e3,this._list.scrollBar.value<=0&&(this._scrollForward=!0)))},t}(o["default"]);n["default"]=r},{"../../../ShareAd/ShareAd":47,"../KRQ_ComBase":10,"./KRQ_LoopAdBox":14}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../KRQ_ComBase"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._originW=170,t._originH=170,t}return __extends(t,e),t.prototype.onAwake=function(){this._displaySp=this.owner.getChildByName("Display"),this._originW=this._displaySp.width,this._originH=this._displaySp.height,this._disText=this.owner.getChildByName("TitelText"),this._disText.overflow=Laya.Text.SCROLL,this._disText.text=""},t.prototype.onStart=function(){this.autoScrollText(this._disText)},t.prototype.onEnable=function(){this.Sprite.on(Laya.Event.CLICK,this,this.onClickAd)},t.prototype.onDisable=function(){this.Sprite.off(Laya.Event.CLICK,this,this.onClickAd)},t.prototype.onClickAd=function(){this.navigateToMiniProgram()},t.prototype.setData=function(e){if(this._data=e,null!=this._data){var t=this;this._displaySp.loadImage(this._data.logo,Laya.Handler.create(this,function(){t._displaySp.destroyed||(t._displaySp.width=t._originW,t._displaySp.height=t._originH)}));var n=String(this._data.title);this._disText.text=n}},t}(o["default"]);n["default"]=a},{"../KRQ_ComBase":10}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./KRQ_HLoopAd"),a=e("../../../ShareAd/ShareAd"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){this.AdPosID=a["default"].LoopAdLocationID,this._list=this.owner.getChildByName("List"),this._list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1),this._list.vScrollBarSkin=""},t.prototype.move=function(){var e=this._cellSize.y+this._list.spaceY,t=0;if(this._scrollForward?t=this._list.scrollBar.value%e:(e*=-1,t=(this._list.scrollBar.max-this._list.scrollBar.value)%e*-1),this._list.scrollBar){this._list.scrollBar.stopScroll();var n=e;0!=t&&(n=2*e-t);var o=this;Laya.Tween.to(o._list.scrollBar,{value:o._list.scrollBar.value+n},1e3,null,Laya.Handler.create(o,function(){})),Laya.timer.once(1010,o,function(){o._list.scrollBar.value>=o._list.scrollBar.max?o._scrollForward=!1:o._list.scrollBar.value<=0&&(o._scrollForward=!0),Laya.timer.once(3e3,o,function(){o._list.scrollBar&&o.move()})})}},t}(o["default"]);n["default"]=i},{"../../../ShareAd/ShareAd":47,"./KRQ_HLoopAd":13}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Net/HttpUnit"),a=e("../AppConfig"),i=e("../WXAPI"),r=e("../User/User"),s=e("../OPPOAPI"),l=function(){function e(){}return e.request=function(t){t.url.indexOf("https://")>-1||t.url.indexOf("http://")>-1?t.url=t.url:t.url=e.mainUrl+t.url;var n=function(n){console.log(n,"MaiLiang http Success"),n=JSON.parse(n),"200"==n.Status?(null!=n.Result.OpenId&&""!=n.Result.OpenId?(e.MaiLiangOpenId=n.Result.OpenId,e.time=t.data.posttime,console.log("获得买量系统OpenId "+e.MaiLiangOpenId)):console.log("上报买量系统停留时间成功"),t.onSuccess&&t.onSuccess(n)):t.onFail&&t.onFail(n),t.onSuccess=null,t=null},o=function(e){console.log(e,"MaiLiang http fail"),t.onFail&&t.onFail(e),t.onFail=null,t=null},a=new Laya.HttpRequest;if(a.once(Laya.Event.COMPLETE,this,n),a.once(Laya.Event.ERROR,this,o),"get"==t.meth){for(var i="",r=0,s=Object.keys(t.data);r<s.length;r++){var l=s[r],c=t.data[l];i+=l+"="+c+"&"}t.url=t.url+"?"+i,a.send(t.url,null,t.meth)}else{for(var i="",u=0,d=Object.keys(t.data);u<d.length;u++){var l=d[u],c=t.data[l];i+=l+"="+c+"&"}a.send(t.url,i,t.meth,null,["Content-Type","application/x-www-form-urlencoded"])}},e.GetMaiLiangOpenId=function(t,n){if(Laya.Browser.onMiniGame){var l=i["default"].getLaunchOptionsSync();if(null!=l){var c=l.query.key;if(null!=c&&""!=c&&""!=r["default"].openId){e.key=c;var u=new o.requestData;u.url=e.uclick,u.onSuccess=t,u.onFail=n,u.data.appid=a["default"].AppID,u.data.openid="";var d=(new Date).getTime()/1e3;u.data.posttime=d,u.data.auth=0,u.data.key=c,u.data.wxopenid=r["default"].openId,u.meth="POST",console.log("发送买量数据接口"),e.request(u)}}else console.log("上报买量数据失败"),n(null)}else if(Laya.Browser.onQGMiniGame){var l=s["default"].getLaunchOptionsSync();o["default"].reportImport(l.referrerInfo["package"],l.referrerInfo.extraData.appid,function(e){1==e.code?console.log("OPPO 上报买量数据成功"):console.log("OPPO 上报买量数据失败",e.msg)},function(e){console.log("OPPO 上报买量数据失败");for(var t in e)console.log(t,e[t])})}else console.log("不在微信模式下调用，默认上报买量数据失败"),n(null)},e.ReportStayTime=function(t,n){if(Laya.Browser.onMiniGame){if(""!=e.MaiLiangOpenId){var i=new o.requestData;i.url=e.stay,i.onSuccess=t,i.onFail=n,i.data.appid=a["default"].AppID,i.data.openid=e.MaiLiangOpenId;var r=(new Date).getTime()/1e3;i.data.posttime=r;var s=0!=e.time?r-e.time:0;i.data.time=s,i.meth="POST",console.log("发送停留时间至买量接口"),e.request(i)}}else console.log("不在微信模式下调用，默认发送停留时间至买量接口失败"),n(null)},e.mainUrl="https://swtj.mrkzx.cn",e.uclick="/v1.1/api/Activity/uclick.html",e.stay="/v1.1/api/Activity/stay.html",e.key="",e.MaiLiangOpenId="",e.time=0,e}();n["default"]=l},{"../AppConfig":2,"../Net/HttpUnit":26,"../OPPOAPI":29,"../User/User":49,"../WXAPI":64}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameConfig"),a=e("./User/User"),i=e("./ui/layaMaxUI"),r=e("./View/LoadingView/LoadingView"),s=e("./Net/HttpUnit"),l=e("./WXAPI"),c=e("./AppConfig"),u=e("./Event/EventMgr"),d=e("./Event/EventDef"),h=e("./OPPOAPI"),f=e("./QQMiniGameAPI"),p=e("./TTAPI"),g=e("./ALD"),y=e("./VIVOAPI"),m=e("./NativeCallback"),v=function(){function e(){this._loadingUI=null,this._loadingView=null,this._preLoadRes=new Array,window.Laya3D?Laya3D.init(o["default"].width,o["default"].height):Laya.init(o["default"].width,o["default"].height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=o["default"].scaleMode,Laya.stage.screenMode=o["default"].screenMode,Laya.URL.exportSceneToJson=o["default"].exportSceneToJson,(o["default"].debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),o["default"].physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),o["default"].stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,1==c["default"].onTTMiniGame&&(Laya.Browser.onMiniGame=!1),Laya.Browser.onMiniGame||Laya.Browser.onQGMiniGame||Laya.Browser.onQQMiniGame||c["default"].onTTMiniGame||(c["default"].ResServer=c["default"].LocalTestReServer),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return e.prototype.onVersionLoaded=function(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))},e.prototype.onConfigLoaded=function(){Laya.loader.maxLoader=50,this.initLoadingView();var e=[{url:c["default"].ResServer+"/json/appswitch.json",type:Laya.Loader.JSON}],t=this;Laya.loader.load(e,Laya.Handler.create(this,function(){t.loadRes()})),u["default"].instance.regOnceEvent(d.EventDef.App_CloseFirstLoadingView,this,this.closeloadingUI)},e.prototype.initLoadingView=function(){this._loadingUI=new i.ui.View.LoadingUI,this._loadingUI.zOrder=2,Laya.stage.addChild(this._loadingUI),this._loadingUI.width=Laya.stage.width,this._loadingUI.height=Laya.stage.height,this._loadingView=this._loadingUI.getComponent(r["default"]),this._loadingView.setProcess(0)},e.prototype.postResToOpenDataContext=function(e){Laya.Browser.onMiniGame?(console.log("开始透传资源数据到开放域"),Laya.loader.load(["openRes/Rank.atlas"],Laya.Handler.create(null,function(){Laya.MiniAdpter.sendAtlasToOpenDataContext("openRes/Rank.atlas"),console.log("透传资源数据到开放域  完毕！！！"),e&&e()}))):e&&e()},e.prototype.preLoad=function(){this._preLoadRes.push({url:c["default"].ResServer+"/json/level.json",type:Laya.Loader.JSON}),this._preLoadRes.push({url:c["default"].LocalTestReServer+"/json/level.json",type:Laya.Loader.JSON})},e.prototype.loadRes=function(){var e=this;this.preLoad();var t=this._preLoadRes,n=this;if(Laya.Browser.onMiniGame){var o=Laya.Browser.window.wx.loadSubpackage({name:"subRes",success:function(o){t.length>0?Laya.loader.load(t,Laya.Handler.create(e,function(){n.onLoadResComplate()}),Laya.Handler.create(e,function(e){n._loadingView.setProcess(e/2+.5);
})):n.onLoadResComplate()},fail:function(t){e.loadRes()}});o.onProgressUpdate(function(e){n._loadingView.setProcess(e/2)})}else if(Laya.Browser.onQGMiniGame){var o=Laya.Browser.window.qg.loadSubpackage({name:"subRes",success:function(o){t.length>0?Laya.loader.load(t,Laya.Handler.create(e,function(){n.onLoadResComplate()}),Laya.Handler.create(e,function(e){n._loadingView.setProcess(e/2+.5)})):n.onLoadResComplate()},fail:function(t){e.loadRes()}});o.onProgressUpdate(function(e){var t=e.progress;e.totalBytesWritten,e.totalBytesExpectedToWrite;n._loadingView.setProcess(t/2)})}else if(Laya.Browser.onQQMiniGame){var o=Laya.Browser.window.qq.loadSubpackage({name:"subRes",success:function(o){t.length>0?Laya.loader.load(t,Laya.Handler.create(e,function(){n.onLoadResComplate()}),Laya.Handler.create(e,function(e){n._loadingView.setProcess(e/2+.5)})):n.onLoadResComplate()},fail:function(t){e.loadRes()}});o.onProgressUpdate(function(e){n._loadingView.setProcess(e/2)})}else t.length>0?Laya.loader.load(t,Laya.Handler.create(this,function(){n.onLoadResComplate()}),Laya.Handler.create(this,function(e){n._loadingView.setProcess(e)})):n.onLoadResComplate()},e.prototype.onLoadResComplate=function(){var e=this;if(this._loadingView.setProcess(1),Laya.Browser.onMiniGame)l["default"].wxLogin(function(e){var t=this;a["default"].code=e,s["default"].login(function(e){1==e.code?(console.log("登陆成功！！！"),a["default"].token=e.data.token,a["default"].openId=e.data.openid,g["default"].aldSendOpenId(a["default"].openId),s["default"].getGameData(function(e){console.log("获取用户数据成功！！！"),1==e.code?a["default"].initiUser(e.data):a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))},function(e){console.log("获取用户数据失败！！！"),a["default"].token="",a["default"].openId="",a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))})):(console.log("登陆失败！！！"+e),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){})))},function(e){console.log("登陆失败！！！"+e),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))})},null);else if(Laya.Browser.onQGMiniGame)h["default"].initAdService(function(){},function(){},function(){}),h["default"].Login(function(e){var t=this;a["default"].code=e,s["default"].login(function(e){1==e.code?(console.log("登陆成功！！！"),a["default"].token=e.data.token,a["default"].openId=e.data.openid,s["default"].getGameData(function(e){if(console.log("获取用户数据成功！！！"),1==e.code){a["default"].initiUser(e.data),console.log("获取用户数据--------------------Start");for(var n in e.data)console.log(n,e.data[n]);console.log("获取用户数据--------------------End")}else a["default"].initiUser(null);o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))},function(e){console.log("获取用户数据失败！！！"),a["default"].token="",a["default"].openId="",a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))})):(console.log("登陆失败！！！",e),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){})))},function(e){console.log("登陆失败！！！",e),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))})},null);else if(Laya.Browser.onQQMiniGame)f["default"].Login(function(e){var t=this;a["default"].code=e,s["default"].login(function(e){1==e.code?(console.log("登陆成功！！！"),a["default"].token=e.data.token,a["default"].openId=e.data.openid,g["default"].aldSendOpenId(a["default"].openId),s["default"].getGameData(function(e){console.log("获取用户数据成功！！！"),1==e.code?a["default"].initiUser(e.data):a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))},function(e){console.log("获取用户数据失败！！！"),a["default"].token="",a["default"].openId="",a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))})):(console.log("登陆失败！！！"+e),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){})))},function(e){console.log("登陆失败！！！"+e),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))})},null);else if(c["default"].onTTMiniGame)p["default"].ttLogin(function(e){var t=this;a["default"].code=e,s["default"].login(function(e){1==e.code?(console.log("登陆成功！！！"),a["default"].token=e.data.token,a["default"].openId=e.data.openid,s["default"].getGameData(function(e){console.log("获取用户数据成功！！！"),1==e.code?a["default"].initiUser(e.data):a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))},function(e){console.log("获取用户数据失败！！！"),a["default"].token="",a["default"].openId="",a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))})):(console.log("登陆失败！！！"+e),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){})))},function(e){console.log("登陆失败！！！"+e),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(t,function(){}))})},function(){a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(e,function(){}))});else if(Laya.Browser.onVVMiniGame){var t=function(){y["default"].Login(function(e,t){n(e)},function(){r()})},n=function(t){a["default"].code=t,s["default"].login(function(t){1==t.code?(console.log("登陆成功！！！"),a["default"].token=t.data.token,a["default"].openId=t.data.openid,s["default"].getGameData(function(t){if(console.log("获取用户数据成功！！！"),1==t.code){a["default"].initiUser(t.data),console.log("获取用户数据--------------------Start");for(var n in t.data)console.log(n,t.data[n]);console.log("获取用户数据--------------------End")}else a["default"].initiUser(null);o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(e,function(){}))},function(t){console.log("获取用户数据失败！！！"),a["default"].token="",a["default"].openId="",a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(e,function(){}))})):(console.log("登陆失败！！！",t),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(e,function(){})))},function(t){console.log("登陆失败！！！",t),a["default"].initiUser(null),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(e,function(){}))})},i=0,r=function(){return i>=1?(console.log("vivo 登陆失败！！！重试次数已达上限"),a["default"].initiUser(null),void(o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(e,function(){})))):void y["default"].showDialog("提示","登录失败，点击确定按钮重试",[{text:"确定",color:"#33dd44"}],function(){t(),++i},function(){},function(){})};t()}else a["default"].testInitUser(),o["default"].startScene&&Laya.Scene.open(o["default"].startScene,!1,Laya.Handler.create(this,function(){}))},e.prototype.closeloadingUI=function(){this._loadingUI&&!this._loadingUI.destroyed&&this._loadingUI.destroy()},e}();new v,Laya.Browser.window&&(Laya.Browser.window.NativeCallback=m["default"])},{"./ALD":1,"./AppConfig":2,"./Event/EventDef":7,"./Event/EventMgr":8,"./GameConfig":9,"./NativeCallback":24,"./Net/HttpUnit":26,"./OPPOAPI":29,"./QQMiniGameAPI":46,"./TTAPI":48,"./User/User":49,"./VIVOAPI":51,"./View/LoadingView/LoadingView":56,"./WXAPI":64,"./ui/layaMaxUI":65}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ViewMgr"),a=e("../User/User"),i=e("../Net/HttpUnit"),r=e("../MaiLiangAPI/MaiLiang"),s=e("../WXAPI"),l=e("./WudianMgr"),c=e("../ALD"),u=e("../QQMiniGameAPI"),d=e("../ParkingJam/View/GameScene3D"),h=e("../AppConfig"),f=e("./WXADMgr"),p=e("../CachedQQBannerAd"),g=function(e){function t(){var n=e.call(this)||this;return t._instance=n,n}return __extends(t,e),t.getInstance=function(){return t._instance},t.prototype.onAwake=function(){r["default"].GetMaiLiangOpenId(function(e){console.log("GameUI 买量数据上报成功"),Laya.Browser.window.wx.onShow(function(){r["default"].GetMaiLiangOpenId(null,null)}),Laya.Browser.window.wx.onHide(function(){r["default"].ReportStayTime(null,null)})},function(e){console.log("GameUI 买量数据上报失败")}),s["default"].SetShareMenu("","",function(){},function(){},function(){}),l["default"].UpdateIpBlockState(),this.reportLaunchOptions(),Laya.Browser.onMiniGame?f["default"].init():Laya.Browser.onQQMiniGame?(p["default"].preloadBanner(),u["default"].LoadAppBoxAd(function(){},function(){})):Laya.Browser.onQGMiniGame&&null!=Laya.Browser.window.qg.reportMonitor&&"function"==typeof Laya.Browser.window.qg.reportMonitor&&Laya.Browser.window.qg.reportMonitor("game_scene",0)},t.prototype.onStart=function(){this.preCreateGame()},t.prototype.preCreateGame=function(){this.load3DGameScene()},t.prototype.load3DGameScene=function(e){Laya.Scene3D.load(h["default"].LocalTestReServer+"/LayaScene_KLTCC_03/Conventional/KLTCC_03.ls",Laya.Handler.create(this,function(t){Laya.stage.addChild(t),t.addComponent(d["default"]),o["default"].instance.openView(o.ViewDef.GameView),null!=e&&e()}))},t.prototype.saveGameData=function(){localStorage.setItem("Game_Data",a["default"].getSaveData())},t.prototype.reportLaunchOptions=function(){i["default"].Getuserip(function(e){if(1==e.code){console.log("获取玩家ip,地区成功 ：",e.data.dqip,e.data.ipxq);var t=null;Laya.Browser.onMiniGame?t=s["default"].getLaunchOptionsSync():Laya.Browser.onQQMiniGame&&(t=u["default"].getLaunchOptionsSync()),null!=t&&c["default"].aldSendReportLaunchOptions(t.scene,e.data.dqip,e.data.ipxq)}},function(e){console.log("获取玩家ip,地区失败");var t=null;Laya.Browser.onMiniGame?t=s["default"].getLaunchOptionsSync():Laya.Browser.onQQMiniGame&&(t=u["default"].getLaunchOptionsSync()),null!=t&&c["default"].aldSendReportLaunchOptions(t.scene,"","")})},t._instance=null,t}(Laya.Script);n["default"]=g},{"../ALD":1,"../AppConfig":2,"../CachedQQBannerAd":3,"../MaiLiangAPI/MaiLiang":16,"../Net/HttpUnit":26,"../ParkingJam/View/GameScene3D":45,"../QQMiniGameAPI":46,"../User/User":49,"../WXAPI":64,"./ViewMgr":21,"./WXADMgr":22,"./WudianMgr":23}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this._enabled=!0}return Object.defineProperty(e.prototype,"Enabled",{get:function(){return this._enabled},set:function(e){e||this.stopBGM(),this._enabled=e},enumerable:!0,configurable:!0}),e.prototype.getSoundUrl=function(t){var n=e.soundResPath+t+".ogg";return n},e.prototype.playSound=function(t){if(this._enabled){var n=this.getSoundUrl(t);if(Laya.Browser.onMiniGame){var o=laya.utils.Pool.getItem(t);null==o&&(o=wx.createInnerAudioContext(),o.src=e.soundResPath+t+".ogg",o.onEnded(function(){laya.utils.Pool.recover(t,o),o.offEnded()})),o.play()}else Laya.SoundManager.playSound(n,1)}},e.prototype.playBGM=function(e){if(this._enabled){var t=this.getSoundUrl(e);Laya.Browser.onMiniGame?(this.bgm||(this.bgm=wx.createInnerAudioContext()),this.bgm.pause(),this.bgm.src=t,this.bgm.loop=!0,this.bgm.play()):Laya.SoundManager.playMusic(t,0)}},e.prototype.stopBGM=function(){Laya.Browser.onMiniGame?this.bgm&&this.bgm.pause():Laya.SoundManager.stopMusic()},e.soundResPath="subRes/sound/",e.instance=new e,e}();n["default"]=o},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.vibrateShort=function(){e.isEnable&&(Laya.Browser.onMiniGame?Laya.Browser.window.wx.vibrateShort():Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.vibrateShort():Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.vibrateShort())},e.ibrateLong=function(){e.isEnable&&(Laya.Browser.onMiniGame?Laya.Browser.window.wx.vibrateLong():Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.vibrateLong():Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.vibrateLong())},e.vibrate=function(t){if(e.isEnable)if(Laya.Browser.onMiniGame){var n=t/15,o=0,a={count:n,index:o};Laya.timer.loop(16,a,function(){e.vibrateShort(),o++,o>n&&Laya.timer.clearAll(a)})}else if(Laya.Browser.onQGMiniGame){var i=t/20,r=0,s={count:i,index:r};Laya.timer.loop(21,s,function(){e.vibrateShort(),r++,r>i&&Laya.timer.clearAll(s)})}else if(Laya.Browser.onQQMiniGame){var l=t/20,c=0,u={count:l,index:c};Laya.timer.loop(21,u,function(){e.vibrateShort(),c++,c>l&&Laya.timer.clearAll(u)})}},e.isEnable=!0,e}();n["default"]=o},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("../Config/AppSwitchConfig"),i=e("./WudianMgr");!function(e){e.None="",e.TipsView="View/TipsView.json",e.ClickGetPrize="View/ClickGetPrize.json",e.MainView="View/Template/MainViewTemplate.json",e.MiniGameView="View/Template/MiniGameViewTemplate.json",e.RewardView="View/Template/RewardViewTemplate.json",e.InGameView="View/Template/InGameViewTemplate.json",e.GameWinView="View/Template/GameWinViewTemplate.json",e.GameFailView="View/Template/GameFailViewTemplate.json",e.ExportView="View/Template/ExportViewTemplate.json",e.Export2View="View/Template/Export2ViewTemplate.json",e.Export3View="View/Template/Export3ViewTemplate.json",e.WXCrazyClick="View/Template/WXCrazyClick.json",e.OPPONativeView="View/Template/OPPONativeViewTemplate.json",e.QQCrazyClickView="View/Template/QQ/QQCrazyClick.json",e.QQCrazyClickView2="View/Template/QQ/QQCrazyClick2.json",e.TTStoreView="View/Template/TT/TTStore.json",e.TTSignInView="View/Template/TT/TTSignIn.json",e.TTRewardView="View/Template/TT/TTReward.json",e.VVNativeView1="View/Template/VV/VVNativeView1Template.json",e.VVNativeView2="View/Template/VV/VVNativeView2Template.json",e.GameView="View/GameView.json"}(o=n.ViewDef||(n.ViewDef={}));var r=function(){function e(){this._views={},this._loadingList=new Array}return e.prototype.openView=function(e,t,n){if(this._views[e]){var o=this._views[e],a=o._components,i=null;if(a)for(var r=0;r<a.length;r++){var s=a[r];if(s._viewBase){i=s,i.openView(t);break}}return void(n&&n(i))}for(var l=0;l<this._loadingList.length;++l){var c=this._loadingList[l];if(c==e)return void console.log("界面 : "+String(c)+" 正在加载中，请不要重复加载")}var u=String(e),d=this;this._loadingList.push(e),Laya.Scene.load(u,Laya.Handler.create(this,function(o){Laya.stage.addChild(o);var a=o;d._views[e]=a;var i=o._components,r=null;if(i)for(var s=0;s<i.length;s++){var l=i[s];if(l._viewBase){r=l,l._viewDef=e,r.openView(t);break}}for(var c=0;c<d._loadingList.length;++c){var u=d._loadingList[c];if(u==e){d._loadingList.splice(c,1);break}}n&&n(r)}))},e.prototype.closeView=function(e){var t=this._views[e];if(t){var n=t,o=n._components;if(o)for(var a=0;a<o.length;a++){var i=o[a];if(i._viewBase){i.onClose();break}}t.removeSelf(),t.destroy(),this._views[e]=null}},e.prototype.ShowView=function(e){var t=this._views[e];if(t){var n=t._components;if(n)for(var o=0;o<n.length;o++){var a=n[o];if(a._viewBase){a.show();break}}}},e.prototype.hideView=function(e){var t=this._views[e];if(t){var n=t._components;if(n)for(var o=0;o<n.length;o++){var a=n[o];if(a._viewBase){a.hide();break}}}},e.prototype.getView=function(e){return this._views[e]},e.prototype.showTips=function(e){this.openView(o.TipsView,e)},e.prototype.tryShowPopAd=function(t){1==a["default"].getInstance().getAppSwitchData().popAd&&i["default"].WudianFlag?e.instance.openView(o.Export3View,null,function(e){null!=t&&t(e)}):null!=t&&t(null)},e.instance=new e,e}();n["default"]=r},{"../Config/AppSwitchConfig":4,"./WudianMgr":23}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Config/AppSwitchConfig"),a=function(){function e(e){this._id=null,this._banner=null,this._createTime=0,this._destroyed=!1,this._error=null,this._loading=!1,this._retryCount=0,this._bannerTotalShowTime=0,this._lastShowTime=0,this._id=e}return Object.defineProperty(e.prototype,"Id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CreateTime",{get:function(){return this._createTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return null!=this._banner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return null!=this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Loading",{get:function(){return this._loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RetryCount",{get:function(){return this._retryCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BannerTotalShowTime",{get:function(){return this._bannerTotalShowTime},enumerable:!0,configurable:!0}),e.prototype.show=function(){if(this.isReady){this._banner.hide();var e=Laya.Browser.window.wx.getSystemInfoSync(),t=e.screenWidth,n=e.screenHeight,o=(new Laya.Point(0,0),300),a=t/2-o/2,i=n-130;this._banner.style.left=a,this._banner.style.top=i,this._lastShowTime=Laya.timer.currTimer,this._banner.show()}},e.prototype.hide=function(){this.isReady&&(this._banner.hide(),this._bannerTotalShowTime+=Laya.timer.currTimer-this._lastShowTime)},e.prototype.destroy=function(){return this._destroyed?void console.log("BannerAd 已经被销毁"):this._loading?void console.log("BannerAd 正在加载中，无法进行销毁"):(null!=this._banner&&this._banner.destroy(),this._banner=null,void(this._destroyed=!0))},e.prototype.retry=function(t){if(this._destroyed)return void console.log("BannerAd 已被销毁，无法重试");if(this.isReady)return void console.log("BannerAd 已创建成功，无需重试");if(this._loading)return void console.log("BannerAd 正在创建中");if(this._retryCount>=e.MAX_RETRY_COUNT)return void console.log("此 BannerAd 重试次数已达最大");var n=this;this._create(function(e){null!=t&&t(e),++n._retryCount})},e.prototype._create=function(e){if(!Laya.Browser.onMiniGame)return void(null!=e&&e(!1));var t=null;if(Laya.Browser.onMiniGame?t=Laya.Browser.window.wx.createBannerAd({adUnitId:this._id,adIntervals:30,style:{left:0,top:0,width:300}}):Laya.Browser.onQQMiniGame&&(t=Laya.Browser.window.qq.createBannerAd({adUnitId:this._id,adIntervals:30,style:{left:0,top:0,width:300}})),null!=t){var n=this;this._loading=!0,t.onLoad(function(o){console.log("BannderAd 加载完成",n._id,o),n._banner=t,n._createTime=Laya.timer.currTimer,n._loading=!1,null!=e&&e(!0)}),t.onError(function(o){console.log("BannderAd 加载失败",n._id,o),n._error=o,n._loading=!1,t.destroy(),null!=e&&e(!1)})}},e.MAX_RETRY_COUNT=3,e}();n.WXBannderAd=a;var i=function(){function e(e){this._id=null,this._gridAd=null,this._createTime=0,this._destroyed=!1,this._error=null,this._loading=!1,this._id=e}return Object.defineProperty(e.prototype,"CreateTime",{get:function(){return this._createTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return null!=this._gridAd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return null!=this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Loading",{get:function(){return this._loading},enumerable:!0,configurable:!0}),e.prototype.show=function(){this.isReady&&this._gridAd.show()},e.prototype.hide=function(){this.isReady&&this._gridAd.hide()},e.prototype.destroy=function(){return this._destroyed?void console.log("GridAD 已经被销毁"):this._loading?void console.log("GridAD 正在加载中，无法进行销毁"):(null!=this._gridAd&&this._gridAd.destroy(),this._gridAd=null,void(this._destroyed=!0))},e.prototype.retry=function(e){if(this._destroyed)return void console.log("GridAD 已被销毁，无法重试");if(this.isReady)return void console.log("GridAD 已创建成功，无需重试");if(this._loading)return void console.log("GridAD 正在创建中");this._create(function(t){null!=e&&e(t)})},e.prototype._create=function(e){if(!Laya.Browser.onMiniGame)return void(null!=e&&e(!1));var t=Laya.Browser.window.wx.createGridAd({adUnitId:this._id,adIntervals:30,style:{left:0,top:0,width:300,height:150}});if(null!=t){var n=this;this._loading=!0,t.onLoad(function(o){console.log("GridAD 加载完成",n._id,o),n._gridAd=t,n._createTime=Laya.timer.currTimer,n._loading=!1,null!=e&&e(!0)}),t.onError(function(o){console.log("GridAD 加载失败",n._id,o),n._error=o,n._loading=!1,t.destroy(),null!=e&&e(!1)})}},e}();n.WXGridAd=i;var r=function(){function e(){}return e.init=function(){if(!e._inited){for(var t=o["default"].getInstance().getAppSwitchData().wxWuDianBanners,n=0;n<t.length;++n)e._bannerIds.push(t[n]);for(var n=0;n<e._bannerIds.length;++n){e._bannerIds[n];e._bannerIds[n]=t[Math.floor(Math.random()*t.length)]}e._createBannerAd();var a=1e3*o["default"].getInstance().getAppSwitchData().bannerCreateFailNum;Laya.timer.loop(a,e,function(){e._checkBannerAd(),e._createBannerAd()}),e._inited=!0}},e.getBanner=function(t){for(var n=[],o=[],a=0;a<e._banners.length;++a){var i=e._banners[a];i.Destroyed||(i.isReady?n.push(i):o.push(i))}e._curBannerGetIndex>=n.length&&(e._curBannerGetIndex=0);var r=n[e._curBannerGetIndex];++e._curBannerGetIndex,null!=r?t(r):(r=e._createBannerAd(),null==r&&(r=e._banners[Math.floor(Math.random()*e._banners.length)]),null==r?t(null):r.retry(function(e){t(e?r:null)}))},e._createBannerAd=function(){if(e._curBannerCreateIndex>=e._bannerIds.length)return null;var t=new a(e._bannerIds[e._curBannerCreateIndex]);return e._banners.push(t),t.retry(),++e._curBannerCreateIndex,t},e._checkBannerAd=function(){for(var t=[],n=[],i=0;i<e._banners.length;++i){var r=e._banners[i];r.Destroyed||(r.isReady?t.push(r):n.push(r))}for(var i=0;i<e._banners.length;++i){var r=e._banners[i],s=o["default"].getInstance().getAppSwitchData().bannerShowTime;r.isReady?t.length>=2&&r.BannerTotalShowTime>=1e3*s&&(console.log("BannerAd 展示时间超过限制，销毁 : ",r.Id),r.destroy()):r.RetryCount>=a.MAX_RETRY_COUNT?(console.log("BannerAd 超过重试次数，销毁 : ",r.Id),r.destroy()):r.retry()}},e.getBoxAd=function(e){if(this._wxGridAd.isReady)e(this._wxGridAd);else{var t=this._wxGridAd;t.retry(function(n){e(n?t:null)})}},e._createGirdAd=function(){if(null==this._wxGridAd){var e=new i("");e.retry(),this._wxGridAd=e}},e._inited=!1,e._bannerIds=new Array,e._banners=new Array,e._curBannerCreateIndex=0,e._curBannerGetIndex=0,e._wxGridAd=null,e}();n["default"]=r},{"../Config/AppSwitchConfig":4}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Net/HttpUnit"),a=e("../Config/AppSwitchConfig"),i=e("../WXAPI"),r=e("../QQMiniGameAPI"),s=e("../Event/EventMgr"),l=e("../Event/EventDef"),c=function(){function e(){}return e.IpBlockFlag=function(){return this._ipBlockFlag},e.UpdateIpBlockState=function(){o["default"].GetIpBlock(function(t){console.log("调用IpBlock接口成功,结果为:",t),e._ipBlockFlag=t.code,s["default"].instance.dispatch(l.EventDef.App_OnUpdateIpBlockState,{ipBlockFlag:e._ipBlockFlag})},null)},e.GetIpBlocked=function(){return 0==this._ipBlockFlag},e.GetEntryScene=function(){return 1006==i["default"].getLaunchOptionsSync().scene},e.IsSwitchOpen=function(){var e=1==a["default"].getInstance().getAppSwitchData().wudian,t=a["default"].getInstance().getAppSwitchData().wudianTimeAvaliable;return console.log("误点Flag状态: ","总开关:",e,"打开时间",t),e&&t},Object.defineProperty(e,"WudianFlag",{get:function(){var e=1==a["default"].getInstance().getAppSwitchData().wudian,t=null;Laya.Browser.onMiniGame?t=i["default"].getLaunchOptionsSync().scene:Laya.Browser.onQQMiniGame&&(t=r["default"].getLaunchOptionsSync().scene);for(var n=!0,o=a["default"].getInstance().getAppSwitchData().wudianSceneList,s=0;s<o.length;++s){var l=o[s];t==l&&(n=!1)}var c=a["default"].getInstance().getAppSwitchData().wudianTimeAvaliable,u=0==this._ipBlockFlag;return console.log("误点Flag状态: ","总开关:",e,"场景进入",n,"IP未被屏蔽",u,"打开时间",c),e&&n&&u&&c},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NoTimeWudianFlag",{get:function(){var e=1==a["default"].getInstance().getAppSwitchData().wudian,t=null;Laya.Browser.onMiniGame?t=i["default"].getLaunchOptionsSync().scene:Laya.Browser.onQQMiniGame&&(t=r["default"].getLaunchOptionsSync().scene);for(var n=!0,o=a["default"].getInstance().getAppSwitchData().wudianSceneList,s=0;s<o.length;++s){var l=o[s];t==l&&(n=!1)}var c=0==this._ipBlockFlag;return console.log("误点Flag状态: ","总开关:",e,"场景进入",n,"IP未被屏蔽"),e&&n&&c},enumerable:!0,configurable:!0}),e._ipBlockFlag=-1,e}();n["default"]=c},{"../Config/AppSwitchConfig":4,"../Event/EventDef":7,"../Event/EventMgr":8,"../Net/HttpUnit":26,"../QQMiniGameAPI":46,"../WXAPI":64}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Event/EventMgr"),a=e("./Event/EventDef"),i=function(){function e(){}return e.onVideoFail=function(){o["default"].instance.dispatch(a.EventDef.RewardVideoFail),Laya.SoundManager.muted=!1},e.onVideoSuccess=function(e){o["default"].instance.dispatch(a.EventDef.RewardVideoSuccess,e),Laya.SoundManager.muted=!1},e.onInsertVideoEnd=function(){console.debug("onInsertVideoEnd    --------- ------------ "),o["default"].instance.dispatch(a.EventDef.InsertVideoEnd),Laya.SoundManager.muted=!1},e.onPause=function(){console.debug("进入后台 静音"),Laya.SoundManager.muted=!0},e.onResume=function(){console.debug("恢复---------"),Laya.SoundManager.muted=!1},e.CallNativeFunc=function(e){if(Laya.Browser.onAndroid){var t=window.PlatformClass.createClass("demo.JSBridge");t.call(e)}else Laya.Browser.onIOS},e.ShowLog=function(e){if(console.log("输出native日志---"+e),Laya.Browser.onAndroid){var t=window.PlatformClass.createClass("demo.JSBridge");t.call("showLog",e)}else Laya.Browser.onIOS},e.NowVideoType="",e.conchIOS="Conch-ios",e.conchAndroid="Conch-android",e.os="",e}();n["default"]=i},{"./Event/EventDef":7,"./Event/EventMgr":8}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./aes.js"),a=function(){function e(){}return e.encrypt=function(t){var n=o.enc.Utf8.parse(e.KEY),a=o.enc.Utf8.parse(e.IV),i=o.AES.encrypt(t,n,{iv:a,mode:o.mode.CBC,padding:o.pad.Pkcs7});return i.toString()},e.decrypt=function(t){var n=o.enc.Utf8.parse(e.KEY),a=o.enc.Utf8.parse(e.IV),i=o.AES.decrypt(t,n,{iv:a,padding:o.pad.Pkcs7});return i.toString(o.enc.Utf8)},e.KEY="b#63fFJ6AvkK3YT*",e.IV="J$f4DU%sNL73M&Go",e}();n["default"]=a},{"./aes.js":28}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./NetConfig"),a=e("../User/User"),i=e("./AesTools"),r=e("../AppConfig"),s=function(){function e(){this.meth="post",this.url="",this.onSuccess=null,this.onFail=null,this.data={}}return e}();n.requestData=s;var l=function(){function e(){}return e.request=function(e){e.url.indexOf("https://")>-1||e.url.indexOf("http://")>-1?e.url=e.url:e.url=o["default"].serverUrl+e.url;var t=function(t){console.log(t,"http Success"),e.onSuccess&&e.onSuccess(t),e.onSuccess=null,e=null},n=function(t){console.log(t,"http fail"),e.onFail&&e.onFail(t),e.onFail=null,e=null},s=new Laya.HttpRequest;s.once(Laya.Event.COMPLETE,this,t),s.once(Laya.Event.ERROR,this,n);JSON.stringify(e.data);Laya.Browser.onMiniGame||r["default"].onTTMiniGame?e.data.code=a["default"].code:Laya.Browser.onQGMiniGame?e.data.oppotoken=a["default"].code:Laya.Browser.onQQMiniGame?e.data.code=a["default"].code:e.data.code=a["default"].code;var l="time="+String(Date.now()),c=["Content-Type","application/json","state",o["default"].state,"gameid",o["default"].gameid,"sign",i["default"].encrypt(l)];a["default"].token&&(c.push("token"),c.push(a["default"].token)),s.send(e.url,JSON.stringify(e.data),e.meth,"json",c)},e.login=function(t,n){var a=new s;a.url=o["default"].Login,a.onSuccess=t,a.onFail=n,e.request(a)},e.saveGameData=function(t,n,a){var i=new s;i.url=o["default"].SaveGameData,i.data.gameData=t,i.onSuccess=n,i.onFail=a,e.request(i)},e.getGameData=function(t,n){var a=new s;a.url=o["default"].GetUser,a.onSuccess=t,a.onFail=n,e.request(a)},e.GetIpBlock=function(t,n){if(-1!=o["default"].gameid){var a=new s;a.url=o["default"].IpBlock,a.onSuccess=t,a.onFail=n,e.request(a)}},e.reportExport=function(t,n,a,i){var r=new s;r.url=o["default"].reportExport,r.data.wbappid=t,r.data.game_name=n,r.onSuccess=a,r.onFail=i,e.request(r)},e.reportImport=function(t,n,a,i){var r=new s;r.url=o["default"].reportImport,r.data.wbappid=t,r.data.channel=n,r.onSuccess=a,r.onFail=i,e.request(r)},e.Getuserip=function(t,n){var a=new s;a.url=o["default"].getuserip,a.onSuccess=t,a.onFail=n,e.request(a)},e.SignIn=function(t,n){var a=new s;a.url=o["default"].signin,a.onSuccess=t,a.onFail=n,a.data.type=1,e.request(a)},e.GetSignIn=function(t,n){var a=new s;a.url=o["default"].signin,a.onSuccess=t,a.onFail=n,a.data.type=0,e.request(a)},e}();n["default"]=l},{"../AppConfig":2,"../User/User":49,"./AesTools":25,"./NetConfig":27}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.state=0,e.gameid=82,e.serverUrl="",e.Login="",e.SaveGameData="",e.GetUser="",e.IpBlock="",e.reportExport="",e.reportImport="",e.getuserip="",e.signin="",e}();n["default"]=o},{}],28:[function(e,t,n){var o=o||function(e,t){var n={},o=n.lib={},a=function(){},i=o.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=o.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var a=0;e>a;a++)t[o+a>>>2]|=(n[a>>>2]>>>24-8*(a%4)&255)<<24-8*((o+a)%4);else if(65535<n.length)for(a=0;e>a;a+=4)t[o+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=0;t>o;o+=4)n.push(4294967296*e.random()|0);return new r.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;e>o;o++){var a=t[o>>>2]>>>24-8*(o%4)&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;t>o;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return new r.init(n,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;e>o;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;t>o;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return new r.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes;
},_process:function(t){var n=this._data,o=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,a=e.min(4*t,a),t){for(var l=0;t>l;l+=i)this._doProcessBlock(o,l);l=o.splice(0,t),n.sigBytes-=a}return new r.init(l,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(){var e=o,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp(),e=[];for(var a=0;n>a;a+=3)for(var i=(t[a>>>2]>>>24-8*(a%4)&255)<<16|(t[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|t[a+2>>>2]>>>24-8*((a+2)%4)&255,r=0;4>r&&n>a+.75*r;r++)e.push(o.charAt(i>>>6*(3-r)&63));if(t=o.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,o=this._map,a=o.charAt(64);a&&(a=e.indexOf(a),-1!=a&&(n=a));for(var a=[],i=0,r=0;n>r;r++)if(r%4){var s=o.indexOf(e.charAt(r-1))<<2*(r%4),l=o.indexOf(e.charAt(r))>>>6-2*(r%4);a[i>>>2]|=(s|l)<<24-8*(i%4),i++}return t.create(a,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,o,a,i,r){return e=e+(t&n|~t&o)+a+r,(e<<i|e>>>32-i)+t}function n(e,t,n,o,a,i,r){return e=e+(t&o|n&~o)+a+r,(e<<i|e>>>32-i)+t}function a(e,t,n,o,a,i,r){return e=e+(t^n^o)+a+r,(e<<i|e>>>32-i)+t}function i(e,t,n,o,a,i,r){return e=e+(n^(t|~o))+a+r,(e<<i|e>>>32-i)+t}for(var r=o,s=r.lib,l=s.WordArray,c=s.Hasher,s=r.algo,u=[],d=0;64>d;d++)u[d]=4294967296*e.abs(e.sin(d+1))|0;s=s.MD5=c.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,o){for(var r=0;16>r;r++){var s=o+r,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var r=this._hash.words,s=e[o+0],l=e[o+1],c=e[o+2],d=e[o+3],h=e[o+4],f=e[o+5],p=e[o+6],g=e[o+7],y=e[o+8],m=e[o+9],v=e[o+10],w=e[o+11],_=e[o+12],L=e[o+13],S=e[o+14],C=e[o+15],A=r[0],B=r[1],b=r[2],M=r[3],A=t(A,B,b,M,s,7,u[0]),M=t(M,A,B,b,l,12,u[1]),b=t(b,M,A,B,c,17,u[2]),B=t(B,b,M,A,d,22,u[3]),A=t(A,B,b,M,h,7,u[4]),M=t(M,A,B,b,f,12,u[5]),b=t(b,M,A,B,p,17,u[6]),B=t(B,b,M,A,g,22,u[7]),A=t(A,B,b,M,y,7,u[8]),M=t(M,A,B,b,m,12,u[9]),b=t(b,M,A,B,v,17,u[10]),B=t(B,b,M,A,w,22,u[11]),A=t(A,B,b,M,_,7,u[12]),M=t(M,A,B,b,L,12,u[13]),b=t(b,M,A,B,S,17,u[14]),B=t(B,b,M,A,C,22,u[15]),A=n(A,B,b,M,l,5,u[16]),M=n(M,A,B,b,p,9,u[17]),b=n(b,M,A,B,w,14,u[18]),B=n(B,b,M,A,s,20,u[19]),A=n(A,B,b,M,f,5,u[20]),M=n(M,A,B,b,v,9,u[21]),b=n(b,M,A,B,C,14,u[22]),B=n(B,b,M,A,h,20,u[23]),A=n(A,B,b,M,m,5,u[24]),M=n(M,A,B,b,S,9,u[25]),b=n(b,M,A,B,d,14,u[26]),B=n(B,b,M,A,y,20,u[27]),A=n(A,B,b,M,L,5,u[28]),M=n(M,A,B,b,c,9,u[29]),b=n(b,M,A,B,g,14,u[30]),B=n(B,b,M,A,_,20,u[31]),A=a(A,B,b,M,f,4,u[32]),M=a(M,A,B,b,y,11,u[33]),b=a(b,M,A,B,w,16,u[34]),B=a(B,b,M,A,S,23,u[35]),A=a(A,B,b,M,l,4,u[36]),M=a(M,A,B,b,h,11,u[37]),b=a(b,M,A,B,g,16,u[38]),B=a(B,b,M,A,v,23,u[39]),A=a(A,B,b,M,L,4,u[40]),M=a(M,A,B,b,s,11,u[41]),b=a(b,M,A,B,d,16,u[42]),B=a(B,b,M,A,p,23,u[43]),A=a(A,B,b,M,m,4,u[44]),M=a(M,A,B,b,_,11,u[45]),b=a(b,M,A,B,C,16,u[46]),B=a(B,b,M,A,c,23,u[47]),A=i(A,B,b,M,s,6,u[48]),M=i(M,A,B,b,g,10,u[49]),b=i(b,M,A,B,S,15,u[50]),B=i(B,b,M,A,f,21,u[51]),A=i(A,B,b,M,_,6,u[52]),M=i(M,A,B,b,d,10,u[53]),b=i(b,M,A,B,v,15,u[54]),B=i(B,b,M,A,l,21,u[55]),A=i(A,B,b,M,y,6,u[56]),M=i(M,A,B,b,C,10,u[57]),b=i(b,M,A,B,p,15,u[58]),B=i(B,b,M,A,L,21,u[59]),A=i(A,B,b,M,h,6,u[60]),M=i(M,A,B,b,w,10,u[61]),b=i(b,M,A,B,c,15,u[62]),B=i(B,b,M,A,m,21,u[63]);r[0]=r[0]+A|0,r[1]=r[1]+B|0,r[2]=r[2]+b|0,r[3]=r[3]+M|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var i=e.floor(o/4294967296);for(n[(a+64>>>9<<4)+15]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[(a+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,o=0;4>o;o++)a=n[o],n[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),r.MD5=c._createHelper(s),r.HmacMD5=c._createHmacHelper(s)}(Math),function(){var e=o,t=e.lib,n=t.Base,a=t.WordArray,t=e.algo,i=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=n.hasher.create(),i=a.create(),r=i.words,s=n.keySize,n=n.iterations;r.length<s;){l&&o.update(l);var l=o.update(e).finalize(t);o.reset();for(var c=1;n>c;c++)l=o.finalize(l),o.reset();i.concat(l)}return i.sigBytes=4*s,i}});e.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),o.lib.Cipher||function(e){var t=o,n=t.lib,a=n.Base,i=n.WordArray,r=n.BufferedBlockAlgorithm,s=t.enc.Base64,l=t.algo.EvpKDF,c=n.Cipher=r.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,o){return("string"==typeof n?g:p).encrypt(e,t,n,o)},decrypt:function(t,n,o){return("string"==typeof n?g:p).decrypt(e,t,n,o)}}}});n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=t.mode={},d=function(t,n,o){var a=this._iv;a?this._iv=e:a=this._prevBlock;for(var i=0;o>i;i++)t[n+i]^=a[i]},h=(n.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();h.Encryptor=h.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize;d.call(this,e,t,o),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+o)}}),h.Decryptor=h.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,a=e.slice(t,t+o);n.decryptBlock(e,t),d.call(this,e,t,o),this._prevBlock=a}}),u=u.CBC=h,h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,o=n<<24|n<<16|n<<8|n,a=[],r=0;n>r;r+=4)a.push(o);n=i.create(a,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:h}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=n.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),u=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){e=s.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:n})}},p=n.SerializableCipher=a.extend({cfg:a.extend({format:u}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var a=e.createEncryptor(n,o);return t=a.finalize(t),a=a.cfg,f.create({ciphertext:t,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(n,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,o){return o||(o=i.random(8)),e=l.create({keySize:t+n}).compute(e,o),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,f.create({key:e,iv:n,salt:o})}},g=n.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:t}),encrypt:function(e,t,n,o){return o=this.cfg.extend(o),n=o.kdf.execute(n,e.keySize,e.ivSize),o.iv=n.iv,e=p.encrypt.call(this,e,t,n.key,o),e.mixIn(n),e},decrypt:function(e,t,n,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),n=o.kdf.execute(n,e.keySize,e.ivSize,t.salt),o.iv=n.iv,p.decrypt.call(this,e,t,n.key,o)}})}(),function(){for(var e=o,t=e.lib.BlockCipher,n=e.algo,a=[],i=[],r=[],s=[],l=[],c=[],u=[],d=[],h=[],f=[],p=[],g=0;256>g;g++)p[g]=128>g?g<<1:g<<1^283;for(var y=0,m=0,g=0;256>g;g++){var v=m^m<<1^m<<2^m<<3^m<<4,v=v>>>8^255&v^99;a[y]=v,i[v]=y;var w=p[y],_=p[w],L=p[_],S=257*p[v]^16843008*v;r[y]=S<<24|S>>>8,s[y]=S<<16|S>>>16,l[y]=S<<8|S>>>24,c[y]=S,S=16843009*L^65537*_^257*w^16843008*y,u[v]=S<<24|S>>>8,d[v]=S<<16|S>>>16,h[v]=S<<8|S>>>24,f[v]=S,y?(y=w^p[p[p[L^w]]],m^=p[p[m]]):y=m=1}var C=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],i=0;e>i;i++)if(n>i)o[i]=t[i];else{var r=o[i-1];i%n?n>6&&4==i%n&&(r=a[r>>>24]<<24|a[r>>>16&255]<<16|a[r>>>8&255]<<8|a[255&r]):(r=r<<8|r>>>24,r=a[r>>>24]<<24|a[r>>>16&255]<<16|a[r>>>8&255]<<8|a[255&r],r^=C[i/n|0]<<24),o[i]=o[i-n]^r}for(t=this._invKeySchedule=[],n=0;e>n;n++)i=e-n,r=n%4?o[i]:o[i-4],t[n]=4>n||4>=i?r:u[a[r>>>24]]^d[a[r>>>16&255]]^h[a[r>>>8&255]]^f[a[255&r]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,s,l,c,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,a,i,r,s){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],f=4,p=1;l>p;p++)var g=o[c>>>24]^a[u>>>16&255]^i[d>>>8&255]^r[255&h]^n[f++],y=o[u>>>24]^a[d>>>16&255]^i[h>>>8&255]^r[255&c]^n[f++],m=o[d>>>24]^a[h>>>16&255]^i[c>>>8&255]^r[255&u]^n[f++],h=o[h>>>24]^a[c>>>16&255]^i[u>>>8&255]^r[255&d]^n[f++],c=g,u=y,d=m;g=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^n[f++],y=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^n[f++],m=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^n[f++],h=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[f++],e[t]=g,e[t+1]=y,e[t+2]=m,e[t+3]=h},keySize:8});e.AES=t._createHelper(n)}(),t.exports=o},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AppConfig"),a=e("./Net/HttpUnit"),i=e("./Config/AppSwitchConfig"),r=e("./Mgr/ViewMgr"),s=function(){function e(){}return Object.defineProperty(e,"BannerInstance",{get:function(){return this._banner},enumerable:!0,configurable:!0}),e.Login=function(e,t){Laya.Browser.onQGMiniGame&&Laya.Browser.window.qg.login({success:function(t){var n=t.data.token;e(n),console.log("OPPO 登陆成功,获取到 token : "+n);for(var o in t)console.log(o,t[o])},fail:function(e){console.log("OPPO 登陆失败",e);for(var t in e)console.log(t,e[t])}})},e.initAdService=function(e,t,n){Laya.Browser.window.qg.initAdService({appId:o["default"].AppID,isDebug:!1,success:function(t){console.log("oppo initAdService success"),e&&e(t)},fail:function(e){console.log("oppo initAdService fail: ",e.code,e.msg),t&&t(e)},complete:function(e){console.log("oppo initAdService complete"),n&&n(e)}})},e.showRewardedVideoAd=function(t,n){if(Laya.Browser.onQGMiniGame){var o=Laya.Browser.window.qg.createRewardedVideoAd({posId:e.adUnitId});o.onLoad(function(){console.log("oppo 视频广告加载完成"),o.show()}),o.onVideoStart(function(){console.log("oppo 视频广告开始播放")}),o.onClose(function(e){e.isEnded?(console.log("oppo 视频广告观看 完成"),t(!0)):(console.log("oppo 视频广告观看 未完成"),t(!1)),o.destroy()}),o.onError(function(e){console.log("oppo 视频广告获取失败",e),o.destroy(),n()}),o.load()}else t(!0)},e.navigateToMiniProgram=function(e,t,n,i,r,s){if(Laya.Browser.onQGMiniGame){console.log("OPPO 跳转游戏： "+e),a["default"].reportExport(e,t,function(e){1==e.code?console.log("OPPO 导出上报成功"):console.log("OPPO 导出上报失败",e.msg)},function(e){console.log("OPPO 导出上报失败");for(var t in e)console.log(t,e[t])});for(var l=Date.now();Date.now()-l<=500;);Laya.Browser.window.qg.navigateToMiniGame({pkgName:e,path:n,extraData:{from:o["default"].AppID},envVersion:"release",success:function(e){i&&i(e)},fail:function(e){r&&r(e)}})}},e.showInterstitialAd=function(t,n){if(Laya.Browser.onQGMiniGame){var o=qg.createInsertAd({posId:e.InsAdUnitId});o.load(),o.onLoad(function(){console.log("插屏广告加载完成"),o.show()}),o.onShow(function(){console.log("插屏广告显示成功")}),o.onError(function(e){console.log("插屏广告拉取失败",e),o.destroy(),n&&n()})}else t()},e.showBannaer=function(){if(e._banner)return void e._banner.show();var t=qg.createBannerAd({posId:e.bannerAdUnitId});t.show(),e._banner=t},e.hideBanner=function(){e._banner&&e._banner.hide()},e.destroyBanner=function(){e._banner&&e._banner.destroy(),e._banner=null},e.getLaunchOptionsSync=function(){var e={query:"",referrerInfo:{"package":"",extraData:{appid:""}}};if(Laya.Browser.onQGMiniGame){var t=Laya.Browser.window.qg.getLaunchOptionsSync();return null!=t&&""!=t?e=t:console.log("没有启动设置！！！"),e}return e},e.share=function(e,t,n){e(!1)},e.createDesktopIcon=function(e,t){Laya.Browser.onQGMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(n){0==n?Laya.Browser.window.qg.installShortcut({success:function(){e&&e()},fail:function(e){t&&t(),console.log("创建桌面图标失败！！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):(console.log("桌面图标已存在！！！！"),t&&t())},fail:function(e){t&&t(),console.log("判断桌面图标是否存在失败！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):t&&t()},e.autoPopCreateDestopIcon=function(t,n){if(!Laya.Browser.onQGMiniGame)return void(null!=n&&n());var o=Math.floor(100*Math.random());o<=i["default"].getInstance().getAppSwitchData().oppocfg.addToDesktop?e.createDesktopIcon(t,n):null!=n&&n()},e.showNativeAd=function(e,t){return Laya.Browser.onQGMiniGame?void(1==i["default"].getInstance().getAppSwitchData().oppocfg.yuanshengSwitch?r["default"].instance.openView(r.ViewDef.OPPONativeView,null,function(t){null!=e&&e(t)}):null!=t&&t()):void(null!=t&&t())},e.adUnitId="",e.bannerAdUnitId="",e.InsAdUnitId="",e.OpenScreenAdUnitId="",e.NativeAdId="",e._banner=null,e}();n["default"]=s},{"./AppConfig":2,"./Config/AppSwitchConfig":4,"./Mgr/ViewMgr":21,"./Net/HttpUnit":26}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("../Util/Utils");!function(e){e[e.None=0]="None",e[e.Acting=1]="Acting"}(o||(o={}));var i=function(e){function t(){var t=e.call(this)||this;return t.srcScale=new Laya.Vector2,t.actionTime=100,t.state=o.None,t}return __extends(t,e),t.prototype.onAwake=function(){this.sp=this.owner,this.srcScale.x=this.sp.scaleX,this.srcScale.y=this.sp.scaleY},t.prototype.onUpdate=function(){var e=this;this.sp.visible?this.state==o.None&&(this.state=o.Acting,Laya.timer.clearAll(this),Laya.timer.loop(1e3*a["default"].getInstance().randomRange(2,4),this,function(){e._tweenAction(4)})):(this.state==o.Acting&&Laya.timer.clearAll(this),this.state=o.None)},t.prototype._tweenAction=function(e){var t=this;if(e--,0>e)return void Laya.Tween.to(this.sp,{scaleX:this.srcScale.x,scaleY:this.srcScale.y},this.actionTime);var n=function(){t._tweenAction(e)};Laya.Tween.to(this.sp,{scaleX:a["default"].getInstance().floatRandomRange(.9,1.2),scaleY:a["default"].getInstance().floatRandomRange(.9,1.2)},this.actionTime,null,Laya.Handler.create(this,n))},t}(Laya.Script);n["default"]=i},{"../Util/Utils":44}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=e.call(this)||this;return t.space=0,t.lastWidth=0,t}return __extends(t,e),t.prototype.onAwake=function(){this.compo=this.owner,this.font=this.owner.getChildByName("FontClip"),this.label=this.owner.getChildByName("Text")},t.prototype.onUpdate=function(){var e=0;if(this.font&&(e=this.font.width),this.label&&(e=this.label.width),this.lastWidth!=e){for(var t=0,n=0,o=this.compo._children;n<o.length;n++){var a=o[n],i=a;t+=i.width}t+=(this.compo.numChildren-1)*this.space;for(var r=.5*(this.compo.width-t),s=0;s<this.compo.numChildren;s++){var i=this.compo._children[s];i.x=r,r+=i.width+this.space}this.lastWidth=e}},t.prototype.setNum=function(e){this.font&&(this.font.value=String(e)),this.label&&(this.label.text=String(e))},t}(Laya.Script);n["default"]=o},{}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o;!function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.PlayingCartoon=2]="PlayingCartoon"}(o=n.ObjectState||(n.ObjectState={}));var a;!function(e){e[e.None=0]="None",e[e.Idle=1]="Idle",e[e.Move=2]="Move",e[e.MoveAction=3]="MoveAction",e[e.Collide=4]="Collide",e[e.CollideAction=5]="CollideAction"}(a=n.CarState||(n.CarState={}))},{}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Config/LevelConfig"),a=e("./Model/Car"),i=e("./Model/GameObject"),r=e("../../Config/RogueLevelConfig"),s=e("./Model/Plane"),l=e("./Model/Street"),c=e("../Constants"),u=e("../../Event/EventMgr"),d=e("../../Event/EventDef"),h=e("../Util/RoundTableRandom"),f=function(){function e(e){this.cur=e.clone(),this.start=e.clone()}return e.prototype.setY=function(e){this.cur.y=e},e.prototype.setXZ=function(e,t){this.cur.x=e,this.cur.z=t},e.prototype.addXZ=function(e,t){this.cur.x+=e,this.cur.z+=t},e.prototype.addSrcXZ=function(e,t){this.start.x+=e,this.start.z+=t},e.prototype.setXY=function(e,t){this.cur.x=e,this.cur.y=t},e.prototype.addXY=function(e,t){this.cur.x+=e,this.cur.y+=t},e.prototype.addSrcXY=function(e,t){this.start.x+=e,this.start.y+=t},e}(),p=function(){function e(e){this.carNum=0,this.cars=[],this.rand=new h["default"],this.defaultSize=new Laya.Size(5,5),this.objs=[],this.levelLayouts=[],this.ctrl=e}return e.prototype.createLevel=function(e){var t=!1,n=(r.RogueLevelConfig.getInstance(),o.LevelConfig.getInstance()),a=null;1==e?this.ctrl.isGuide=!0:this.ctrl.isGuide=!1;var i=n.getDataLength();e>i&&(e=this.randomRange(2,o.LevelConfig.getInstance().getDataLength())),this.clearCars(),this.clearObjs(),console.log("第",e,"关"),t?this.createRogueLevel(a):this.createLevelWithConfig(o.LevelConfig.getInstance().getData(e-1))},e.prototype.createRogueLevel=function(e){var t=this.ctrl,n=this.rand,o=this.randomRange(e.map.w,e.map.max_w),i=this.randomRange(e.map.h,e.map.max_h),r=o*i,s=new Laya.Vector3(.5*o,0,.5*i);n.set("car",e.car),o>12?t.camera.addHeight(8):t.camera.resetPos();var l=new f(s);l.addXZ(-.5,-.5);var c=new f(s);c.setY(1);for(var u=[],d=0,h=0;r>h;h++)u.push(1);for(var h=0;i>h;h++)for(var p=0;o>p;p++){if(c.setXZ(c.start.x-1*p,c.start.z-1*h),n.randomCheck(e.carAppear)){var g=n.getRandomIndex("car"),y=Math.round(Math.random()),m=(new a["default"]).getCarProp(g);if(this.canCreateCar(u,d,o,m,y)){var v=this.createCar(g,y,c);this.resetLayouts(v,u,d,o,i,v.val)}}l.setXZ(l.start.x-1*p,l.start.z-1*h),this.createUnit("plane",l.cur),d++}},e.prototype.createLevelWithConfig=function(e){var t=(this.ctrl,e.map.w),n=e.map.h,o=(new Laya.Vector3(0,0,0),0),a=this.ctrl.getStreet("plane").getComponent(s["default"]),i=a.getAnchor().clone();i.z+=n;var r=new f(i);a.setScale(t,n),a.setPosWithAnchor(t,n),this.mapSize=new Laya.Size(t,n);var c=this.ctrl.getStreet("street0").getComponent(l["default"]),u=this.ctrl.getStreet("street1").getComponent(l["default"]),d=this.ctrl.getStreet("street2").getComponent(l["default"]),h=this.ctrl.getStreet("street3").getComponent(l["default"]),p=this.ctrl.getStreet("street4").getComponent(l["default"]);c.setScale(t),c.setPosByAnchor(a.getAnchor(),.5*-t,n),u.setPosByAnchor(a.getAnchor(),-t-.5*u.defaultSize.width,n+.5*u.defaultSize.height+.06),d.setScale(n),d.setPosByAnchor(a.getAnchor(),-t+.05,.5*n),h.setPosByAnchor(a.getAnchor(),-t-.5*h.defaultSize.width,.5*-h.defaultSize.height+.06),p.setScale(t),p.setPosByAnchor(a.getAnchor(),.5*-t,-p.defaultSize.height),this.createLine(a.getAnchor(),c,t,n,90),this.createLine(a.getAnchor(),d,t,n,0),this.createLine(a.getAnchor(),p,t,n,90);var g=e.layout.slice(0);this.levelLayouts=e.layout.slice(0);for(var y=0;y<g.length;y++){var m=g[y],v=y%t,w=Math.floor(y/t);if(1!==m)if(r.setXZ(r.start.x-v*(1+o),r.start.z-w*(1+o)),this.isCar(m)){var _=this.getCarType(m),L=m%10,S=this.createCar(_,L,r);S.startInLayout=y,this.resetLayouts(S,g,y,t,n)}else this.isWall(m)?this.createWallRepeat(g,r.cur,y,v,w,t,n):this.isBarrier(m)&&(r.addXZ(-.5,-.5),this.createRandomBarrier(r.cur))}this.carNum=this.cars.length,console.log("createMap",t,n),this.adjustScenePosition(t,n)},e.prototype.createMapLine=function(e,t,n){for(var o=Math.floor((t+1)/3),a=Math.floor(t/o),i=e.x-a+.4,r=n,s=0;o>s;s++){var l=this.ctrl.createLine();l.transform.localRotationEulerY=90,l.transform.localScaleX=r,l.transform.localPositionY+=.1,l.transform.localPositionX=i-s*a,l.transform.localPositionZ=e.z+.5*r,this.objs.push(l)}},e.prototype.createLine=function(e,t,n,o,a){for(var i=Math.round(n/2),r=0;i>r;r++){var s=this.ctrl.createLine();90==a?(s.transform.localPositionX=e.x-2*r-.5,s.transform.localPositionZ=t.sprite.transform.localPositionZ+t.h+.5):(s.transform.localRotationEulerY=90,s.transform.localPositionX=t.sprite.transform.localPositionX-t.w-.5,s.transform.localPositionZ=e.z+2*r+.5),this.objs.push(s)}},e.prototype.createWallRepeat=function(e,t,n,o,a,i,r){var s=0,l=t.clone(),c=!1;if(t.z-=.5,t.x-=.5,o!=i-1)for(var u=0;i-o>u;u++)if(u>0){var d=u+n;if(!this.isWall(e[d]))break;t.x-=1,this.createUnit("wall",t,0),e[d]=1,c=!0}if(!c)for(var u=0;r-a>u;u++)if(u>0){var d=i*u+n;if(!this.isWall(e[d]))break;t.z-=1,this.createUnit("wall",t,1),e[d]=1,s=1,c=!0}if(e[n]=1,l.x-=.5,l.z-=.5,!c){var h=n%i;(0==h||h==i-1)&&(s=1)}this.createUnit("wall",l,s)},e.prototype.createRandomBarrier=function(e){var t=this.ctrl.createRandomBarrier(),n=t.getComponent(i["default"]);return n.setLevelCtrl(this,this.ctrl),e.y=t.transform.localPositionY+.1,t.transform.localPosition=e,this.objs.push(t),n},e.prototype.createUnit=function(e,t,n){void 0===n&&(n=null);var o=this.ctrl.createBarrier(e),a=o.getComponent(i["default"]);return a.setLevelCtrl(this,this.ctrl),t.y=o.transform.localPositionY+.1,o.transform.localPosition=t,this.objs.push(o),null!=n&&(1==n?o.transform.rotationEuler=new Laya.Vector3(0,90,0):o.transform.rotationEuler=new Laya.Vector3(0,0,0)),a},e.prototype.createCar=function(e,t,n){var o=this.ctrl.createCar("car0",e),i=o.getComponent(a["default"]);return i.setLevelCtrl(this,this.ctrl),i.init(e,t,this.cars.length),1==t?n.addXZ(.5*-i.w,.5*-i.h):n.addXZ(.5*-i.h,.5*-i.w),n.cur.y=o.transform.localPositionY+.2,o.transform.localPosition=n.cur,i.setLastPos(n.cur),i.setLastIdlePos(n.cur),this.cars.push(i),i},e.prototype.resetLayouts=function(e,t,n,o,a,i){void 0===i&&(i=null);var r=0,s=null==i?1:i;if(1==e.getDirection())for(var l=0;l<e.h;l++){for(var c=0;c<e.w;c++)t[c+n+r]=s;r+=o}else for(var l=0;l<e.w;l++){for(var c=0;c<e.h;c++)t[c+n+r]=s;r+=o}},e.prototype.isCar=function(e){return e=Math.floor(e/10),2===e||3===e||4===e},e.prototype.isWall=function(e){return 5===e},e.prototype.isBarrier=function(e){return 6===e},e.prototype.getCarType=function(e){return e=Math.floor(e/10),2===e?0:3===e?1:4===e?2:0},e.prototype.randomRange=function(e,t){return Math.floor(Math.random()*(t-e))+e},e.prototype.canCreateCar=function(e,t,n,o,a){var i=o.w,r=o.h;return 0===a&&(i=o.h,r=o.w),(t+i)%n>t%n&&t<e.length-2*n&&1==e[t]&&1==e[t+i]&&1==e[t+n*r]&&1==e[t+i+n*r]?!0:!1},e.prototype.getCarNum=function(){return this.carNum},e.prototype.subCarNum=function(){this.carNum-=1},e.prototype.isOver=function(){return 0===this.carNum},e.prototype.clearObjs=function(){for(var e in this.objs)this.objs[e].destroy();this.objs=[]},e.prototype.clearCars=function(){for(var e in this.cars){var t=this.cars[e];Laya.Tween.clearAll(t.sprite),this.cars[e].setState(c.CarState.None),this.cars[e].sprite.destroy()}this.cars=[]},e.prototype.deleteCar=function(e){for(var t=0;t<this.cars.length;t++){var n=this.cars[t];if(n.index==e){this.cars.splice(t,1);break}}},e.prototype.adjustScenePosition=function(e,t){var n=e-this.defaultSize.width,o=t-this.defaultSize.height,a=0,i=0;e>=8&&(a=-n-1),t>=3&&(i=-o),console.log("offsetW",n,o);this.ctrl.getStreet("plane").getComponent(s["default"]);this.ctrl.setParkSceneOffset(0,i);var r=e,l=r+10,c=15,u=0,d=c/11*n,h=0,f=e-t;Math.abs(f)>1&&(u=.4*f),t>10&&(h=-1*(t-11)),console.log("setCameraProps",u,h,d),this.ctrl.setCameraProps(l,u,h,d)},e.prototype.checkCarOnRoad=function(){for(var e=0,t=this.cars;e<t.length;e++){var n=t[e];if(n.getState()==c.CarState.MoveAction)return!0}return!1},e.prototype.gameTip=function(){for(var e=!0,t=0,n=this.cars;t<n.length;t++){var o=n[t];if(o.getState()!=c.CarState.Idle){e=!1;break}}0==this.cars.length&&(e=!1),e&&u["default"].instance.dispatch(d.EventDef.Game_Tip)},e.prototype.setLevelLayouts=function(e,t){this.resetLayouts(e,this.levelLayouts,t,this.mapSize.width,this.mapSize.height),this.resetLayouts(e,this.levelLayouts,e.startInLayout,this.mapSize.width,this.mapSize.height,e.val)},e.prototype.clearCarInLayouts=function(e,t){this.resetLayouts(e,this.levelLayouts,t,this.mapSize.width,this.mapSize.height)},e.prototype.getLevelLayouts=function(){return this.levelLayouts},e.prototype.getCars=function(){return this.cars},e.prototype.getMapSize=function(){return this.mapSize},e}();n["default"]=p},{"../../Config/LevelConfig":5,"../../Config/RogueLevelConfig":6,"../../Event/EventDef":7,"../../Event/EventMgr":8,"../Constants":32,"../Util/RoundTableRandom":43,"./Model/Car":35,"./Model/GameObject":36,"./Model/Plane":37,"./Model/Street":38}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAwake=function(){this.camera=this.owner,this.srcPos=this.camera.transform.position.clone()},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.resetPos=function(){this.camera.transform.position=this.srcPos.clone()},t.prototype.addHeight=function(e){var t=new Laya.Vector3(0,e,0);this.camera.transform.translate(t,!1)},t.prototype.setHeight=function(e){this.camera.transform.position.y=e},t}(Laya.Script3D);n["default"]=o},{}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameObject"),a=e("../../Constants"),i=e("../../../Event/EventMgr"),r=e("../../../Event/EventDef"),s=e("../../../Mgr/SoundMgr"),l=e("../../Util/Animator"),c=e("../../../Mgr/VibrateMgr"),u=function(){function e(){}return e}();n.CarType=u;var d=function(e){function t(){var t=e.call(this)||this;return t.tipDirection=-1,t.carTypes=[{w:2,h:3,val:20},{w:2,h:4,val:30},{w:2,h:5,val:40}],t._touchPoint=new Laya.Point(0,0),t._direction=0,t.vector=new Laya.Vector3(0,0,0),t.speed=.2,t._curSelected=!1,t.streetsVect=[],t.inCol=!1,t.timerIsOn=!1,t.dt=0,t.scaleFactor=.9,t.lastIdlePos=new Laya.Vector3(0,0,0),t.startRotation=!1,t.colliding=!1,t.collideStay=!1,t.turnAngleDelta=10,t.isFan=!1,t}return __extends(t,e),t.prototype.onAwake=function(){this.sprite=this.owner,this.sprite.transform.localScaleX=this.scaleFactor,this.sprite.transform.localScaleY=this.scaleFactor,this.sprite.transform.localScaleZ=this.scaleFactor,this.animCtrl=this.owner.addComponent(l["default"])},t.prototype.onEnable=function(){this.setState(a.CarState.Idle)},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){if(this.dt+=1,this.getState()==a.CarState.Move||this.getState()==a.CarState.MoveAction){var e=this.getState();e==a.CarState.MoveAction&&this.dt>10&&(s["default"].instance.playSound("car_run"),this.dt=0),this.move()}else this.getState()==a.CarState.Collide&&(this.setState(a.CarState.CollideAction),this.timerIsOn||(this.timerIsOn=!0,Laya.timer.once(500,this,function(){this.setState(a.CarState.Idle),this.timerIsOn=!1,this.colliding=!1})))},t.prototype.onMouseDown=function(){this.getGameCtrl().game3dStartFlag&&this.getState()==a.CarState.Idle&&(this._touchPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY),this._curSelected=!0)},t.prototype.onMouseUp=function(){if(this.getGameCtrl().game3dStartFlag&&this.getState()==a.CarState.Idle){var e=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),t=new Laya.Vector2(this._touchPoint.x-e.x,this._touchPoint.y-e.y);new Laya.Vector2(0,0);(0!=t.y||0!=t.x)&&(1==this._direction?(0==t.y?this.vector.z=0:this.vector.z=t.y/Math.abs(t.y),180==this.sprite.transform.rotationEuler.y&&(this.vector.z=-this.vector.z)):(0==t.x?this.vector.z=0:this.vector.z=t.x/Math.abs(t.x),-90==this.sprite.transform.rotationEuler.y&&(this.vector.z=-this.vector.z)),this.setState(a.CarState.Move),s["default"].instance.playSound("car_shache"),i["default"].instance.dispatch(r.EventDef.AD_HoriBanner_Enable,!1),i["default"].instance.dispatch(r.EventDef.Game_Guide,{visible:!1}),this.colliding=!1,c["default"].vibrateShort())}},t.prototype.onTriggerEnter=function(e){this.colliding||(this.colliding=!0,this.collision(e))},t.prototype.onTriggerStay=function(e){this.colliding||this.collideStay||(this.colliding=!0,this.collision(e))},t.prototype.collision=function(e){var n=this;if(!this.owner.destroyed)if(this.getState()==a.CarState.Idle&&(this.colliding=!1,this.shakeAct(3)),this.getState()==a.CarState.Move){if(this.getState()!=a.CarState.Idle&&(this.sprite.getChildByName("biaoqing_1")&&this.sprite.removeChildByName("biaoqing_1"),this.sprite.addChild(this.getGameCtrl().getEmotionSp(this)),e.owner.name.indexOf("car")>=0&&(e.owner.getChildByName("biaoqing_1")&&e.owner.removeChildByName("biaoqing_1"),e.owner.addChild(this.getGameCtrl().getEmotionSp(e.owner.getComponent(t))))),!this.startRotation){var o=e.owner.getComponent(t);if(!o||o.getState()!=a.CarState.MoveAction&&o.getState()!=a.CarState.Move?(c["default"].vibrateShort(),s["default"].instance.playSound("collide")):(s["default"].instance.playSound("laba"),Laya.timer.once(1e3,this,function(){n.colliding=!1,n.setState(a.CarState.Move),i["default"].instance.dispatch(r.EventDef.Game_Guide,{visible:!1})})),o&&o.getState()==a.CarState.MoveAction);else if(this.startInLayout>=0){var l=this.getLevelCtrl().getMapSize(),u=this.startInLayout%l.width,d=Math.floor(this.startInLayout/l.width),h=this.getGameCtrl().getPlaneAnchor(),f=h.x-u,p=h.z-d+l.height;1==this._direction?(f-=.5*this.w,p-=.5*this.h):(f-=.5*this.h,p-=.5*this.w),this.sprite.transform.localPositionX=f,this.sprite.transform.localPositionZ=p}this.setState(a.CarState.Collide)}}else if("destinaion2"==e.owner.name&&(this.getGameCtrl().playEndAction(!0),Laya.timer.clear(this.getGameCtrl(),this.getGameCtrl().playEndOffCaller),Laya.timer.once(1500,this.getGameCtrl(),this.getGameCtrl().playEndOffCaller)),"destinaion"==e.owner.name){var g=this.getLevelCtrl();Laya.timer.once(1500,this,function(){n.sprite.destroy(),n.destroy()}),g.deleteCar(this.index),this.startInLayout>=0&&this.getLevelCtrl().clearCarInLayouts(this,this.startInLayout),c["default"].vibrateShort(),s["default"].instance.playSound("car_out"),g.subCarNum(),this.getGameCtrl().createParticle(),g.isOver()?Laya.timer.once(500,this,function(){i["default"].instance.dispatch(r.EventDef.AD_HoriBanner_Enable,!0),i["default"].instance.dispatch(r.EventDef.Game_OnLevelComplate)}):this.getGameCtrl().isGuide&&this.getLevelCtrl().gameTip()}},t.prototype.updateLevelLayout=function(){var e=Math.round(this.sprite.transform.localPositionX-this.lastIdlePos.x),t=Math.round(this.sprite.transform.localPositionZ-this.lastIdlePos.z),n=this.startInLayout,o=this.getLevelCtrl().getLevelLayouts(),a=this.getLevelCtrl().getMapSize();Math.abs(e)>=1&&(this.lastIdlePos.x=this.sprite.transform.localPositionX,
this.startInLayout-=e,e>0?(1!=o[this.startInLayout]||1!=o[this.startInLayout+a.width])&&(this.startInLayout=n):(1!=o[this.startInLayout+(this.h-1)]||1!=o[this.startInLayout+a.width+(this.h-1)])&&(this.startInLayout=n)),Math.abs(t)>=1&&(this.lastIdlePos.z=this.sprite.transform.localPositionZ,this.startInLayout-=t*a.width,t>0?(1!=o[this.startInLayout]||1!=o[this.startInLayout+1])&&(this.startInLayout=n):(1!=o[this.startInLayout+(this.h-1)*a.width]||1!=o[this.startInLayout+(this.h-1)*a.width+1])&&(this.startInLayout=n)),n!=this.startInLayout&&this.getLevelCtrl().setLevelLayouts(this,n)},t.prototype.shakeAct=function(e){var t=this;if(!this.inCol){this.inCol=!0,e-=1;var n=.1*Math.random()+.9,o=.1*Math.random()+.9,a=.1*Math.random()+.9;0==e&&(this.inCol=!1,n=this.scaleFactor,o=this.scaleFactor,a=this.scaleFactor);var i=this.sprite.transform;if(this.sprite.destroyed)return;Laya.Tween.to(i,{localScaleX:o,localScaleY:a,localScaleZ:n},50,null,Laya.Handler.create(this,function(){e>0&&(t.inCol=!1,t.shakeAct(e))}))}},t.prototype.init=function(e,t,n){var o=this.carTypes[e];this.w=o.w,this.h=o.h,this.val=o.val+t,this._type=e,this.index=n,this.setDirection(t);var a=this.getGameCtrl().getStreet("street0"),i=this.getGameCtrl().getStreet("street4"),r=this.getGameCtrl().getStreet("street2"),s=this.getGameCtrl().getStreet("street5"),l=a.transform.localPosition.clone(),c=i.transform.localPosition.clone();this.streetsVect.push(l),this.streetsVect.push(r.transform.localPosition.clone()),this.streetsVect.push(c),this.streetsVect.push(s.transform.localPosition.clone()),this.streetsVect[3].x+=1,this.streetsVect[1].x-=1.5,this.streetsVect[0].z+=1.5,this.streetsVect[2].z+=1.5,console.log("streetsVect z",this.streetsVect[0].z);var u=this.owner.getComponent(Laya.PhysicsComponent);u.ccdMotionThreshold=.01},t.prototype.setDirection=function(e){var t=[];t=1==e?[0,180]:[90,-90],this._direction=e,this._angle=t[Math.round(Math.random())],this.sprite.transform.rotationEuler=new Laya.Vector3(0,this._angle,0)},t.prototype.getDirection=function(){return this._direction},t.prototype.getAngle=function(){return this._angle},t.prototype.getCarProp=function(e){return this.carTypes[e]},t.prototype.getCarType=function(){return this._type},t.prototype.move=function(){var e=this;this.setLastPos(this.sprite.transform.localPosition);var t=this.vector.clone(),n=this.sprite.transform.localPosition;n.x>=this.streetsVect[3].x-1?(this.setState(a.CarState.MoveAction),t.z*=this.speed,n.x>this.streetsVect[3].x?n.x=this.streetsVect[3].x:this.sprite.transform.translate(t,!0),this.sprite.transform.rotationEuler.y<=-90&&this.sprite.transform.rotationEuler.y>-180?this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y-this.turnAngleDelta,0):this.sprite.transform.rotationEuler.y<=270&&this.sprite.transform.rotationEuler.y>180?this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y-this.turnAngleDelta,0):this.sprite.transform.rotationEuler.y>=90&&this.sprite.transform.rotationEuler.y<180?(this.isFan=!0,this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y+this.turnAngleDelta,0)):this.isFan?Laya.timer.once(50,this,function(){e.vector.z=-1}):this.vector.z=-1):n.z<=this.streetsVect[2].z+1?(this.setState(a.CarState.MoveAction),t.z*=this.speed,n.z<this.streetsVect[2].z?n.z=this.streetsVect[2].z:this.sprite.transform.translate(t,!0),this.sprite.transform.rotationEuler.y<=0&&this.sprite.transform.rotationEuler.y>-90?this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y-this.turnAngleDelta,0):this.sprite.transform.rotationEuler.y>=180&&this.sprite.transform.rotationEuler.y<270?(this.isFan=!0,this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y+this.turnAngleDelta,0)):this.isFan?Laya.timer.once(50,this,function(){e.vector.z=-1}):this.vector.z=-1):n.x<=this.streetsVect[1].x+1?(this.setState(a.CarState.MoveAction),t.z*=this.speed,n.x<this.streetsVect[1].x?n.x=this.streetsVect[1].x:this.sprite.transform.translate(t,!0),this.sprite.transform.rotationEuler.y<=90&&this.sprite.transform.rotationEuler.y>0?this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y-this.turnAngleDelta,0):this.sprite.transform.rotationEuler.y>=-90&&this.sprite.transform.rotationEuler.y<0?(this.isFan=!0,this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y+this.turnAngleDelta,0)):this.isFan?Laya.timer.once(50,this,function(){e.vector.z=-1}):this.vector.z=-1):n.z>=this.streetsVect[0].z-1?(this.setState(a.CarState.MoveAction),t.z*=this.speed,n.z>this.streetsVect[0].z?n.z=this.streetsVect[0].z:this.sprite.transform.translate(t,!0),this.sprite.transform.rotationEuler.y>90?this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y-this.turnAngleDelta,0):this.sprite.transform.rotationEuler.y<90?(this.isFan=!0,this.sprite.transform.rotationEuler=new Laya.Vector3(0,this.sprite.transform.rotationEuler.y+this.turnAngleDelta,0)):this.isFan?Laya.timer.once(50,this,function(){e.vector.z=-1}):this.vector.z=-1):(t.z*=this.speed,0==t.z&&this.setState(a.CarState.Idle),this.sprite.transform.translate(t,!0)),this.startInLayout>=0&&(this.getState()==a.CarState.MoveAction?(this.getLevelCtrl().clearCarInLayouts(this,this.startInLayout),this.startInLayout=-1):this.updateLevelLayout()),a.CarState.MoveAction&&(this.colliding=!1,this.collideStay=!0)},t.prototype.setLastIdlePos=function(e){this.lastIdlePos=e.clone()},t}(o["default"]);n["default"]=d},{"../../../Event/EventDef":7,"../../../Event/EventMgr":8,"../../../Mgr/SoundMgr":19,"../../../Mgr/VibrateMgr":20,"../../Constants":32,"../../Util/Animator":42,"./GameObject":36}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Constants"),a=function(e){function t(){var t=e.call(this)||this;return t.w=1,t.h=1,t.unitScale=new Laya.Vector3(0,0,0),t.lastPos=new Laya.Vector3(0,0,0),t.state=o.CarState.None,t}return __extends(t,e),t.prototype.onAwake=function(){this.sprite=this.owner},t.prototype.onPostRender=function(){},t.prototype.setState=function(e){this.state=e},t.prototype.getState=function(){return this.state},t.prototype.setLastPos=function(e){this.lastPos.x=e.x,this.lastPos.y=e.y,this.lastPos.z=e.z},t.prototype.setLevelCtrl=function(e,t){this.levelCtrl=e,this.gameCtrl=t},t.prototype.getLevelCtrl=function(){return this.levelCtrl},t.prototype.getGameCtrl=function(){return this.gameCtrl},t.prototype.setScale=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=this.sprite.transform.scale;n.x=null==e?n.x:e*this.unitScale.x,n.z=null==t?n.z:t*this.unitScale.z,this.sprite.transform.scale=n},t}(Laya.Script3D);n["default"]=a},{"../../Constants":32}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameObject"),a=function(e){function t(){var t=e.call(this)||this;return t.defaultSize=new Laya.Size(5,5),t.anchor=new Laya.Vector3(0,0,0),t}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this.unitScale.setValue(1,1,1);var t=this.sprite.transform.localPosition;this.anchor.x=-14.5,this.anchor.y=-2.6,this.anchor.z=-.95,this.srcAnchor=this.anchor.clone(),this.setLastPos(t)},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.setPosWithAnchor=function(e,t){var n=this.anchor.clone();n.x-=.5*e,n.z+=.5*t,this.sprite.transform.localPosition=n},t.prototype.getAnchor=function(){return this.anchor},t.prototype.setAnchorOffset=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.srcAnchor.clone();n.x+=e,n.z+=t,this.anchor=n},t}(o["default"]);n["default"]=a},{"./GameObject":36}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameObject"),a=function(e){function t(){var t=e.call(this)||this;return t.defaultSize=new Laya.Size(1,1),t}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this.unitScale.setValue(1,1,1),this.setLastPos(this.sprite.transform.localPosition)},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.setDefaultSize=function(e,t){this.defaultSize=new Laya.Size(e,t)},t.prototype.setPosByAnchor=function(e,t,n){var o=e.clone();o.x+=t,o.z+=n,o.y=this.sprite.transform.localPositionY,this.sprite.transform.localPosition=o},t.prototype.onTriggerEnter=function(){console.log("street collision")},t}(o["default"]);n["default"]=a},{"./GameObject":36}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameObject"),a=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t}(o["default"]);n["default"]=a},{"./GameObject":36}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.check=function(e,t,n){for(var o=null,a=-1,i=0,r=t;i<r.length;i++){var s=r[i];if(null!=o)break;if(1==s.getDirection()){for(d=s.startInLayout;null==o;){var l=d+s.h*n.width;if(l>=e.length){o=s,console.log("竖向向下"),a=1;break}var c=e[l],u=e[l+1];if(1!=c||1!=u)break;d+=n.width}for(var d=s.startInLayout;null==o;){if(d-=n.width,0>d){o=s,console.log("竖向向上"),a=0;break}var c=e[d],u=e[d+1];if(1!=c||1!=u)break}}else{var d=s.startInLayout;for(Math.floor(d/n.width);null==o;){if(d--,0>d||(d+1)%n.width==0){o=s,console.log("横向向左"),a=2;break}var c=e[d],u=e[d+n.width];if(1!=c||1!=u)break}for(d=s.startInLayout;null==o;){var l=d+s.h;if(l>=e.length||l%n.width==0){o=s,console.log("横向向右"),a=3;break}var c=e[l],u=e[l+n.width];if(1!=c||1!=u)break;d++}}}return null!=o?(o.tipDirection=a,o):this.deepCheck()},e.prototype.deepCheck=function(){return null},e}();n["default"]=o},{}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./View/GameScene3D"),a=e("./Core/LevelLogic"),i=e("./Core/Model/Camera"),r=e("../User/User"),s=e("../Event/EventMgr"),l=e("../Event/EventDef"),c=e("../Mgr/GameMgr"),u=e("./Util/Utils"),d=e("./Core/SmartTip"),h=e("./Core/Model/Plane"),f=e("../AppConfig"),p=function(e){function t(){var t=e.call(this)||this;return t.isGuide=!1,t.ray=new Laya.Ray(Laya.Vector3._ZERO,Laya.Vector3._ZERO),t.hitRet=new Laya.HitResult,t.levelLogic=new a["default"](t),t.smart=new d["default"],t.game3dStartFlag=!1,t.gameNotStart=!1,t}return __extends(t,e),t.prototype.onAwake=function(){var e=this.owner.getComponent(o["default"]);this.camera=e.camera.getComponent(i["default"]),this.scene=this.owner,this.ground=e.ground,this.parkSceneSrcPos=e._parkscene.transform.localPosition.clone(),this.srcFieldView=this.camera.camera.fieldOfView,this.cameraSrcPos=this.camera.camera.transform.localPosition.clone(),this.dstRotation=this.camera.camera.transform.localRotationEuler.clone(),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),s["default"].instance.regEvemt(l.EventDef.Game_OnLevelComplate,this,this.gameOver),s["default"].instance.regEvemt(l.EventDef.Game_OnLevelStart,this,this.gameStart),s["default"].instance.regEvemt(l.EventDef.Game_Refresh,this,this.gameRefresh),s["default"].instance.regEvemt(l.EventDef.Game_Tip,this,this.gameTip),s["default"].instance.regEvemt(l.EventDef.Game_TouchStart,this,this.gameTouchStart),s["default"].instance.regEvemt(l.EventDef.Game_EnableCarTouch,this,this.enableCarTouch),s["default"].instance.dispatch(l.EventDef.Game_OnLevelStart)},t.prototype.onDestroy=function(){s["default"].instance.removeEvent(l.EventDef.Game_OnLevelComplate,this,this.gameOver),s["default"].instance.removeEvent(l.EventDef.Game_OnLevelStart,this,this.gameStart),s["default"].instance.removeEvent(l.EventDef.Game_Refresh,this,this.gameRefresh),s["default"].instance.removeEvent(l.EventDef.Game_Tip,this,this.gameTip),s["default"].instance.removeEvent(l.EventDef.Game_TouchStart,this,this.gameTouchStart),s["default"].instance.removeEvent(l.EventDef.Game_EnableCarTouch,this,this.enableCarTouch)},t.prototype.enableCarTouch=function(e){this.gameNotStart||(this.game3dStartFlag=e)},t.prototype.gameTouchStart=function(){this.switchCamera(1)},t.prototype.gameTip=function(){var e=this.levelLogic.getLevelLayouts().slice(0),t=this.levelLogic.getCars(),n=this.smart.check(e,t,this.levelLogic.getMapSize());n&&null!=n&&this.showGameGuard(n)},t.prototype.showGameGuard=function(e){var t=new Laya.Vector3,n=this.camera.camera,o=e.sprite.transform.localPosition.clone();e.sprite.transform.localPosition=o,n.viewport.project(e.sprite.transform.position,n.projectionViewMatrix,t),t.x+=10,t.y+=10;var a=null,i=null,r=[-80,80,-150,150];1==e.getDirection()?i=r[e.tipDirection]:a=r[e.tipDirection],s["default"].instance.dispatch(l.EventDef.Game_Guide,{pos:t,visible:!0,offsetX:a,offsetY:i})},t.prototype.gameRefresh=function(){this.game3dStartFlag&&(this.switchCamera(1),this.levelLogic.createLevel(r["default"].getLeveNum()))},t.prototype.gameStart=function(){this.game3dStartFlag=!1,this.levelLogic.createLevel(r["default"].getLeveNum()),c["default"].getInstance().saveGameData(),this.switchCamera(2)},t.prototype.gameOver=function(){s["default"].instance.dispatch(l.EventDef.Game_Guide,{visible:!1}),this.getGoldReward()},t.prototype.getStreet=function(e){var t=this.owner.getComponent(o["default"]),n=t.streets[e];return n.obj},t.prototype.getGoldReward=function(){var e=this.levelLogic.randomRange(16,25);r["default"].addMoney(e)},t.prototype.createRandomBarrier=function(){var e=["flowerPot","newsBox"],t=Math.round(Math.random()*(e.length-1));return this.createBarrier(e[t])},t.prototype.createBarrier=function(e){var t=this.owner.getComponent(o["default"]),n=t.barriers[e],a=n.obj.clone();return t._parkscene.addChild(a),a.addComponent(n.component),a},t.prototype.createCar=function(e,t){var n=this.owner.getComponent(o["default"]),a=n.cars[e],i=a.objs[t].clone();return n._parkscene.addChild(i),i.addComponent(a.component),i},t.prototype.getEmotionSp=function(e){var t=[new Laya.Vector3(.12,3.63,-.78),new Laya.Vector3(.26,3.63,-1.07),new Laya.Vector3(.28,5.1,-1.7)],n=this.owner.getComponent(o["default"]),a=n.emotion.clone();a.transform.localPosition=t[e.getCarType()],a.transform.localScale=new Laya.Vector3(5,5,5),a.active=!0;var i=(a._render.material,u["default"].getInstance().randomRange(1,4));return Laya.loader.load(f["default"].LocalTestReServer+"/Emotions/biaoqing_"+i+".png",Laya.Handler.create(this,function(e){})),Laya.timer.once(1e3,this,function(){a.removeSelf()}),a},t.prototype.createParticle=function(){var e=this.owner.getComponent(o["default"]),t=e.particle;return t.active=!0,Laya.timer.once(500,this,function(){t.active=!1}),t},t.prototype.createParticleCamera=function(){var e=this.owner.getComponent(o["default"]),t=e.particleCamera;return t.active=!0,Laya.timer.once(1e3,this,function(){t.active=!1}),t},t.prototype.createLine=function(){var e=this.owner.getComponent(o["default"]),t=e.line.clone();return e._parkscene.addChild(t),t},t.prototype.setParkSceneOffset=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.owner.getComponent(o["default"]),a=this.parkSceneSrcPos.clone();a.x+=e,a.z+=t,n._parkscene.transform.localPosition=a},t.prototype.setCameraProps=function(e,t,n,o){var a=this.camera.camera;this.cameraSrcPos.clone();a.transform.localPosition=this.cameraSrcPos,a.transform.translate(new Laya.Vector3(t,n,o)),this.dstPos=a.transform.localPosition.clone()},t.prototype.getPlaneAnchor=function(){var e=this.getStreet("plane").getComponent(h["default"]);return e.getAnchor().clone()},t.prototype.playEndAction=function(e){var t=this.owner.getComponent(o["default"]).endPoint;t.speed=1,e?t.play("deng"):t.play("deng2"),this.turnEndLightOn(e)},t.prototype.playEndOffCaller=function(){this.playEndAction(!1)},t.prototype.turnEndLightOn=function(e){for(var t=this.owner.getComponent(o["default"]).endRedLights,n=this.owner.getComponent(o["default"]).endGreenLights,a=0,i=t;a<i.length;a++){var r=i[a];r.active=!e}for(var s=0,l=n;s<l.length;s++){var r=l[s];r.active=e}},t.prototype.switchCamera=function(e){var t=this,n=this.owner.getComponent(o["default"]);if(1==e)Laya.Tween.to(n.camera.transform,{localPositionX:this.dstPos.x,localPositionY:this.dstPos.y,localPositionZ:this.dstPos.z,localRotationEulerX:this.dstRotation.x,localRotationEulerY:this.dstRotation.y,localRotationEulerZ:this.dstRotation.z},1e3,null,Laya.Handler.create(this,function(){t.levelLogic.gameTip(),t.game3dStartFlag=!0,t.gameNotStart=!1}));else if(2==e){this.gameNotStart=!0;var a=this.getStreet("plane"),i=new Laya.Vector3(0,180,0),r=a.transform.localPosition.clone();r.x+=1,n.camera2.transform.lookAt(r,i,!0),n.camera.transform.position=n.camera2.transform.position,n.camera.transform.localRotationEuler=n.camera2.transform.localRotationEuler}},t}(Laya.Script3D);n["default"]=p},{"../AppConfig":2,"../Event/EventDef":7,"../Event/EventMgr":8,"../Mgr/GameMgr":18,"../User/User":49,"./Core/LevelLogic":33,"./Core/Model/Camera":34,"./Core/Model/Plane":37,"./Core/SmartTip":40,"./Util/Utils":44,"./View/GameScene3D":45}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=e.call(this)||this;return t._animator=null,t}return __extends(t,e),t.prototype.onAwake=function(){this._animator=this.owner.getComponent(Laya.Animator)},t.prototype.onDisable=function(){},t.prototype.pause=function(){this._animator.speed=0},t.prototype.resume=function(){this._animator.speed=1},t.prototype.play=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this._animator.play(e,t,n)},t}(Laya.Script3D);n["default"]=o},{}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.ratios={}}return e.prototype.set=function(e,t){for(var n=t.slice(),o=0;o<n.length;o++)o>0&&(n[o]=n[o-1]+n[o]);this.ratios[e]=n,console.log(this.ratios[e])},e.prototype.getRandomIndex=function(e){for(var t=Math.random(),n=this.ratios[e],o=0;o<n.length;o++)if(t<=n[o])return o;return 0},e.prototype.randomCheck=function(e){return Math.random()<=e?!0:!1},e.prototype.clear=function(e){null==e?this.ratios={}:this.ratios[e]=null},e}();n["default"]=o},{}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.randomRange=function(e,t){return Math.round(Math.random()*(t-e))+e},e.prototype.randomMax=function(e){return Math.round(Math.random()*e)},e.prototype.floatRandomRange=function(e,t){return Math.random()*(t-e)+e},e}();n["default"]=o},{}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GameCtrl"),a=e("../Core/Model/Camera"),i=e("../Core/Model/Plane"),r=e("../Core/Model/Car"),s=e("../Core/Model/Wall"),l=e("../../Event/EventMgr"),c=e("../../Event/EventDef"),u=e("../Core/Model/Street"),d=e("../Core/Model/GameObject"),h=e("../../Mgr/SoundMgr"),f=function(e){function t(){var t=e.call(this)||this;return t._once=!0,t.streets={plane:{name:"plane",component:i["default"]},street0:{name:"lu_001",component:u["default"],w:5,h:3},street1:{name:"lu_002",component:u["default"],w:3,h:3},street2:{name:"lu_003",component:u["default"],w:5.2,h:3},street3:{name:"lu_004",component:u["default"],w:3,h:3},street4:{name:"lu_005",component:u["default"],w:5,h:3},street5:{name:"lu_006",component:u["default"]}},t.cars={car0:{name:"car_default",component:r["default"],objs:[]}},t.barriers={wall:{name:"Road_End_Sign",component:s["default"]},flowerPot:{name:"Decoration_Tree",component:d["default"]},newsBox:{name:"hydrant_mesh",component:d["default"]}},t.endRedLights=[],t.endGreenLights=[],t}return __extends(t,e),t.prototype.onAwake=function(){laya.events.MouseManager.multiTouchEnabled=!1,this._parkscene=this.owner.getChildByName("scene"),this.particle=this.owner.getChildByName("caidai_01"),this.camera=this.owner.getChildByName("Main Camera"),this.camera.addComponent(a["default"]),this.camera2=this._parkscene.getChildByName("Main Camera2"),this.endPoint=this.owner.getChildByName("dong").getChildByName("end").getComponent(Laya.Animator),this.endPoint.speed=0;var e=this.endPoint.owner.getChildByName("Sign").getChildByName("Light_Red.L");this.endRedLights.push(e),e=this.endPoint.owner.getChildByName("Sign").getChildByName("Light_Red.R"),this.endRedLights.push(e),e=this.endPoint.owner.getChildByName("Sign").getChildByName("Light_Green.L"),this.endGreenLights.push(e),e=this.endPoint.owner.getChildByName("Sign").getChildByName("Light_Green.R"),this.endGreenLights.push(e),this.line=this._parkscene.getChildByName("barriers").getChildByName("line"),this.emotion=this.owner.getChildByName("biaoqing_1");for(var t in this.streets){var n=this.streets[t];n.obj=this.owner.getChildByName("scene").getChildByName(n.name);var i=n.obj.addComponent(n.component);n.w&&i.setDefaultSize&&i.setDefaultSize(n.w,n.h)}for(var t in this.cars)for(var n=this.cars[t],r=0;3>r;r++){var s=this._parkscene.getChildByName("car").getChildByName(n.name+"_"+r);n.objs.push(s)}for(var t in this.barriers){var n=this.barriers[t];n.obj=this._parkscene.getChildByName("barriers").getChildByName(n.name)}this.owner.addComponent(o["default"])},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.onPostRender=function(){this._once&&(l["default"].instance.dispatch(c.EventDef.App_CloseFirstLoadingView),h["default"].instance.playBGM("bg"),this._once=!1)},t.prototype.onMouseClick=function(){},t}(Laya.Script3D);n["default"]=f},{"../../Event/EventDef":7,"../../Event/EventMgr":8,"../../Mgr/SoundMgr":19,"../Core/Model/Camera":34,"../Core/Model/Car":35,"../Core/Model/GameObject":36,"../Core/Model/Plane":37,"../Core/Model/Street":38,"../Core/Model/Wall":39,"../GameCtrl":41}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Mgr/ViewMgr"),a=e("./Config/AppSwitchConfig"),i=e("./Mgr/WudianMgr"),r=e("./AppConfig"),s=function(){function e(){}return e.Login=function(e,t){Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.login({success:function(t){if(t.code){var n=t.code;e(n),console.log("登陆成功,获取到code : "+n)}}})},e.onRewardedVideoAdLoad=function(){console.log("激励视频 广告加载完成")},e.onRewardedVideoAdError=function(t){console.log("激励视频 广告加载失败"+t),e._onRewardedVideoAdFailed&&e._onRewardedVideoAdFailed()},e.onRewardedVideoAdClose=function(t){t&&t.isEnded||null==t?(console.log("激励视频 已完整观看"),e._onRewardedVideoAdClose&&e._onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),e._onRewardedVideoAdClose&&e._onRewardedVideoAdClose(!1))},e.regRewardedVideoAdEvent=function(t){t.onLoad(e.onRewardedVideoAdLoad),t.onError(e.onRewardedVideoAdError),t.onClose(e.onRewardedVideoAdClose),e._isRegRewardedVideoAdEvent=!0},e.showRewardedVideoAd=function(t,n){if(Laya.Browser.onQQMiniGame){e._onRewardedVideoAdClose=t,e._onRewardedVideoAdFailed=n;var o=Laya.Browser.window.qq.createRewardedVideoAd({adUnitId:e.adUnitId});e._isRegRewardedVideoAdEvent||e.regRewardedVideoAdEvent(o),o.load().then(function(){var e=o.show();e.then(function(){return console.log("激励视频 广告显示成功")}),e["catch"](function(e){o.load().then(function(){return o.show()})["catch"](function(e){console.log("激励视频 广告显示失败"),n&&n()})})})["catch"](function(e){console.log("激励视频 广告加载失败"),n&&n()})}else t(!0)},e.navigateToMiniProgram=function(e,t,n,o,a){Laya.Browser.onQQMiniGame&&(console.log("跳转游戏： "+e),Laya.Browser.window.qq.navigateToMiniProgram({appId:e,path:t,extraData:{foo:"bar"},envVersion:"release",success:function(e){n&&n(e)},fail:function(e){o&&o(e)},complete:function(e){a&&a(e)}}))},e.share=function(t,n,o){var a=this;Laya.Browser.onQQMiniGame&&(e._onShow=function(){Laya.Browser.window.qq.offShow(e._onShow),e._onShow=null;Date.now()-a._lastShareTime;t&&t(Date.now()-a._lastShareTime>2e3?!0:!1)},Laya.Browser.window.qq.onShow(e._onShow),this._lastShareTime=Date.now(),Laya.Browser.window.qq.shareAppMessage({title:n,imageUrl:o}))},e.showInterstitialAd=function(t,n){if(Laya.Browser.onQQMiniGame){var o=Laya.Browser.window.qq.createInterstitialAd({adUnitId:e.InsAdUnitId}),a=function(){console.log("插屏广告 加载完成"),o.show()["catch"](function(e){console.log("插屏广告 显示失败 ："+e),o.offLoad(a),o.offError(i),o.offClose(r),o.destroy(),n&&n()})};o.onLoad(a);var i=function(e){console.log("插屏广告 加载失败"+e),o.offLoad(a),o.offError(i),o.offClose(r),o.destroy(),n&&n()};o.onError(i);var r=function(){console.log("插屏广告 关闭"),o.offLoad(a),o.offError(i),o.offClose(r),o.destroy(),t&&t()};o.onClose(r)}else t()},e.LoadAppBoxAd=function(t,n){Laya.Browser.onQQMiniGame?(this.mAppboxAd=Laya.Browser.window.qq.createAppBox({adUnitId:e.AppBoxId}),this.mAppboxAd.load().then(function(){console.log("盒子广告 加载完成")}),this.mAppboxAd.onError(function(e){console.log("盒子广告 加载失败"+e),n&&n()}),this.onBoxAdClose=function(){console.log("盒子广告 关闭"),t&&t()},this.mAppboxAd.onClose(this.onBoxAdClose)):t()},e.showAppBoxAd=function(t,n){this.mAppboxAd?(console.log("显示盒子广告"),this.mAppboxAd.offClose(this.onBoxAdClose),this.onBoxAdClose=function(){console.log("盒子广告 关闭"),n&&n()},this.mAppboxAd.onClose(this.onBoxAdClose),this.mAppboxAd.show()["catch"](function(e){console.log("盒子广告 显示失败 ："+e),t&&t()})):e.LoadAppBoxAd(n,t)},e.getLaunchOptionsSync=function(){if(Laya.Browser.onQQMiniGame){var e=Laya.Browser.window.qq.getLaunchOptionsSync();console.log("场景值 "+e.scene);var t=JSON.stringify(e.query);console.log("Query参数 "+t);var n=e.query.key;return console.log("Query参数：key "+n),console.log("ShareTicket "+e.shareTicket),console.log("ReferrerInfo.appId "+e.referrerInfo.appId),console.log("ReferrerInfo.extraData "+e.referrerInfo.extraData),e}var o={scene:1001,query:"",shareTicket:"",appId:"",extraData:""};return o},e.SetShareMenu=function(e,t,n,o,a){Laya.Browser.onQQMiniGame&&(console.log("小游戏设置转发按钮"),Laya.Browser.window.qq.showShareMenu({withShareTicket:!1,success:n,fail:o,complete:a}),Laya.Browser.window.qq.onShareAppMessage(function(){return{title:e,imageUrl:t}}))},e.showQQCreazyClick=function(t,n,s){for(var l=e.getLaunchOptionsSync().scene,c=!0,u=a["default"].getInstance().getAppSwitchData().wudianSceneList,d=0;d<u.length;++d){var h=u[d];l==h&&(c=!1)}var f=i["default"].GetIpBlocked(),p=a["default"].getInstance().getAppSwitchData().wudian,g=a["default"].getInstance().getAppSwitchData().qqcfg.kuangdianBanner;r["default"].Versions==a["default"].getInstance().getAppSwitchData().qqcfg.qqversions&&f&&c&&1==p&&1==g?o["default"].instance.openView(o.ViewDef.QQCrazyClickView,t,function(){null!=n&&n()}):null!=s&&s()},e.showQQCreazyClick2=function(t,n,s){for(var l=e.getLaunchOptionsSync().scene,c=!0,u=a["default"].getInstance().getAppSwitchData().wudianSceneList,d=0;d<u.length;++d){var h=u[d];l==h&&(c=!1)}var f=i["default"].GetIpBlocked(),p=a["default"].getInstance().getAppSwitchData().wudian,g=a["default"].getInstance().getAppSwitchData().qqcfg.kuangdianBox;r["default"].Versions==a["default"].getInstance().getAppSwitchData().qqcfg.qqversions&&f&&c&&1==p&&1==g?o["default"].instance.openView(o.ViewDef.QQCrazyClickView2,t,function(){null!=n&&n()}):null!=s&&s()},e.showAppBlockAd=function(t,n,o){if(void 0===n&&(n=150),void 0===o&&(o="landscape"),Laya.Browser.onQQMiniGame&&Laya.Browser.window.qq.createBlockAd&&!e.isAppBlockAdLoading){if(e.isAppBlockAdLoading=!0,isNaN(e.screenWidth))try{var a=Laya.Browser.window.qq.getSystemInfoSync();e.screenWidth=a.windowWidth,e.screenHeight=a.windowHeight,e.pixelRatio=a.pixelRatio,e.isIos="ios"==a.platform,e.skdVersion=a.SDKVersion,e.screenWidth*=e.isIos?1:e.pixelRatio,e.screenHeight*=e.isIos?1:e.pixelRatio,console.log("getSystemInfoSync ==> ",a.SDKVersion)}catch(i){return void(t&&t())}for(var r=e.skdVersion.split(".").map(function(e){return parseInt(e)}),s=e.supportSDKVersion.split(".").map(function(e){return parseInt(e)}),l=!0,c=0;c<r.length;c++)if(r[c]<s[c]){l=!1;break}if(l){console.log("QQMiniGameAPI.showAppBlockAd ",n),e.destroyAppBlockAd(),e.onFail=t;var u=e.isIos?32/e.pixelRatio:32,d=Math.max(u,n/(e.isIos?e.pixelRatio:1)),h=e.screenWidth/2;h=u,e.mAppBlockAd=Laya.Browser.window.qq.createBlockAd({adUnitId:e.blockAdArray[Math.floor(Math.random()*e.blockAdArray.length)],style:{left:h,top:d},size:e.AppBlockSize,orientation:o}),e.mAppBlockAd.onError(e.appBlockADError),e.mAppBlockAd.show()["catch"](function(e){console.log("积木广告 显示失败 ："+JSON.stringify(e)),t&&t()}),e.isAppBlockAdLoading=!1}}},e.appBlockADResize=function(t){if(e.mAppBlockAd.style){var n=t.width,o=(t.height,(e.screenWidth-n)/2);e.mAppBlockAd.style.left=o}},e.appBlockADError=function(t){console.log("积木广告  加载失败 ",JSON.stringify(t)),e.onFail&&e.onFail()},e.destroyAppBlockAd=function(){Laya.Browser.onQQMiniGame&&e.mAppBlockAd&&(console.log("QQMiniGameAPI.destroyAppBlockAd"),e.mAppBlockAd.offResize(e.appBlockADResize),e.mAppBlockAd.offError(e.appBlockADError),e.mAppBlockAd.hide(),e.mAppBlockAd.destroy(),e.mAppBlockAd=null)},e.adUnitId="",e.bannerAdUnitId="",e.InsAdUnitId="",e.AppBoxId="",e.blockAdArray=[],e.AppBlockStyle={left:120,top:200},e.AppBlockSize=5,e.AppBlockOrientation="landscape",e._isRegRewardedVideoAdEvent=!1,e._onRewardedVideoAdFailed=null,e._onRewardedVideoAdClose=null,e._onShow=null,e._lastShareTime=0,e.mAppboxAd=null,e.onBoxAdClose=null,e.mAppBlockAd=null,e.screenWidth=NaN,e.isAppBlockAdLoading=!1,e.supportSDKVersion="1.15.0",e}();n["default"]=s},{"./AppConfig":2,"./Config/AppSwitchConfig":4,"./Mgr/ViewMgr":21,"./Mgr/WudianMgr":23}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.refreshAd=function(e){},e.getADVs=function(e,t,n,o,a){},e.reportUserClick=function(e){},e.getRandomADPosID=function(){return this.AdLocationids[Math.floor(Math.random()*this.AdLocationids.length)]},e.request=function(e){},e.getAdPosData=function(e,t){},e.reqUserClick=function(e,t,n){},e.getADVData=function(e,t,n){},e.RandomJump=function(e){void 0===e&&(e=1)},e.isNeedShowAd=function(){return!0},e.sortDatas=function(e){var t=new Array;return t},e.mainUrl="",e.getAdPostion="",e.getAdv="",e.userClick="",e.LoopAdLocationID=281,e.BannerAdLocationID=279,e.InsertAdLocationID=-1,e.AniAdLocationID=-1,e.HistoryLocationID=280,e.MoreGameLocationID=282,e.UseRandomAdPos=!1,e.AdLocationids=[],e._adPosition={},e._adv={},e._iphoneIgnoreAppIds=[],e}();n["default"]=o},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AppConfig"),a=e("./Mgr/ViewMgr"),i=e("./Net/HttpUnit"),r=function(){function e(){}return e.ttLogin=function(t,n){o["default"].onTTMiniGame&&(Laya.Browser.window.tt.login({force:!1,success:function(e){console.log("登陆成功1");var o=e.code;o?t(o):(console.log("用户没有登陆，采用临时code"),n())},fail:function(){console.log("登陆失败1"),n()}}),e.initRecord())},e.onRewardedVideoAdLoad=function(){console.log("激励视频 广告加载完成")},e.onRewardedVideoAdError=function(t){console.log("激励视频 广告加载失败"+t),e._onRewardedVideoAdFailed&&e._onRewardedVideoAdFailed()},e.onRewardedVideoAdClose=function(t){t&&t.isEnded||null==t?(console.log("激励视频 已完整观看"),e._onRewardedVideoAdClose&&e._onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),e._onRewardedVideoAdClose&&e._onRewardedVideoAdClose(!1))},e.regRewardedVideoAdEvent=function(t){t.onLoad(e.onRewardedVideoAdLoad),t.onError(e.onRewardedVideoAdError),t.onClose(e.onRewardedVideoAdClose),e._isRegRewardedVideoAdEvent=!0},e.showRewardedVideoAd=function(t,n){if(o["default"].onTTMiniGame){e._onRewardedVideoAdClose=t,e._onRewardedVideoAdFailed=n;var a=Laya.Browser.window.tt.createRewardedVideoAd({adUnitId:e.adUnitId});e._isRegRewardedVideoAdEvent||e.regRewardedVideoAdEvent(a),a.load().then(function(){var e=a.show();e.then(function(){return console.log("激励视频 广告显示成功")}),e["catch"](function(e){a.load().then(function(){return a.show()})["catch"](function(e){console.log("激励视频 广告显示失败"),n&&n()})})})["catch"](function(e){console.log("激励视频 广告加载失败"),n&&n()})}else t(!0)},e.initRecord=function(){e.record=Laya.Browser.window.tt.getGameRecorderManager(),null!=e.record&&(e.record.onStart(function(t){console.log("录屏开始"),
e.recordRes=""}),e.record.onStop(function(t){console.log("录屏结束"),e.recordRes=t.videoPath}))},e.startRecord=function(t){void 0===t&&(t=300),o["default"].onTTMiniGame&&e.record.start({duration:t})},e.stopRecord=function(){o["default"].onTTMiniGame&&e.record.stop()},e.shareRecord=function(t,n){void 0===t&&(t=null),void 0===n&&(n=null),o["default"].onTTMiniGame&&(""!=e.recordRes?window.tt.shareAppMessage({channel:"video",extra:{videoPath:e.recordRes,videoTopics:[o["default"].GameName]},success:function(){null!=t&&t(),console.log("分享视频成功")},fail:function(e){console.log("分享视频失败"),null!=n&&n()}}):(null!=n&&n(),console.log("分享视频为空")))},e.share=function(e){void 0===e&&(e=null),o["default"].onTTMiniGame&&window.tt.shareAppMessage({templateId:this._templateId,success:function(){null!=e&&e()},fail:function(){console.log("分享失败")}})},e.showBanner=function(){if(o["default"].onTTMiniGame&&!(this.bannerAdUnitId.length<=0)){if(!e._banner){var t=Laya.Browser.window.tt.getSystemInfoSync(),n=t.windowWidth,a=t.windowHeight,i=150;e._banner=Laya.Browser.window.tt.createBannerAd({adUnitId:e.bannerAdUnitId,adIntervals:30,style:{width:i,top:a-i/16*9}}),e._banner.onResize(function(t){console.log(t.width,t.height),e._banner.style.top=a-t.height,e._banner.style.left=(n-t.width)/2})}e._banner.show()}},e.hideBanner=function(){null!=e._banner&&e._banner.hide()},e.showMoreGamesModal=function(e,t){var n=Laya.Browser.window.tt.getSystemInfoSync();"ios"!==n.platform?Laya.Browser.window.tt.showMoreGamesModal({appLaunchOptions:[{appId:o["default"].AppID,query:"foo=bar&baz=qux",extraData:{}}],success:function(t){console.log("success",t.errMsg),e&&e()},fail:function(e){console.log("fail",e.errMsg),t&&t()}}):t&&t()},e.autoOpenSignInView=function(e){i["default"].GetSignIn(function(t){var n=t.data.is_sign;t.data.sign_day_num;0==n?a["default"].instance.openView(a.ViewDef.TTSignInView,null,function(){e(!0)}):e(!1)},function(){e(!1)})},e.adUnitId="",e.bannerAdUnitId="",e.InsAdUnitId="",e._templateId="",e.recordRes="",e._banner=null,e._isRegRewardedVideoAdEvent=!1,e._onRewardedVideoAdFailed=null,e._onRewardedVideoAdClose=null,e}();n["default"]=r},{"./AppConfig":2,"./Mgr/ViewMgr":21,"./Net/HttpUnit":26}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Event/EventMgr"),a=e("../Event/EventDef"),i=function(){function e(){this.levelNum=1,this.moneyNum=0,this.crystalNum=0,this.unlockedItem=[],this.usedItem=-1}return e}();n.UserGameData=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"isLogin",{get:function(){return""!=t.code||""!=t.token},enumerable:!0,configurable:!0}),t.getSaveData=function(){return JSON.stringify(t._gameData)},t.testInitUser=function(){var e=localStorage.getItem("Game_Data");console.log("读取存储数据 str----"+e);var n=JSON.parse(e);if(null==n)return t._gameData.levelNum=1,t._gameData.moneyNum=100,void(t._gameData.crystalNum=100);if(t._gameData.levelNum=n.levelNum,t._gameData.moneyNum=n.moneyNum,t._gameData.crystalNum=n.crystalNum,null!=n.unlockedItem)for(var o=n.unlockedItem,a=0;a<o.length;++a)t._gameData.unlockedItem.push(o[a]);null!=n.usedItem&&(t._gameData.usedItem=n.usedItem)},t.initiUser=function(e){if(e&&0!=e){if(t._gameData.levelNum=e.levelNum,t._gameData.moneyNum=e.moneyNum,t._gameData.crystalNum=e.crystalNum,null!=e.unlockedItem)for(var n=e.unlockedItem,o=0;o<n.length;++o)t._gameData.unlockedItem.push(n[o]);null!=e.usedItem&&(t._gameData.usedItem=e.usedItem)}},t.setLeveNum=function(e){t._gameData.levelNum=e},t.getLeveNum=function(){return t._gameData.levelNum},t.addMoney=function(e){e=Math.ceil(e);var n=t._gameData.moneyNum;t._gameData.moneyNum+=e,o["default"].instance.dispatch(a.EventDef.Game_OnUserMoneyChange,{curr:t._gameData.moneyNum,last:n})},t.subMoney=function(e){e=Math.ceil(e);var n=t._gameData.moneyNum;t._gameData.moneyNum-=e,t._gameData.moneyNum<0&&(t._gameData.moneyNum=0),o["default"].instance.dispatch(a.EventDef.Game_OnUserMoneyChange,{curr:t._gameData.moneyNum,last:n})},t.getMoney=function(){return t._gameData.moneyNum},t.addCrystal=function(e){e=Math.ceil(e);var n=t._gameData.crystalNum;t._gameData.crystalNum+=e,o["default"].instance.dispatch(a.EventDef.Game_OnUserCrystalChange,{curr:t._gameData.crystalNum,last:n})},t.subCrystal=function(e){e=Math.ceil(e);var n=t._gameData.crystalNum;t._gameData.crystalNum-=e,t._gameData.crystalNum<0&&(t._gameData.crystalNum=0),o["default"].instance.dispatch(a.EventDef.Game_OnUserCrystalChange,{curr:t._gameData.crystalNum,last:n})},t.getCrystal=function(){return t._gameData.crystalNum},t.getItemUnlocked=function(){for(var e=new Array,n=0;n<t._gameData.unlockedItem.length;++n)e.push(t._gameData.unlockedItem[n]);return e},t.itemIsUnlocked=function(e){for(var n=0;n<t._gameData.unlockedItem.length;++n)if(t._gameData.unlockedItem[n]==e)return!0;return!1},t.unlockItem=function(e){return t.itemIsUnlocked(e)?void console.log("商店重复解锁 id : ",e):(t._gameData.unlockedItem.push(e),void o["default"].instance.dispatch(a.EventDef.Game_OnUserUnlockedStore,{unlocked:e}))},Object.defineProperty(t,"curUsedItem",{get:function(){return t._gameData.usedItem},set:function(e){t._gameData.usedItem=e},enumerable:!0,configurable:!0}),t.code="",t.openId="",t.token=null,t.nickName="",t.gender=0,t._gameData=new i,t}(Laya.Script);n["default"]=r},{"../Event/EventDef":7,"../Event/EventMgr":8}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.Lerp=function(e,t,n){if(e==t)return t;if(e>t){var o=e-n;return t>=o?t:o}if(t>e){var o=e+n;return o>=t?t:o}},e.lerpEulerAngle=function(t,n,o){var t=t%360;t=t>=0?t:360+t;var n=n%360;n=n>=0?n:360+n;var a=Math.abs(n-t);a>180&&(n>t?n-=360:t>n&&(n+=360));var i=e.Lerp(t,n,o);return i},e.getRotationByDir=function(t){var n=t.x*e.poinDown.x+t.y*e.poinDown.y,o=n/(t.distance(0,0)*e.poinDown.distance(0,0)),a=Math.acos(o),i=a/(2*Math.PI)*360;return t.x<0&&(i=-i),i},e.getRotationByDirOn3DSpace=function(t){var n=t.x*e.poinUp.x+t.y*e.poinUp.y,o=n/(t.distance(0,0)*e.poinUp.distance(0,0)),a=Math.acos(o),i=a/(2*Math.PI)*360;return t.x<0&&(i+=2*(180-i)),i},e.getDirByRotation=function(e){var t=(e-90)*Math.PI/180,n=Math.cos(t),o=Math.sin(t),a=new Laya.Point(n,o);return a.normalize(),a},e.getDirDirAngle=function(e,t){var n=e.x*t.x+e.y*t.y,o=n/(e.distance(0,0)*t.distance(0,0)),a=Math.acos(o),i=a/(2*Math.PI)*360;return i},e.getDirScalarLength=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return t},e.setSpOnParentCenter=function(e){if(null!=e.parent){var t=e.parent,n=0,o=0,n=n-e.width/2*e.scaleX+t.width/2,o=o-e.height/2*e.scaleY+t.height/2;e.x=n,e.y=o}},e.getPointToLineDistance=function(e,t,n,o){var a=new Laya.Point(e-n.x,t-n.y),i=new Laya.Point(e-o.x,t-o.y),r=new Laya.Point(o.x-n.y,o.y-n.y),s=r.x*a.x+r.y*a.y;if(0>=s)return a.distance(0,0);var l=r.x*i.x+r.y*i.y;if(0>=l)return i.distance(0,0);var c=a.distance(0,0),u=r.distance(0,0),d=s/(c*u),h=Math.acos(d),f=Math.sin(h)*c;return f},e.isIphoneX=function(){return Laya.Browser.onIPhone&&(2436==Laya.Browser.width&&1125==Laya.Browser.height||2436==Laya.Browser.height&&1125==Laya.Browser.width)?!0:!1},e.isIphone=function(){return Laya.Browser.onIPhone},e.getChild=function(t,n){for(var o=0;o<t.numChildren;++o){var a=t.getChildAt(o);if(a.name==n)return a;var i=e.getChild(a,n);if(i)return i}return null},e.forEachChild=function(t,n){for(var o=0;o<t.numChildren;++o){var a=t.getChildAt(o);n(a),e.forEachChild(a,n)}},e.OriginStageWidth=1334,e.OriginStageHeight=750,e.grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],e.grayscaleFilter=new Laya.ColorFilter(e.grayscaleMat),e.poinDown=new Laya.Point(0,-1),e.poinUp=new Laya.Point(0,1),e}();n["default"]=o},{}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AppConfig"),a=e("./Mgr/SoundMgr"),i=e("./Config/AppSwitchConfig"),r=e("./AppConfig"),s=e("./Mgr/ViewMgr"),l=function(){function e(){}return Object.defineProperty(e,"BannerInstance",{get:function(){return this._banner},enumerable:!0,configurable:!0}),e.Login=function(e,t){Laya.Browser.window.qg.getSystemInfoSync().platformVersionCode>=1053?(console.log("vivo 开始登陆 >= 1053"),Laya.Browser.window.qg.login().then(function(n){if(n.data.token){var o=n.data.token;e(o,!0),console.log("vivo 登陆成功,获取到 token : "+o)}else console.log("登录失败 res.data.token 为 null"),t()},function(e){console.log("登录失败"+JSON.stringify(e)),t()})):(console.log("vivo 开始登陆 < 1053"),Laya.Browser.window.qg.authorize({type:"token",success:function(n){Laya.Browser.window.qg.getProfile({token:n.accessToken,success:function(t){console.log("openid获取成功",t.openid),e(t.openid,!1)},fail:function(e,n){console.log("获取openid失败 : "+n),t()}})},fail:function(e,n){console.log("登录失败"+n),t()}}))},e.showDialog=function(e,t,n,o,a,i){Laya.Browser.window.qg.showDialog({title:e,message:t,buttons:n,success:function(e){console.log("handling callback"),o()},cancel:function(){console.log("handling cancel"),a()},fail:function(e,t){console.log("handling fail, code = "+t),i()}})},e.createRewardedVideoAd=function(){Laya.Browser.onVVMiniGame&&(e.rewardedAd=Laya.Browser.window.qg.createRewardedVideoAd({posId:e.adUnitId,style:{}}),e.rewardedAd.onError(function(e){switch(e.errCode){case-3:console.log("激励广告加载失败---调用太频繁",JSON.stringify(e));break;case-4:console.log("激励广告加载失败--- 一分钟内不能重复加载",JSON.stringify(e));break;case 30008:break;default:console.log("激励广告展示失败"),console.log(JSON.stringify(e))}}))},e.showRewardedVideoAd=function(t,n){if(Laya.Browser.onVVMiniGame){if(a["default"].instance.stopBGM(),console.log("---------------------------------- VIVOAPI.rewardedAd:",e.rewardedAd+",VIVOAPI.rewardedAdNum:",e.rewardedAdNum),0==e.rewardedAdNum)e.createRewardedVideoAd();else{var o=e.rewardedAd.load();o&&o["catch"](function(e){console.log("激励广告load失败"+JSON.stringify(e)),n()})}e.rewardedAdNum=1,console.log("近来showRewardedVideoAd"),e.rewardedAd.onLoad(function(){var t=e.rewardedAd.show();t&&t.then(function(){console.log("激励广告展示成功")})["catch"](function(e){console.log("激励广告展示失败"+JSON.stringify(e)),n()})}),e.rewardedAd.onClose(function(e){e&&e.isEnded?(console.log("正常播放结束，可以下发游戏奖励"),t(!0)):(console.log("播放中途退出，不下发游戏奖励"),t(!1))})}},e.showBannerAd=function(){if(Laya.Browser.onVVMiniGame){console.log("===========bannerAd showBanerAd");var t=Laya.Browser.window.qg.getSystemInfoSync();t.screenWidth,t.screenHeight;this.mBannerAd=qg.createBannerAd({posId:e.bannerAdUnitId,style:{}});var n=this.mBannerAd.show();n&&n.then(function(){console.log("banner广告展示成功")})["catch"](function(e){switch(e.code){case 30003:console.log("新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入");break;case 30009:console.log("10秒内调用广告次数超过1次，10秒后再调用");break;case 30002:console.log("加载广告失败，重新加载广告");break;default:console.log("banner广告展示失败"),console.log(JSON.stringify(e))}}),this.mBannerAd.onError(function(e){console.log("Banner广告加载失败111:"+JSON.stringify(e))})}},e.hideBannerAd=function(){this.mBannerAd?(console.log("===========bannerAd 隐藏"),this.mBannerAd.hide(),this.mBannerAd.destroy(),this.mBannerAd=null):console.log("===========bannerAd 为空")},e.navigateToMiniProgram=function(e,t,n,a,i){Laya.Browser.onVVMiniGame&&(console.log("vivo 跳转游戏： "+e),Laya.Browser.window.qg.navigateToMiniGame({pkgName:e,path:t,extraData:{from:o["default"].AppID},envVersion:"release",success:function(e){n&&n(e)},fail:function(e){a&&a(e)},complete:function(e){i&&i(e)}}))},e.showInterstitialAd=function(t,n){if(Laya.Browser.onVVMiniGame){var o=Laya.Browser.window.qg.createInterstitialAd({posId:e.InsAdUnitId});o.onLoad(function(){console.log("插屏广告加载完成")}),o.onClose(function(){t&&t()}),o.onError(function(e){console.log("插屏广告拉取失败",JSON.stringify(e)),n&&n()}),o.show().then(function(){console.log("插屏广告显示成功")})["catch"](function(e){n&&n()})}else t&&t()},e.getLaunchOptionsSync=function(){return{}},e.share=function(e){Laya.Browser.onVVMiniGame&&Laya.Browser.window.qg.share({success:function(){null!=e&&e(!0),Laya.Browser.window.qg.showToast({message:"分享成功"})},fail:function(e,t){Laya.Browser.window.qg.showToast({message:"分享失败"})},cancel:function(){Laya.Browser.window.qg.showToast({message:"分享失败"})},complete:function(){}})},e.createDesktopIcon=function(e,t){Laya.Browser.onVVMiniGame?Laya.Browser.window.qg.hasShortcutInstalled({success:function(n){0==n?Laya.Browser.window.qg.installShortcut({success:function(){e&&e()},fail:function(e){t&&t(),console.log("创建桌面图标失败！！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):(console.log("桌面图标已存在！！！！"),t&&t())},fail:function(e){t&&t(),console.log("判断桌面图标是否存在失败！！！",e);for(var n in e)console.log(n,e)},complete:function(){}}):t&&t()},e.showNativeAd=function(t,n,o){1==o?e.tryShowNativeAd1(t,n):2==o&&e.tryShowNativeAd2(t,n)},e.tryShowNativeAd1=function(e,t){if(!Laya.Browser.onVVMiniGame)return void(null!=t&&t());var n=function(){null!=e&&e()},o=i["default"].getInstance().getAppSwitchData().vivocfg.yuanshengSwitch,a=i["default"].getInstance().getAppSwitchData().vivocfg.vivoversions;1==o&&a==r["default"].Versions?s["default"].instance.openView(s.ViewDef.VVNativeView1,null,function(e){n()}):null!=t&&t()},e.tryShowNativeAd2=function(e,t){if(!Laya.Browser.onVVMiniGame)return void(null!=t&&t());var n=function(){null!=e&&e()},o=i["default"].getInstance().getAppSwitchData().vivocfg.yuanshengSwitch2,a=i["default"].getInstance().getAppSwitchData().vivocfg.vivoversions;1==o&&a==r["default"].Versions?s["default"].instance.openView(s.ViewDef.VVNativeView2,null,function(e){n()}):null!=t&&t()},e.tryPopCreateDestopIcon=function(t,n){return Laya.Browser.onVVMiniGame?void(1==i["default"].getInstance().getAppSwitchData().vivocfg.addToDesktop?e.createDesktopIcon(t,n):null!=n&&n()):void(null!=n&&n())},e.tryShowInsAd=function(t,n){var o=i["default"].getInstance().getAppSwitchData().vivocfg.chapingSwitch;if(1==o){var a=100*Math.random();a<=i["default"].getInstance().getAppSwitchData().vivocfg.chaping?e.showInterstitialAd(function(){t&&t()},function(){n&&n()}):n&&n()}else n&&n()},e.adUnitId="",e.bannerAdUnitId="",e.nativeAdId="",e.InsAdUnitId="",e.rewardedAd=null,e.rewardedAdNum=0,e._banner=null,e.mBannerAd=null,e}();n["default"]=l},{"./AppConfig":2,"./Config/AppSwitchConfig":4,"./Mgr/SoundMgr":19,"./Mgr/ViewMgr":21}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Mgr/SoundMgr"),a=function(e){function t(){var t=e.call(this)||this;return t.useSound=!0,t}return __extends(t,e),t.prototype.onAwake=function(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown),this.owner.on(Laya.Event.MOUSE_UP,this,this.onUp),this.owner.on(Laya.Event.MOUSE_OUT,this,this.onUp)},t.prototype.onDisable=function(){this.owner.offAll(),Laya.Tween.clearAll(this)},t.prototype.onDown=function(){Laya.Tween.to(this.owner,{scaleX:.9,scaleY:.9},50),this.useSound&&o["default"].instance.playSound("anniu")},t.prototype.onUp=function(){Laya.Tween.to(this.owner,{scaleX:1,scaleY:1},50)},t}(Laya.Script);n["default"]=a},{"../Mgr/SoundMgr":19}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){var e=Laya.stage.width,n=e/t.baseWidth,o=this.owner;o.scale(n,n)},t.baseWidth=750,t.baseHeight=1334,t}(Laya.Script);n["default"]=o},{}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ViewBase"),a=e("../../Event/EventMgr"),i=e("../../Event/EventDef"),r=e("../../Mgr/ViewMgr"),s=e("../../User/User"),l=e("../../Mgr/SoundMgr"),c=e("../../ParkingJam/Components/HorizontalLayout"),u=function(e){function t(){var t=e.call(this)||this;return t.popAdFlag=!1,t}return __extends(t,e),t.prototype.onAwake=function(){this.overLayer=this.owner.getChildByName("overLayer");var e=this.owner.getChildByName("layerTop").getChildByName("btnRefresh");this.levelLayout=this.owner.getChildByName("layerTop").getChildByName("levelLayer").getComponent(c["default"]),this.levelLayoutOver=this.overLayer.getChildByName("levelFontLayer").getComponent(c["default"]),this.rewardLayout=this.overLayer.getChildByName("rewardLayer").getComponent(c["default"]),this.guideHand=this.owner.getChildByName("guideHand"),this.gold=this.owner.getChildByName("layerTop").getChildByName("rewardLayer").getChildByName("Text"),this.gold.text=String(s["default"].getMoney()),e.on(Laya.Event.MOUSE_UP,this,this._onClickRefresh),this.goldLayout=this.owner.getChildByName("layerTop").getChildByName("rewardLayer"),this.btnStart=this.owner.getChildByName("btnStart"),this.btnStart.on(Laya.Event.MOUSE_UP,this,this._onClickTouchStart)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),a["default"].instance.regEvemt(i.EventDef.Game_OnLevelComplate,this,this.gameOver),a["default"].instance.regEvemt(i.EventDef.Game_OnLevelStart,this,this.gameStart),a["default"].instance.regEvemt(i.EventDef.Game_OnUserMoneyChange,this,this.moneyChange),a["default"].instance.regEvemt(i.EventDef.Game_Guide,this,this.gameGuide),a["default"].instance.regEvemt(i.EventDef.Game_OnViewOpen,this,this._viewOpenListner),a["default"].instance.regEvemt(i.EventDef.Game_OnViewClose,this,this._viewCloseListner)},t.prototype.onStart=function(){e.prototype.onStart.call(this),this.levelLayout.setNum(s["default"].getLeveNum())},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),a["default"].instance.removeEvent(i.EventDef.Game_OnLevelComplate,this,this.gameOver),a["default"].instance.removeEvent(i.EventDef.Game_OnLevelStart,this,this.gameStart),a["default"].instance.removeEvent(i.EventDef.Game_OnUserMoneyChange,this,this.moneyChange),a["default"].instance.removeEvent(i.EventDef.Game_Guide,this,this.gameGuide),a["default"].instance.removeEvent(i.EventDef.Game_OnViewOpen,this,this._viewOpenListner),a["default"].instance.removeEvent(i.EventDef.Game_OnViewClose,this,this._viewCloseListner)},t.prototype._onClickTouchStart=function(){this.btnStart.visible=!1,a["default"].instance.dispatch(i.EventDef.Game_TouchStart)},t.prototype._viewOpenListner=function(e){},t.prototype._viewCloseListner=function(e){e.view==r.ViewDef.GameWinView&&this.show()},t.prototype.horiBannerListener=function(e){},t.prototype.gameGuide=function(e){if(this.guideHand.visible=e.visible,e.visible){console.log("stage",Laya.stage.width,Laya.stage.height,e.pos),this.guideHand.pos(e.pos.x/Laya.stage.clientScaleX,e.pos.y/Laya.stage.clientScaleY),console.log(this.guideHand.x,this.guideHand.y);var t=new Laya.Vector2(e.pos.x,e.pos.y);Laya.Tween.clearAll(this.guideHand),this.guideMoveAct(t,e.offsetX,e.offsetY)}},t.prototype.guideMoveAct=function(e,t,n){var o=this,a=0,i=null;t?(a=e.x+t,i={x:a}):n&&(a=e.y+n,i={y:a}),Laya.Tween.to(this.guideHand,i,1e3,null,Laya.Handler.create(this,function(){o.guideHand.pos(e.x,e.y),o.guideMoveAct(e,t,n)}))},t.prototype.moneyChange=function(e){this.rewardLayout.setNum(e.curr-e.last),this.gold.text=String(s["default"].getMoney())},t.prototype.gameStart=function(){this.btnStart.visible=!0,this.popAdFlag=!0,this.levelLayout.setNum(s["default"].getLeveNum())},t.prototype.gameOver=function(){this.levelLayoutOver.setNum(s["default"].getLeveNum()),this.overLayer.visible=!0;var e=this.overLayer.getChildByName("img");e.scaleX=.5,e.scaleY=.5,e.alpha=0,Laya.Tween.to(e,{alpha:1,scaleX:1,scaleY:1},500,Laya.Ease.backInOut,Laya.Handler.create(this,function(){l["default"].instance.playSound("victory")})),Laya.timer.once(2e3,this,this.showGameOverView)},t.prototype.showGameOverView=function(){var e=this;this.overLayer.visible=!1,r["default"].instance.openView(r.ViewDef.GameWinView,null,function(t){t.owner.zOrder=1,e.hide()})},t.prototype._onClickRefresh=function(){a["default"].instance.dispatch(i.EventDef.Game_Refresh)},t}(o["default"]);n["default"]=u},{"../../Event/EventDef":7,"../../Event/EventMgr":8,"../../Mgr/SoundMgr":19,"../../Mgr/ViewMgr":21,"../../ParkingJam/Components/HorizontalLayout":31,"../../User/User":49,"../ViewBase":63}],55:[function(e,t,n){"use strict";function o(e){return null!=e.onViewShow&&"function"==typeof e.onViewShow&&null!=e.onViewHide&&"function"==typeof e.onViewHide?!0:!1}Object.defineProperty(n,"__esModule",{value:!0}),n.isIViewStateListener=o},{}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ViewBase"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._processWidth=0,t._logoAni=null,t}return __extends(t,e),t.prototype.onAwake=function(){this._bg=this.owner.getChildByName("Bg"),this._bottomZone=this._bg.getChildByName("BottomZone"),this._processBarBg=this._bottomZone.getChildByName("processBarBg"),this._processBar=this._processBarBg.getChildByName("processBar"),this._processWidth=this._processBar.width},t.prototype.onStart=function(){},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this)},t.prototype.onUpdate=function(){this._bg.width=Laya.stage.width,this._bg.height=Laya.stage.height},t.prototype.setProcess=function(e){0>e&&(e=0),e>1&&(e=1);var t=this._processWidth*e;1>t&&(t=1),this._processBar.width=t},t}(o["default"]);n["default"]=a},{"../ViewBase":63}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../TemplateViewBase"),a=e("../../../KRQ/Com/KRQ_LoopAd/KRQ_VLoopAd"),i=e("../../../Config/AppSwitchConfig"),r=e("../../../Utilit"),s=e("../../../ShareAd/ShareAd"),l=e("../../../Mgr/ViewMgr"),c=e("../../../Mgr/WXADMgr"),u=e("../../../Mgr/WudianMgr"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._continueBtn=null,t._krqVLoopAd=null,t._KRQ_VLoopAd=null,t._isCanClose=!1,t._banner=null,t.wudianEnable=!1,t}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this._krqVLoopAd=this.View.getChildByName("KRQ_VLoopAd").getComponent(a["default"]),this._krqVLoopAd.useLocalRandom=!0,this._krqVLoopAd.useRandom=!1,this._krqVLoopAd.useMovePause=!1,this._krqVLoopAd.sortDatas=this.sortDatas,this._continueBtn=this.View.getChildByName("ContinueBtn"),this._continueBtn.visible=!1;var t=this;u["default"].WudianFlag&&1==i["default"].getInstance().getAppSwitchData().continueBanner?(this.wudianEnable=!0,Laya.timer.once(1e3*i["default"].getInstance().getAppSwitchData().continueBtnDelayTime,t,function(){t._continueBtn.visible=!0})):Laya.timer.once(1e3*i["default"].getInstance().getAppSwitchData().continueBtnDelayTime,t,function(){t._continueBtn.visible=!0,t._isCanClose=!0}),this._KRQ_VLoopAd=this.View.getChildByName("KRQ_VLoopAd"),r["default"].isIphoneX()&&(this._KRQ_VLoopAd.top=this._KRQ_VLoopAd.top+75)},t.prototype.onStart=function(){this._krqVLoopAd.AdPosID=s["default"].MoreGameLocationID,e.prototype.onStart.call(this)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._continueBtn.on(Laya.Event.CLICK,this,this.onContinueBtn)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._continueBtn.off(Laya.Event.CLICK,this,this.onContinueBtn)},t.prototype.ShowBanner=function(){var e=this,t=this;c["default"].getBanner(function(n){null!=t._banner&&t._banner.hide(),t._banner=n,null!=t._banner?t._banner.show():e._isCanClose=!0,e.isShowHistoryBtn&&(t.HistoryBtn.visible=!0)})},t.prototype.onDestroy=function(){null!=this._banner&&this._banner.hide(),this._banner=null},t.prototype.onContinueBtn=function(){var e=this;if(this.wudianEnable&&(this.wudianEnable=!1,Laya.timer.once(1e3*i["default"].getInstance().getAppSwitchData().continueBannerShowTime,this,function(){e.ShowBanner(),Laya.timer.once(1e3*i["default"].getInstance().getAppSwitchData().continueBannerHideTime,e,function(){e._isCanClose=!0,null!=e._banner&&e._banner.hide(),e._banner=null})})),this._isCanClose){var t=this,n=function(){t.closeView()};l["default"].instance.tryShowPopAd(function(e){null!=e?e.onCloseEvent=function(){n()}:n()})}},t.prototype.sortDatas=function(e){if(null==e||0==e.length)return[];for(var t={},n=new Array,o=0;o<e.length;++o){var a=e[o];null==t[a.appid]?(t[a.appid]=new Array,t[a.appid].push(a),n.push(a.appid)):t[a.appid].push(a)}for(var o=0;o<n.length;++o){var i=n[o],r=Math.floor(Math.random()*n.length),s=n[r];n[r]=i,n[o]=s}for(var o=0;o<n.length;++o)for(var i=n[o],l=t[i],c=0;c<l.length;++c){var a=l[c],r=Math.floor(Math.random()*l.length),s=l[r];l[r]=a,l[c]=s}for(var u=new Array,d=[];n.length>0;){for(var h=!0,o=0;o<n.length;++o){for(var i=n[o],f=!0,c=0;c<d.length;++c){var p=d[c];if(p==i){f=!1;break}}if(f){h=!1;var a=t[i].shift();u.push(a),d.push(i),d.length>3&&d.shift(),t[i].length<=0&&(n.splice(o,1),--o)}}if(h){for(var c=0;c<n.length;++c){var i=n[c],f=!0,l=t[i];d.splice(0);for(var g=0;g<l.length;++g)for(var a=l[g],o=0;o<u.length;++o){d.push(null==u[o-2]?null:u[o-2].appid),d.push(null==u[o-1]?null:u[o-1].appid),d.push(null==u[o]?null:u[o].appid),d.push(null==u[o+1]?null:u[o+1].appid),d.push(null==u[o+2]?null:u[o+2].appid);for(var y=0;y<d.length;++y){var p=d[y];if(null!=p&&p==i){f=!1;break}}if(f&&null!=a){var m=u.slice(0,o+1),v=u.slice(o+1,u.length);u=m,u.push(a);for(var w=0;w<v.length;++w)u.push(v[w])}}}break}for(var o=0;o<n.length;++o){var i=n[o],r=Math.floor(Math.random()*n.length),s=n[r];n[r]=i,n[o]=s}}return u},t}(o["default"]);n["default"]=d},{"../../../Config/AppSwitchConfig":4,"../../../KRQ/Com/KRQ_LoopAd/KRQ_VLoopAd":15,"../../../Mgr/ViewMgr":21,"../../../Mgr/WXADMgr":22,"../../../Mgr/WudianMgr":23,"../../../ShareAd/ShareAd":47,"../../../Utilit":50,"../TemplateViewBase":61}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../TemplateViewBase"),a=e("../../../KRQ/Com/KRQ_LoopAd/KRQ_VLoopAd"),i=e("../../../Config/AppSwitchConfig"),r=e("../../../Utilit"),s=e("../../../Mgr/WXADMgr"),l=e("../../../Mgr/ViewMgr"),c=e("../../../Mgr/WudianMgr"),u=e("../../../ShareAd/ShareAd"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._closeBtn=null,t._krqVLoopAd=null,t._KRQ_VLoopAd=null,t._clickTag=!1,t._clickTimingTag=!1,t._banner=null,t}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this._krqVLoopAd=this.View.getChildByName("KRQ_VLoopAd").getComponent(a["default"]),this._closeBtn=this.View.getChildByName("CloseBtn"),this._KRQ_VLoopAd=this.View.getChildByName("KRQ_VLoopAd"),r["default"].isIphoneX()&&(this._KRQ_VLoopAd.top=this._KRQ_VLoopAd.top+75);var t=Laya.stage.width/Laya.stage.height;.5>t?this._KRQ_VLoopAd.height=900:this._KRQ_VLoopAd.height=750},t.prototype.onStart=function(){if(this._krqVLoopAd.AdPosID=u["default"].MoreGameLocationID,e.prototype.onStart.call(this),c["default"].WudianFlag){var t=i["default"].getInstance().getAppSwitchData().btnMoveTimer,n=i["default"].getInstance().getAppSwitchData().bannerMoveTimer;Laya.timer.once(1e3*n,this,this.BannerUp),Laya.timer.once(1e3*t,this,this.BtnUp)}},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._closeBtn.on(Laya.Event.CLICK,this,this.onCloseBtn)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._closeBtn.off(Laya.Event.CLICK,this,this.onCloseBtn)},t.prototype.BannerUp=function(){var e=this,t=this;s["default"].getBanner(function(n){null!=t._banner&&t._banner.hide(),t._banner=n,null!=t._banner&&t._banner.show(),e.isShowHistoryBtn&&(t.HistoryBtn.visible=!0)})},t.prototype.BtnUp=function(){this._clickTag=!0;var e=Laya.stage.width/Laya.stage.height;.5>e?this._closeBtn.bottom=270:this._closeBtn.bottom=370},t.prototype.onCloseBtn=function(){if(this._clickTag||!c["default"].WudianFlag)this.closeView();else{if(!this._clickTimingTag){this._clickTimingTag=!0;var e=i["default"].getInstance().getAppSwitchData().btnMoveTimer,t=i["default"].getInstance().getAppSwitchData().bannerMoveTimer;Laya.timer.once(1e3*t,this,this.BannerUp),Laya.timer.once(1e3*e,this,this.BtnUp)}}},t.prototype.onDestroy=function(){null!=this._banner&&this._banner.hide(),this._banner=null},t.prototype.onHistoryBtn=function(){var e=this;l["default"].instance.openView(l.ViewDef.MiniGameView,null,function(t){e.hide(),null!=e._banner&&e._banner.hide(),t.onCloseEvent=function(){null==e.View||e.View.destroyed||(e.show(),null!=e._banner&&e._banner.show())}})},t}(o["default"]);n["default"]=d},{"../../../Config/AppSwitchConfig":4,"../../../KRQ/Com/KRQ_LoopAd/KRQ_VLoopAd":15,"../../../Mgr/ViewMgr":21,"../../../Mgr/WXADMgr":22,"../../../Mgr/WudianMgr":23,"../../../ShareAd/ShareAd":47,"../../../Utilit":50,"../TemplateViewBase":61}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../TemplateViewBase"),a=e("../../../Mgr/WudianMgr"),i=e("../../../Config/AppSwitchConfig"),r=e("../../../Utilit"),s=e("../../../Mgr/ViewMgr"),l=e("../../../User/User"),c=e("../../../Event/EventMgr"),u=e("../../../Event/EventDef"),d=e("../../../NativeCallback"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._centerZone=null,t._backBtn=null,t._nextBtn=null,t._clickTag=!1,t._clickTimingTag=!1,t._banner=null,t}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this._centerZone=this.View.getChildByName("CenterZone"),r["default"].isIphoneX()&&(this._centerZone.top=this._centerZone.top+75),this._backBtn=this._centerZone.getChildByName("BackBtn"),this._nextBtn=this._centerZone.getChildByName("NextBtn"),this._backBtn.visible=!1,a["default"].WudianFlag&&(this.HistoryBtn.visible=!1)},t.prototype.onStart=function(){e.prototype.onStart.call(this)},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),c["default"].instance.regEvemt(u.EventDef.InsertVideoEnd,this,this.onInsertVideoEnd)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._backBtn.on(Laya.Event.CLICK,this,this.onBackBtn),this._nextBtn.on(Laya.Event.CLICK,this,this.onNextBtn)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._backBtn.off(Laya.Event.CLICK,this,this.onBackBtn),this._nextBtn.off(Laya.Event.CLICK,this,this.onNextBtn)},t.prototype.onBackBtn=function(){if(this._clickTag||!a["default"].WudianFlag);else{if(!this._clickTimingTag){this._clickTimingTag=!0;var e=i["default"].getInstance().getAppSwitchData().btnMoveTimer,t=i["default"].getInstance().getAppSwitchData().bannerMoveTimer;Laya.timer.once(1e3*t,this,this.BannerUp),Laya.timer.once(1e3*e,this,this.BtnUp)}}},t.prototype.onInsertVideoEnd=function(){l["default"].setLeveNum(l["default"].getLeveNum()+1),c["default"].instance.dispatch(u.EventDef.Game_OnLevelStart),this.closeView()},t.prototype.onNextBtn=function(){if(l["default"].getLeveNum()>3){var e=Math.random();if(Laya.Browser.onAndroid||Laya.Browser.onIOS&&e>.1)return d["default"].CallNativeFunc("showInsertVideo"),void(Laya.SoundManager.muted=!0)}l["default"].setLeveNum(l["default"].getLeveNum()+1),c["default"].instance.dispatch(u.EventDef.Game_OnLevelStart),this.closeView()},t.prototype.BannerUp=function(){},t.prototype.BtnUp=function(){this._clickTag=!0,this._backBtn.y=720,this._nextBtn.y=720},t.prototype.onDestroy=function(){null!=this._banner&&this._banner.hide(),this._banner=null},t.prototype.onHistoryBtn=function(){var e=this;s["default"].instance.openView(s.ViewDef.MiniGameView,null,function(t){e.hide(),null!=e._banner&&e._banner.hide(),t.onCloseEvent=function(){null==e.View||e.View.destroyed||(e.show(),null!=e._banner&&e._banner.show())}})},t}(o["default"]);n["default"]=h},{"../../../Config/AppSwitchConfig":4,"../../../Event/EventDef":7,"../../../Event/EventMgr":8,"../../../Mgr/ViewMgr":21,"../../../Mgr/WudianMgr":23,"../../../NativeCallback":24,"../../../User/User":49,"../../../Utilit":50,"../TemplateViewBase":61}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../ViewBase"),a=e("../../../KRQ/Com/KRQ_History/KRQ_History"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._krqhistory=null,t}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this._krqhistory=this.View.getChildByName("KRQ_History").getComponent(a["default"]);
var t=this;this._krqhistory.OnBackBtnClick=function(){t.closeView()}},t.prototype.onStart=function(){e.prototype.onStart.call(this)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this)},t}(o["default"]);n["default"]=i},{"../../../KRQ/Com/KRQ_History/KRQ_History":11,"../../ViewBase":63}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ViewBase"),a=e("../../Utilit"),i=e("../../Event/EventMgr"),r=e("../../Event/EventDef"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._historyBtn=null,t._topZone=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"HistoryBtn",{get:function(){return this._historyBtn},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TopZone",{get:function(){return null==this._topZone&&(this._topZone=this.View.getChildByName("TopZone")),this._topZone},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){this._topZone=this.View.getChildByName("TopZone"),a["default"].isIphoneX()&&(this._topZone.top=this._topZone.top+75)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),i["default"].instance.regEvemt(r.EventDef.App_OnUpdateIpBlockState,this,this.onUpdateIpBlockState)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),i["default"].instance.removeEvent(r.EventDef.App_OnUpdateIpBlockState,this,this.onUpdateIpBlockState)},t.prototype.onHistoryBtn=function(){},Object.defineProperty(t.prototype,"isShowHistoryBtn",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.onUpdateIpBlockState=function(e){},t}(o["default"]);n["default"]=s},{"../../Event/EventDef":7,"../../Event/EventMgr":8,"../../Utilit":50,"../ViewBase":63}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Event/EventDef"),a=e("../../../Event/EventMgr"),i=e("../../../Mgr/WudianMgr"),r=e("../../../Mgr/WXADMgr"),s=e("../../../Config/AppSwitchConfig"),l=e("../../ViewBase"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._clickBar=null,t._totalClickTimer=15,t._needClickTime=10,t._bannerClickTime=Math.floor(5*Math.random())+2,t._banner=null,t}return __extends(t,e),t.prototype.onAwake=function(){var e=this;this._click_Btn=this.owner.getChildByName("Click_Btn"),this._click_Btn.on(Laya.Event.CLICK,this,this.ButtonClicked),this._arrow_Img=this._click_Btn.getChildByName("Arrow_Img"),this._getPrize_View=this.owner.getChildByName("GetPrize_View"),this._prizeCount_Text=this._getPrize_View.getChildByName("PrizeCount_Text"),this._confirm_Btn=this._getPrize_View.getChildByName("Confirm_Btn"),this._getPrize_View.visible=!1,this._clickBar=this.owner.getChildByName("ClickBar").getChildByName("ClickBar"),this._clickBarOriginalWidth=this._clickBar.width,this._clickBar.width=0,this._clickTime=0,this._totalClickTime=0;var t=this;Laya.loader.load("ClickGetPrize/quanji.png",Laya.Handler.create(this,function(n){n.bitmap.lock=!0,Laya.loader.load("ClickGetPrize/quanji.sk",Laya.Handler.create(e,function(e){console.log("texture",n),console.log("bytes",e);var o=new Laya.Templet;o.parseData(n,e),t.drgon=o.buildArmature(),t.owner.addChild(t.drgon),t.drgon.x=375,t.drgon.y=610,t.drgon.scaleX=2,t.drgon.scaleY=2,t.drgon.parent.setChildIndex(t.drgon,1),t.drgon.play(0,!0),console.log("quanji 加载完成!!!!",o)}),Laya.Handler.create(e,function(){}),"",0,!1,"",!0)}),Laya.Handler.create(this,function(){}),"",0,!1,"",!0)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),Laya.stage.on(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),Laya.stage.off(Laya.Event.FOCUS_CHANGE,this,this.onFocusChange)},t.prototype.onUpdate=function(){if(this._arrowUp?(this._arrow_Img.top+=Laya.timer.delta/5,this._arrow_Img.top>-140&&(this._arrowUp=!1)):(this._arrow_Img.top-=Laya.timer.delta/5,this._arrow_Img.top<-180&&(this._arrowUp=!0)),!this._bannerClicked){var e=2+this._clickBar.width/this._clickBarOriginalWidth*4;this._clickBar.width>=e&&(this._clickBar.width-=e),this._clickBar.width/this._clickBarOriginalWidth+.1<this._clickTime/this._needClickTime&&this._clickTime--}},t.prototype.openView=function(t){this._compeletFunction=t.Complete,this._titel=t.titel,e.prototype.openView.call(this,t)},t.prototype.OpenPrizeWindow=function(){var e=this;this._prizeCount_Text.text=this._titel,this._getPrize_View.visible=!0,this._confirm_Btn.once(Laya.Event.CLICK,this,function(){null!=e._banner&&e._banner.hide(),e._compeletFunction&&e._compeletFunction(),e.closeView()})},t.prototype.ShowBanner=function(){var e=this;r["default"].getBanner(function(t){null!=e._banner&&e._banner.hide(),e._banner=t,null!=e._banner&&e._banner.show()})},t.prototype.ButtonClicked=function(){var e=this;if(this._clickTime++,this._totalClickTime++,null!=this.drgon&&(this.drgon.play(1,!1),this.drgon.once(Laya.Event.STOPPED,this,function(){e.drgon.play(0,!0)})),this._clickTime>this._needClickTime&&(this._clickTime=this._needClickTime),this._clickTime>=this._bannerClickTime){if(this._clickTime>=this._needClickTime&&(this._clickTime=this._needClickTime-1),this._bannerClicked)return;this._bannerClicked=!0,i["default"].WudianFlag&&1==s["default"].getInstance().getAppSwitchData().wxcfg.kuangdianBanner&&this.ShowBanner(),Laya.timer.once(2e3,this,function(){this.BannerClicked()})}else this._totalClickTime>this._totalClickTimer&&(i["default"].WudianFlag&&1==s["default"].getInstance().getAppSwitchData().wxcfg.kuangdianBanner&&this.ShowBanner(),this.BannerClicked());var t=this._clickTime/this._needClickTime*this._clickBarOriginalWidth;this._clickBar.width=t},t.prototype.BannerClicked=function(){a["default"].instance.dispatch(o.EventDef.AD_WudianBanner_Hide),this._bannerClicked=!0,this._clickTime=this._needClickTime,this._clickBar.width=this._clickBarOriginalWidth,this._click_Btn.visible=!1,this.OpenPrizeWindow()},t.prototype.onDestroy=function(){null!=this._banner&&this._banner.hide()},t.prototype.onFocusChange=function(){null!=this.drgon&&this.drgon.play(0,!0)},t}(l["default"]);n["default"]=c},{"../../../Config/AppSwitchConfig":4,"../../../Event/EventDef":7,"../../../Event/EventMgr":8,"../../../Mgr/WXADMgr":22,"../../../Mgr/WudianMgr":23,"../../ViewBase":63}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Mgr/ViewMgr"),a=e("../Event/EventMgr"),i=e("../Event/EventDef"),r=e("../Utilit"),s=e("./IViewStateListener"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCloseEvent=null,t.onOpenEvent=null,t._viewBase=!0,t._viewDef=o.ViewDef.None,t._data={},t}return __extends(t,e),Object.defineProperty(t.prototype,"View",{get:function(){return this.owner},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(){this.View.autoDestroyAtClosed=!0},t.prototype.onEnable=function(){this.addEvent()},t.prototype.onDisable=function(){this.removeEvent()},t.prototype.onDestroy=function(){this.removeEvent()},t.prototype.openView=function(e){this._data=e,this.show(),a["default"].instance.dispatch(i.EventDef.Game_OnViewOpen,{view:this._viewDef}),this.onOpenEvent&&this.onOpenEvent()},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){Laya.timer.clearAll(this)},t.prototype.closeView=function(){o["default"].instance.closeView(this._viewDef)},t.prototype.hide=function(){var e=this;this.View.visible=!1,this.onHide(),r["default"].forEachChild(this.owner,function(t){var n=t._components;if(n)for(var o=0;o<n.length;o++){var a=n[o];s.isIViewStateListener(a)&&a.onViewHide(e)}})},t.prototype.show=function(){var e=this;this.View.visible=!0,this.onShow(),r["default"].forEachChild(this.owner,function(t){var n=t._components;if(n)for(var o=0;o<n.length;o++){var a=n[o];s.isIViewStateListener(a)&&a.onViewShow(e)}})},t.prototype.viewIsHide=function(){return this.View.visible},t.prototype.onHide=function(){},t.prototype.onShow=function(){},t.prototype.onClose=function(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),a["default"].instance.dispatch(i.EventDef.Game_OnViewClose,{view:this._viewDef}),this.onCloseEvent&&this.onCloseEvent()},t}(Laya.Script);n["default"]=l},{"../Event/EventDef":7,"../Event/EventMgr":8,"../Mgr/ViewMgr":21,"../Utilit":50,"./IViewStateListener":55}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Config/AppSwitchConfig"),a=e("./Mgr/ViewMgr"),i=e("./Mgr/WudianMgr"),r=function(){function e(){this._recorder=null}return Object.defineProperty(e.prototype,"recorder",{get:function(){return this._recorder},enumerable:!0,configurable:!0}),e.prototype.start=function(){null!=this.recorder&&this.recorder.start()},e.prototype.stop=function(){null!=this.recorder&&this.recorder.stop()},e.prototype.pause=function(){null!=this.recorder&&this.recorder.pause()},e.prototype.resume=function(){null!=this.recorder&&this.recorder.resume()},e.prototype.abort=function(){null!=this.recorder&&this.recorder.abort()},e.prototype.showShareBtn=function(){if(null!=this.recorder){Laya.Browser.window.wx.createGameRecorderShareButton({style:{left:10,top:150,height:50,color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4,iconMarginRight:16,paddingLeft:1,paddingRight:30},image:"button.jpg",text:"自定义文案",icon:"icon.jpg",share:{query:"a=1&b=2",bgm:"walkin.mp3",timeRange:[[0,1e3],[2e3,3e3]],title:{template:"default.score",data:{score:6500}},button:{template:"default.enter"}}})}},e}();n.GameRecorder=r;var s=function(){function e(){}return e.wxLogin=function(e,t){Laya.Browser.onMiniGame&&Laya.Browser.window.wx.login({success:function(t){if(t.code){var n=t.code;e(n),console.log("登陆成功,获取到code : "+n)}}})},e.onRewardedVideoAdLoad=function(){console.log("激励视频 广告加载完成")},e.onRewardedVideoAdError=function(t){console.log("激励视频 广告加载失败"+t),e._onRewardedVideoAdFailed&&e._onRewardedVideoAdFailed()},e.onRewardedVideoAdClose=function(t){t&&t.isEnded||null==t?(console.log("激励视频 已完整观看"),e._onRewardedVideoAdClose&&e._onRewardedVideoAdClose(!0)):(console.log("激励视频 未完整观看"),e._onRewardedVideoAdClose&&e._onRewardedVideoAdClose(!1))},e.regRewardedVideoAdEvent=function(t){t.onLoad(e.onRewardedVideoAdLoad),t.onError(e.onRewardedVideoAdError),t.onClose(e.onRewardedVideoAdClose),e._isRegRewardedVideoAdEvent=!0},e.showRewardedVideoAd=function(t,n){if(Laya.Browser.onMiniGame){e._onRewardedVideoAdClose=t,e._onRewardedVideoAdFailed=n;var o=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:e.adUnitId});e._isRegRewardedVideoAdEvent||e.regRewardedVideoAdEvent(o),o.load().then(function(){var e=o.show();e.then(function(){return console.log("激励视频 广告显示成功")}),e["catch"](function(e){o.load().then(function(){return o.show()})["catch"](function(e){console.log("激励视频 广告显示失败"),n&&n()})})})["catch"](function(e){console.log("激励视频 广告加载失败"),n&&n()})}else t(!0)},e.navigateToMiniProgram=function(e,t,n,o,a){Laya.Browser.onMiniGame&&(console.log("跳转游戏： "+e),Laya.Browser.window.wx.navigateToMiniProgram({appId:e,path:t,extraData:{foo:"bar"},envVersion:"release",success:function(e){n&&n(e)},fail:function(e){o&&o(e)},complete:function(e){a&&a(e)}}))},e.share=function(t,n,o){var a=this;Laya.Browser.onMiniGame&&(e._onShow=function(){Laya.Browser.window.wx.offShow(e._onShow),e._onShow=null;Date.now()-a._lastShareTime;t&&t(Date.now()-a._lastShareTime>2e3?!0:!1)},Laya.Browser.window.wx.onShow(e._onShow),this._lastShareTime=Date.now(),Laya.Browser.window.wx.shareAppMessage({title:n,imageUrl:o}))},e.showInterstitialAd=function(t,n){if(Laya.Browser.onMiniGame){var o=Laya.Browser.window.wx.createInterstitialAd({adUnitId:e.InsAdUnitId});o.onLoad(function(){console.log("插屏广告 加载完成"),o.show()["catch"](function(e){console.log("插屏广告 显示失败 ："+e),n&&n()})}),o.onError(function(e){console.log("插屏广告 加载失败"+e),n&&n()}),o.onClose(function(){console.log("插屏广告 关闭"),t&&t()})}else t()},e.getLaunchOptionsSync=function(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getLaunchOptionsSync();console.log("场景值 "+e.scene);var t=JSON.stringify(e.query);console.log("Query参数 "+t);var n=e.query.key;return console.log("Query参数：key "+n),console.log("ShareTicket "+e.shareTicket),console.log("ReferrerInfo.appId "+e.referrerInfo.appId),console.log("ReferrerInfo.extraData "+e.referrerInfo.extraData),e}var o={scene:1001,query:"",shareTicket:"",appId:"",extraData:""};return o},e.SetShareMenu=function(e,t,n,o,a){Laya.Browser.onMiniGame&&(console.log("小游戏设置转发按钮"),Laya.Browser.window.wx.showShareMenu({withShareTicket:!1,success:n,fail:o,complete:a}),Laya.Browser.window.wx.onShareAppMessage(function(){return{title:e,imageUrl:t}}))},e.checkUpdate=function(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getUpdateManager();e.onCheckForUpdate(function(e){console.log("是否需要更新 : ",e.hasUpdate)}),e.onUpdateReady(function(){Laya.Browser.window.wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启小游戏？",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){console.log("新版本下载失败!!!")})}},e.tryShowWXCrazyClick=function(t,n,r,s){if(!i["default"].WudianFlag||1!=o["default"].getInstance().getAppSwitchData().wxcfg.kuangdianBanner)return void(s&&s());var l=o["default"].getInstance().getAppSwitchData().wxcfg.kuangdianLevelSpcacing;if(0!=l){var c=e._crazyClickShowCounter%l;0==c?a["default"].instance.openView(a.ViewDef.WXCrazyClick,{Complete:n,titel:t},function(e){r&&r()}):s&&s(),++e._crazyClickShowCounter}else a["default"].instance.openView(a.ViewDef.WXCrazyClick,{Complete:n,titel:t},function(e){r&&r()})},e.adUnitId="adunit-8b95c9adf1c8c4dd",e.bannerAdUnitId="adunit-bc8ea70dc06cfba9",e.InsAdUnitId="adunit-440e21cc02c0d282",e.GameRecorder=new r,e._isRegRewardedVideoAdEvent=!1,e._onRewardedVideoAdFailed=null,e._onRewardedVideoAdClose=null,e._onShow=null,e._lastShareTime=0,e._crazyClickShowCounter=0,e}();n["default"]=s},{"./Config/AppSwitchConfig":4,"./Mgr/ViewMgr":21,"./Mgr/WudianMgr":23}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a=Laya.Scene,i=Laya.ClassUtils.regClass;!function(e){var t;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Scene",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:-100,skin:"GameView/轮播ad.png",right:0,name:"bg",left:0,bottom:-100},compId:26},{type:"Clip",props:{y:0,x:1,width:750,name:"Bg",height:1334},compId:6,child:[{type:"Clip",props:{right:0,name:"BottomZone",left:0,height:570,bottom:100},compId:23,child:[{type:"Clip",props:{y:326,x:376,width:615,skin:"Loading/loadingxiatiao.png",pivotY:22,pivotX:308,name:"processBarBg",height:44},compId:8,child:[{type:"Clip",props:{y:22,x:10,width:594,skin:"Loading/loadingshangtiao.png",pivotY:13,name:"processBar",left:11,height:26,bottom:9},compId:5},{type:"Text",props:{y:-63,x:190,text:"Loading ...",fontSize:50,color:"#ffffff",runtime:"laya.display.Text"},compId:27}]}]},{type:"Sprite",props:{y:291,x:22.5,texture:"Loading/logo.png"},compId:24}]},{type:"Script",props:{y:0,x:0,runtime:"View/LoadingView/LoadingView.ts"},compId:7}],loadList:["GameView/轮播ad.png","Loading/loadingxiatiao.png","Loading/loadingshangtiao.png","Loading/logo.png"],loadList3D:[]},t}(a);e.LoadingUI=t,i("ui.View.LoadingUI",t)}(t=e.View||(e.View={}))}(o=n.ui||(n.ui={}))},{}]},{},[17]);